(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function Xh(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var gu={exports:{}},pi={},yu={exports:{}},z={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xr=Symbol.for("react.element"),Zh=Symbol.for("react.portal"),ef=Symbol.for("react.fragment"),tf=Symbol.for("react.strict_mode"),nf=Symbol.for("react.profiler"),rf=Symbol.for("react.provider"),sf=Symbol.for("react.context"),af=Symbol.for("react.forward_ref"),of=Symbol.for("react.suspense"),lf=Symbol.for("react.memo"),cf=Symbol.for("react.lazy"),bl=Symbol.iterator;function uf(e){return e===null||typeof e!="object"?null:(e=bl&&e[bl]||e["@@iterator"],typeof e=="function"?e:null)}var wu={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_u=Object.assign,xu={};function tr(e,t,n){this.props=e,this.context=t,this.refs=xu,this.updater=n||wu}tr.prototype.isReactComponent={};tr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};tr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Nu(){}Nu.prototype=tr.prototype;function bo(e,t,n){this.props=e,this.context=t,this.refs=xu,this.updater=n||wu}var Eo=bo.prototype=new Nu;Eo.constructor=bo;_u(Eo,tr.prototype);Eo.isPureReactComponent=!0;var El=Array.isArray,ju=Object.prototype.hasOwnProperty,Co={current:null},Su={key:!0,ref:!0,__self:!0,__source:!0};function ku(e,t,n){var r,s={},i=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)ju.call(t,r)&&!Su.hasOwnProperty(r)&&(s[r]=t[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];s.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:Xr,type:e,key:i,ref:o,props:s,_owner:Co.current}}function df(e,t){return{$$typeof:Xr,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function To(e){return typeof e=="object"&&e!==null&&e.$$typeof===Xr}function hf(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Cl=/\/+/g;function Li(e,t){return typeof e=="object"&&e!==null&&e.key!=null?hf(""+e.key):t.toString(36)}function Ts(e,t,n,r,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Xr:case Zh:o=!0}}if(o)return o=e,s=s(o),e=r===""?"."+Li(o,0):r,El(s)?(n="",e!=null&&(n=e.replace(Cl,"$&/")+"/"),Ts(s,t,n,"",function(d){return d})):s!=null&&(To(s)&&(s=df(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Cl,"$&/")+"/")+e)),t.push(s)),1;if(o=0,r=r===""?".":r+":",El(e))for(var l=0;l<e.length;l++){i=e[l];var c=r+Li(i,l);o+=Ts(i,t,n,c,s)}else if(c=uf(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=r+Li(i,l++),o+=Ts(i,t,n,c,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function as(e,t,n){if(e==null)return e;var r=[],s=0;return Ts(e,r,"","",function(i){return t.call(n,i,s++)}),r}function ff(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Te={current:null},Rs={transition:null},mf={ReactCurrentDispatcher:Te,ReactCurrentBatchConfig:Rs,ReactCurrentOwner:Co};function bu(){throw Error("act(...) is not supported in production builds of React.")}z.Children={map:as,forEach:function(e,t,n){as(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return as(e,function(){t++}),t},toArray:function(e){return as(e,function(t){return t})||[]},only:function(e){if(!To(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};z.Component=tr;z.Fragment=ef;z.Profiler=nf;z.PureComponent=bo;z.StrictMode=tf;z.Suspense=of;z.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mf;z.act=bu;z.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=_u({},e.props),s=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=Co.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)ju.call(t,c)&&!Su.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:Xr,type:e.type,key:s,ref:i,props:r,_owner:o}};z.createContext=function(e){return e={$$typeof:sf,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:rf,_context:e},e.Consumer=e};z.createElement=ku;z.createFactory=function(e){var t=ku.bind(null,e);return t.type=e,t};z.createRef=function(){return{current:null}};z.forwardRef=function(e){return{$$typeof:af,render:e}};z.isValidElement=To;z.lazy=function(e){return{$$typeof:cf,_payload:{_status:-1,_result:e},_init:ff}};z.memo=function(e,t){return{$$typeof:lf,type:e,compare:t===void 0?null:t}};z.startTransition=function(e){var t=Rs.transition;Rs.transition={};try{e()}finally{Rs.transition=t}};z.unstable_act=bu;z.useCallback=function(e,t){return Te.current.useCallback(e,t)};z.useContext=function(e){return Te.current.useContext(e)};z.useDebugValue=function(){};z.useDeferredValue=function(e){return Te.current.useDeferredValue(e)};z.useEffect=function(e,t){return Te.current.useEffect(e,t)};z.useId=function(){return Te.current.useId()};z.useImperativeHandle=function(e,t,n){return Te.current.useImperativeHandle(e,t,n)};z.useInsertionEffect=function(e,t){return Te.current.useInsertionEffect(e,t)};z.useLayoutEffect=function(e,t){return Te.current.useLayoutEffect(e,t)};z.useMemo=function(e,t){return Te.current.useMemo(e,t)};z.useReducer=function(e,t,n){return Te.current.useReducer(e,t,n)};z.useRef=function(e){return Te.current.useRef(e)};z.useState=function(e){return Te.current.useState(e)};z.useSyncExternalStore=function(e,t,n){return Te.current.useSyncExternalStore(e,t,n)};z.useTransition=function(){return Te.current.useTransition()};z.version="18.3.1";yu.exports=z;var P=yu.exports;const pf=Xh(P);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vf=P,gf=Symbol.for("react.element"),yf=Symbol.for("react.fragment"),wf=Object.prototype.hasOwnProperty,_f=vf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,xf={key:!0,ref:!0,__self:!0,__source:!0};function Eu(e,t,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)wf.call(t,r)&&!xf.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:gf,type:e,key:i,ref:o,props:s,_owner:_f.current}}pi.Fragment=yf;pi.jsx=Eu;pi.jsxs=Eu;gu.exports=pi;var a=gu.exports,xa={},Cu={exports:{}},Ve={},Tu={exports:{}},Ru={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(I,M){var F=I.length;I.push(M);e:for(;0<F;){var se=F-1>>>1,me=I[se];if(0<s(me,M))I[se]=M,I[F]=me,F=se;else break e}}function n(I){return I.length===0?null:I[0]}function r(I){if(I.length===0)return null;var M=I[0],F=I.pop();if(F!==M){I[0]=F;e:for(var se=0,me=I.length,ss=me>>>1;se<ss;){var Wt=2*(se+1)-1,Di=I[Wt],qt=Wt+1,is=I[qt];if(0>s(Di,F))qt<me&&0>s(is,Di)?(I[se]=is,I[qt]=F,se=qt):(I[se]=Di,I[Wt]=F,se=Wt);else if(qt<me&&0>s(is,F))I[se]=is,I[qt]=F,se=qt;else break e}}return M}function s(I,M){var F=I.sortIndex-M.sortIndex;return F!==0?F:I.id-M.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],d=[],h=1,y=null,v=3,x=!1,_=!1,g=!1,w=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,u=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function f(I){for(var M=n(d);M!==null;){if(M.callback===null)r(d);else if(M.startTime<=I)r(d),M.sortIndex=M.expirationTime,t(c,M);else break;M=n(d)}}function p(I){if(g=!1,f(I),!_)if(n(c)!==null)_=!0,oe(N);else{var M=n(d);M!==null&&fe(p,M.startTime-I)}}function N(I,M){_=!1,g&&(g=!1,m(b),b=-1),x=!0;var F=v;try{for(f(M),y=n(c);y!==null&&(!(y.expirationTime>M)||I&&!R());){var se=y.callback;if(typeof se=="function"){y.callback=null,v=y.priorityLevel;var me=se(y.expirationTime<=M);M=e.unstable_now(),typeof me=="function"?y.callback=me:y===n(c)&&r(c),f(M)}else r(c);y=n(c)}if(y!==null)var ss=!0;else{var Wt=n(d);Wt!==null&&fe(p,Wt.startTime-M),ss=!1}return ss}finally{y=null,v=F,x=!1}}var j=!1,k=null,b=-1,S=5,C=-1;function R(){return!(e.unstable_now()-C<S)}function T(){if(k!==null){var I=e.unstable_now();C=I;var M=!0;try{M=k(!0,I)}finally{M?L():(j=!1,k=null)}}else j=!1}var L;if(typeof u=="function")L=function(){u(T)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,ae=Y.port2;Y.port1.onmessage=T,L=function(){ae.postMessage(null)}}else L=function(){w(T,0)};function oe(I){k=I,j||(j=!0,L())}function fe(I,M){b=w(function(){I(e.unstable_now())},M)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(I){I.callback=null},e.unstable_continueExecution=function(){_||x||(_=!0,oe(N))},e.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<I?Math.floor(1e3/I):5},e.unstable_getCurrentPriorityLevel=function(){return v},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(I){switch(v){case 1:case 2:case 3:var M=3;break;default:M=v}var F=v;v=M;try{return I()}finally{v=F}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(I,M){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var F=v;v=I;try{return M()}finally{v=F}},e.unstable_scheduleCallback=function(I,M,F){var se=e.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?se+F:se):F=se,I){case 1:var me=-1;break;case 2:me=250;break;case 5:me=1073741823;break;case 4:me=1e4;break;default:me=5e3}return me=F+me,I={id:h++,callback:M,priorityLevel:I,startTime:F,expirationTime:me,sortIndex:-1},F>se?(I.sortIndex=F,t(d,I),n(c)===null&&I===n(d)&&(g?(m(b),b=-1):g=!0,fe(p,F-se))):(I.sortIndex=me,t(c,I),_||x||(_=!0,oe(N))),I},e.unstable_shouldYield=R,e.unstable_wrapCallback=function(I){var M=v;return function(){var F=v;v=M;try{return I.apply(this,arguments)}finally{v=F}}}})(Ru);Tu.exports=Ru;var Nf=Tu.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jf=P,Be=Nf;function E(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Iu=new Set,Tr={};function fn(e,t){Kn(e,t),Kn(e+"Capture",t)}function Kn(e,t){for(Tr[e]=t,e=0;e<t.length;e++)Iu.add(t[e])}var yt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Na=Object.prototype.hasOwnProperty,Sf=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Tl={},Rl={};function kf(e){return Na.call(Rl,e)?!0:Na.call(Tl,e)?!1:Sf.test(e)?Rl[e]=!0:(Tl[e]=!0,!1)}function bf(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Ef(e,t,n,r){if(t===null||typeof t>"u"||bf(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Re(e,t,n,r,s,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var Ne={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ne[e]=new Re(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ne[t]=new Re(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ne[e]=new Re(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ne[e]=new Re(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ne[e]=new Re(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ne[e]=new Re(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ne[e]=new Re(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ne[e]=new Re(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ne[e]=new Re(e,5,!1,e.toLowerCase(),null,!1,!1)});var Ro=/[\-:]([a-z])/g;function Io(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Ro,Io);Ne[t]=new Re(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Ro,Io);Ne[t]=new Re(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Ro,Io);Ne[t]=new Re(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ne[e]=new Re(e,1,!1,e.toLowerCase(),null,!1,!1)});Ne.xlinkHref=new Re("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ne[e]=new Re(e,1,!1,e.toLowerCase(),null,!0,!0)});function Ao(e,t,n,r){var s=Ne.hasOwnProperty(t)?Ne[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Ef(t,n,s,r)&&(n=null),r||s===null?kf(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Nt=jf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,os=Symbol.for("react.element"),Cn=Symbol.for("react.portal"),Tn=Symbol.for("react.fragment"),Oo=Symbol.for("react.strict_mode"),ja=Symbol.for("react.profiler"),Au=Symbol.for("react.provider"),Ou=Symbol.for("react.context"),Po=Symbol.for("react.forward_ref"),Sa=Symbol.for("react.suspense"),ka=Symbol.for("react.suspense_list"),$o=Symbol.for("react.memo"),kt=Symbol.for("react.lazy"),Pu=Symbol.for("react.offscreen"),Il=Symbol.iterator;function sr(e){return e===null||typeof e!="object"?null:(e=Il&&e[Il]||e["@@iterator"],typeof e=="function"?e:null)}var te=Object.assign,Ui;function fr(e){if(Ui===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Ui=t&&t[1]||""}return`
`+Ui+e}var Mi=!1;function Fi(e,t){if(!e||Mi)return"";Mi=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var r=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){r=d}e.call(t.prototype)}else{try{throw Error()}catch(d){r=d}e()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var c=`
`+s[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{Mi=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?fr(e):""}function Cf(e){switch(e.tag){case 5:return fr(e.type);case 16:return fr("Lazy");case 13:return fr("Suspense");case 19:return fr("SuspenseList");case 0:case 2:case 15:return e=Fi(e.type,!1),e;case 11:return e=Fi(e.type.render,!1),e;case 1:return e=Fi(e.type,!0),e;default:return""}}function ba(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Tn:return"Fragment";case Cn:return"Portal";case ja:return"Profiler";case Oo:return"StrictMode";case Sa:return"Suspense";case ka:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Ou:return(e.displayName||"Context")+".Consumer";case Au:return(e._context.displayName||"Context")+".Provider";case Po:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case $o:return t=e.displayName||null,t!==null?t:ba(e.type)||"Memo";case kt:t=e._payload,e=e._init;try{return ba(e(t))}catch{}}return null}function Tf(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ba(t);case 8:return t===Oo?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function zt(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function $u(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Rf(e){var t=$u(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ls(e){e._valueTracker||(e._valueTracker=Rf(e))}function Du(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=$u(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function zs(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ea(e,t){var n=t.checked;return te({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Al(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=zt(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Lu(e,t){t=t.checked,t!=null&&Ao(e,"checked",t,!1)}function Ca(e,t){Lu(e,t);var n=zt(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Ta(e,t.type,n):t.hasOwnProperty("defaultValue")&&Ta(e,t.type,zt(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Ol(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Ta(e,t,n){(t!=="number"||zs(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var mr=Array.isArray;function zn(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+zt(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Ra(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(E(91));return te({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Pl(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(E(92));if(mr(n)){if(1<n.length)throw Error(E(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:zt(n)}}function Uu(e,t){var n=zt(t.value),r=zt(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function $l(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Mu(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ia(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Mu(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var cs,Fu=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(cs=cs||document.createElement("div"),cs.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=cs.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Rr(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var yr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},If=["Webkit","ms","Moz","O"];Object.keys(yr).forEach(function(e){If.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),yr[t]=yr[e]})});function zu(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||yr.hasOwnProperty(e)&&yr[e]?(""+t).trim():t+"px"}function Bu(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=zu(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var Af=te({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Aa(e,t){if(t){if(Af[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(E(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(E(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(E(61))}if(t.style!=null&&typeof t.style!="object")throw Error(E(62))}}function Oa(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Pa=null;function Do(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var $a=null,Bn=null,Vn=null;function Dl(e){if(e=ts(e)){if(typeof $a!="function")throw Error(E(280));var t=e.stateNode;t&&(t=_i(t),$a(e.stateNode,e.type,t))}}function Vu(e){Bn?Vn?Vn.push(e):Vn=[e]:Bn=e}function Hu(){if(Bn){var e=Bn,t=Vn;if(Vn=Bn=null,Dl(e),t)for(e=0;e<t.length;e++)Dl(t[e])}}function Gu(e,t){return e(t)}function Wu(){}var zi=!1;function qu(e,t,n){if(zi)return e(t,n);zi=!0;try{return Gu(e,t,n)}finally{zi=!1,(Bn!==null||Vn!==null)&&(Wu(),Hu())}}function Ir(e,t){var n=e.stateNode;if(n===null)return null;var r=_i(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(E(231,t,typeof n));return n}var Da=!1;if(yt)try{var ir={};Object.defineProperty(ir,"passive",{get:function(){Da=!0}}),window.addEventListener("test",ir,ir),window.removeEventListener("test",ir,ir)}catch{Da=!1}function Of(e,t,n,r,s,i,o,l,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(n,d)}catch(h){this.onError(h)}}var wr=!1,Bs=null,Vs=!1,La=null,Pf={onError:function(e){wr=!0,Bs=e}};function $f(e,t,n,r,s,i,o,l,c){wr=!1,Bs=null,Of.apply(Pf,arguments)}function Df(e,t,n,r,s,i,o,l,c){if($f.apply(this,arguments),wr){if(wr){var d=Bs;wr=!1,Bs=null}else throw Error(E(198));Vs||(Vs=!0,La=d)}}function mn(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Ku(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Ll(e){if(mn(e)!==e)throw Error(E(188))}function Lf(e){var t=e.alternate;if(!t){if(t=mn(e),t===null)throw Error(E(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Ll(s),e;if(i===r)return Ll(s),t;i=i.sibling}throw Error(E(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(E(189))}}if(n.alternate!==r)throw Error(E(190))}if(n.tag!==3)throw Error(E(188));return n.stateNode.current===n?e:t}function Ju(e){return e=Lf(e),e!==null?Qu(e):null}function Qu(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Qu(e);if(t!==null)return t;e=e.sibling}return null}var Yu=Be.unstable_scheduleCallback,Ul=Be.unstable_cancelCallback,Uf=Be.unstable_shouldYield,Mf=Be.unstable_requestPaint,ie=Be.unstable_now,Ff=Be.unstable_getCurrentPriorityLevel,Lo=Be.unstable_ImmediatePriority,Xu=Be.unstable_UserBlockingPriority,Hs=Be.unstable_NormalPriority,zf=Be.unstable_LowPriority,Zu=Be.unstable_IdlePriority,vi=null,ut=null;function Bf(e){if(ut&&typeof ut.onCommitFiberRoot=="function")try{ut.onCommitFiberRoot(vi,e,void 0,(e.current.flags&128)===128)}catch{}}var st=Math.clz32?Math.clz32:Gf,Vf=Math.log,Hf=Math.LN2;function Gf(e){return e>>>=0,e===0?32:31-(Vf(e)/Hf|0)|0}var us=64,ds=4194304;function pr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Gs(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=pr(l):(i&=o,i!==0&&(r=pr(i)))}else o=n&~s,o!==0?r=pr(o):i!==0&&(r=pr(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-st(t),s=1<<n,r|=e[n],t&=~s;return r}function Wf(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qf(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-st(i),l=1<<o,c=s[o];c===-1?(!(l&n)||l&r)&&(s[o]=Wf(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function Ua(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function ed(){var e=us;return us<<=1,!(us&4194240)&&(us=64),e}function Bi(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Zr(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-st(t),e[t]=n}function Kf(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-st(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}function Uo(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-st(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var V=0;function td(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var nd,Mo,rd,sd,id,Ma=!1,hs=[],Ot=null,Pt=null,$t=null,Ar=new Map,Or=new Map,Ct=[],Jf="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ml(e,t){switch(e){case"focusin":case"focusout":Ot=null;break;case"dragenter":case"dragleave":Pt=null;break;case"mouseover":case"mouseout":$t=null;break;case"pointerover":case"pointerout":Ar.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Or.delete(t.pointerId)}}function ar(e,t,n,r,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},t!==null&&(t=ts(t),t!==null&&Mo(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function Qf(e,t,n,r,s){switch(t){case"focusin":return Ot=ar(Ot,e,t,n,r,s),!0;case"dragenter":return Pt=ar(Pt,e,t,n,r,s),!0;case"mouseover":return $t=ar($t,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return Ar.set(i,ar(Ar.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Or.set(i,ar(Or.get(i)||null,e,t,n,r,s)),!0}return!1}function ad(e){var t=tn(e.target);if(t!==null){var n=mn(t);if(n!==null){if(t=n.tag,t===13){if(t=Ku(n),t!==null){e.blockedOn=t,id(e.priority,function(){rd(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Is(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Fa(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Pa=r,n.target.dispatchEvent(r),Pa=null}else return t=ts(n),t!==null&&Mo(t),e.blockedOn=n,!1;t.shift()}return!0}function Fl(e,t,n){Is(e)&&n.delete(t)}function Yf(){Ma=!1,Ot!==null&&Is(Ot)&&(Ot=null),Pt!==null&&Is(Pt)&&(Pt=null),$t!==null&&Is($t)&&($t=null),Ar.forEach(Fl),Or.forEach(Fl)}function or(e,t){e.blockedOn===t&&(e.blockedOn=null,Ma||(Ma=!0,Be.unstable_scheduleCallback(Be.unstable_NormalPriority,Yf)))}function Pr(e){function t(s){return or(s,e)}if(0<hs.length){or(hs[0],e);for(var n=1;n<hs.length;n++){var r=hs[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Ot!==null&&or(Ot,e),Pt!==null&&or(Pt,e),$t!==null&&or($t,e),Ar.forEach(t),Or.forEach(t),n=0;n<Ct.length;n++)r=Ct[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Ct.length&&(n=Ct[0],n.blockedOn===null);)ad(n),n.blockedOn===null&&Ct.shift()}var Hn=Nt.ReactCurrentBatchConfig,Ws=!0;function Xf(e,t,n,r){var s=V,i=Hn.transition;Hn.transition=null;try{V=1,Fo(e,t,n,r)}finally{V=s,Hn.transition=i}}function Zf(e,t,n,r){var s=V,i=Hn.transition;Hn.transition=null;try{V=4,Fo(e,t,n,r)}finally{V=s,Hn.transition=i}}function Fo(e,t,n,r){if(Ws){var s=Fa(e,t,n,r);if(s===null)Xi(e,t,r,qs,n),Ml(e,r);else if(Qf(s,e,t,n,r))r.stopPropagation();else if(Ml(e,r),t&4&&-1<Jf.indexOf(e)){for(;s!==null;){var i=ts(s);if(i!==null&&nd(i),i=Fa(e,t,n,r),i===null&&Xi(e,t,r,qs,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Xi(e,t,r,null,n)}}var qs=null;function Fa(e,t,n,r){if(qs=null,e=Do(r),e=tn(e),e!==null)if(t=mn(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Ku(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return qs=e,null}function od(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ff()){case Lo:return 1;case Xu:return 4;case Hs:case zf:return 16;case Zu:return 536870912;default:return 16}default:return 16}}var It=null,zo=null,As=null;function ld(){if(As)return As;var e,t=zo,n=t.length,r,s="value"in It?It.value:It.textContent,i=s.length;for(e=0;e<n&&t[e]===s[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===s[i-r];r++);return As=s.slice(e,1<r?1-r:void 0)}function Os(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function fs(){return!0}function zl(){return!1}function He(e){function t(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?fs:zl,this.isPropagationStopped=zl,this}return te(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=fs)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=fs)},persist:function(){},isPersistent:fs}),t}var nr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Bo=He(nr),es=te({},nr,{view:0,detail:0}),em=He(es),Vi,Hi,lr,gi=te({},es,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vo,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==lr&&(lr&&e.type==="mousemove"?(Vi=e.screenX-lr.screenX,Hi=e.screenY-lr.screenY):Hi=Vi=0,lr=e),Vi)},movementY:function(e){return"movementY"in e?e.movementY:Hi}}),Bl=He(gi),tm=te({},gi,{dataTransfer:0}),nm=He(tm),rm=te({},es,{relatedTarget:0}),Gi=He(rm),sm=te({},nr,{animationName:0,elapsedTime:0,pseudoElement:0}),im=He(sm),am=te({},nr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),om=He(am),lm=te({},nr,{data:0}),Vl=He(lm),cm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},um={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hm(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=dm[e])?!!t[e]:!1}function Vo(){return hm}var fm=te({},es,{key:function(e){if(e.key){var t=cm[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Os(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?um[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vo,charCode:function(e){return e.type==="keypress"?Os(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Os(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),mm=He(fm),pm=te({},gi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Hl=He(pm),vm=te({},es,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vo}),gm=He(vm),ym=te({},nr,{propertyName:0,elapsedTime:0,pseudoElement:0}),wm=He(ym),_m=te({},gi,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),xm=He(_m),Nm=[9,13,27,32],Ho=yt&&"CompositionEvent"in window,_r=null;yt&&"documentMode"in document&&(_r=document.documentMode);var jm=yt&&"TextEvent"in window&&!_r,cd=yt&&(!Ho||_r&&8<_r&&11>=_r),Gl=String.fromCharCode(32),Wl=!1;function ud(e,t){switch(e){case"keyup":return Nm.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function dd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Rn=!1;function Sm(e,t){switch(e){case"compositionend":return dd(t);case"keypress":return t.which!==32?null:(Wl=!0,Gl);case"textInput":return e=t.data,e===Gl&&Wl?null:e;default:return null}}function km(e,t){if(Rn)return e==="compositionend"||!Ho&&ud(e,t)?(e=ld(),As=zo=It=null,Rn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return cd&&t.locale!=="ko"?null:t.data;default:return null}}var bm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ql(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!bm[e.type]:t==="textarea"}function hd(e,t,n,r){Vu(r),t=Ks(t,"onChange"),0<t.length&&(n=new Bo("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var xr=null,$r=null;function Em(e){jd(e,0)}function yi(e){var t=On(e);if(Du(t))return e}function Cm(e,t){if(e==="change")return t}var fd=!1;if(yt){var Wi;if(yt){var qi="oninput"in document;if(!qi){var Kl=document.createElement("div");Kl.setAttribute("oninput","return;"),qi=typeof Kl.oninput=="function"}Wi=qi}else Wi=!1;fd=Wi&&(!document.documentMode||9<document.documentMode)}function Jl(){xr&&(xr.detachEvent("onpropertychange",md),$r=xr=null)}function md(e){if(e.propertyName==="value"&&yi($r)){var t=[];hd(t,$r,e,Do(e)),qu(Em,t)}}function Tm(e,t,n){e==="focusin"?(Jl(),xr=t,$r=n,xr.attachEvent("onpropertychange",md)):e==="focusout"&&Jl()}function Rm(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return yi($r)}function Im(e,t){if(e==="click")return yi(t)}function Am(e,t){if(e==="input"||e==="change")return yi(t)}function Om(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var at=typeof Object.is=="function"?Object.is:Om;function Dr(e,t){if(at(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Na.call(t,s)||!at(e[s],t[s]))return!1}return!0}function Ql(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Yl(e,t){var n=Ql(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Ql(n)}}function pd(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?pd(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function vd(){for(var e=window,t=zs();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=zs(e.document)}return t}function Go(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Pm(e){var t=vd(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&pd(n.ownerDocument.documentElement,n)){if(r!==null&&Go(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=Yl(n,i);var o=Yl(n,r);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var $m=yt&&"documentMode"in document&&11>=document.documentMode,In=null,za=null,Nr=null,Ba=!1;function Xl(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ba||In==null||In!==zs(r)||(r=In,"selectionStart"in r&&Go(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Nr&&Dr(Nr,r)||(Nr=r,r=Ks(za,"onSelect"),0<r.length&&(t=new Bo("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=In)))}function ms(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var An={animationend:ms("Animation","AnimationEnd"),animationiteration:ms("Animation","AnimationIteration"),animationstart:ms("Animation","AnimationStart"),transitionend:ms("Transition","TransitionEnd")},Ki={},gd={};yt&&(gd=document.createElement("div").style,"AnimationEvent"in window||(delete An.animationend.animation,delete An.animationiteration.animation,delete An.animationstart.animation),"TransitionEvent"in window||delete An.transitionend.transition);function wi(e){if(Ki[e])return Ki[e];if(!An[e])return e;var t=An[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in gd)return Ki[e]=t[n];return e}var yd=wi("animationend"),wd=wi("animationiteration"),_d=wi("animationstart"),xd=wi("transitionend"),Nd=new Map,Zl="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Vt(e,t){Nd.set(e,t),fn(t,[e])}for(var Ji=0;Ji<Zl.length;Ji++){var Qi=Zl[Ji],Dm=Qi.toLowerCase(),Lm=Qi[0].toUpperCase()+Qi.slice(1);Vt(Dm,"on"+Lm)}Vt(yd,"onAnimationEnd");Vt(wd,"onAnimationIteration");Vt(_d,"onAnimationStart");Vt("dblclick","onDoubleClick");Vt("focusin","onFocus");Vt("focusout","onBlur");Vt(xd,"onTransitionEnd");Kn("onMouseEnter",["mouseout","mouseover"]);Kn("onMouseLeave",["mouseout","mouseover"]);Kn("onPointerEnter",["pointerout","pointerover"]);Kn("onPointerLeave",["pointerout","pointerover"]);fn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fn("onBeforeInput",["compositionend","keypress","textInput","paste"]);fn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Um=new Set("cancel close invalid load scroll toggle".split(" ").concat(vr));function ec(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Df(r,t,void 0,e),e.currentTarget=null}function jd(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;ec(s,l,d),i=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,d=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;ec(s,l,d),i=c}}}if(Vs)throw e=La,Vs=!1,La=null,e}function K(e,t){var n=t[qa];n===void 0&&(n=t[qa]=new Set);var r=e+"__bubble";n.has(r)||(Sd(t,e,2,!1),n.add(r))}function Yi(e,t,n){var r=0;t&&(r|=4),Sd(n,e,r,t)}var ps="_reactListening"+Math.random().toString(36).slice(2);function Lr(e){if(!e[ps]){e[ps]=!0,Iu.forEach(function(n){n!=="selectionchange"&&(Um.has(n)||Yi(n,!1,e),Yi(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ps]||(t[ps]=!0,Yi("selectionchange",!1,t))}}function Sd(e,t,n,r){switch(od(t)){case 1:var s=Xf;break;case 4:s=Zf;break;default:s=Fo}n=s.bind(null,t,n,e),s=void 0,!Da||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Xi(e,t,n,r,s){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=tn(l),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}l=l.parentNode}}r=r.return}qu(function(){var d=i,h=Do(n),y=[];e:{var v=Nd.get(e);if(v!==void 0){var x=Bo,_=e;switch(e){case"keypress":if(Os(n)===0)break e;case"keydown":case"keyup":x=mm;break;case"focusin":_="focus",x=Gi;break;case"focusout":_="blur",x=Gi;break;case"beforeblur":case"afterblur":x=Gi;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=Bl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=nm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=gm;break;case yd:case wd:case _d:x=im;break;case xd:x=wm;break;case"scroll":x=em;break;case"wheel":x=xm;break;case"copy":case"cut":case"paste":x=om;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=Hl}var g=(t&4)!==0,w=!g&&e==="scroll",m=g?v!==null?v+"Capture":null:v;g=[];for(var u=d,f;u!==null;){f=u;var p=f.stateNode;if(f.tag===5&&p!==null&&(f=p,m!==null&&(p=Ir(u,m),p!=null&&g.push(Ur(u,p,f)))),w)break;u=u.return}0<g.length&&(v=new x(v,_,null,n,h),y.push({event:v,listeners:g}))}}if(!(t&7)){e:{if(v=e==="mouseover"||e==="pointerover",x=e==="mouseout"||e==="pointerout",v&&n!==Pa&&(_=n.relatedTarget||n.fromElement)&&(tn(_)||_[wt]))break e;if((x||v)&&(v=h.window===h?h:(v=h.ownerDocument)?v.defaultView||v.parentWindow:window,x?(_=n.relatedTarget||n.toElement,x=d,_=_?tn(_):null,_!==null&&(w=mn(_),_!==w||_.tag!==5&&_.tag!==6)&&(_=null)):(x=null,_=d),x!==_)){if(g=Bl,p="onMouseLeave",m="onMouseEnter",u="mouse",(e==="pointerout"||e==="pointerover")&&(g=Hl,p="onPointerLeave",m="onPointerEnter",u="pointer"),w=x==null?v:On(x),f=_==null?v:On(_),v=new g(p,u+"leave",x,n,h),v.target=w,v.relatedTarget=f,p=null,tn(h)===d&&(g=new g(m,u+"enter",_,n,h),g.target=f,g.relatedTarget=w,p=g),w=p,x&&_)t:{for(g=x,m=_,u=0,f=g;f;f=pn(f))u++;for(f=0,p=m;p;p=pn(p))f++;for(;0<u-f;)g=pn(g),u--;for(;0<f-u;)m=pn(m),f--;for(;u--;){if(g===m||m!==null&&g===m.alternate)break t;g=pn(g),m=pn(m)}g=null}else g=null;x!==null&&tc(y,v,x,g,!1),_!==null&&w!==null&&tc(y,w,_,g,!0)}}e:{if(v=d?On(d):window,x=v.nodeName&&v.nodeName.toLowerCase(),x==="select"||x==="input"&&v.type==="file")var N=Cm;else if(ql(v))if(fd)N=Am;else{N=Rm;var j=Tm}else(x=v.nodeName)&&x.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(N=Im);if(N&&(N=N(e,d))){hd(y,N,n,h);break e}j&&j(e,v,d),e==="focusout"&&(j=v._wrapperState)&&j.controlled&&v.type==="number"&&Ta(v,"number",v.value)}switch(j=d?On(d):window,e){case"focusin":(ql(j)||j.contentEditable==="true")&&(In=j,za=d,Nr=null);break;case"focusout":Nr=za=In=null;break;case"mousedown":Ba=!0;break;case"contextmenu":case"mouseup":case"dragend":Ba=!1,Xl(y,n,h);break;case"selectionchange":if($m)break;case"keydown":case"keyup":Xl(y,n,h)}var k;if(Ho)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Rn?ud(e,n)&&(b="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(b="onCompositionStart");b&&(cd&&n.locale!=="ko"&&(Rn||b!=="onCompositionStart"?b==="onCompositionEnd"&&Rn&&(k=ld()):(It=h,zo="value"in It?It.value:It.textContent,Rn=!0)),j=Ks(d,b),0<j.length&&(b=new Vl(b,e,null,n,h),y.push({event:b,listeners:j}),k?b.data=k:(k=dd(n),k!==null&&(b.data=k)))),(k=jm?Sm(e,n):km(e,n))&&(d=Ks(d,"onBeforeInput"),0<d.length&&(h=new Vl("onBeforeInput","beforeinput",null,n,h),y.push({event:h,listeners:d}),h.data=k))}jd(y,t)})}function Ur(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ks(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Ir(e,n),i!=null&&r.unshift(Ur(e,i,s)),i=Ir(e,t),i!=null&&r.push(Ur(e,i,s))),e=e.return}return r}function pn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function tc(e,t,n,r,s){for(var i=t._reactName,o=[];n!==null&&n!==r;){var l=n,c=l.alternate,d=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&d!==null&&(l=d,s?(c=Ir(n,i),c!=null&&o.unshift(Ur(n,c,l))):s||(c=Ir(n,i),c!=null&&o.push(Ur(n,c,l)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var Mm=/\r\n?/g,Fm=/\u0000|\uFFFD/g;function nc(e){return(typeof e=="string"?e:""+e).replace(Mm,`
`).replace(Fm,"")}function vs(e,t,n){if(t=nc(t),nc(e)!==t&&n)throw Error(E(425))}function Js(){}var Va=null,Ha=null;function Ga(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Wa=typeof setTimeout=="function"?setTimeout:void 0,zm=typeof clearTimeout=="function"?clearTimeout:void 0,rc=typeof Promise=="function"?Promise:void 0,Bm=typeof queueMicrotask=="function"?queueMicrotask:typeof rc<"u"?function(e){return rc.resolve(null).then(e).catch(Vm)}:Wa;function Vm(e){setTimeout(function(){throw e})}function Zi(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),Pr(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Pr(t)}function Dt(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function sc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var rr=Math.random().toString(36).slice(2),ct="__reactFiber$"+rr,Mr="__reactProps$"+rr,wt="__reactContainer$"+rr,qa="__reactEvents$"+rr,Hm="__reactListeners$"+rr,Gm="__reactHandles$"+rr;function tn(e){var t=e[ct];if(t)return t;for(var n=e.parentNode;n;){if(t=n[wt]||n[ct]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=sc(e);e!==null;){if(n=e[ct])return n;e=sc(e)}return t}e=n,n=e.parentNode}return null}function ts(e){return e=e[ct]||e[wt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function On(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(E(33))}function _i(e){return e[Mr]||null}var Ka=[],Pn=-1;function Ht(e){return{current:e}}function J(e){0>Pn||(e.current=Ka[Pn],Ka[Pn]=null,Pn--)}function q(e,t){Pn++,Ka[Pn]=e.current,e.current=t}var Bt={},be=Ht(Bt),Oe=Ht(!1),ln=Bt;function Jn(e,t){var n=e.type.contextTypes;if(!n)return Bt;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Pe(e){return e=e.childContextTypes,e!=null}function Qs(){J(Oe),J(be)}function ic(e,t,n){if(be.current!==Bt)throw Error(E(168));q(be,t),q(Oe,n)}function kd(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(E(108,Tf(e)||"Unknown",s));return te({},n,r)}function Ys(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Bt,ln=be.current,q(be,e),q(Oe,Oe.current),!0}function ac(e,t,n){var r=e.stateNode;if(!r)throw Error(E(169));n?(e=kd(e,t,ln),r.__reactInternalMemoizedMergedChildContext=e,J(Oe),J(be),q(be,e)):J(Oe),q(Oe,n)}var mt=null,xi=!1,ea=!1;function bd(e){mt===null?mt=[e]:mt.push(e)}function Wm(e){xi=!0,bd(e)}function Gt(){if(!ea&&mt!==null){ea=!0;var e=0,t=V;try{var n=mt;for(V=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}mt=null,xi=!1}catch(s){throw mt!==null&&(mt=mt.slice(e+1)),Yu(Lo,Gt),s}finally{V=t,ea=!1}}return null}var $n=[],Dn=0,Xs=null,Zs=0,Ge=[],We=0,cn=null,pt=1,vt="";function Qt(e,t){$n[Dn++]=Zs,$n[Dn++]=Xs,Xs=e,Zs=t}function Ed(e,t,n){Ge[We++]=pt,Ge[We++]=vt,Ge[We++]=cn,cn=e;var r=pt;e=vt;var s=32-st(r)-1;r&=~(1<<s),n+=1;var i=32-st(t)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,pt=1<<32-st(t)+s|n<<s|r,vt=i+e}else pt=1<<i|n<<s|r,vt=e}function Wo(e){e.return!==null&&(Qt(e,1),Ed(e,1,0))}function qo(e){for(;e===Xs;)Xs=$n[--Dn],$n[Dn]=null,Zs=$n[--Dn],$n[Dn]=null;for(;e===cn;)cn=Ge[--We],Ge[We]=null,vt=Ge[--We],Ge[We]=null,pt=Ge[--We],Ge[We]=null}var ze=null,Fe=null,Q=!1,rt=null;function Cd(e,t){var n=qe(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function oc(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,ze=e,Fe=Dt(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,ze=e,Fe=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=cn!==null?{id:pt,overflow:vt}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=qe(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,ze=e,Fe=null,!0):!1;default:return!1}}function Ja(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Qa(e){if(Q){var t=Fe;if(t){var n=t;if(!oc(e,t)){if(Ja(e))throw Error(E(418));t=Dt(n.nextSibling);var r=ze;t&&oc(e,t)?Cd(r,n):(e.flags=e.flags&-4097|2,Q=!1,ze=e)}}else{if(Ja(e))throw Error(E(418));e.flags=e.flags&-4097|2,Q=!1,ze=e}}}function lc(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ze=e}function gs(e){if(e!==ze)return!1;if(!Q)return lc(e),Q=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Ga(e.type,e.memoizedProps)),t&&(t=Fe)){if(Ja(e))throw Td(),Error(E(418));for(;t;)Cd(e,t),t=Dt(t.nextSibling)}if(lc(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(E(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Fe=Dt(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Fe=null}}else Fe=ze?Dt(e.stateNode.nextSibling):null;return!0}function Td(){for(var e=Fe;e;)e=Dt(e.nextSibling)}function Qn(){Fe=ze=null,Q=!1}function Ko(e){rt===null?rt=[e]:rt.push(e)}var qm=Nt.ReactCurrentBatchConfig;function cr(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(E(309));var r=n.stateNode}if(!r)throw Error(E(147,e));var s=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(E(284));if(!n._owner)throw Error(E(290,e))}return e}function ys(e,t){throw e=Object.prototype.toString.call(t),Error(E(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function cc(e){var t=e._init;return t(e._payload)}function Rd(e){function t(m,u){if(e){var f=m.deletions;f===null?(m.deletions=[u],m.flags|=16):f.push(u)}}function n(m,u){if(!e)return null;for(;u!==null;)t(m,u),u=u.sibling;return null}function r(m,u){for(m=new Map;u!==null;)u.key!==null?m.set(u.key,u):m.set(u.index,u),u=u.sibling;return m}function s(m,u){return m=Ft(m,u),m.index=0,m.sibling=null,m}function i(m,u,f){return m.index=f,e?(f=m.alternate,f!==null?(f=f.index,f<u?(m.flags|=2,u):f):(m.flags|=2,u)):(m.flags|=1048576,u)}function o(m){return e&&m.alternate===null&&(m.flags|=2),m}function l(m,u,f,p){return u===null||u.tag!==6?(u=oa(f,m.mode,p),u.return=m,u):(u=s(u,f),u.return=m,u)}function c(m,u,f,p){var N=f.type;return N===Tn?h(m,u,f.props.children,p,f.key):u!==null&&(u.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===kt&&cc(N)===u.type)?(p=s(u,f.props),p.ref=cr(m,u,f),p.return=m,p):(p=Fs(f.type,f.key,f.props,null,m.mode,p),p.ref=cr(m,u,f),p.return=m,p)}function d(m,u,f,p){return u===null||u.tag!==4||u.stateNode.containerInfo!==f.containerInfo||u.stateNode.implementation!==f.implementation?(u=la(f,m.mode,p),u.return=m,u):(u=s(u,f.children||[]),u.return=m,u)}function h(m,u,f,p,N){return u===null||u.tag!==7?(u=on(f,m.mode,p,N),u.return=m,u):(u=s(u,f),u.return=m,u)}function y(m,u,f){if(typeof u=="string"&&u!==""||typeof u=="number")return u=oa(""+u,m.mode,f),u.return=m,u;if(typeof u=="object"&&u!==null){switch(u.$$typeof){case os:return f=Fs(u.type,u.key,u.props,null,m.mode,f),f.ref=cr(m,null,u),f.return=m,f;case Cn:return u=la(u,m.mode,f),u.return=m,u;case kt:var p=u._init;return y(m,p(u._payload),f)}if(mr(u)||sr(u))return u=on(u,m.mode,f,null),u.return=m,u;ys(m,u)}return null}function v(m,u,f,p){var N=u!==null?u.key:null;if(typeof f=="string"&&f!==""||typeof f=="number")return N!==null?null:l(m,u,""+f,p);if(typeof f=="object"&&f!==null){switch(f.$$typeof){case os:return f.key===N?c(m,u,f,p):null;case Cn:return f.key===N?d(m,u,f,p):null;case kt:return N=f._init,v(m,u,N(f._payload),p)}if(mr(f)||sr(f))return N!==null?null:h(m,u,f,p,null);ys(m,f)}return null}function x(m,u,f,p,N){if(typeof p=="string"&&p!==""||typeof p=="number")return m=m.get(f)||null,l(u,m,""+p,N);if(typeof p=="object"&&p!==null){switch(p.$$typeof){case os:return m=m.get(p.key===null?f:p.key)||null,c(u,m,p,N);case Cn:return m=m.get(p.key===null?f:p.key)||null,d(u,m,p,N);case kt:var j=p._init;return x(m,u,f,j(p._payload),N)}if(mr(p)||sr(p))return m=m.get(f)||null,h(u,m,p,N,null);ys(u,p)}return null}function _(m,u,f,p){for(var N=null,j=null,k=u,b=u=0,S=null;k!==null&&b<f.length;b++){k.index>b?(S=k,k=null):S=k.sibling;var C=v(m,k,f[b],p);if(C===null){k===null&&(k=S);break}e&&k&&C.alternate===null&&t(m,k),u=i(C,u,b),j===null?N=C:j.sibling=C,j=C,k=S}if(b===f.length)return n(m,k),Q&&Qt(m,b),N;if(k===null){for(;b<f.length;b++)k=y(m,f[b],p),k!==null&&(u=i(k,u,b),j===null?N=k:j.sibling=k,j=k);return Q&&Qt(m,b),N}for(k=r(m,k);b<f.length;b++)S=x(k,m,b,f[b],p),S!==null&&(e&&S.alternate!==null&&k.delete(S.key===null?b:S.key),u=i(S,u,b),j===null?N=S:j.sibling=S,j=S);return e&&k.forEach(function(R){return t(m,R)}),Q&&Qt(m,b),N}function g(m,u,f,p){var N=sr(f);if(typeof N!="function")throw Error(E(150));if(f=N.call(f),f==null)throw Error(E(151));for(var j=N=null,k=u,b=u=0,S=null,C=f.next();k!==null&&!C.done;b++,C=f.next()){k.index>b?(S=k,k=null):S=k.sibling;var R=v(m,k,C.value,p);if(R===null){k===null&&(k=S);break}e&&k&&R.alternate===null&&t(m,k),u=i(R,u,b),j===null?N=R:j.sibling=R,j=R,k=S}if(C.done)return n(m,k),Q&&Qt(m,b),N;if(k===null){for(;!C.done;b++,C=f.next())C=y(m,C.value,p),C!==null&&(u=i(C,u,b),j===null?N=C:j.sibling=C,j=C);return Q&&Qt(m,b),N}for(k=r(m,k);!C.done;b++,C=f.next())C=x(k,m,b,C.value,p),C!==null&&(e&&C.alternate!==null&&k.delete(C.key===null?b:C.key),u=i(C,u,b),j===null?N=C:j.sibling=C,j=C);return e&&k.forEach(function(T){return t(m,T)}),Q&&Qt(m,b),N}function w(m,u,f,p){if(typeof f=="object"&&f!==null&&f.type===Tn&&f.key===null&&(f=f.props.children),typeof f=="object"&&f!==null){switch(f.$$typeof){case os:e:{for(var N=f.key,j=u;j!==null;){if(j.key===N){if(N=f.type,N===Tn){if(j.tag===7){n(m,j.sibling),u=s(j,f.props.children),u.return=m,m=u;break e}}else if(j.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===kt&&cc(N)===j.type){n(m,j.sibling),u=s(j,f.props),u.ref=cr(m,j,f),u.return=m,m=u;break e}n(m,j);break}else t(m,j);j=j.sibling}f.type===Tn?(u=on(f.props.children,m.mode,p,f.key),u.return=m,m=u):(p=Fs(f.type,f.key,f.props,null,m.mode,p),p.ref=cr(m,u,f),p.return=m,m=p)}return o(m);case Cn:e:{for(j=f.key;u!==null;){if(u.key===j)if(u.tag===4&&u.stateNode.containerInfo===f.containerInfo&&u.stateNode.implementation===f.implementation){n(m,u.sibling),u=s(u,f.children||[]),u.return=m,m=u;break e}else{n(m,u);break}else t(m,u);u=u.sibling}u=la(f,m.mode,p),u.return=m,m=u}return o(m);case kt:return j=f._init,w(m,u,j(f._payload),p)}if(mr(f))return _(m,u,f,p);if(sr(f))return g(m,u,f,p);ys(m,f)}return typeof f=="string"&&f!==""||typeof f=="number"?(f=""+f,u!==null&&u.tag===6?(n(m,u.sibling),u=s(u,f),u.return=m,m=u):(n(m,u),u=oa(f,m.mode,p),u.return=m,m=u),o(m)):n(m,u)}return w}var Yn=Rd(!0),Id=Rd(!1),ei=Ht(null),ti=null,Ln=null,Jo=null;function Qo(){Jo=Ln=ti=null}function Yo(e){var t=ei.current;J(ei),e._currentValue=t}function Ya(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Gn(e,t){ti=e,Jo=Ln=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ae=!0),e.firstContext=null)}function Je(e){var t=e._currentValue;if(Jo!==e)if(e={context:e,memoizedValue:t,next:null},Ln===null){if(ti===null)throw Error(E(308));Ln=e,ti.dependencies={lanes:0,firstContext:e}}else Ln=Ln.next=e;return t}var nn=null;function Xo(e){nn===null?nn=[e]:nn.push(e)}function Ad(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,Xo(t)):(n.next=s.next,s.next=n),t.interleaved=n,_t(e,r)}function _t(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var bt=!1;function Zo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Od(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function gt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Lt(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,B&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,_t(e,n)}return s=r.interleaved,s===null?(t.next=t,Xo(r)):(t.next=s.next,s.next=t),r.interleaved=t,_t(e,n)}function Ps(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Uo(e,n)}}function uc(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=t:i=i.next=t}else s=i=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function ni(e,t,n,r){var s=e.updateQueue;bt=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,d=c.next;c.next=null,o===null?i=d:o.next=d,o=c;var h=e.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=d:l.next=d,h.lastBaseUpdate=c))}if(i!==null){var y=s.baseState;o=0,h=d=c=null,l=i;do{var v=l.lane,x=l.eventTime;if((r&v)===v){h!==null&&(h=h.next={eventTime:x,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var _=e,g=l;switch(v=t,x=n,g.tag){case 1:if(_=g.payload,typeof _=="function"){y=_.call(x,y,v);break e}y=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=g.payload,v=typeof _=="function"?_.call(x,y,v):_,v==null)break e;y=te({},y,v);break e;case 2:bt=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,v=s.effects,v===null?s.effects=[l]:v.push(l))}else x={eventTime:x,lane:v,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(d=h=x,c=y):h=h.next=x,o|=v;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;v=l,l=v.next,v.next=null,s.lastBaseUpdate=v,s.shared.pending=null}}while(1);if(h===null&&(c=y),s.baseState=c,s.firstBaseUpdate=d,s.lastBaseUpdate=h,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);dn|=o,e.lanes=o,e.memoizedState=y}}function dc(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(E(191,s));s.call(r)}}}var ns={},dt=Ht(ns),Fr=Ht(ns),zr=Ht(ns);function rn(e){if(e===ns)throw Error(E(174));return e}function el(e,t){switch(q(zr,t),q(Fr,e),q(dt,ns),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ia(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Ia(t,e)}J(dt),q(dt,t)}function Xn(){J(dt),J(Fr),J(zr)}function Pd(e){rn(zr.current);var t=rn(dt.current),n=Ia(t,e.type);t!==n&&(q(Fr,e),q(dt,n))}function tl(e){Fr.current===e&&(J(dt),J(Fr))}var Z=Ht(0);function ri(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ta=[];function nl(){for(var e=0;e<ta.length;e++)ta[e]._workInProgressVersionPrimary=null;ta.length=0}var $s=Nt.ReactCurrentDispatcher,na=Nt.ReactCurrentBatchConfig,un=0,ee=null,de=null,pe=null,si=!1,jr=!1,Br=0,Km=0;function je(){throw Error(E(321))}function rl(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!at(e[n],t[n]))return!1;return!0}function sl(e,t,n,r,s,i){if(un=i,ee=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,$s.current=e===null||e.memoizedState===null?Xm:Zm,e=n(r,s),jr){i=0;do{if(jr=!1,Br=0,25<=i)throw Error(E(301));i+=1,pe=de=null,t.updateQueue=null,$s.current=ep,e=n(r,s)}while(jr)}if($s.current=ii,t=de!==null&&de.next!==null,un=0,pe=de=ee=null,si=!1,t)throw Error(E(300));return e}function il(){var e=Br!==0;return Br=0,e}function lt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pe===null?ee.memoizedState=pe=e:pe=pe.next=e,pe}function Qe(){if(de===null){var e=ee.alternate;e=e!==null?e.memoizedState:null}else e=de.next;var t=pe===null?ee.memoizedState:pe.next;if(t!==null)pe=t,de=e;else{if(e===null)throw Error(E(310));de=e,e={memoizedState:de.memoizedState,baseState:de.baseState,baseQueue:de.baseQueue,queue:de.queue,next:null},pe===null?ee.memoizedState=pe=e:pe=pe.next=e}return pe}function Vr(e,t){return typeof t=="function"?t(e):t}function ra(e){var t=Qe(),n=t.queue;if(n===null)throw Error(E(311));n.lastRenderedReducer=e;var r=de,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,c=null,d=i;do{var h=d.lane;if((un&h)===h)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var y={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=y,o=r):c=c.next=y,ee.lanes|=h,dn|=h}d=d.next}while(d!==null&&d!==i);c===null?o=r:c.next=l,at(r,t.memoizedState)||(Ae=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do i=s.lane,ee.lanes|=i,dn|=i,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function sa(e){var t=Qe(),n=t.queue;if(n===null)throw Error(E(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,i=t.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=e(i,o.action),o=o.next;while(o!==s);at(i,t.memoizedState)||(Ae=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function $d(){}function Dd(e,t){var n=ee,r=Qe(),s=t(),i=!at(r.memoizedState,s);if(i&&(r.memoizedState=s,Ae=!0),r=r.queue,al(Md.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||pe!==null&&pe.memoizedState.tag&1){if(n.flags|=2048,Hr(9,Ud.bind(null,n,r,s,t),void 0,null),ve===null)throw Error(E(349));un&30||Ld(n,t,s)}return s}function Ld(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=ee.updateQueue,t===null?(t={lastEffect:null,stores:null},ee.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Ud(e,t,n,r){t.value=n,t.getSnapshot=r,Fd(t)&&zd(e)}function Md(e,t,n){return n(function(){Fd(t)&&zd(e)})}function Fd(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!at(e,n)}catch{return!0}}function zd(e){var t=_t(e,1);t!==null&&it(t,e,1,-1)}function hc(e){var t=lt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vr,lastRenderedState:e},t.queue=e,e=e.dispatch=Ym.bind(null,ee,e),[t.memoizedState,e]}function Hr(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=ee.updateQueue,t===null?(t={lastEffect:null,stores:null},ee.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Bd(){return Qe().memoizedState}function Ds(e,t,n,r){var s=lt();ee.flags|=e,s.memoizedState=Hr(1|t,n,void 0,r===void 0?null:r)}function Ni(e,t,n,r){var s=Qe();r=r===void 0?null:r;var i=void 0;if(de!==null){var o=de.memoizedState;if(i=o.destroy,r!==null&&rl(r,o.deps)){s.memoizedState=Hr(t,n,i,r);return}}ee.flags|=e,s.memoizedState=Hr(1|t,n,i,r)}function fc(e,t){return Ds(8390656,8,e,t)}function al(e,t){return Ni(2048,8,e,t)}function Vd(e,t){return Ni(4,2,e,t)}function Hd(e,t){return Ni(4,4,e,t)}function Gd(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Wd(e,t,n){return n=n!=null?n.concat([e]):null,Ni(4,4,Gd.bind(null,t,e),n)}function ol(){}function qd(e,t){var n=Qe();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&rl(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Kd(e,t){var n=Qe();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&rl(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Jd(e,t,n){return un&21?(at(n,t)||(n=ed(),ee.lanes|=n,dn|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ae=!0),e.memoizedState=n)}function Jm(e,t){var n=V;V=n!==0&&4>n?n:4,e(!0);var r=na.transition;na.transition={};try{e(!1),t()}finally{V=n,na.transition=r}}function Qd(){return Qe().memoizedState}function Qm(e,t,n){var r=Mt(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Yd(e))Xd(t,n);else if(n=Ad(e,t,n,r),n!==null){var s=Ce();it(n,e,r,s),Zd(n,t,r)}}function Ym(e,t,n){var r=Mt(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Yd(e))Xd(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,at(l,o)){var c=t.interleaved;c===null?(s.next=s,Xo(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}n=Ad(e,t,s,r),n!==null&&(s=Ce(),it(n,e,r,s),Zd(n,t,r))}}function Yd(e){var t=e.alternate;return e===ee||t!==null&&t===ee}function Xd(e,t){jr=si=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Zd(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Uo(e,n)}}var ii={readContext:Je,useCallback:je,useContext:je,useEffect:je,useImperativeHandle:je,useInsertionEffect:je,useLayoutEffect:je,useMemo:je,useReducer:je,useRef:je,useState:je,useDebugValue:je,useDeferredValue:je,useTransition:je,useMutableSource:je,useSyncExternalStore:je,useId:je,unstable_isNewReconciler:!1},Xm={readContext:Je,useCallback:function(e,t){return lt().memoizedState=[e,t===void 0?null:t],e},useContext:Je,useEffect:fc,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Ds(4194308,4,Gd.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ds(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ds(4,2,e,t)},useMemo:function(e,t){var n=lt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=lt();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Qm.bind(null,ee,e),[r.memoizedState,e]},useRef:function(e){var t=lt();return e={current:e},t.memoizedState=e},useState:hc,useDebugValue:ol,useDeferredValue:function(e){return lt().memoizedState=e},useTransition:function(){var e=hc(!1),t=e[0];return e=Jm.bind(null,e[1]),lt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ee,s=lt();if(Q){if(n===void 0)throw Error(E(407));n=n()}else{if(n=t(),ve===null)throw Error(E(349));un&30||Ld(r,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,fc(Md.bind(null,r,i,e),[e]),r.flags|=2048,Hr(9,Ud.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=lt(),t=ve.identifierPrefix;if(Q){var n=vt,r=pt;n=(r&~(1<<32-st(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Br++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Km++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Zm={readContext:Je,useCallback:qd,useContext:Je,useEffect:al,useImperativeHandle:Wd,useInsertionEffect:Vd,useLayoutEffect:Hd,useMemo:Kd,useReducer:ra,useRef:Bd,useState:function(){return ra(Vr)},useDebugValue:ol,useDeferredValue:function(e){var t=Qe();return Jd(t,de.memoizedState,e)},useTransition:function(){var e=ra(Vr)[0],t=Qe().memoizedState;return[e,t]},useMutableSource:$d,useSyncExternalStore:Dd,useId:Qd,unstable_isNewReconciler:!1},ep={readContext:Je,useCallback:qd,useContext:Je,useEffect:al,useImperativeHandle:Wd,useInsertionEffect:Vd,useLayoutEffect:Hd,useMemo:Kd,useReducer:sa,useRef:Bd,useState:function(){return sa(Vr)},useDebugValue:ol,useDeferredValue:function(e){var t=Qe();return de===null?t.memoizedState=e:Jd(t,de.memoizedState,e)},useTransition:function(){var e=sa(Vr)[0],t=Qe().memoizedState;return[e,t]},useMutableSource:$d,useSyncExternalStore:Dd,useId:Qd,unstable_isNewReconciler:!1};function Ze(e,t){if(e&&e.defaultProps){t=te({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Xa(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:te({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var ji={isMounted:function(e){return(e=e._reactInternals)?mn(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Ce(),s=Mt(e),i=gt(r,s);i.payload=t,n!=null&&(i.callback=n),t=Lt(e,i,s),t!==null&&(it(t,e,s,r),Ps(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Ce(),s=Mt(e),i=gt(r,s);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=Lt(e,i,s),t!==null&&(it(t,e,s,r),Ps(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ce(),r=Mt(e),s=gt(n,r);s.tag=2,t!=null&&(s.callback=t),t=Lt(e,s,r),t!==null&&(it(t,e,r,n),Ps(t,e,r))}};function mc(e,t,n,r,s,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,o):t.prototype&&t.prototype.isPureReactComponent?!Dr(n,r)||!Dr(s,i):!0}function eh(e,t,n){var r=!1,s=Bt,i=t.contextType;return typeof i=="object"&&i!==null?i=Je(i):(s=Pe(t)?ln:be.current,r=t.contextTypes,i=(r=r!=null)?Jn(e,s):Bt),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ji,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function pc(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ji.enqueueReplaceState(t,t.state,null)}function Za(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Zo(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=Je(i):(i=Pe(t)?ln:be.current,s.context=Jn(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Xa(e,t,i,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&ji.enqueueReplaceState(s,s.state,null),ni(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Zn(e,t){try{var n="",r=t;do n+=Cf(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function ia(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function eo(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var tp=typeof WeakMap=="function"?WeakMap:Map;function th(e,t,n){n=gt(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){oi||(oi=!0,uo=r),eo(e,t)},n}function nh(e,t,n){n=gt(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){eo(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){eo(e,t),typeof r!="function"&&(Ut===null?Ut=new Set([this]):Ut.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function vc(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new tp;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=pp.bind(null,e,t,n),t.then(e,e))}function gc(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function yc(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=gt(-1,1),t.tag=2,Lt(n,t,1))),n.lanes|=1),e)}var np=Nt.ReactCurrentOwner,Ae=!1;function Ee(e,t,n,r){t.child=e===null?Id(t,null,n,r):Yn(t,e.child,n,r)}function wc(e,t,n,r,s){n=n.render;var i=t.ref;return Gn(t,s),r=sl(e,t,n,r,i,s),n=il(),e!==null&&!Ae?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,xt(e,t,s)):(Q&&n&&Wo(t),t.flags|=1,Ee(e,t,r,s),t.child)}function _c(e,t,n,r,s){if(e===null){var i=n.type;return typeof i=="function"&&!pl(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,rh(e,t,i,r,s)):(e=Fs(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Dr,n(o,r)&&e.ref===t.ref)return xt(e,t,s)}return t.flags|=1,e=Ft(i,r),e.ref=t.ref,e.return=t,t.child=e}function rh(e,t,n,r,s){if(e!==null){var i=e.memoizedProps;if(Dr(i,r)&&e.ref===t.ref)if(Ae=!1,t.pendingProps=r=i,(e.lanes&s)!==0)e.flags&131072&&(Ae=!0);else return t.lanes=e.lanes,xt(e,t,s)}return to(e,t,n,r,s)}function sh(e,t,n){var r=t.pendingProps,s=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},q(Mn,Le),Le|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,q(Mn,Le),Le|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,q(Mn,Le),Le|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,q(Mn,Le),Le|=r;return Ee(e,t,s,n),t.child}function ih(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function to(e,t,n,r,s){var i=Pe(n)?ln:be.current;return i=Jn(t,i),Gn(t,s),n=sl(e,t,n,r,i,s),r=il(),e!==null&&!Ae?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,xt(e,t,s)):(Q&&r&&Wo(t),t.flags|=1,Ee(e,t,n,s),t.child)}function xc(e,t,n,r,s){if(Pe(n)){var i=!0;Ys(t)}else i=!1;if(Gn(t,s),t.stateNode===null)Ls(e,t),eh(t,n,r),Za(t,n,r,s),r=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=Je(d):(d=Pe(n)?ln:be.current,d=Jn(t,d));var h=n.getDerivedStateFromProps,y=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";y||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==d)&&pc(t,o,r,d),bt=!1;var v=t.memoizedState;o.state=v,ni(t,r,o,s),c=t.memoizedState,l!==r||v!==c||Oe.current||bt?(typeof h=="function"&&(Xa(t,n,h,r),c=t.memoizedState),(l=bt||mc(t,n,l,r,v,c,d))?(y||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),o.props=r,o.state=c,o.context=d,r=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Od(e,t),l=t.memoizedProps,d=t.type===t.elementType?l:Ze(t.type,l),o.props=d,y=t.pendingProps,v=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Je(c):(c=Pe(n)?ln:be.current,c=Jn(t,c));var x=n.getDerivedStateFromProps;(h=typeof x=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==y||v!==c)&&pc(t,o,r,c),bt=!1,v=t.memoizedState,o.state=v,ni(t,r,o,s);var _=t.memoizedState;l!==y||v!==_||Oe.current||bt?(typeof x=="function"&&(Xa(t,n,x,r),_=t.memoizedState),(d=bt||mc(t,n,d,r,v,_,c)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,_,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,_,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&v===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&v===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=_),o.props=r,o.state=_,o.context=c,r=d):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&v===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&v===e.memoizedState||(t.flags|=1024),r=!1)}return no(e,t,n,r,i,s)}function no(e,t,n,r,s,i){ih(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return s&&ac(t,n,!1),xt(e,t,i);r=t.stateNode,np.current=t;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=Yn(t,e.child,null,i),t.child=Yn(t,null,l,i)):Ee(e,t,l,i),t.memoizedState=r.state,s&&ac(t,n,!0),t.child}function ah(e){var t=e.stateNode;t.pendingContext?ic(e,t.pendingContext,t.pendingContext!==t.context):t.context&&ic(e,t.context,!1),el(e,t.containerInfo)}function Nc(e,t,n,r,s){return Qn(),Ko(s),t.flags|=256,Ee(e,t,n,r),t.child}var ro={dehydrated:null,treeContext:null,retryLane:0};function so(e){return{baseLanes:e,cachePool:null,transitions:null}}function oh(e,t,n){var r=t.pendingProps,s=Z.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),q(Z,s&1),e===null)return Qa(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,i?(r=t.mode,i=t.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=bi(o,r,0,null),e=on(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=so(n),t.memoizedState=ro,e):ll(t,o));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return rp(e,t,o,r,l,s,n);if(i){i=r.fallback,o=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=Ft(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Ft(l,i):(i=on(i,o,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,o=e.child.memoizedState,o=o===null?so(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~n,t.memoizedState=ro,r}return i=e.child,e=i.sibling,r=Ft(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function ll(e,t){return t=bi({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ws(e,t,n,r){return r!==null&&Ko(r),Yn(t,e.child,null,n),e=ll(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function rp(e,t,n,r,s,i,o){if(n)return t.flags&256?(t.flags&=-257,r=ia(Error(E(422))),ws(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,s=t.mode,r=bi({mode:"visible",children:r.children},s,0,null),i=on(i,s,o,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&Yn(t,e.child,null,o),t.child.memoizedState=so(o),t.memoizedState=ro,i);if(!(t.mode&1))return ws(e,t,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(E(419)),r=ia(i,r,void 0),ws(e,t,o,r)}if(l=(o&e.childLanes)!==0,Ae||l){if(r=ve,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,_t(e,s),it(r,e,s,-1))}return ml(),r=ia(Error(E(421))),ws(e,t,o,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=vp.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,Fe=Dt(s.nextSibling),ze=t,Q=!0,rt=null,e!==null&&(Ge[We++]=pt,Ge[We++]=vt,Ge[We++]=cn,pt=e.id,vt=e.overflow,cn=t),t=ll(t,r.children),t.flags|=4096,t)}function jc(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Ya(e.return,t,n)}function aa(e,t,n,r,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function lh(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(Ee(e,t,r.children,n),r=Z.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&jc(e,n,t);else if(e.tag===19)jc(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(q(Z,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&ri(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),aa(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&ri(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}aa(t,!0,n,null,i);break;case"together":aa(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ls(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function xt(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),dn|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(E(153));if(t.child!==null){for(e=t.child,n=Ft(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Ft(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function sp(e,t,n){switch(t.tag){case 3:ah(t),Qn();break;case 5:Pd(t);break;case 1:Pe(t.type)&&Ys(t);break;case 4:el(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;q(ei,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(q(Z,Z.current&1),t.flags|=128,null):n&t.child.childLanes?oh(e,t,n):(q(Z,Z.current&1),e=xt(e,t,n),e!==null?e.sibling:null);q(Z,Z.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return lh(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),q(Z,Z.current),r)break;return null;case 22:case 23:return t.lanes=0,sh(e,t,n)}return xt(e,t,n)}var ch,io,uh,dh;ch=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};io=function(){};uh=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,rn(dt.current);var i=null;switch(n){case"input":s=Ea(e,s),r=Ea(e,r),i=[];break;case"select":s=te({},s,{value:void 0}),r=te({},r,{value:void 0}),i=[];break;case"textarea":s=Ra(e,s),r=Ra(e,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Js)}Aa(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var l=s[d];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Tr.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var c=r[d];if(l=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Tr.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&K("scroll",e),i||l===c||(i=[])):(i=i||[]).push(d,c))}n&&(i=i||[]).push("style",n);var d=i;(t.updateQueue=d)&&(t.flags|=4)}};dh=function(e,t,n,r){n!==r&&(t.flags|=4)};function ur(e,t){if(!Q)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Se(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function ip(e,t,n){var r=t.pendingProps;switch(qo(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Se(t),null;case 1:return Pe(t.type)&&Qs(),Se(t),null;case 3:return r=t.stateNode,Xn(),J(Oe),J(be),nl(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(gs(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,rt!==null&&(mo(rt),rt=null))),io(e,t),Se(t),null;case 5:tl(t);var s=rn(zr.current);if(n=t.type,e!==null&&t.stateNode!=null)uh(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(E(166));return Se(t),null}if(e=rn(dt.current),gs(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[ct]=t,r[Mr]=i,e=(t.mode&1)!==0,n){case"dialog":K("cancel",r),K("close",r);break;case"iframe":case"object":case"embed":K("load",r);break;case"video":case"audio":for(s=0;s<vr.length;s++)K(vr[s],r);break;case"source":K("error",r);break;case"img":case"image":case"link":K("error",r),K("load",r);break;case"details":K("toggle",r);break;case"input":Al(r,i),K("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},K("invalid",r);break;case"textarea":Pl(r,i),K("invalid",r)}Aa(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&vs(r.textContent,l,e),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&vs(r.textContent,l,e),s=["children",""+l]):Tr.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&K("scroll",r)}switch(n){case"input":ls(r),Ol(r,i,!0);break;case"textarea":ls(r),$l(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Js)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Mu(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[ct]=t,e[Mr]=r,ch(e,t,!1,!1),t.stateNode=e;e:{switch(o=Oa(n,r),n){case"dialog":K("cancel",e),K("close",e),s=r;break;case"iframe":case"object":case"embed":K("load",e),s=r;break;case"video":case"audio":for(s=0;s<vr.length;s++)K(vr[s],e);s=r;break;case"source":K("error",e),s=r;break;case"img":case"image":case"link":K("error",e),K("load",e),s=r;break;case"details":K("toggle",e),s=r;break;case"input":Al(e,r),s=Ea(e,r),K("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=te({},r,{value:void 0}),K("invalid",e);break;case"textarea":Pl(e,r),s=Ra(e,r),K("invalid",e);break;default:s=r}Aa(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?Bu(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Fu(e,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Rr(e,c):typeof c=="number"&&Rr(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Tr.hasOwnProperty(i)?c!=null&&i==="onScroll"&&K("scroll",e):c!=null&&Ao(e,i,c,o))}switch(n){case"input":ls(e),Ol(e,r,!1);break;case"textarea":ls(e),$l(e);break;case"option":r.value!=null&&e.setAttribute("value",""+zt(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?zn(e,!!r.multiple,i,!1):r.defaultValue!=null&&zn(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Js)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Se(t),null;case 6:if(e&&t.stateNode!=null)dh(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(E(166));if(n=rn(zr.current),rn(dt.current),gs(t)){if(r=t.stateNode,n=t.memoizedProps,r[ct]=t,(i=r.nodeValue!==n)&&(e=ze,e!==null))switch(e.tag){case 3:vs(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&vs(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ct]=t,t.stateNode=r}return Se(t),null;case 13:if(J(Z),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Q&&Fe!==null&&t.mode&1&&!(t.flags&128))Td(),Qn(),t.flags|=98560,i=!1;else if(i=gs(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(E(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(E(317));i[ct]=t}else Qn(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Se(t),i=!1}else rt!==null&&(mo(rt),rt=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Z.current&1?he===0&&(he=3):ml())),t.updateQueue!==null&&(t.flags|=4),Se(t),null);case 4:return Xn(),io(e,t),e===null&&Lr(t.stateNode.containerInfo),Se(t),null;case 10:return Yo(t.type._context),Se(t),null;case 17:return Pe(t.type)&&Qs(),Se(t),null;case 19:if(J(Z),i=t.memoizedState,i===null)return Se(t),null;if(r=(t.flags&128)!==0,o=i.rendering,o===null)if(r)ur(i,!1);else{if(he!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=ri(e),o!==null){for(t.flags|=128,ur(i,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return q(Z,Z.current&1|2),t.child}e=e.sibling}i.tail!==null&&ie()>er&&(t.flags|=128,r=!0,ur(i,!1),t.lanes=4194304)}else{if(!r)if(e=ri(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),ur(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Q)return Se(t),null}else 2*ie()-i.renderingStartTime>er&&n!==1073741824&&(t.flags|=128,r=!0,ur(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(n=i.last,n!==null?n.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=ie(),t.sibling=null,n=Z.current,q(Z,r?n&1|2:n&1),t):(Se(t),null);case 22:case 23:return fl(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Le&1073741824&&(Se(t),t.subtreeFlags&6&&(t.flags|=8192)):Se(t),null;case 24:return null;case 25:return null}throw Error(E(156,t.tag))}function ap(e,t){switch(qo(t),t.tag){case 1:return Pe(t.type)&&Qs(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Xn(),J(Oe),J(be),nl(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return tl(t),null;case 13:if(J(Z),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(E(340));Qn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return J(Z),null;case 4:return Xn(),null;case 10:return Yo(t.type._context),null;case 22:case 23:return fl(),null;case 24:return null;default:return null}}var _s=!1,ke=!1,op=typeof WeakSet=="function"?WeakSet:Set,A=null;function Un(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){re(e,t,r)}else n.current=null}function ao(e,t,n){try{n()}catch(r){re(e,t,r)}}var Sc=!1;function lp(e,t){if(Va=Ws,e=vd(),Go(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,d=0,h=0,y=e,v=null;t:for(;;){for(var x;y!==n||s!==0&&y.nodeType!==3||(l=o+s),y!==i||r!==0&&y.nodeType!==3||(c=o+r),y.nodeType===3&&(o+=y.nodeValue.length),(x=y.firstChild)!==null;)v=y,y=x;for(;;){if(y===e)break t;if(v===n&&++d===s&&(l=o),v===i&&++h===r&&(c=o),(x=y.nextSibling)!==null)break;y=v,v=y.parentNode}y=x}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ha={focusedElem:e,selectionRange:n},Ws=!1,A=t;A!==null;)if(t=A,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,A=e;else for(;A!==null;){t=A;try{var _=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var g=_.memoizedProps,w=_.memoizedState,m=t.stateNode,u=m.getSnapshotBeforeUpdate(t.elementType===t.type?g:Ze(t.type,g),w);m.__reactInternalSnapshotBeforeUpdate=u}break;case 3:var f=t.stateNode.containerInfo;f.nodeType===1?f.textContent="":f.nodeType===9&&f.documentElement&&f.removeChild(f.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(E(163))}}catch(p){re(t,t.return,p)}if(e=t.sibling,e!==null){e.return=t.return,A=e;break}A=t.return}return _=Sc,Sc=!1,_}function Sr(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&ao(t,n,i)}s=s.next}while(s!==r)}}function Si(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function oo(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function hh(e){var t=e.alternate;t!==null&&(e.alternate=null,hh(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ct],delete t[Mr],delete t[qa],delete t[Hm],delete t[Gm])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function fh(e){return e.tag===5||e.tag===3||e.tag===4}function kc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||fh(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function lo(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Js));else if(r!==4&&(e=e.child,e!==null))for(lo(e,t,n),e=e.sibling;e!==null;)lo(e,t,n),e=e.sibling}function co(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(co(e,t,n),e=e.sibling;e!==null;)co(e,t,n),e=e.sibling}var _e=null,tt=!1;function St(e,t,n){for(n=n.child;n!==null;)mh(e,t,n),n=n.sibling}function mh(e,t,n){if(ut&&typeof ut.onCommitFiberUnmount=="function")try{ut.onCommitFiberUnmount(vi,n)}catch{}switch(n.tag){case 5:ke||Un(n,t);case 6:var r=_e,s=tt;_e=null,St(e,t,n),_e=r,tt=s,_e!==null&&(tt?(e=_e,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):_e.removeChild(n.stateNode));break;case 18:_e!==null&&(tt?(e=_e,n=n.stateNode,e.nodeType===8?Zi(e.parentNode,n):e.nodeType===1&&Zi(e,n),Pr(e)):Zi(_e,n.stateNode));break;case 4:r=_e,s=tt,_e=n.stateNode.containerInfo,tt=!0,St(e,t,n),_e=r,tt=s;break;case 0:case 11:case 14:case 15:if(!ke&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&ao(n,t,o),s=s.next}while(s!==r)}St(e,t,n);break;case 1:if(!ke&&(Un(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){re(n,t,l)}St(e,t,n);break;case 21:St(e,t,n);break;case 22:n.mode&1?(ke=(r=ke)||n.memoizedState!==null,St(e,t,n),ke=r):St(e,t,n);break;default:St(e,t,n)}}function bc(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new op),t.forEach(function(r){var s=gp.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Ye(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:_e=l.stateNode,tt=!1;break e;case 3:_e=l.stateNode.containerInfo,tt=!0;break e;case 4:_e=l.stateNode.containerInfo,tt=!0;break e}l=l.return}if(_e===null)throw Error(E(160));mh(i,o,s),_e=null,tt=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(d){re(s,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)ph(t,e),t=t.sibling}function ph(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ye(t,e),ot(e),r&4){try{Sr(3,e,e.return),Si(3,e)}catch(g){re(e,e.return,g)}try{Sr(5,e,e.return)}catch(g){re(e,e.return,g)}}break;case 1:Ye(t,e),ot(e),r&512&&n!==null&&Un(n,n.return);break;case 5:if(Ye(t,e),ot(e),r&512&&n!==null&&Un(n,n.return),e.flags&32){var s=e.stateNode;try{Rr(s,"")}catch(g){re(e,e.return,g)}}if(r&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,o=n!==null?n.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Lu(s,i),Oa(l,o);var d=Oa(l,i);for(o=0;o<c.length;o+=2){var h=c[o],y=c[o+1];h==="style"?Bu(s,y):h==="dangerouslySetInnerHTML"?Fu(s,y):h==="children"?Rr(s,y):Ao(s,h,y,d)}switch(l){case"input":Ca(s,i);break;case"textarea":Uu(s,i);break;case"select":var v=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var x=i.value;x!=null?zn(s,!!i.multiple,x,!1):v!==!!i.multiple&&(i.defaultValue!=null?zn(s,!!i.multiple,i.defaultValue,!0):zn(s,!!i.multiple,i.multiple?[]:"",!1))}s[Mr]=i}catch(g){re(e,e.return,g)}}break;case 6:if(Ye(t,e),ot(e),r&4){if(e.stateNode===null)throw Error(E(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(g){re(e,e.return,g)}}break;case 3:if(Ye(t,e),ot(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Pr(t.containerInfo)}catch(g){re(e,e.return,g)}break;case 4:Ye(t,e),ot(e);break;case 13:Ye(t,e),ot(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(dl=ie())),r&4&&bc(e);break;case 22:if(h=n!==null&&n.memoizedState!==null,e.mode&1?(ke=(d=ke)||h,Ye(t,e),ke=d):Ye(t,e),ot(e),r&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!h&&e.mode&1)for(A=e,h=e.child;h!==null;){for(y=A=h;A!==null;){switch(v=A,x=v.child,v.tag){case 0:case 11:case 14:case 15:Sr(4,v,v.return);break;case 1:Un(v,v.return);var _=v.stateNode;if(typeof _.componentWillUnmount=="function"){r=v,n=v.return;try{t=r,_.props=t.memoizedProps,_.state=t.memoizedState,_.componentWillUnmount()}catch(g){re(r,n,g)}}break;case 5:Un(v,v.return);break;case 22:if(v.memoizedState!==null){Cc(y);continue}}x!==null?(x.return=v,A=x):Cc(y)}h=h.sibling}e:for(h=null,y=e;;){if(y.tag===5){if(h===null){h=y;try{s=y.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=y.stateNode,c=y.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=zu("display",o))}catch(g){re(e,e.return,g)}}}else if(y.tag===6){if(h===null)try{y.stateNode.nodeValue=d?"":y.memoizedProps}catch(g){re(e,e.return,g)}}else if((y.tag!==22&&y.tag!==23||y.memoizedState===null||y===e)&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===e)break e;for(;y.sibling===null;){if(y.return===null||y.return===e)break e;h===y&&(h=null),y=y.return}h===y&&(h=null),y.sibling.return=y.return,y=y.sibling}}break;case 19:Ye(t,e),ot(e),r&4&&bc(e);break;case 21:break;default:Ye(t,e),ot(e)}}function ot(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(fh(n)){var r=n;break e}n=n.return}throw Error(E(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Rr(s,""),r.flags&=-33);var i=kc(e);co(e,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=kc(e);lo(e,l,o);break;default:throw Error(E(161))}}catch(c){re(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function cp(e,t,n){A=e,vh(e)}function vh(e,t,n){for(var r=(e.mode&1)!==0;A!==null;){var s=A,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||_s;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||ke;l=_s;var d=ke;if(_s=o,(ke=c)&&!d)for(A=s;A!==null;)o=A,c=o.child,o.tag===22&&o.memoizedState!==null?Tc(s):c!==null?(c.return=o,A=c):Tc(s);for(;i!==null;)A=i,vh(i),i=i.sibling;A=s,_s=l,ke=d}Ec(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,A=i):Ec(e)}}function Ec(e){for(;A!==null;){var t=A;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ke||Si(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!ke)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:Ze(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&dc(t,i,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}dc(t,o,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var y=h.dehydrated;y!==null&&Pr(y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(E(163))}ke||t.flags&512&&oo(t)}catch(v){re(t,t.return,v)}}if(t===e){A=null;break}if(n=t.sibling,n!==null){n.return=t.return,A=n;break}A=t.return}}function Cc(e){for(;A!==null;){var t=A;if(t===e){A=null;break}var n=t.sibling;if(n!==null){n.return=t.return,A=n;break}A=t.return}}function Tc(e){for(;A!==null;){var t=A;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Si(4,t)}catch(c){re(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(c){re(t,s,c)}}var i=t.return;try{oo(t)}catch(c){re(t,i,c)}break;case 5:var o=t.return;try{oo(t)}catch(c){re(t,o,c)}}}catch(c){re(t,t.return,c)}if(t===e){A=null;break}var l=t.sibling;if(l!==null){l.return=t.return,A=l;break}A=t.return}}var up=Math.ceil,ai=Nt.ReactCurrentDispatcher,cl=Nt.ReactCurrentOwner,Ke=Nt.ReactCurrentBatchConfig,B=0,ve=null,ce=null,xe=0,Le=0,Mn=Ht(0),he=0,Gr=null,dn=0,ki=0,ul=0,kr=null,Ie=null,dl=0,er=1/0,ht=null,oi=!1,uo=null,Ut=null,xs=!1,At=null,li=0,br=0,ho=null,Us=-1,Ms=0;function Ce(){return B&6?ie():Us!==-1?Us:Us=ie()}function Mt(e){return e.mode&1?B&2&&xe!==0?xe&-xe:qm.transition!==null?(Ms===0&&(Ms=ed()),Ms):(e=V,e!==0||(e=window.event,e=e===void 0?16:od(e.type)),e):1}function it(e,t,n,r){if(50<br)throw br=0,ho=null,Error(E(185));Zr(e,n,r),(!(B&2)||e!==ve)&&(e===ve&&(!(B&2)&&(ki|=n),he===4&&Tt(e,xe)),$e(e,r),n===1&&B===0&&!(t.mode&1)&&(er=ie()+500,xi&&Gt()))}function $e(e,t){var n=e.callbackNode;qf(e,t);var r=Gs(e,e===ve?xe:0);if(r===0)n!==null&&Ul(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Ul(n),t===1)e.tag===0?Wm(Rc.bind(null,e)):bd(Rc.bind(null,e)),Bm(function(){!(B&6)&&Gt()}),n=null;else{switch(td(r)){case 1:n=Lo;break;case 4:n=Xu;break;case 16:n=Hs;break;case 536870912:n=Zu;break;default:n=Hs}n=Sh(n,gh.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function gh(e,t){if(Us=-1,Ms=0,B&6)throw Error(E(327));var n=e.callbackNode;if(Wn()&&e.callbackNode!==n)return null;var r=Gs(e,e===ve?xe:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=ci(e,r);else{t=r;var s=B;B|=2;var i=wh();(ve!==e||xe!==t)&&(ht=null,er=ie()+500,an(e,t));do try{fp();break}catch(l){yh(e,l)}while(1);Qo(),ai.current=i,B=s,ce!==null?t=0:(ve=null,xe=0,t=he)}if(t!==0){if(t===2&&(s=Ua(e),s!==0&&(r=s,t=fo(e,s))),t===1)throw n=Gr,an(e,0),Tt(e,r),$e(e,ie()),n;if(t===6)Tt(e,r);else{if(s=e.current.alternate,!(r&30)&&!dp(s)&&(t=ci(e,r),t===2&&(i=Ua(e),i!==0&&(r=i,t=fo(e,i))),t===1))throw n=Gr,an(e,0),Tt(e,r),$e(e,ie()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(E(345));case 2:Yt(e,Ie,ht);break;case 3:if(Tt(e,r),(r&130023424)===r&&(t=dl+500-ie(),10<t)){if(Gs(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){Ce(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Wa(Yt.bind(null,e,Ie,ht),t);break}Yt(e,Ie,ht);break;case 4:if(Tt(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var o=31-st(r);i=1<<o,o=t[o],o>s&&(s=o),r&=~i}if(r=s,r=ie()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*up(r/1960))-r,10<r){e.timeoutHandle=Wa(Yt.bind(null,e,Ie,ht),r);break}Yt(e,Ie,ht);break;case 5:Yt(e,Ie,ht);break;default:throw Error(E(329))}}}return $e(e,ie()),e.callbackNode===n?gh.bind(null,e):null}function fo(e,t){var n=kr;return e.current.memoizedState.isDehydrated&&(an(e,t).flags|=256),e=ci(e,t),e!==2&&(t=Ie,Ie=n,t!==null&&mo(t)),e}function mo(e){Ie===null?Ie=e:Ie.push.apply(Ie,e)}function dp(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!at(i(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Tt(e,t){for(t&=~ul,t&=~ki,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-st(t),r=1<<n;e[n]=-1,t&=~r}}function Rc(e){if(B&6)throw Error(E(327));Wn();var t=Gs(e,0);if(!(t&1))return $e(e,ie()),null;var n=ci(e,t);if(e.tag!==0&&n===2){var r=Ua(e);r!==0&&(t=r,n=fo(e,r))}if(n===1)throw n=Gr,an(e,0),Tt(e,t),$e(e,ie()),n;if(n===6)throw Error(E(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Yt(e,Ie,ht),$e(e,ie()),null}function hl(e,t){var n=B;B|=1;try{return e(t)}finally{B=n,B===0&&(er=ie()+500,xi&&Gt())}}function hn(e){At!==null&&At.tag===0&&!(B&6)&&Wn();var t=B;B|=1;var n=Ke.transition,r=V;try{if(Ke.transition=null,V=1,e)return e()}finally{V=r,Ke.transition=n,B=t,!(B&6)&&Gt()}}function fl(){Le=Mn.current,J(Mn)}function an(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,zm(n)),ce!==null)for(n=ce.return;n!==null;){var r=n;switch(qo(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Qs();break;case 3:Xn(),J(Oe),J(be),nl();break;case 5:tl(r);break;case 4:Xn();break;case 13:J(Z);break;case 19:J(Z);break;case 10:Yo(r.type._context);break;case 22:case 23:fl()}n=n.return}if(ve=e,ce=e=Ft(e.current,null),xe=Le=t,he=0,Gr=null,ul=ki=dn=0,Ie=kr=null,nn!==null){for(t=0;t<nn.length;t++)if(n=nn[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}nn=null}return e}function yh(e,t){do{var n=ce;try{if(Qo(),$s.current=ii,si){for(var r=ee.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}si=!1}if(un=0,pe=de=ee=null,jr=!1,Br=0,cl.current=null,n===null||n.return===null){he=1,Gr=t,ce=null;break}e:{var i=e,o=n.return,l=n,c=t;if(t=xe,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,h=l,y=h.tag;if(!(h.mode&1)&&(y===0||y===11||y===15)){var v=h.alternate;v?(h.updateQueue=v.updateQueue,h.memoizedState=v.memoizedState,h.lanes=v.lanes):(h.updateQueue=null,h.memoizedState=null)}var x=gc(o);if(x!==null){x.flags&=-257,yc(x,o,l,i,t),x.mode&1&&vc(i,d,t),t=x,c=d;var _=t.updateQueue;if(_===null){var g=new Set;g.add(c),t.updateQueue=g}else _.add(c);break e}else{if(!(t&1)){vc(i,d,t),ml();break e}c=Error(E(426))}}else if(Q&&l.mode&1){var w=gc(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),yc(w,o,l,i,t),Ko(Zn(c,l));break e}}i=c=Zn(c,l),he!==4&&(he=2),kr===null?kr=[i]:kr.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var m=th(i,c,t);uc(i,m);break e;case 1:l=c;var u=i.type,f=i.stateNode;if(!(i.flags&128)&&(typeof u.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(Ut===null||!Ut.has(f)))){i.flags|=65536,t&=-t,i.lanes|=t;var p=nh(i,l,t);uc(i,p);break e}}i=i.return}while(i!==null)}xh(n)}catch(N){t=N,ce===n&&n!==null&&(ce=n=n.return);continue}break}while(1)}function wh(){var e=ai.current;return ai.current=ii,e===null?ii:e}function ml(){(he===0||he===3||he===2)&&(he=4),ve===null||!(dn&268435455)&&!(ki&268435455)||Tt(ve,xe)}function ci(e,t){var n=B;B|=2;var r=wh();(ve!==e||xe!==t)&&(ht=null,an(e,t));do try{hp();break}catch(s){yh(e,s)}while(1);if(Qo(),B=n,ai.current=r,ce!==null)throw Error(E(261));return ve=null,xe=0,he}function hp(){for(;ce!==null;)_h(ce)}function fp(){for(;ce!==null&&!Uf();)_h(ce)}function _h(e){var t=jh(e.alternate,e,Le);e.memoizedProps=e.pendingProps,t===null?xh(e):ce=t,cl.current=null}function xh(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=ap(n,t),n!==null){n.flags&=32767,ce=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{he=6,ce=null;return}}else if(n=ip(n,t,Le),n!==null){ce=n;return}if(t=t.sibling,t!==null){ce=t;return}ce=t=e}while(t!==null);he===0&&(he=5)}function Yt(e,t,n){var r=V,s=Ke.transition;try{Ke.transition=null,V=1,mp(e,t,n,r)}finally{Ke.transition=s,V=r}return null}function mp(e,t,n,r){do Wn();while(At!==null);if(B&6)throw Error(E(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(E(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(Kf(e,i),e===ve&&(ce=ve=null,xe=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||xs||(xs=!0,Sh(Hs,function(){return Wn(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Ke.transition,Ke.transition=null;var o=V;V=1;var l=B;B|=4,cl.current=null,lp(e,n),ph(n,e),Pm(Ha),Ws=!!Va,Ha=Va=null,e.current=n,cp(n),Mf(),B=l,V=o,Ke.transition=i}else e.current=n;if(xs&&(xs=!1,At=e,li=s),i=e.pendingLanes,i===0&&(Ut=null),Bf(n.stateNode),$e(e,ie()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(oi)throw oi=!1,e=uo,uo=null,e;return li&1&&e.tag!==0&&Wn(),i=e.pendingLanes,i&1?e===ho?br++:(br=0,ho=e):br=0,Gt(),null}function Wn(){if(At!==null){var e=td(li),t=Ke.transition,n=V;try{if(Ke.transition=null,V=16>e?16:e,At===null)var r=!1;else{if(e=At,At=null,li=0,B&6)throw Error(E(331));var s=B;for(B|=4,A=e.current;A!==null;){var i=A,o=i.child;if(A.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(A=d;A!==null;){var h=A;switch(h.tag){case 0:case 11:case 15:Sr(8,h,i)}var y=h.child;if(y!==null)y.return=h,A=y;else for(;A!==null;){h=A;var v=h.sibling,x=h.return;if(hh(h),h===d){A=null;break}if(v!==null){v.return=x,A=v;break}A=x}}}var _=i.alternate;if(_!==null){var g=_.child;if(g!==null){_.child=null;do{var w=g.sibling;g.sibling=null,g=w}while(g!==null)}}A=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,A=o;else e:for(;A!==null;){if(i=A,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Sr(9,i,i.return)}var m=i.sibling;if(m!==null){m.return=i.return,A=m;break e}A=i.return}}var u=e.current;for(A=u;A!==null;){o=A;var f=o.child;if(o.subtreeFlags&2064&&f!==null)f.return=o,A=f;else e:for(o=u;A!==null;){if(l=A,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Si(9,l)}}catch(N){re(l,l.return,N)}if(l===o){A=null;break e}var p=l.sibling;if(p!==null){p.return=l.return,A=p;break e}A=l.return}}if(B=s,Gt(),ut&&typeof ut.onPostCommitFiberRoot=="function")try{ut.onPostCommitFiberRoot(vi,e)}catch{}r=!0}return r}finally{V=n,Ke.transition=t}}return!1}function Ic(e,t,n){t=Zn(n,t),t=th(e,t,1),e=Lt(e,t,1),t=Ce(),e!==null&&(Zr(e,1,t),$e(e,t))}function re(e,t,n){if(e.tag===3)Ic(e,e,n);else for(;t!==null;){if(t.tag===3){Ic(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ut===null||!Ut.has(r))){e=Zn(n,e),e=nh(t,e,1),t=Lt(t,e,1),e=Ce(),t!==null&&(Zr(t,1,e),$e(t,e));break}}t=t.return}}function pp(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Ce(),e.pingedLanes|=e.suspendedLanes&n,ve===e&&(xe&n)===n&&(he===4||he===3&&(xe&130023424)===xe&&500>ie()-dl?an(e,0):ul|=n),$e(e,t)}function Nh(e,t){t===0&&(e.mode&1?(t=ds,ds<<=1,!(ds&130023424)&&(ds=4194304)):t=1);var n=Ce();e=_t(e,t),e!==null&&(Zr(e,t,n),$e(e,n))}function vp(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Nh(e,n)}function gp(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(E(314))}r!==null&&r.delete(t),Nh(e,n)}var jh;jh=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Oe.current)Ae=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Ae=!1,sp(e,t,n);Ae=!!(e.flags&131072)}else Ae=!1,Q&&t.flags&1048576&&Ed(t,Zs,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ls(e,t),e=t.pendingProps;var s=Jn(t,be.current);Gn(t,n),s=sl(null,t,r,e,s,n);var i=il();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Pe(r)?(i=!0,Ys(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Zo(t),s.updater=ji,t.stateNode=s,s._reactInternals=t,Za(t,r,e,n),t=no(null,t,r,!0,i,n)):(t.tag=0,Q&&i&&Wo(t),Ee(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ls(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=wp(r),e=Ze(r,e),s){case 0:t=to(null,t,r,e,n);break e;case 1:t=xc(null,t,r,e,n);break e;case 11:t=wc(null,t,r,e,n);break e;case 14:t=_c(null,t,r,Ze(r.type,e),n);break e}throw Error(E(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Ze(r,s),to(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Ze(r,s),xc(e,t,r,s,n);case 3:e:{if(ah(t),e===null)throw Error(E(387));r=t.pendingProps,i=t.memoizedState,s=i.element,Od(e,t),ni(t,r,null,n);var o=t.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=Zn(Error(E(423)),t),t=Nc(e,t,r,n,s);break e}else if(r!==s){s=Zn(Error(E(424)),t),t=Nc(e,t,r,n,s);break e}else for(Fe=Dt(t.stateNode.containerInfo.firstChild),ze=t,Q=!0,rt=null,n=Id(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Qn(),r===s){t=xt(e,t,n);break e}Ee(e,t,r,n)}t=t.child}return t;case 5:return Pd(t),e===null&&Qa(t),r=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,o=s.children,Ga(r,s)?o=null:i!==null&&Ga(r,i)&&(t.flags|=32),ih(e,t),Ee(e,t,o,n),t.child;case 6:return e===null&&Qa(t),null;case 13:return oh(e,t,n);case 4:return el(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Yn(t,null,r,n):Ee(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Ze(r,s),wc(e,t,r,s,n);case 7:return Ee(e,t,t.pendingProps,n),t.child;case 8:return Ee(e,t,t.pendingProps.children,n),t.child;case 12:return Ee(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,i=t.memoizedProps,o=s.value,q(ei,r._currentValue),r._currentValue=o,i!==null)if(at(i.value,o)){if(i.children===s.children&&!Oe.current){t=xt(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=gt(-1,n&-n),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?c.next=c:(c.next=h.next,h.next=c),d.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Ya(i.return,n,t),l.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(E(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Ya(o,n,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Ee(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,Gn(t,n),s=Je(s),r=r(s),t.flags|=1,Ee(e,t,r,n),t.child;case 14:return r=t.type,s=Ze(r,t.pendingProps),s=Ze(r.type,s),_c(e,t,r,s,n);case 15:return rh(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Ze(r,s),Ls(e,t),t.tag=1,Pe(r)?(e=!0,Ys(t)):e=!1,Gn(t,n),eh(t,r,s),Za(t,r,s,n),no(null,t,r,!0,e,n);case 19:return lh(e,t,n);case 22:return sh(e,t,n)}throw Error(E(156,t.tag))};function Sh(e,t){return Yu(e,t)}function yp(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qe(e,t,n,r){return new yp(e,t,n,r)}function pl(e){return e=e.prototype,!(!e||!e.isReactComponent)}function wp(e){if(typeof e=="function")return pl(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Po)return 11;if(e===$o)return 14}return 2}function Ft(e,t){var n=e.alternate;return n===null?(n=qe(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Fs(e,t,n,r,s,i){var o=2;if(r=e,typeof e=="function")pl(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Tn:return on(n.children,s,i,t);case Oo:o=8,s|=8;break;case ja:return e=qe(12,n,t,s|2),e.elementType=ja,e.lanes=i,e;case Sa:return e=qe(13,n,t,s),e.elementType=Sa,e.lanes=i,e;case ka:return e=qe(19,n,t,s),e.elementType=ka,e.lanes=i,e;case Pu:return bi(n,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Au:o=10;break e;case Ou:o=9;break e;case Po:o=11;break e;case $o:o=14;break e;case kt:o=16,r=null;break e}throw Error(E(130,e==null?e:typeof e,""))}return t=qe(o,n,t,s),t.elementType=e,t.type=r,t.lanes=i,t}function on(e,t,n,r){return e=qe(7,e,r,t),e.lanes=n,e}function bi(e,t,n,r){return e=qe(22,e,r,t),e.elementType=Pu,e.lanes=n,e.stateNode={isHidden:!1},e}function oa(e,t,n){return e=qe(6,e,null,t),e.lanes=n,e}function la(e,t,n){return t=qe(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function _p(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Bi(0),this.expirationTimes=Bi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bi(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function vl(e,t,n,r,s,i,o,l,c){return e=new _p(e,t,n,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=qe(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Zo(i),e}function xp(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Cn,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function kh(e){if(!e)return Bt;e=e._reactInternals;e:{if(mn(e)!==e||e.tag!==1)throw Error(E(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Pe(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(E(171))}if(e.tag===1){var n=e.type;if(Pe(n))return kd(e,n,t)}return t}function bh(e,t,n,r,s,i,o,l,c){return e=vl(n,r,!0,e,s,i,o,l,c),e.context=kh(null),n=e.current,r=Ce(),s=Mt(n),i=gt(r,s),i.callback=t??null,Lt(n,i,s),e.current.lanes=s,Zr(e,s,r),$e(e,r),e}function Ei(e,t,n,r){var s=t.current,i=Ce(),o=Mt(s);return n=kh(n),t.context===null?t.context=n:t.pendingContext=n,t=gt(i,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Lt(s,t,o),e!==null&&(it(e,s,o,i),Ps(e,s,o)),o}function ui(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Ac(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function gl(e,t){Ac(e,t),(e=e.alternate)&&Ac(e,t)}function Np(){return null}var Eh=typeof reportError=="function"?reportError:function(e){console.error(e)};function yl(e){this._internalRoot=e}Ci.prototype.render=yl.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(E(409));Ei(e,t,null,null)};Ci.prototype.unmount=yl.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;hn(function(){Ei(null,e,null,null)}),t[wt]=null}};function Ci(e){this._internalRoot=e}Ci.prototype.unstable_scheduleHydration=function(e){if(e){var t=sd();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ct.length&&t!==0&&t<Ct[n].priority;n++);Ct.splice(n,0,e),n===0&&ad(e)}};function wl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Ti(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Oc(){}function jp(e,t,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=ui(o);i.call(d)}}var o=bh(t,r,e,0,null,!1,!1,"",Oc);return e._reactRootContainer=o,e[wt]=o.current,Lr(e.nodeType===8?e.parentNode:e),hn(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var d=ui(c);l.call(d)}}var c=vl(e,0,!1,null,null,!1,!1,"",Oc);return e._reactRootContainer=c,e[wt]=c.current,Lr(e.nodeType===8?e.parentNode:e),hn(function(){Ei(t,c,n,r)}),c}function Ri(e,t,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var c=ui(o);l.call(c)}}Ei(t,o,e,s)}else o=jp(n,t,e,s,r);return ui(o)}nd=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=pr(t.pendingLanes);n!==0&&(Uo(t,n|1),$e(t,ie()),!(B&6)&&(er=ie()+500,Gt()))}break;case 13:hn(function(){var r=_t(e,1);if(r!==null){var s=Ce();it(r,e,1,s)}}),gl(e,1)}};Mo=function(e){if(e.tag===13){var t=_t(e,134217728);if(t!==null){var n=Ce();it(t,e,134217728,n)}gl(e,134217728)}};rd=function(e){if(e.tag===13){var t=Mt(e),n=_t(e,t);if(n!==null){var r=Ce();it(n,e,t,r)}gl(e,t)}};sd=function(){return V};id=function(e,t){var n=V;try{return V=e,t()}finally{V=n}};$a=function(e,t,n){switch(t){case"input":if(Ca(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=_i(r);if(!s)throw Error(E(90));Du(r),Ca(r,s)}}}break;case"textarea":Uu(e,n);break;case"select":t=n.value,t!=null&&zn(e,!!n.multiple,t,!1)}};Gu=hl;Wu=hn;var Sp={usingClientEntryPoint:!1,Events:[ts,On,_i,Vu,Hu,hl]},dr={findFiberByHostInstance:tn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},kp={bundleType:dr.bundleType,version:dr.version,rendererPackageName:dr.rendererPackageName,rendererConfig:dr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Nt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Ju(e),e===null?null:e.stateNode},findFiberByHostInstance:dr.findFiberByHostInstance||Np,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ns=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ns.isDisabled&&Ns.supportsFiber)try{vi=Ns.inject(kp),ut=Ns}catch{}}Ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Sp;Ve.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!wl(t))throw Error(E(200));return xp(e,t,null,n)};Ve.createRoot=function(e,t){if(!wl(e))throw Error(E(299));var n=!1,r="",s=Eh;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=vl(e,1,!1,null,null,n,!1,r,s),e[wt]=t.current,Lr(e.nodeType===8?e.parentNode:e),new yl(t)};Ve.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(E(188)):(e=Object.keys(e).join(","),Error(E(268,e)));return e=Ju(t),e=e===null?null:e.stateNode,e};Ve.flushSync=function(e){return hn(e)};Ve.hydrate=function(e,t,n){if(!Ti(t))throw Error(E(200));return Ri(null,e,t,!0,n)};Ve.hydrateRoot=function(e,t,n){if(!wl(e))throw Error(E(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=Eh;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=bh(t,null,e,1,n??null,s,!1,i,o),e[wt]=t.current,Lr(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Ci(t)};Ve.render=function(e,t,n){if(!Ti(t))throw Error(E(200));return Ri(null,e,t,!1,n)};Ve.unmountComponentAtNode=function(e){if(!Ti(e))throw Error(E(40));return e._reactRootContainer?(hn(function(){Ri(null,null,e,!1,function(){e._reactRootContainer=null,e[wt]=null})}),!0):!1};Ve.unstable_batchedUpdates=hl;Ve.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Ti(n))throw Error(E(200));if(e==null||e._reactInternals===void 0)throw Error(E(38));return Ri(e,t,n,!1,r)};Ve.version="18.3.1-next-f1338f8080-20240426";function Ch(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Ch)}catch(e){console.error(e)}}Ch(),Cu.exports=Ve;var bp=Cu.exports,Pc=bp;xa.createRoot=Pc.createRoot,xa.hydrateRoot=Pc.hydrateRoot;function Ii(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n}function Ep(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(h){try{d(r.next(h))}catch(y){o(y)}}function c(h){try{d(r.throw(h))}catch(y){o(y)}}function d(h){h.done?i(h.value):s(h.value).then(l,c)}d((r=r.apply(e,t||[])).next())})}const Cp=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class _l extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class Tp extends _l{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class $c extends _l{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Dc extends _l{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var po;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(po||(po={}));class Rp{constructor(t,{headers:n={},customFetch:r,region:s=po.Any}={}){this.url=t,this.headers=n,this.region=s,this.fetch=Cp(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return Ep(this,arguments,void 0,function*(n,r={}){var s;let i,o;try{const{headers:l,method:c,body:d,signal:h,timeout:y}=r;let v={},{region:x}=r;x||(x=this.region);const _=new URL(`${this.url}/${n}`);x&&x!=="any"&&(v["x-region"]=x,_.searchParams.set("forceFunctionRegion",x));let g;d&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)?typeof Blob<"u"&&d instanceof Blob||d instanceof ArrayBuffer?(v["Content-Type"]="application/octet-stream",g=d):typeof d=="string"?(v["Content-Type"]="text/plain",g=d):typeof FormData<"u"&&d instanceof FormData?g=d:(v["Content-Type"]="application/json",g=JSON.stringify(d)):g=d;let w=h;y&&(o=new AbortController,i=setTimeout(()=>o.abort(),y),h?(w=o.signal,h.addEventListener("abort",()=>o.abort())):w=o.signal);const m=yield this.fetch(_.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},v),this.headers),l),body:g,signal:w}).catch(N=>{throw new Tp(N)}),u=m.headers.get("x-relay-error");if(u&&u==="true")throw new $c(m);if(!m.ok)throw new Dc(m);let f=((s=m.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),p;return f==="application/json"?p=yield m.json():f==="application/octet-stream"||f==="application/pdf"?p=yield m.blob():f==="text/event-stream"?p=m:f==="multipart/form-data"?p=yield m.formData():p=yield m.text(),{data:p,error:null,response:m}}catch(l){return{data:null,error:l,response:l instanceof Dc||l instanceof $c?l.context:void 0}}finally{i&&clearTimeout(i)}})}}var Ip=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},Ap=class{constructor(e){var t,n;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(n=e.isMaybeSingle)!==null&&n!==void 0?n:!1,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{let o=null,l=null,c=null,d=i.status,h=i.statusText;if(i.ok){var y,v;if(n.method!=="HEAD"){var x;const m=await i.text();m===""||(n.headers.get("Accept")==="text/csv"||n.headers.get("Accept")&&(!((x=n.headers.get("Accept"))===null||x===void 0)&&x.includes("application/vnd.pgrst.plan+text"))?l=m:l=JSON.parse(m))}const g=(y=n.headers.get("Prefer"))===null||y===void 0?void 0:y.match(/count=(exact|planned|estimated)/),w=(v=i.headers.get("content-range"))===null||v===void 0?void 0:v.split("/");g&&w&&w.length>1&&(c=parseInt(w[1])),n.isMaybeSingle&&n.method==="GET"&&Array.isArray(l)&&(l.length>1?(o={code:"PGRST116",details:`Results contain ${l.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},l=null,c=null,d=406,h="Not Acceptable"):l.length===1?l=l[0]:l=null)}else{var _;const g=await i.text();try{o=JSON.parse(g),Array.isArray(o)&&i.status===404&&(l=[],o=null,d=200,h="OK")}catch{i.status===404&&g===""?(d=204,h="No Content"):o={message:g}}if(o&&n.isMaybeSingle&&(!(o==null||(_=o.details)===null||_===void 0)&&_.includes("0 rows"))&&(o=null,d=200,h="OK"),o&&n.shouldThrowOnError)throw new Ip(o)}return{error:o,data:l,count:c,status:d,statusText:h}});return this.shouldThrowOnError||(s=s.catch(i=>{var o;let l="";const c=i==null?void 0:i.cause;if(c){var d,h,y,v;const _=(d=c==null?void 0:c.message)!==null&&d!==void 0?d:"",g=(h=c==null?void 0:c.code)!==null&&h!==void 0?h:"";l=`${(y=i==null?void 0:i.name)!==null&&y!==void 0?y:"FetchError"}: ${i==null?void 0:i.message}`,l+=`

Caused by: ${(v=c==null?void 0:c.name)!==null&&v!==void 0?v:"Error"}: ${_}`,g&&(l+=` (${g})`),c!=null&&c.stack&&(l+=`
${c.stack}`)}else{var x;l=(x=i==null?void 0:i.stack)!==null&&x!==void 0?x:""}return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:l,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),s.then(e,t)}returns(){return this}overrideTypes(){return this}},Op=class extends Ap{select(e){let t=!1;const n=(e??"*").split("").map(r=>/\s/.test(r)&&!t?"":(r==='"'&&(t=!t),r)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:n,foreignTable:r,referencedTable:s=r}={}){const i=s?`${s}.order`:"order",o=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${o?`${o},`:""}${e}.${t?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:n=t}={}){const r=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"offset":`${r}.offset`,i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(i,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:r=!1,wal:s=!1,format:i="text"}={}){var o;const l=[e?"analyze":null,t?"verbose":null,n?"settings":null,r?"buffers":null,s?"wal":null].filter(Boolean).join("|"),c=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${i}; for="${c}"; options=${l};`),i==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};const Lc=new RegExp("[,()]");var kn=class extends Op{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){const n=Array.from(new Set(t)).map(r=>typeof r=="string"&&Lc.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}notIn(e,t){const n=Array.from(new Set(t)).map(r=>typeof r=="string"&&Lc.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`not.in.(${n})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:n,type:r}={}){let s="";r==="plain"?s="pl":r==="phrase"?s="ph":r==="websearch"&&(s="w");const i=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${s}fts${i}.${t}`),this}match(e){return Object.entries(e).forEach(([t,n])=>{this.url.searchParams.append(t,`eq.${n}`)}),this}not(e,t,n){return this.url.searchParams.append(e,`not.${t}.${n}`),this}or(e,{foreignTable:t,referencedTable:n=t}={}){const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,t,n){return this.url.searchParams.append(e,`${t}.${n}`),this}},Pp=class{constructor(e,{headers:t={},schema:n,fetch:r}){this.url=e,this.headers=new Headers(t),this.schema=n,this.fetch=r}select(e,t){const{head:n=!1,count:r}=t??{},s=n?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),r&&this.headers.append("Prefer",`count=${r}`),new kn({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:n=!0}={}){var r;const s="POST";if(t&&this.headers.append("Prefer",`count=${t}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const i=e.reduce((o,l)=>o.concat(Object.keys(l)),[]);if(i.length>0){const o=[...new Set(i)].map(l=>`"${l}"`);this.url.searchParams.set("columns",o.join(","))}}return new kn({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:n=!1,count:r,defaultToNull:s=!0}={}){var i;const o="POST";if(this.headers.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),t!==void 0&&this.url.searchParams.set("on_conflict",t),r&&this.headers.append("Prefer",`count=${r}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const l=e.reduce((c,d)=>c.concat(Object.keys(d)),[]);if(l.length>0){const c=[...new Set(l)].map(d=>`"${d}"`);this.url.searchParams.set("columns",c.join(","))}}return new kn({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}update(e,{count:t}={}){var n;const r="PATCH";return t&&this.headers.append("Prefer",`count=${t}`),new kn({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:e}={}){var t;const n="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new kn({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}},$p=class Th{constructor(t,{headers:n={},schema:r,fetch:s}={}){this.url=t,this.headers=new Headers(n),this.schemaName=r,this.fetch=s}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new Pp(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new Th(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,n={},{head:r=!1,get:s=!1,count:i}={}){var o;let l;const c=new URL(`${this.url}/rpc/${t}`);let d;r||s?(l=r?"HEAD":"GET",Object.entries(n).filter(([y,v])=>v!==void 0).map(([y,v])=>[y,Array.isArray(v)?`{${v.join(",")}}`:`${v}`]).forEach(([y,v])=>{c.searchParams.append(y,v)})):(l="POST",d=n);const h=new Headers(this.headers);return i&&h.set("Prefer",`count=${i}`),new kn({method:l,url:c,headers:h,schema:this.schemaName,body:d,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};class Dp{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,s=parseInt(r.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const r=this.getWebSocketConstructor();return new r(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const Lp="2.89.0",Up=`realtime-js/${Lp}`,Rh="1.0.0",Mp="2.0.0",Uc=Rh,vo=1e4,Fp=1e3,zp=100;var Et;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Et||(Et={}));var ue;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(ue||(ue={}));var nt;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(nt||(nt={}));var go;(function(e){e.websocket="websocket"})(go||(go={}));var Zt;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Zt||(Zt={}));class Bp{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,n){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(t));let r=[t.join_ref,t.ref,t.topic,t.event,t.payload];return n(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(t){var n;return this._isArrayBuffer((n=t.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var n,r;const s=(r=(n=t.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,s)}_encodeJsonUserBroadcastPush(t){var n,r;const s=(r=(n=t.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:{},o=new TextEncoder().encode(JSON.stringify(s)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(t,n,r){var s,i;const o=t.topic,l=(s=t.ref)!==null&&s!==void 0?s:"",c=(i=t.join_ref)!==null&&i!==void 0?i:"",d=t.payload.event,h=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},y=Object.keys(h).length===0?"":JSON.stringify(h);if(c.length>255)throw new Error(`joinRef length ${c.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`ref length ${l.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`userEvent length ${d.length} exceeds maximum of 255`);if(y.length>255)throw new Error(`metadata length ${y.length} exceeds maximum of 255`);const v=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+l.length+o.length+d.length+y.length,x=new ArrayBuffer(this.HEADER_LENGTH+v);let _=new DataView(x),g=0;_.setUint8(g++,this.KINDS.userBroadcastPush),_.setUint8(g++,c.length),_.setUint8(g++,l.length),_.setUint8(g++,o.length),_.setUint8(g++,d.length),_.setUint8(g++,y.length),_.setUint8(g++,n),Array.from(c,m=>_.setUint8(g++,m.charCodeAt(0))),Array.from(l,m=>_.setUint8(g++,m.charCodeAt(0))),Array.from(o,m=>_.setUint8(g++,m.charCodeAt(0))),Array.from(d,m=>_.setUint8(g++,m.charCodeAt(0))),Array.from(y,m=>_.setUint8(g++,m.charCodeAt(0)));var w=new Uint8Array(x.byteLength+r.byteLength);return w.set(new Uint8Array(x),0),w.set(new Uint8Array(r),x.byteLength),w.buffer}decode(t,n){if(this._isArrayBuffer(t)){let r=this._binaryDecode(t);return n(r)}if(typeof t=="string"){const r=JSON.parse(t),[s,i,o,l,c]=r;return n({join_ref:s,ref:i,topic:o,event:l,payload:c})}return n({})}_binaryDecode(t){const n=new DataView(t),r=n.getUint8(0),s=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,n,s)}}_decodeUserBroadcast(t,n,r){const s=n.getUint8(1),i=n.getUint8(2),o=n.getUint8(3),l=n.getUint8(4);let c=this.HEADER_LENGTH+4;const d=r.decode(t.slice(c,c+s));c=c+s;const h=r.decode(t.slice(c,c+i));c=c+i;const y=r.decode(t.slice(c,c+o));c=c+o;const v=t.slice(c,t.byteLength),x=l===this.JSON_ENCODING?JSON.parse(r.decode(v)):v,_={type:this.BROADCAST_EVENT,event:h,payload:x};return o>0&&(_.meta=JSON.parse(y)),{join_ref:null,ref:null,topic:d,event:this.BROADCAST_EVENT,payload:_}}_isArrayBuffer(t){var n;return t instanceof ArrayBuffer||((n=t==null?void 0:t.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(t,n){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([r])=>n.includes(r)))}}class Ih{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var G;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(G||(G={}));const Mc=(e,t,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return t?Object.keys(t).reduce((i,o)=>(i[o]=Vp(o,e,t,s),i),{}):{}},Vp=(e,t,n,r)=>{const s=t.find(l=>l.name===e),i=s==null?void 0:s.type,o=n[e];return i&&!r.includes(i)?Ah(i,o):yo(o)},Ah=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return qp(t,n)}switch(e){case G.bool:return Hp(t);case G.float4:case G.float8:case G.int2:case G.int4:case G.int8:case G.numeric:case G.oid:return Gp(t);case G.json:case G.jsonb:return Wp(t);case G.timestamp:return Kp(t);case G.abstime:case G.date:case G.daterange:case G.int4range:case G.int8range:case G.money:case G.reltime:case G.text:case G.time:case G.timestamptz:case G.timetz:case G.tsrange:case G.tstzrange:return yo(t);default:return yo(t)}},yo=e=>e,Hp=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},Gp=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},Wp=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e},qp=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let i;const o=e.slice(1,n);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>Ah(t,l))}return e},Kp=e=>typeof e=="string"?e.replace(" ","T"):e,Oh=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class ca{constructor(t,n,r={},s=vo){this.channel=t,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Fc;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Fc||(Fc={}));class Er{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Er.syncState(this.state,s,i,o),this.pendingDiffs.forEach(c=>{this.state=Er.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Er.syncDiff(this.state,s,i,o),l())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,s){const i=this.cloneDeep(t),o=this.transformState(n),l={},c={};return this.map(i,(d,h)=>{o[d]||(c[d]=h)}),this.map(o,(d,h)=>{const y=i[d];if(y){const v=h.map(w=>w.presence_ref),x=y.map(w=>w.presence_ref),_=h.filter(w=>x.indexOf(w.presence_ref)<0),g=y.filter(w=>v.indexOf(w.presence_ref)<0);_.length>0&&(l[d]=_),g.length>0&&(c[d]=g)}else l[d]=h}),this.syncDiff(i,{joins:l,leaves:c},r,s)}static syncDiff(t,n,r,s){const{joins:i,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(l,c)=>{var d;const h=(d=t[l])!==null&&d!==void 0?d:[];if(t[l]=this.cloneDeep(c),h.length>0){const y=t[l].map(x=>x.presence_ref),v=h.filter(x=>y.indexOf(x.presence_ref)<0);t[l].unshift(...v)}r(l,h,c)}),this.map(o,(l,c)=>{let d=t[l];if(!d)return;const h=c.map(y=>y.presence_ref);d=d.filter(y=>h.indexOf(y.presence_ref)<0),t[l]=d,s(l,d,c),d.length===0&&delete t[l]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const s=t[r];return"metas"in s?n[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=s,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var zc;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(zc||(zc={}));var Cr;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Cr||(Cr={}));var ft;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(ft||(ft={}));class Fn{constructor(t,n={config:{}},r){var s,i;if(this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=ue.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new ca(this,nt.join,this.params,this.timeout),this.rejoinTimer=new Ih(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ue.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ue.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=ue.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ue.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=ue.errored,this.rejoinTimer.scheduleTimeout())}),this._on(nt.reply,{},(o,l)=>{this._trigger(this._replyEventName(l),o)}),this.presence=new Er(this),this.broadcastEndpointURL=Oh(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,n=this.timeout){var r,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==ue.closed){const{config:{broadcast:o,presence:l,private:c}}=this.params,d=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(x=>x.filter))!==null&&s!==void 0?s:[],h=!!this.bindings[Cr.PRESENCE]&&this.bindings[Cr.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,y={},v={broadcast:o,presence:Object.assign(Object.assign({},l),{enabled:h}),postgres_changes:d,private:c};this.socket.accessTokenValue&&(y.access_token=this.socket.accessTokenValue),this._onError(x=>t==null?void 0:t(ft.CHANNEL_ERROR,x)),this._onClose(()=>t==null?void 0:t(ft.CLOSED)),this.updateJoinPayload(Object.assign({config:v},y)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:x})=>{var _;if(this.socket._isManualToken()||this.socket.setAuth(),x===void 0){t==null||t(ft.SUBSCRIBED);return}else{const g=this.bindings.postgres_changes,w=(_=g==null?void 0:g.length)!==null&&_!==void 0?_:0,m=[];for(let u=0;u<w;u++){const f=g[u],{filter:{event:p,schema:N,table:j,filter:k}}=f,b=x&&x[u];if(b&&b.event===p&&Fn.isFilterValueEqual(b.schema,N)&&Fn.isFilterValueEqual(b.table,j)&&Fn.isFilterValueEqual(b.filter,k))m.push(Object.assign(Object.assign({},f),{id:b.id}));else{this.unsubscribe(),this.state=ue.errored,t==null||t(ft.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=m,t&&t(ft.SUBSCRIBED);return}}).receive("error",x=>{this.state=ue.errored,t==null||t(ft.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(x).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(ft.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this.state===ue.joined&&t===Cr.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,n,r)}async httpSend(t,n,r={}){var s;if(n==null)return Promise.reject("Payload is required for httpSend()");const i={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(i.Authorization=`Bearer ${this.socket.accessTokenValue}`);const o={method:"POST",headers:i,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:n,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);if(l.status===202)return{success:!0};let c=l.statusText;try{const d=await l.json();c=d.error||d.message||c}catch{}return Promise.reject(new Error(c))}async send(t,n={}){var r,s;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:o}=t,l={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(l.Authorization=`Bearer ${this.socket.accessTokenValue}`);const c={method:"POST",headers:l,body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=d.body)===null||s===void 0?void 0:s.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,c;const d=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),d.receive("ok",()=>i("ok")),d.receive("error",()=>i("error")),d.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=ue.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(nt.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new ca(this,nt.leave,{},t),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ue.closed,this.bindings={}}async _fetchWithTimeout(t,n,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),o=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(i),o}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new ca(this,t,n,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>zp){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var s,i;const o=t.toLocaleLowerCase(),{close:l,error:c,leave:d,join:h}=nt;if(r&&[l,c,d,h].indexOf(o)>=0&&r!==this._joinRef())return;let v=this._onMessage(o,n,r);if(n&&!v)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(x=>{var _,g,w;return((_=x.filter)===null||_===void 0?void 0:_.event)==="*"||((w=(g=x.filter)===null||g===void 0?void 0:g.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===o}).map(x=>x.callback(v,r)):(i=this.bindings[o])===null||i===void 0||i.filter(x=>{var _,g,w,m,u,f;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in x){const p=x.id,N=(_=x.filter)===null||_===void 0?void 0:_.event;return p&&((g=n.ids)===null||g===void 0?void 0:g.includes(p))&&(N==="*"||(N==null?void 0:N.toLocaleLowerCase())===((w=n.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{const p=(u=(m=x==null?void 0:x.filter)===null||m===void 0?void 0:m.event)===null||u===void 0?void 0:u.toLocaleLowerCase();return p==="*"||p===((f=n==null?void 0:n.event)===null||f===void 0?void 0:f.toLocaleLowerCase())}else return x.type.toLocaleLowerCase()===o}).map(x=>{if(typeof v=="object"&&"ids"in v){const _=v.data,{schema:g,table:w,commit_timestamp:m,type:u,errors:f}=_;v=Object.assign(Object.assign({},{schema:g,table:w,commit_timestamp:m,eventType:u,new:{},old:{},errors:f}),this._getPayloadRecords(_))}x.callback(v,r)})}_isClosed(){return this.state===ue.closed}_isJoined(){return this.state===ue.joined}_isJoining(){return this.state===ue.joining}_isLeaving(){return this.state===ue.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const s=t.toLocaleLowerCase(),i={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&Fn.isEqual(s.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}static isFilterValueEqual(t,n){return(t??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(nt.close,{},t)}_onError(t){this._on(nt.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ue.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=Mc(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=Mc(t.columns,t.old_record)),n}}const ua=()=>{},js={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Jp=[1e3,2e3,5e3,1e4],Qp=1e4,Yp=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Xp{constructor(t,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=vo,this.transport=null,this.heartbeatIntervalMs=js.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=ua,this.ref=0,this.reconnectTimer=null,this.vsn=Uc,this.logger=ua,this.conn=null,this.sendBuffer=[],this.serializer=new Bp,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>s?(...i)=>s(...i):(...i)=>fetch(...i),!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${go.websocket}`,this.httpEndpoint=Oh(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Dp.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Et.connecting:return Zt.Connecting;case Et.open:return Zt.Open;case Et.closing:return Zt.Closing;default:return Zt.Closed}}isConnected(){return this.connectionState()===Zt.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const r=`realtime:${t}`,s=this.getChannels().find(i=>i.topic===r);if(s)return s;{const i=new Fn(`realtime:${t}`,n,this);return this.channels.push(i),i}}push(t){const{topic:n,event:r,payload:s,ref:i}=t,o=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${n} ${r} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(Fp,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},js.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(d){this.log("error","error in heartbeat callback",d)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:s,payload:i,ref:o}=n,l=o?`(${o})`:"",c=i.status||"";this.log("receive",`${c} ${r} ${s} ${l}`.trim(),i),this.channels.filter(d=>d._isMember(r)).forEach(d=>d._trigger(s,i,o)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===Et.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Et.open||this.conn.readyState===Et.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(nt.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${t}${r}${s}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([Yp],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n,r=!1;if(t)n=t,r=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(s){this.log("error","Error fetching access token from callback",s),n=this.accessTokenValue}else n=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(s=>{const i={access_token:n,version:Up};n&&s.updateJoinPayload(i),s.joinedOnce&&s._isJoined()&&s._push(nt.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(n)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new Ih(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},js.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,r,s,i,o,l,c,d,h,y,v,x;switch(this.transport=(n=t==null?void 0:t.transport)!==null&&n!==void 0?n:null,this.timeout=(r=t==null?void 0:t.timeout)!==null&&r!==void 0?r:vo,this.heartbeatIntervalMs=(s=t==null?void 0:t.heartbeatIntervalMs)!==null&&s!==void 0?s:js.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(l=t==null?void 0:t.heartbeatCallback)!==null&&l!==void 0?l:ua,this.vsn=(c=t==null?void 0:t.vsn)!==null&&c!==void 0?c:Uc,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(d=t==null?void 0:t.reconnectAfterMs)!==null&&d!==void 0?d:_=>Jp[_-1]||Qp,this.vsn){case Rh:this.encode=(h=t==null?void 0:t.encode)!==null&&h!==void 0?h:(_,g)=>g(JSON.stringify(_)),this.decode=(y=t==null?void 0:t.decode)!==null&&y!==void 0?y:(_,g)=>g(JSON.parse(_));break;case Mp:this.encode=(v=t==null?void 0:t.encode)!==null&&v!==void 0?v:this.serializer.encode.bind(this.serializer),this.decode=(x=t==null?void 0:t.decode)!==null&&x!==void 0?x:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}var Wr=class extends Error{constructor(e,t){var n;super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&((n=t.icebergType)==null?void 0:n.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function Zp(e,t,n){const r=new URL(t,e);if(n)for(const[s,i]of Object.entries(n))i!==void 0&&r.searchParams.set(s,i);return r.toString()}async function ev(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function tv(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:n,path:r,query:s,body:i,headers:o}){const l=Zp(e.baseUrl,r,s),c=await ev(e.auth),d=await t(l,{method:n,headers:{...i?{"Content-Type":"application/json"}:{},...c,...o},body:i?JSON.stringify(i):void 0}),h=await d.text(),y=(d.headers.get("content-type")||"").includes("application/json"),v=y&&h?JSON.parse(h):h;if(!d.ok){const x=y?v:void 0,_=x==null?void 0:x.error;throw new Wr((_==null?void 0:_.message)??`Request failed with status ${d.status}`,{status:d.status,icebergType:_==null?void 0:_.type,icebergCode:_==null?void 0:_.code,details:x})}return{status:d.status,headers:d.headers,data:v}}}}function Ss(e){return e.join("")}var nv=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:Ss(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(e,t){const n={namespace:e.namespace,properties:t==null?void 0:t.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Ss(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ss(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Ss(e.namespace)}`}),!0}catch(t){if(t instanceof Wr&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(n){if(n instanceof Wr&&n.status===409)return;throw n}}};function vn(e){return e.join("")}var rv=class{constructor(e,t="",n){this.client=e,this.prefix=t,this.accessDelegation=n}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${vn(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${vn(e.namespace)}/tables`,body:t,headers:n})).data.metadata}async updateTable(e,t){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${vn(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${vn(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String((t==null?void 0:t.purge)??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${vn(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${vn(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(n){if(n instanceof Wr&&n.status===404)return!1;throw n}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(n){if(n instanceof Wr&&n.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw n}}},sv=class{constructor(e){var r;let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const n=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=tv({baseUrl:n,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=(r=e.accessDelegation)==null?void 0:r.join(","),this.namespaceOps=new nv(this.client,t),this.tableOps=new rv(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}},Ai=class extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}};function X(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}var iv=class extends Ai{constructor(e,t,n){super(e),this.name="StorageApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},wo=class extends Ai{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}};const xl=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),av=()=>Response,_o=e=>{if(Array.isArray(e))return e.map(n=>_o(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=_o(r)}),t},ov=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},lv=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e);function qr(e){"@babel/helpers - typeof";return qr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qr(e)}function cv(e,t){if(qr(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(qr(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function uv(e){var t=cv(e,"string");return qr(t)=="symbol"?t:t+""}function dv(e,t,n){return(t=uv(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Bc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Bc(Object(n),!0).forEach(function(r){dv(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bc(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}const da=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},hv=async(e,t,n)=>{e instanceof await av()&&!(n!=null&&n.noResolveJson)?e.json().then(r=>{const s=e.status||500,i=(r==null?void 0:r.statusCode)||s+"";t(new iv(da(r),s,i))}).catch(r=>{t(new wo(da(r),r))}):t(new wo(da(e),e))},fv=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!r?s:(ov(r)?(s.headers=D({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(r)):s.body=r,t!=null&&t.duplex&&(s.duplex=t.duplex),D(D({},s),n))};async function rs(e,t,n,r,s,i){return new Promise((o,l)=>{e(n,fv(t,r,s,i)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>hv(c,l,r))})}async function Kr(e,t,n,r){return rs(e,"GET",t,n,r)}async function et(e,t,n,r,s){return rs(e,"POST",t,r,s,n)}async function xo(e,t,n,r,s){return rs(e,"PUT",t,r,s,n)}async function mv(e,t,n,r){return rs(e,"HEAD",t,D(D({},n),{},{noResolveJson:!0}),r)}async function Nl(e,t,n,r,s){return rs(e,"DELETE",t,r,s,n)}var pv=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}async execute(){var e=this;try{return{data:(await e.downloadFn()).body,error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(X(t))return{data:null,error:t};throw t}}};let Ph;Ph=Symbol.toStringTag;var vv=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[Ph]="BlobDownloadBuilder",this.promise=null}asStream(){return new pv(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var e=this;try{return{data:await(await e.downloadFn()).blob(),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(X(t))return{data:null,error:t};throw t}}};const gv={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Vc={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var yv=class{constructor(e,t={},n,r){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=n,this.fetch=xl(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(e,t,n,r){var s=this;try{let i;const o=D(D({},Vc),r);let l=D(D({},s.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",s.encodeMetadata(c)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.has("cacheControl")||i.append("cacheControl",o.cacheControl),c&&!i.has("metadata")&&i.append("metadata",s.encodeMetadata(c))):(i=n,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=s.toBase64(s.encodeMetadata(c))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!o.duplex&&(o.duplex="half")),r!=null&&r.headers&&(l=D(D({},l),r.headers));const d=s._removeEmptyFolders(t),h=s._getFinalPath(d),y=await(e=="PUT"?xo:et)(s.fetch,`${s.url}/object/${h}`,i,D({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:d,id:y.Id,fullPath:y.Key},error:null}}catch(i){if(s.shouldThrowOnError)throw i;if(X(i))return{data:null,error:i};throw i}}async upload(e,t,n){return this.uploadOrUpdate("POST",e,t,n)}async uploadToSignedUrl(e,t,n,r){var s=this;const i=s._removeEmptyFolders(e),o=s._getFinalPath(i),l=new URL(s.url+`/object/upload/sign/${o}`);l.searchParams.set("token",t);try{let c;const d=D({upsert:Vc.upsert},r),h=D(D({},s.headers),{"x-upsert":String(d.upsert)});return typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",d.cacheControl)):(c=n,h["cache-control"]=`max-age=${d.cacheControl}`,h["content-type"]=d.contentType),{data:{path:i,fullPath:(await xo(s.fetch,l.toString(),c,{headers:h})).Key},error:null}}catch(c){if(s.shouldThrowOnError)throw c;if(X(c))return{data:null,error:c};throw c}}async createSignedUploadUrl(e,t){var n=this;try{let r=n._getFinalPath(e);const s=D({},n.headers);t!=null&&t.upsert&&(s["x-upsert"]="true");const i=await et(n.fetch,`${n.url}/object/upload/sign/${r}`,{},{headers:s}),o=new URL(n.url+i.url),l=o.searchParams.get("token");if(!l)throw new Ai("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:l},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(X(r))return{data:null,error:r};throw r}}async update(e,t,n){return this.uploadOrUpdate("PUT",e,t,n)}async move(e,t,n){var r=this;try{return{data:await et(r.fetch,`${r.url}/object/move`,{bucketId:r.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(X(s))return{data:null,error:s};throw s}}async copy(e,t,n){var r=this;try{return{data:{path:(await et(r.fetch,`${r.url}/object/copy`,{bucketId:r.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers})).Key},error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(X(s))return{data:null,error:s};throw s}}async createSignedUrl(e,t,n){var r=this;try{let s=r._getFinalPath(e),i=await et(r.fetch,`${r.url}/object/sign/${s}`,D({expiresIn:t},n!=null&&n.transform?{transform:n.transform}:{}),{headers:r.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${r.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(X(s))return{data:null,error:s};throw s}}async createSignedUrls(e,t,n){var r=this;try{const s=await et(r.fetch,`${r.url}/object/sign/${r.bucketId}`,{expiresIn:t,paths:e},{headers:r.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(o=>D(D({},o),{},{signedUrl:o.signedURL?encodeURI(`${r.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(X(s))return{data:null,error:s};throw s}}download(e,t){const n=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",r=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),s=r?`?${r}`:"",i=this._getFinalPath(e),o=()=>Kr(this.fetch,`${this.url}/${n}/${i}${s}`,{headers:this.headers,noResolveJson:!0});return new vv(o,this.shouldThrowOnError)}async info(e){var t=this;const n=t._getFinalPath(e);try{return{data:_o(await Kr(t.fetch,`${t.url}/object/info/${n}`,{headers:t.headers})),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(X(r))return{data:null,error:r};throw r}}async exists(e){var t=this;const n=t._getFinalPath(e);try{return await mv(t.fetch,`${t.url}/object/${n}`,{headers:t.headers}),{data:!0,error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(X(r)&&r instanceof wo){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}}getPublicUrl(e,t){const n=this._getFinalPath(e),r=[],s=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";s!==""&&r.push(s);const i=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",o=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});o!==""&&r.push(o);let l=r.join("&");return l!==""&&(l=`?${l}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${n}${l}`)}}}async remove(e){var t=this;try{return{data:await Nl(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:e},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(X(n))return{data:null,error:n};throw n}}async list(e,t,n){var r=this;try{const s=D(D(D({},gv),t),{},{prefix:e||""});return{data:await et(r.fetch,`${r.url}/object/list/${r.bucketId}`,s,{headers:r.headers},n),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(X(s))return{data:null,error:s};throw s}}async listV2(e,t){var n=this;try{const r=D({},e);return{data:await et(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,r,{headers:n.headers},t),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(X(r))return{data:null,error:r};throw r}}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};const $h="2.89.0",Dh={"X-Client-Info":`storage-js/${$h}`};var wv=class{constructor(e,t={},n,r){this.shouldThrowOnError=!1;const s=new URL(e);r!=null&&r.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href.replace(/\/$/,""),this.headers=D(D({},Dh),t),this.fetch=xl(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(e){var t=this;try{const n=t.listBucketOptionsToQueryString(e);return{data:await Kr(t.fetch,`${t.url}/bucket${n}`,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(X(n))return{data:null,error:n};throw n}}async getBucket(e){var t=this;try{return{data:await Kr(t.fetch,`${t.url}/bucket/${e}`,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(X(n))return{data:null,error:n};throw n}}async createBucket(e,t={public:!1}){var n=this;try{return{data:await et(n.fetch,`${n.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(X(r))return{data:null,error:r};throw r}}async updateBucket(e,t){var n=this;try{return{data:await xo(n.fetch,`${n.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(X(r))return{data:null,error:r};throw r}}async emptyBucket(e){var t=this;try{return{data:await et(t.fetch,`${t.url}/bucket/${e}/empty`,{},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(X(n))return{data:null,error:n};throw n}}async deleteBucket(e){var t=this;try{return{data:await Nl(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(X(n))return{data:null,error:n};throw n}}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},_v=class{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=D(D({},Dh),t),this.fetch=xl(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var t=this;try{return{data:await et(t.fetch,`${t.url}/bucket`,{name:e},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(X(n))return{data:null,error:n};throw n}}async listBuckets(e){var t=this;try{const n=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&n.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&n.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&n.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&n.set("sortOrder",e.sortOrder),e!=null&&e.search&&n.set("search",e.search);const r=n.toString(),s=r?`${t.url}/bucket?${r}`:`${t.url}/bucket`;return{data:await Kr(t.fetch,s,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(X(n))return{data:null,error:n};throw n}}async deleteBucket(e){var t=this;try{return{data:await Nl(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(X(n))return{data:null,error:n};throw n}}from(e){var t=this;if(!lv(e))throw new Ai("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new sv({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(n,{get(s,i){const o=s[i];return typeof o!="function"?o:async(...l)=>{try{return{data:await o.apply(s,l),error:null}}catch(c){if(r)throw c;return{data:null,error:c}}}}})}};const jl={"X-Client-Info":`storage-js/${$h}`,"Content-Type":"application/json"};var Lh=class extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function Ue(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}var ha=class extends Lh{constructor(e,t,n){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},xv=class extends Lh{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}};const Sl=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),Nv=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Hc=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),jv=async(e,t,n)=>{if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(n!=null&&n.noResolveJson)){const r=e.status||500,s=e;if(typeof s.json=="function")s.json().then(i=>{const o=(i==null?void 0:i.statusCode)||(i==null?void 0:i.code)||r+"";t(new ha(Hc(i),r,o))}).catch(()=>{const i=r+"";t(new ha(s.statusText||`HTTP ${r} error`,r,i))});else{const i=r+"";t(new ha(s.statusText||`HTTP ${r} error`,r,i))}}else t(new xv(Hc(e),e))},Sv=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!r?s:(Nv(r)?(s.headers=D({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(r)):s.body=r,D(D({},s),n))};async function kv(e,t,n,r,s,i){return new Promise((o,l)=>{e(n,Sv(t,r,s,i)).then(c=>{if(!c.ok)throw c;if(r!=null&&r.noResolveJson)return c;const d=c.headers.get("content-type");return!d||!d.includes("application/json")?{}:c.json()}).then(c=>o(c)).catch(c=>jv(c,l,r))})}async function Me(e,t,n,r,s){return kv(e,"POST",t,r,s,n)}var bv=class{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=D(D({},jl),t),this.fetch=Sl(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(e){var t=this;try{return{data:await Me(t.fetch,`${t.url}/CreateIndex`,e,{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Ue(n))return{data:null,error:n};throw n}}async getIndex(e,t){var n=this;try{return{data:await Me(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Ue(r))return{data:null,error:r};throw r}}async listIndexes(e){var t=this;try{return{data:await Me(t.fetch,`${t.url}/ListIndexes`,e,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Ue(n))return{data:null,error:n};throw n}}async deleteIndex(e,t){var n=this;try{return{data:await Me(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:n.headers})||{},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Ue(r))return{data:null,error:r};throw r}}},Ev=class{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=D(D({},jl),t),this.fetch=Sl(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(e){var t=this;try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await Me(t.fetch,`${t.url}/PutVectors`,e,{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Ue(n))return{data:null,error:n};throw n}}async getVectors(e){var t=this;try{return{data:await Me(t.fetch,`${t.url}/GetVectors`,e,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Ue(n))return{data:null,error:n};throw n}}async listVectors(e){var t=this;try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:await Me(t.fetch,`${t.url}/ListVectors`,e,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Ue(n))return{data:null,error:n};throw n}}async queryVectors(e){var t=this;try{return{data:await Me(t.fetch,`${t.url}/QueryVectors`,e,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Ue(n))return{data:null,error:n};throw n}}async deleteVectors(e){var t=this;try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await Me(t.fetch,`${t.url}/DeleteVectors`,e,{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Ue(n))return{data:null,error:n};throw n}}},Cv=class{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=D(D({},jl),t),this.fetch=Sl(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var t=this;try{return{data:await Me(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Ue(n))return{data:null,error:n};throw n}}async getBucket(e){var t=this;try{return{data:await Me(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:e},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Ue(n))return{data:null,error:n};throw n}}async listBuckets(e={}){var t=this;try{return{data:await Me(t.fetch,`${t.url}/ListVectorBuckets`,e,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Ue(n))return{data:null,error:n};throw n}}async deleteBucket(e){var t=this;try{return{data:await Me(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Ue(n))return{data:null,error:n};throw n}}},Tv=class extends Cv{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new Rv(this.url,this.headers,e,this.fetch)}async createBucket(e){var t=()=>super.createBucket,n=this;return t().call(n,e)}async getBucket(e){var t=()=>super.getBucket,n=this;return t().call(n,e)}async listBuckets(e={}){var t=()=>super.listBuckets,n=this;return t().call(n,e)}async deleteBucket(e){var t=()=>super.deleteBucket,n=this;return t().call(n,e)}},Rv=class extends bv{constructor(e,t,n,r){super(e,t,r),this.vectorBucketName=n}async createIndex(e){var t=()=>super.createIndex,n=this;return t().call(n,D(D({},e),{},{vectorBucketName:n.vectorBucketName}))}async listIndexes(e={}){var t=()=>super.listIndexes,n=this;return t().call(n,D(D({},e),{},{vectorBucketName:n.vectorBucketName}))}async getIndex(e){var t=()=>super.getIndex,n=this;return t().call(n,n.vectorBucketName,e)}async deleteIndex(e){var t=()=>super.deleteIndex,n=this;return t().call(n,n.vectorBucketName,e)}index(e){return new Iv(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},Iv=class extends Ev{constructor(e,t,n,r,s){super(e,t,s),this.vectorBucketName=n,this.indexName=r}async putVectors(e){var t=()=>super.putVectors,n=this;return t().call(n,D(D({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async getVectors(e){var t=()=>super.getVectors,n=this;return t().call(n,D(D({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async listVectors(e={}){var t=()=>super.listVectors,n=this;return t().call(n,D(D({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async queryVectors(e){var t=()=>super.queryVectors,n=this;return t().call(n,D(D({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async deleteVectors(e){var t=()=>super.deleteVectors,n=this;return t().call(n,D(D({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}},Av=class extends wv{constructor(e,t={},n,r){super(e,t,n,r)}from(e){return new yv(this.url,this.headers,e,this.fetch)}get vectors(){return new Tv(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new _v(this.url+"/iceberg",this.headers,this.fetch)}};const Uh="2.89.0",bn=30*1e3,No=3,fa=No*bn,Ov="http://localhost:9999",Pv="supabase.auth.token",$v={"X-Client-Info":`gotrue-js/${Uh}`},jo="X-Supabase-Api-Version",Mh={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Dv=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Lv=10*60*1e3;class Jr extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function O(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class Uv extends Jr{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function Mv(e){return O(e)&&e.name==="AuthApiError"}class en extends Jr{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class jt extends Jr{constructor(t,n,r,s){super(t,r,s),this.name=n,this.status=r}}class De extends jt{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Fv(e){return O(e)&&e.name==="AuthSessionMissingError"}class gn extends jt{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ks extends jt{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class bs extends jt{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function zv(e){return O(e)&&e.name==="AuthImplicitGrantRedirectError"}class Gc extends jt{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Bv extends jt{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class So extends jt{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function ma(e){return O(e)&&e.name==="AuthRetryableFetchError"}class Wc extends jt{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class ko extends jt{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const di="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),qc=` 	
\r=`.split(""),Vv=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<qc.length;t+=1)e[qc[t].charCodeAt(0)]=-2;for(let t=0;t<di.length;t+=1)e[di[t].charCodeAt(0)]=t;return e})();function Kc(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(di[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(di[r]),t.queuedBits-=6}}function Fh(e,t,n){const r=Vv[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Jc(e){const t=[],n=o=>{t.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{Wv(o,r,n)};for(let o=0;o<e.length;o+=1)Fh(e.charCodeAt(o),s,i);return t.join("")}function Hv(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function Gv(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}Hv(r,t)}}function Wv(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if(!(e>>7-r&1)){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function qn(e){const t=[],n={queue:0,queuedBits:0},r=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)Fh(e.charCodeAt(s),n,r);return new Uint8Array(t)}function qv(e){const t=[];return Gv(e,n=>t.push(n)),new Uint8Array(t)}function sn(e){const t=[],n={queue:0,queuedBits:0},r=s=>{t.push(s)};return e.forEach(s=>Kc(s,n,r)),Kc(null,n,r),t.join("")}function Kv(e){return Math.round(Date.now()/1e3)+e}function Jv(){return Symbol("auth-callback")}const we=()=>typeof window<"u"&&typeof document<"u",Kt={tested:!1,writable:!1},zh=()=>{if(!we())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Kt.tested)return Kt.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Kt.tested=!0,Kt.writable=!0}catch{Kt.tested=!0,Kt.writable=!1}return Kt.writable};function Qv(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return n.searchParams.forEach((r,s)=>{t[s]=r}),t}const Bh=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),Yv=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",En=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},Jt=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},ge=async(e,t)=>{await e.removeItem(t)};class Oi{constructor(){this.promise=new Oi.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}Oi.promiseConstructor=Promise;function pa(e){const t=e.split(".");if(t.length!==3)throw new ko("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!Dv.test(t[r]))throw new ko("JWT not in base64url format");return{header:JSON.parse(Jc(t[0])),payload:JSON.parse(Jc(t[1])),signature:qn(t[2]),raw:{header:t[0],payload:t[1]}}}async function Xv(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function Zv(e,t){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){r(o);return}}catch(o){if(!t(i,o)){s(o);return}}})()})}function eg(e){return("0"+e.toString(16)).substr(-2)}function tg(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let i=0;i<56;i++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(t),Array.from(t,eg).join("")}async function ng(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function rg(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await ng(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function yn(e,t,n=!1){const r=tg();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await En(e,`${t}-code-verifier`,s);const i=await rg(r);return[i,r===i?"plain":"s256"]}const sg=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function ig(e){const t=e.headers.get(jo);if(!t||!t.match(sg))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function ag(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function og(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const lg=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function wn(e){if(!lg.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function va(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function cg(e,t){return new Proxy(e,{get:(n,r,s)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const i=r.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,s)}return!t.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(n,r,s)}})}function Qc(e){return JSON.parse(JSON.stringify(e))}const Xt=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),ug=[502,503,504];async function Yc(e){var t;if(!Yv(e))throw new So(Xt(e),0);if(ug.includes(e.status))throw new So(Xt(e),e.status);let n;try{n=await e.json()}catch(i){throw new en(Xt(i),i)}let r;const s=ig(e);if(s&&s.getTime()>=Mh["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Wc(Xt(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new De}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new Wc(Xt(n),e.status,n.weak_password.reasons);throw new Uv(Xt(n),e.status||500,r)}const dg=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function $(e,t,n,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[jo]||(i[jo]=Mh["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await hg(e,t,n+l,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function hg(e,t,n,r,s,i){const o=dg(t,r,s,i);let l;try{l=await e(n,Object.assign({},o))}catch(c){throw console.error(c),new So(Xt(c),0)}if(l.ok||await Yc(l),r!=null&&r.noResolveJson)return l;try{return await l.json()}catch(c){await Yc(c)}}function Xe(e){var t;let n=null;pg(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=Kv(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function Xc(e){const t=Xe(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Rt(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function fg(e){return{data:e,error:null}}function mg(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i}=e,o=Ii(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function Zc(e){return e}function pg(e){return e.access_token&&e.refresh_token&&e.expires_in}const ga=["global","local","others"];class vg{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=Bh(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,n=ga[0]){if(ga.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${ga.join(", ")}`);try{return await $(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(O(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await $(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Rt})}catch(r){if(O(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=Ii(t,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await $(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:mg,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(O(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await $(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Rt})}catch(n){if(O(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,s,i,o,l,c;try{const d={nextPage:null,lastPage:0,total:0},h=await $(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:Zc});if(h.error)throw h.error;const y=await h.json(),v=(o=h.headers.get("x-total-count"))!==null&&o!==void 0?o:0,x=(c=(l=h.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return x.length>0&&(x.forEach(_=>{const g=parseInt(_.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(_.split(";")[1].split("=")[1]);d[`${w}Page`]=g}),d.total=parseInt(v)),{data:Object.assign(Object.assign({},y),d),error:null}}catch(d){if(O(d))return{data:{users:[]},error:d};throw d}}async getUserById(t){wn(t);try{return await $(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Rt})}catch(n){if(O(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){wn(t);try{return await $(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:Rt})}catch(r){if(O(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){wn(t);try{return await $(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:Rt})}catch(r){if(O(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){wn(t.userId);try{const{data:n,error:r}=await $(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(O(n))return{data:null,error:n};throw n}}async _deleteFactor(t){wn(t.userId),wn(t.id);try{return{data:await $(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(O(n))return{data:null,error:n};throw n}}async _listOAuthClients(t){var n,r,s,i,o,l,c;try{const d={nextPage:null,lastPage:0,total:0},h=await $(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:Zc});if(h.error)throw h.error;const y=await h.json(),v=(o=h.headers.get("x-total-count"))!==null&&o!==void 0?o:0,x=(c=(l=h.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return x.length>0&&(x.forEach(_=>{const g=parseInt(_.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(_.split(";")[1].split("=")[1]);d[`${w}Page`]=g}),d.total=parseInt(v)),{data:Object.assign(Object.assign({},y),d),error:null}}catch(d){if(O(d))return{data:{clients:[]},error:d};throw d}}async _createOAuthClient(t){try{return await $(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(O(n))return{data:null,error:n};throw n}}async _getOAuthClient(t){try{return await $(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(O(n))return{data:null,error:n};throw n}}async _updateOAuthClient(t,n){try{return await $(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(O(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(t){try{return await $(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(O(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(t){try{return await $(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(O(n))return{data:null,error:n};throw n}}}function eu(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const _n={debug:!!(globalThis&&zh()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Vh extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class gg extends Vh{}async function yg(e,t,n){_n.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),_n.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){_n.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await n()}finally{_n.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw _n.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new gg(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(_n.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function wg(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Hh(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function _g(e){return parseInt(e,16)}function xg(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,r=>r.toString(16).padStart(2,"0")).join("")}function Ng(e){var t;const{chainId:n,domain:r,expirationTime:s,issuedAt:i=new Date,nonce:o,notBefore:l,requestId:c,resources:d,scheme:h,uri:y,version:v}=e;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!y)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(v!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${v}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const x=Hh(e.address),_=h?`${h}://${r}`:r,g=e.statement?`${e.statement}
`:"",w=`${_} wants you to sign in with your Ethereum account:
${x}

${g}`;let m=`URI: ${y}
Version: ${v}
Chain ID: ${n}${o?`
Nonce: ${o}`:""}
Issued At: ${i.toISOString()}`;if(s&&(m+=`
Expiration Time: ${s.toISOString()}`),l&&(m+=`
Not Before: ${l.toISOString()}`),c&&(m+=`
Request ID: ${c}`),d){let u=`
Resources:`;for(const f of d){if(!f||typeof f!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${f}`);u+=`
- ${f}`}m+=u}return`${w}
${m}`}class le extends Error{constructor({message:t,code:n,cause:r,name:s}){var i;super(t,{cause:r}),this.__isWebAuthnError=!0,this.name=(i=s??(r instanceof Error?r.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=n}}class hi extends le{constructor(t,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:t}),this.name="WebAuthnUnknownError",this.originalError=n}}function jg({error:e,options:t}){var n,r,s;const{publicKey:i}=t;if(!i)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new le({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((n=i.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new le({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((r=i.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new le({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new le({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new le({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new le({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return i.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new le({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new le({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const o=window.location.hostname;if(Gh(o)){if(i.rp.id!==o)return new le({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new le({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new le({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new le({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new le({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function Sg({error:e,options:t}){const{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new le({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new le({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const r=window.location.hostname;if(Gh(r)){if(n.rpId!==r)return new le({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new le({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new le({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new le({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class kg{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const bg=new kg;function Eg(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:n,excludeCredentials:r}=e,s=Ii(e,["challenge","user","excludeCredentials"]),i=qn(t).buffer,o=Object.assign(Object.assign({},n),{id:qn(n.id).buffer}),l=Object.assign(Object.assign({},s),{challenge:i,user:o});if(r&&r.length>0){l.excludeCredentials=new Array(r.length);for(let c=0;c<r.length;c++){const d=r[c];l.excludeCredentials[c]=Object.assign(Object.assign({},d),{id:qn(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return l}function Cg(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:n}=e,r=Ii(e,["challenge","allowCredentials"]),s=qn(t).buffer,i=Object.assign(Object.assign({},r),{challenge:s});if(n&&n.length>0){i.allowCredentials=new Array(n.length);for(let o=0;o<n.length;o++){const l=n[o];i.allowCredentials[o]=Object.assign(Object.assign({},l),{id:qn(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return i}function Tg(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e;return{id:e.id,rawId:e.id,response:{attestationObject:sn(new Uint8Array(e.response.attestationObject)),clientDataJSON:sn(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function Rg(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e,r=e.getClientExtensionResults(),s=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:sn(new Uint8Array(s.authenticatorData)),clientDataJSON:sn(new Uint8Array(s.clientDataJSON)),signature:sn(new Uint8Array(s.signature)),userHandle:s.userHandle?sn(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function Gh(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function tu(){var e,t;return!!(we()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function Ig(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new hi("Browser returned unexpected credential type",t)}:{data:null,error:new hi("Empty credential response",t)}}catch(t){return{data:null,error:jg({error:t,options:e})}}}async function Ag(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new hi("Browser returned unexpected credential type",t)}:{data:null,error:new hi("Empty credential response",t)}}catch(t){return{data:null,error:Sg({error:t,options:e})}}}const Og={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},Pg={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function fi(...e){const t=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),n=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),r={};for(const s of e)if(s)for(const i in s){const o=s[i];if(o!==void 0)if(Array.isArray(o))r[i]=o;else if(n(o))r[i]=o;else if(t(o)){const l=r[i];t(l)?r[i]=fi(l,o):r[i]=fi(o)}else r[i]=o}return r}function $g(e,t){return fi(Og,e,t||{})}function Dg(e,t){return fi(Pg,e,t||{})}class Lg{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:n,friendlyName:r,signal:s},i){try{const{data:o,error:l}=await this.client.mfa.challenge({factorId:t,webauthn:n});if(!o)return{data:null,error:l};const c=s??bg.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:d}=o.webauthn.credential_options.publicKey;d.name||(d.name=`${d.id}:${r}`),d.displayName||(d.displayName=d.name)}switch(o.webauthn.type){case"create":{const d=$g(o.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:h,error:y}=await Ig({publicKey:d,signal:c});return h?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:h}},error:null}:{data:null,error:y}}case"request":{const d=Dg(o.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:h,error:y}=await Ag(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:d,signal:c}));return h?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:h}},error:null}:{data:null,error:y}}}}catch(o){return O(o)?{data:null,error:o}:{data:null,error:new en("Unexpected error in challenge",o)}}}async _verify({challengeId:t,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:t,webauthn:r})}async _authenticate({factorId:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!n)return{data:null,error:new Jr("rpId is required for WebAuthn authentication")};try{if(!tu())return{data:null,error:new en("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this.challenge({factorId:t,webauthn:{rpId:n,rpOrigins:r},signal:s},{request:i});if(!o)return{data:null,error:l};const{webauthn:c}=o;return this._verify({factorId:t,challengeId:o.challengeId,webauthn:{type:c.type,rpId:n,rpOrigins:r,credential_response:c.credential_response}})}catch(o){return O(o)?{data:null,error:o}:{data:null,error:new en("Unexpected error in authenticate",o)}}}async _register({friendlyName:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!n)return{data:null,error:new Jr("rpId is required for WebAuthn registration")};try{if(!tu())return{data:null,error:new en("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this._enroll({friendlyName:t});if(!o)return await this.client.mfa.listFactors().then(h=>{var y;return(y=h.data)===null||y===void 0?void 0:y.all.find(v=>v.factor_type==="webauthn"&&v.friendly_name===t&&v.status!=="unverified")}).then(h=>h?this.client.mfa.unenroll({factorId:h==null?void 0:h.id}):void 0),{data:null,error:l};const{data:c,error:d}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:s},{create:i});return c?this._verify({factorId:o.id,challengeId:c.challengeId,webauthn:{rpId:n,rpOrigins:r,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:d}}catch(o){return O(o)?{data:null,error:o}:{data:null,error:new en("Unexpected error in register",o)}}}}wg();const Ug={url:Ov,storageKey:Pv,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:$v,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function nu(e,t,n){return await n()}const xn={};class Qr{get jwks(){var t,n;return(n=(t=xn[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){xn[this.storageKey]=Object.assign(Object.assign({},xn[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=xn[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){xn[this.storageKey]=Object.assign(Object.assign({},xn[this.storageKey]),{cachedAt:t})}constructor(t){var n,r,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},Ug),t);if(this.storageKey=i.storageKey,this.instanceID=(n=Qr.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,Qr.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&we()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new vg({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=Bh(i.fetch),this.lock=i.lock||nu,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,i.lock?this.lock=i.lock:this.persistSession&&we()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=yg:this.lock=nu,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Lg(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:zh()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=eu(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=eu(this.memoryStorage)),we()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Uh}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let n={},r="none";if(we()&&(n=Qv(window.location.href),this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce")),we()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),zv(i)){const c=(t=i.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return O(n)?this._returnResult({error:n}):this._returnResult({error:new en("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,s;try{const i=await $(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:Xe}),{data:o,error:l}=i;if(l||!o)return this._returnResult({data:{user:null,session:null},error:l});const c=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:d,session:c},error:null})}catch(i){if(O(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(t){var n,r,s;try{let i;if("email"in t){const{email:h,password:y,options:v}=t;let x=null,_=null;this.flowType==="pkce"&&([x,_]=await yn(this.storage,this.storageKey)),i=await $(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:v==null?void 0:v.emailRedirectTo,body:{email:h,password:y,data:(n=v==null?void 0:v.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken},code_challenge:x,code_challenge_method:_},xform:Xe})}else if("phone"in t){const{phone:h,password:y,options:v}=t;i=await $(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:y,data:(r=v==null?void 0:v.data)!==null&&r!==void 0?r:{},channel:(s=v==null?void 0:v.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken}},xform:Xe})}else throw new ks("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return await ge(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:l});const c=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:d,session:c},error:null})}catch(i){if(await ge(this.storage,`${this.storageKey}-code-verifier`),O(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(t){try{let n;if("email"in t){const{email:i,password:o,options:l}=t;n=await $(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Xc})}else if("phone"in t){const{phone:i,password:o,options:l}=t;n=await $(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Xc})}else throw new ks("You must provide either an email or phone number and a password");const{data:r,error:s}=n;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!r||!r.session||!r.user){const i=new gn;return this._returnResult({data:{user:null,session:null},error:i})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(O(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(t){var n,r,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;switch(n){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(t){var n,r,s,i,o,l,c,d,h,y,v;let x,_;if("message"in t)x=t.message,_=t.signature;else{const{chain:g,wallet:w,statement:m,options:u}=t;let f;if(we())if(typeof w=="object")f=w;else{const S=window;if("ethereum"in S&&typeof S.ethereum=="object"&&"request"in S.ethereum&&typeof S.ethereum.request=="function")f=S.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!(u!=null&&u.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");f=w}const p=new URL((n=u==null?void 0:u.url)!==null&&n!==void 0?n:window.location.href),N=await f.request({method:"eth_requestAccounts"}).then(S=>S).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!N||N.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const j=Hh(N[0]);let k=(r=u==null?void 0:u.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!k){const S=await f.request({method:"eth_chainId"});k=_g(S)}const b={domain:p.host,address:j,statement:m,uri:p.href,version:"1",chainId:k,nonce:(s=u==null?void 0:u.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(o=(i=u==null?void 0:u.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(l=u==null?void 0:u.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(c=u==null?void 0:u.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(d=u==null?void 0:u.signInWithEthereum)===null||d===void 0?void 0:d.requestId,resources:(h=u==null?void 0:u.signInWithEthereum)===null||h===void 0?void 0:h.resources};x=Ng(b),_=await f.request({method:"personal_sign",params:[xg(x),j]})}try{const{data:g,error:w}=await $(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:x,signature:_},!((y=t.options)===null||y===void 0)&&y.captchaToken?{gotrue_meta_security:{captcha_token:(v=t.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:Xe});if(w)throw w;if(!g||!g.session||!g.user){const m=new gn;return this._returnResult({data:{user:null,session:null},error:m})}return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),this._returnResult({data:Object.assign({},g),error:w})}catch(g){if(O(g))return this._returnResult({data:{user:null,session:null},error:g});throw g}}async signInWithSolana(t){var n,r,s,i,o,l,c,d,h,y,v,x;let _,g;if("message"in t)_=t.message,g=t.signature;else{const{chain:w,wallet:m,statement:u,options:f}=t;let p;if(we())if(typeof m=="object")p=m;else{const j=window;if("solana"in j&&typeof j.solana=="object"&&("signIn"in j.solana&&typeof j.solana.signIn=="function"||"signMessage"in j.solana&&typeof j.solana.signMessage=="function"))p=j.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof m!="object"||!(f!=null&&f.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");p=m}const N=new URL((n=f==null?void 0:f.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in p&&p.signIn){const j=await p.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},f==null?void 0:f.signInWithSolana),{version:"1",domain:N.host,uri:N.href}),u?{statement:u}:null));let k;if(Array.isArray(j)&&j[0]&&typeof j[0]=="object")k=j[0];else if(j&&typeof j=="object"&&"signedMessage"in j&&"signature"in j)k=j;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in k&&"signature"in k&&(typeof k.signedMessage=="string"||k.signedMessage instanceof Uint8Array)&&k.signature instanceof Uint8Array)_=typeof k.signedMessage=="string"?k.signedMessage:new TextDecoder().decode(k.signedMessage),g=k.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in p)||typeof p.signMessage!="function"||!("publicKey"in p)||typeof p!="object"||!p.publicKey||!("toBase58"in p.publicKey)||typeof p.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");_=[`${N.host} wants you to sign in with your Solana account:`,p.publicKey.toBase58(),...u?["",u,""]:[""],"Version: 1",`URI: ${N.href}`,`Issued At: ${(s=(r=f==null?void 0:f.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=f==null?void 0:f.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${f.signInWithSolana.notBefore}`]:[],...!((o=f==null?void 0:f.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${f.signInWithSolana.expirationTime}`]:[],...!((l=f==null?void 0:f.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${f.signInWithSolana.chainId}`]:[],...!((c=f==null?void 0:f.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${f.signInWithSolana.nonce}`]:[],...!((d=f==null?void 0:f.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${f.signInWithSolana.requestId}`]:[],...!((y=(h=f==null?void 0:f.signInWithSolana)===null||h===void 0?void 0:h.resources)===null||y===void 0)&&y.length?["Resources",...f.signInWithSolana.resources.map(k=>`- ${k}`)]:[]].join(`
`);const j=await p.signMessage(new TextEncoder().encode(_),"utf8");if(!j||!(j instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=j}}try{const{data:w,error:m}=await $(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:_,signature:sn(g)},!((v=t.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(x=t.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:Xe});if(m)throw m;if(!w||!w.session||!w.user){const u=new gn;return this._returnResult({data:{user:null,session:null},error:u})}return w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),this._returnResult({data:Object.assign({},w),error:m})}catch(w){if(O(w))return this._returnResult({data:{user:null,session:null},error:w});throw w}}async _exchangeCodeForSession(t){const n=await Jt(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{if(!r&&this.flowType==="pkce")throw new Bv;const{data:i,error:o}=await $(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:Xe});if(await ge(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!i||!i.session||!i.user){const l=new gn;return this._returnResult({data:{user:null,session:null,redirectType:null},error:l})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(await ge(this.storage,`${this.storageKey}-code-verifier`),O(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(t){try{const{options:n,provider:r,token:s,access_token:i,nonce:o}=t,l=await $(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Xe}),{data:c,error:d}=l;if(d)return this._returnResult({data:{user:null,session:null},error:d});if(!c||!c.session||!c.user){const h=new gn;return this._returnResult({data:{user:null,session:null},error:h})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:c,error:d})}catch(n){if(O(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(t){var n,r,s,i,o;try{if("email"in t){const{email:l,options:c}=t;let d=null,h=null;this.flowType==="pkce"&&([d,h]=await yn(this.storage,this.storageKey));const{error:y}=await $(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:d,code_challenge_method:h},redirectTo:c==null?void 0:c.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:y})}if("phone"in t){const{phone:l,options:c}=t,{data:d,error:h}=await $(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:h})}throw new ks("You must provide either an email or phone number.")}catch(l){if(await ge(this.storage,`${this.storageKey}-code-verifier`),O(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async verifyOtp(t){var n,r;try{let s,i;"options"in t&&(s=(n=t.options)===null||n===void 0?void 0:n.redirectTo,i=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:l}=await $(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:Xe});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,d=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),this._returnResult({data:{user:d,session:c},error:null})}catch(s){if(O(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithSSO(t){var n,r,s,i,o;try{let l=null,c=null;this.flowType==="pkce"&&([l,c]=await yn(this.storage,this.storageKey));const d=await $(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:c}),headers:this.headers,xform:fg});return!((i=d.data)===null||i===void 0)&&i.url&&we()&&!(!((o=t.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(d.data.url),this._returnResult(d)}catch(l){if(await ge(this.storage,`${this.storageKey}-code-verifier`),O(l))return this._returnResult({data:null,error:l});throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new De;const{error:s}=await $(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(t){if(O(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:s,options:i}=t,{error:o}=await $(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in t){const{phone:r,type:s,options:i}=t,{data:o,error:l}=await $(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l})}throw new ks("You must provide either an email or phone number and a type")}catch(n){if(O(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await Jt(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<fa:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const o=await Jt(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=va()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};t.user=cg(t.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const n=await this._acquireLock(-1,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(t){try{return t?await $(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Rt}):await this._useSession(async n=>{var r,s,i;const{data:o,error:l}=n;if(l)throw l;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new De}:await $(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Rt})})}catch(n){if(O(n))return Fv(n)&&(await this._removeSession(),await ge(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new De;const o=s.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await yn(this.storage,this.storageKey));const{data:d,error:h}=await $(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:Rt});if(h)throw h;return o.user=d.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(r){if(await ge(this.storage,`${this.storageKey}-code-verifier`),O(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new De;const n=Date.now()/1e3;let r=n,s=!0,i=null;const{payload:o}=pa(t.access_token);if(o.exp&&(r=o.exp,s=r<=n),s){const{data:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(n){if(O(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:o,error:l}=n;if(l)throw l;t=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new De;const{data:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(O(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(t,n){try{if(!we())throw new bs("No browser detected.");if(t.error||t.error_description||t.error_code)throw new bs(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Gc("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new bs("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Gc("No code detected.");const{data:u,error:f}=await this._exchangeCodeForSession(t.code);if(f)throw f;const p=new URL(window.location.href);return p.searchParams.delete("code"),window.history.replaceState(window.history.state,"",p.toString()),{data:{session:u.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:l,expires_at:c,token_type:d}=t;if(!i||!l||!o||!d)throw new bs("No session defined in URL");const h=Math.round(Date.now()/1e3),y=parseInt(l);let v=h+y;c&&(v=parseInt(c));const x=v-h;x*1e3<=bn&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${x}s, should have been closer to ${y}s`);const _=v-y;h-_>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",_,v,h):h-_<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",_,v,h);const{data:g,error:w}=await this._getUser(i);if(w)throw w;const m={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:y,expires_at:v,refresh_token:o,token_type:d,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:m,redirectType:t.type},error:null})}catch(r){if(O(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await Jt(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return this._returnResult({error:i});const o=(r=s.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(Mv(l)&&(l.status===404||l.status===401||l.status===403)))return this._returnResult({error:l})}return t!=="others"&&(await this._removeSession(),await ge(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const n=Jv(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,s;try{const{data:{session:i},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await yn(this.storage,this.storageKey,!0));try{return await $(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(await ge(this.storage,`${this.storageKey}-code-verifier`),O(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(n){if(O(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var n;try{const{data:r,error:s}=await this._useSession(async i=>{var o,l,c,d,h;const{data:y,error:v}=i;if(v)throw v;const x=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await $(this.fetch,"GET",x,{headers:this.headers,jwt:(h=(d=y.session)===null||d===void 0?void 0:d.access_token)!==null&&h!==void 0?h:void 0})});if(s)throw s;return we()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),this._returnResult({data:{provider:t.provider,url:r==null?void 0:r.url},error:null})}catch(r){if(O(r))return this._returnResult({data:{provider:t.provider,url:null},error:r});throw r}}async linkIdentityIdToken(t){return await this._useSession(async n=>{var r;try{const{error:s,data:{session:i}}=n;if(s)throw s;const{options:o,provider:l,token:c,access_token:d,nonce:h}=t,y=await $(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=i==null?void 0:i.access_token)!==null&&r!==void 0?r:void 0,body:{provider:l,id_token:c,access_token:d,nonce:h,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Xe}),{data:v,error:x}=y;return x?this._returnResult({data:{user:null,session:null},error:x}):!v||!v.session||!v.user?this._returnResult({data:{user:null,session:null},error:new gn}):(v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("USER_UPDATED",v.session)),this._returnResult({data:v,error:x}))}catch(s){if(await ge(this.storage,`${this.storageKey}-code-verifier`),O(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)throw o;return await $(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(O(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await Zv(async s=>(s>0&&await Xv(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await $(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Xe})),(s,i)=>{const o=200*Math.pow(2,s);return i&&ma(i)&&Date.now()+o-r<bn})}catch(r){if(this._debug(n,"error",r),O(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),we()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await Jt(this.storage,this.storageKey);if(s&&this.userStorage){let o=await Jt(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await En(this.userStorage,this.storageKey+"-user",o)),s.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:va()}else if(s&&!s.user&&!s.user){const o=await Jt(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(s.user=o.user,await ge(this.storage,this.storageKey+"-user"),await En(this.storage,this.storageKey,s)):s.user=va()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const i=((n=s.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<fa;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${fa}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),ma(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(s.access_token);!l&&(o!=null&&o.user)?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new De;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Oi;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new De;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={data:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(s,"error",i),O(i)){const o={data:null,error:i};return ma(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,n,r=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,n)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await ge(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},t),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await En(this.userStorage,this.storageKey+"-user",{user:n.user});const s=Object.assign({},n);delete s.user;const i=Qc(s);await En(this.storage,this.storageKey,i)}else{const s=Qc(n);await En(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await ge(this.storage,this.storageKey),await ge(this.storage,this.storageKey+"-code-verifier"),await ge(this.storage,this.storageKey+"-user"),this.userStorage&&await ge(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&we()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),bn);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-t)/bn);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${bn}ms, refresh threshold is ${No} ticks`),s<=No&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Vh)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!we()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=await yn(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(l.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?this._returnResult({data:null,error:i}):await $(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(O(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)return this._returnResult({data:null,error:o});const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:c,error:d}=await $(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return d?this._returnResult({data:null,error:d}):(t.factorType==="totp"&&c.type==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),this._returnResult({data:c,error:null}))})}catch(n){if(O(n))return this._returnResult({data:null,error:n});throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return this._returnResult({data:null,error:i});const o=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?Tg(t.webauthn.credential_response):Rg(t.webauthn.credential_response)})}:{code:t.code}),{data:l,error:c}=await $(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:o,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return c?this._returnResult({data:null,error:c}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),this._returnResult({data:l,error:c}))})}catch(n){if(O(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return this._returnResult({data:null,error:i});const o=await $(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});if(o.error)return o;const{data:l}=o;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:Eg(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:Cg(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(O(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){var t;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const s={all:[],phone:[],totp:[],webauthn:[]};for(const i of(t=n==null?void 0:n.factors)!==null&&t!==void 0?t:[])s.all.push(i),i.status==="verified"&&s[i.factor_type].push(i);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){var t,n;const{data:{session:r},error:s}=await this.getSession();if(s)return this._returnResult({data:null,error:s});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=pa(r.access_token);let o=null;i.aal&&(o=i.aal);let l=o;((n=(t=r.user.factors)===null||t===void 0?void 0:t.filter(h=>h.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(l="aal2");const d=i.amr||[];return{data:{currentLevel:o,nextLevel:l,currentAuthenticationMethods:d},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async n=>{const{data:{session:r},error:s}=n;return s?this._returnResult({data:null,error:s}):r?await $(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:r.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new De})})}catch(n){if(O(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(t,n){try{return await this._useSession(async r=>{const{data:{session:s},error:i}=r;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new De});const o=await $(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&we()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(r){if(O(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(t,n){try{return await this._useSession(async r=>{const{data:{session:s},error:i}=r;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new De});const o=await $(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&we()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(r){if(O(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;return r?this._returnResult({data:null,error:r}):n?await $(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new De})})}catch(t){if(O(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async n=>{const{data:{session:r},error:s}=n;return s?this._returnResult({data:null,error:s}):r?(await $(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new De})})}catch(n){if(O(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(l=>l.kid===t);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(l=>l.kid===t),r&&this.jwks_cached_at+Lv>s)return r;const{data:i,error:o}=await $(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,r=i.keys.find(l=>l.kid===t),!r)?null:r}async getClaims(t,n={}){try{let r=t;if(!r){const{data:x,error:_}=await this.getSession();if(_||!x.session)return this._returnResult({data:null,error:_});r=x.session.access_token}const{header:s,payload:i,signature:o,raw:{header:l,payload:c}}=pa(r);n!=null&&n.allowExpired||ag(i.exp);const d=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!d){const{error:x}=await this.getUser(r);if(x)throw x;return{data:{claims:i,header:s,signature:o},error:null}}const h=og(s.alg),y=await crypto.subtle.importKey("jwk",d,h,!0,["verify"]);if(!await crypto.subtle.verify(h,y,o,qv(`${l}.${c}`)))throw new ko("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(r){if(O(r))return this._returnResult({data:null,error:r});throw r}}}Qr.nextInstanceID={};const Mg=Qr,Fg="2.89.0";let gr="";typeof Deno<"u"?gr="deno":typeof document<"u"?gr="web":typeof navigator<"u"&&navigator.product==="ReactNative"?gr="react-native":gr="node";const zg={"X-Client-Info":`supabase-js-${gr}/${Fg}`},Bg={headers:zg},Vg={schema:"public"},Hg={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Gg={};function Yr(e){"@babel/helpers - typeof";return Yr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yr(e)}function Wg(e,t){if(Yr(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Yr(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function qg(e){var t=Wg(e,"string");return Yr(t)=="symbol"?t:t+""}function Kg(e,t,n){return(t=qg(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ru(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function ne(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ru(Object(n),!0).forEach(function(r){Kg(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ru(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}const Jg=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),Qg=()=>Headers,Yg=(e,t,n)=>{const r=Jg(n),s=Qg();return async(i,o)=>{var l;const c=(l=await t())!==null&&l!==void 0?l:e;let d=new s(o==null?void 0:o.headers);return d.has("apikey")||d.set("apikey",e),d.has("Authorization")||d.set("Authorization",`Bearer ${c}`),r(i,ne(ne({},o),{},{headers:d}))}};function Xg(e){return e.endsWith("/")?e:e+"/"}function Zg(e,t){var n,r;const{db:s,auth:i,realtime:o,global:l}=e,{db:c,auth:d,realtime:h,global:y}=t,v={db:ne(ne({},c),s),auth:ne(ne({},d),i),realtime:ne(ne({},h),o),storage:{},global:ne(ne(ne({},y),l),{},{headers:ne(ne({},(n=y==null?void 0:y.headers)!==null&&n!==void 0?n:{}),(r=l==null?void 0:l.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return e.accessToken?v.accessToken=e.accessToken:delete v.accessToken,v}function ey(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Xg(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var ty=class extends Mg{constructor(e){super(e)}},ny=class{constructor(e,t,n){var r,s;this.supabaseUrl=e,this.supabaseKey=t;const i=ey(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",i),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",i),this.storageUrl=new URL("storage/v1",i),this.functionsUrl=new URL("functions/v1",i);const o=`sb-${i.hostname.split(".")[0]}-auth-token`,l={db:Vg,realtime:Gg,auth:ne(ne({},Hg),{},{storageKey:o}),global:Bg},c=Zg(n??{},l);if(this.storageKey=(r=c.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(s=c.global.headers)!==null&&s!==void 0?s:{},c.accessToken)this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(h,y)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(y)} is not possible`)}});else{var d;this.auth=this._initSupabaseAuthClient((d=c.auth)!==null&&d!==void 0?d:{},this.headers,c.global.fetch)}this.fetch=Yg(t,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(ne({headers:this.headers,accessToken:this._getAccessToken.bind(this)},c.realtime)),this.accessToken&&this.accessToken().then(h=>this.realtime.setAuth(h)).catch(h=>console.warn("Failed to set initial Realtime auth token:",h)),this.rest=new $p(new URL("rest/v1",i).href,{headers:this.headers,schema:c.db.schema,fetch:this.fetch}),this.storage=new Av(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),c.accessToken||this._listenForAuthEvents()}get functions(){return new Rp(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,n)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e=this,t,n;if(e.accessToken)return await e.accessToken();const{data:r}=await e.auth.getSession();return(t=(n=r.session)===null||n===void 0?void 0:n.access_token)!==null&&t!==void 0?t:e.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,userStorage:s,storageKey:i,flowType:o,lock:l,debug:c,throwOnError:d},h,y){const v={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new ty({url:this.authUrl.href,headers:ne(ne({},v),h),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,userStorage:s,flowType:o,lock:l,debug:c,throwOnError:d,fetch:y,hasCustomAuthorizationHeader:Object.keys(this.headers).some(x=>x.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new Xp(this.realtimeUrl.href,ne(ne({},e),{},{params:ne(ne({},{apikey:this.supabaseKey}),e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",t==null?void 0:t.access_token)})}_handleTokenChanged(e,t,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const ry=(e,t,n)=>new ny(e,t,n);function sy(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}sy()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");function kl(e,t=[]){const n=iy(e),r=ay(n),s=ly(r),i=hy(s),o=gy(i,t),l=yy(o),c=Ny(l);return{l0:n,l1:r,l2:s,l3:i,l4:o,l5:l,l6:c}}function iy(e){return{companies:e.companies||[],rounds:e.rounds||[],goals:e.goals||[],investors:e.investors||[],companyInvestors:e.companyInvestors||[],talent:e.talent||[],employees:e.employees||[],timestamp:Date.now()}}function ay(e){const t=e.companies.map(i=>Wh(i,e)),n=e.rounds.map(i=>qh(i,e)),r=e.goals.map(i=>Kh(i)),s=e.investors.map(i=>oy(i,e));return{...e,companies:t,rounds:n,goals:r,investors:s}}function Wh(e,t){var w,m,u;const n=Date.now(),r=(e.mrr||0)*12,s=(e.monthlyBurn||0)>0?(e.cashOnHand||0)/e.monthlyBurn:null,i=(e.mrr||0)>0?(e.monthlyBurn||0)/e.mrr:null,o=e.lastMaterialUpdateAt?Math.floor((n-new Date(e.lastMaterialUpdateAt))/864e5):null,l=e.foundedAt?Math.floor((n-new Date(e.foundedAt))/864e5):null,c=((w=t.employees)==null?void 0:w.filter(f=>f.companyId===e.id&&!f.endDate).length)||0,d=((m=t.companyInvestors)==null?void 0:m.filter(f=>f.companyId===e.id))||[],h=new Set(d.map(f=>f.investorId)).size,y=((u=t.rounds)==null?void 0:u.filter(f=>f.companyId===e.id))||[],v=y.sort((f,p)=>new Date(p.closedAt||p.targetCloseDate||0)-new Date(f.closedAt||f.targetCloseDate||0))[0],x=(v==null?void 0:v.roundType)||null,_=y.filter(f=>f.status==="closed").reduce((f,p)=>f+(p.raisedAmount||0),0),g=(v==null?void 0:v.postMoneyValuation)||null;return{...e,arr:r,runway:s,burnMultiple:i,daysSinceUpdate:o,companyAge:l,employeeCount:c,investorCount:h,latestRoundStage:x,totalRaised:_,lastValuation:g}}function qh(e,t){var h;const n=Date.now(),r=(e.targetAmount||0)>0?(e.raisedAmount||0)/e.targetAmount:0,s=e.startedAt?Math.floor((n-new Date(e.startedAt))/864e5):0,i=e.targetCloseDate?Math.floor((new Date(e.targetCloseDate)-n)/864e5):null,o=s>0?(e.raisedAmount||0)/s:0,c=(((h=t.companyInvestors)==null?void 0:h.filter(y=>y.roundId===e.id))||[]).length,d=!!e.leadInvestorId;return{...e,coverage:r,daysOpen:s,daysToClose:i,fundraisingVelocity:o,commitmentCount:c,hasLead:d}}function Kh(e,t){const n=Date.now(),r=(e.targetValue||0)>0?(e.currentValue||0)/e.targetValue:0,s=e.targetDate?Math.floor((new Date(e.targetDate)-n)/864e5):null,i=e.startDate?Math.floor((n-new Date(e.startDate))/864e5):null,o=i&&i>0?r/i:0,l=e.startDate&&e.targetDate?Math.floor((new Date(e.targetDate)-new Date(e.startDate))/864e5):null,c=l&&i?i/l:null,d=c!==null&&c>0?r>=c*.9:r>=.5,h=o>0&&r<1?Math.ceil((1-r)/o):null,y=e.lastUpdatedAt?Math.floor((n-new Date(e.lastUpdatedAt))/864e5):null;return{...e,progress:r,daysToDeadline:s,daysSinceStarted:i,progressVelocity:o,timeElapsed:c,isOnTrack:d,projectedCompletion:h,daysSinceUpdate:y}}function oy(e,t){var o;const n=((o=t.companyInvestors)==null?void 0:o.filter(l=>l.investorId===e.id))||[],r=new Set(n.map(l=>l.companyId)).size,s=n.reduce((l,c)=>l+(c.commitment||0),0),i=e.lastContactAt?Math.floor((Date.now()-new Date(e.lastContactAt))/864e5):null;return{...e,portfolioCompanyCount:r,totalInvested:s,lastInteraction:i}}function ly(e){const t=e.companies.map(s=>cy(s)),n=e.rounds.map(s=>uy(s)),r=e.goals.map(s=>dy(s));return{...e,companies:t,rounds:n,goals:r}}function cy(e,t){const n=e.runway!==null&&e.runway<12?{criticalDate:new Date(Date.now()+e.runway*30*864e5),daysUntilCritical:Math.floor(e.runway*30),severity:e.runway<3?"critical":e.runway<6?"high":"medium"}:null,r=e.previousMrr&&e.mrr?(e.mrr-e.previousMrr)/e.previousMrr:null,s=e.previousMonthlyBurn&&e.monthlyBurn?e.monthlyBurn>e.previousMonthlyBurn?"increasing":"decreasing":"stable",i=e.burnMultiple!==null?e.burnMultiple<1.5?"excellent":e.burnMultiple<3?"good":e.burnMultiple<5?"concerning":"critical":null,o=r!==null&&r>0?{monthlyGrowthRate:r,projectedArr12Months:e.arr*Math.pow(1+r,12),compoundedGrowth:r*12}:null,l=e.employeeCount>0&&e.previousEmployeeCount?e.employeeCount-e.previousEmployeeCount:0,c=e.daysSinceUpdate!==null&&e.daysSinceUpdate<7?"active":e.daysSinceUpdate<14?"moderate":"stale";return{...e,runwayProjection:n,revenueGrowthTrend:r,burnTrend:s,capitalEfficiencyTrend:i,arrGrowthTrajectory:o,teamGrowthTrend:l,marketMomentum:c}}function uy(e,t){const n=e.daysOpen>0&&e.fundraisingVelocity>0?e.fundraisingVelocity>e.targetAmount/90?"strong":e.fundraisingVelocity>e.targetAmount/180?"moderate":"weak":"none",r=e.fundraisingVelocity>0&&e.coverage<1?{daysToFull:Math.ceil((e.targetAmount-e.raisedAmount)/e.fundraisingVelocity),projectedCloseDate:new Date(Date.now()+Math.ceil((e.targetAmount-e.raisedAmount)/e.fundraisingVelocity)*864e5),onTarget:e.daysToClose!==null&&Math.ceil((e.targetAmount-e.raisedAmount)/e.fundraisingVelocity)<=e.daysToClose}:null,s=e.commitmentCount>5?"high":e.commitmentCount>2?"moderate":"low",i=e.daysOpen<60?"healthy":e.daysOpen<120?"concerning":"critical";return{...e,fundraisingMomentum:n,projectedClose:r,investorInterestTrend:s,timingHealth:i}}function dy(e,t){const n=e.isOnTrack?"on-track":e.progress>.3&&e.daysToDeadline!==null&&e.daysToDeadline>30?"recoverable":"at-risk",r=e.progressVelocity>0&&e.projectedCompletion!==null?{willComplete:e.daysToDeadline!==null&&e.projectedCompletion<=e.daysToDeadline,projectedDate:new Date(Date.now()+e.projectedCompletion*864e5),daysOverdue:e.daysToDeadline!==null?Math.max(0,e.projectedCompletion-e.daysToDeadline):0}:null,s=e.progressVelocity>.01?"strong":e.progressVelocity>.005?"moderate":e.progressVelocity>0?"weak":"stalled";return{...e,completionTrend:n,projectedOutcome:r,momentumHealth:s}}function hy(e){const t=e.companies.map(i=>fy(i)),n=e.rounds.map(i=>my(i)),r=e.goals.map(i=>py(i)),s=vy(t);return{...e,companies:t,rounds:n,goals:r,portfolioHealth:s}}function fy(e,t){let n=100;e.runway!==null&&(e.runway<3?n=20:e.runway<6?n=50:e.runway<9?n=75:n=95);let r=100;e.arr===0?r=30:e.revenueGrowthTrend!==null&&(e.revenueGrowthTrend<0?r=40:e.revenueGrowthTrend<.05?r=60:e.revenueGrowthTrend<.15?r=80:r=95);let s=100;e.burnMultiple!==null&&(e.burnMultiple>5?s=30:e.burnMultiple>3?s=60:e.burnMultiple>1.5?s=80:s=95);let i=100;e.employeeCount===0?i=50:e.teamGrowthTrend<-2?i=40:e.teamGrowthTrend<0?i=70:e.teamGrowthTrend>5?i=95:i=85;let o=100;e.daysSinceUpdate!==null&&(e.daysSinceUpdate>30?o=30:e.daysSinceUpdate>14?o=60:e.daysSinceUpdate>7?o=85:o=100);const l=Math.round(n*.3+r*.25+s*.2+i*.15+o*.1);return{...e,capitalHealth:n,revenueHealth:r,operationalHealth:s,teamHealth:i,engagementHealth:o,overallHealth:l}}function my(e,t){let n=100;e.coverage<.2&&e.daysOpen>60?n=20:e.coverage<.5&&e.daysOpen>90?n=40:e.coverage<.7?n=70:e.coverage>=1?n=100:n=85;let r=100;e.daysOpen>180?r=20:e.daysOpen>120?r=50:e.daysOpen>90?r=75:r=95;let s=100;e.fundraisingMomentum==="none"?s=0:e.fundraisingMomentum==="weak"?s=40:e.fundraisingMomentum==="moderate"?s=70:s=95;const i=Math.round(n*.4+r*.3+s*.3);return{...e,fundraisingHealth:n,timingHealth:r,momentumHealth:s,overallHealth:i}}function py(e,t){let n=100;if(e.progress>=1)n=100;else if(e.timeElapsed!==null&&e.timeElapsed>0){const o=e.timeElapsed;e.progress>=o*.9?n=95:e.progress>=o*.7?n=75:e.progress>=o*.5?n=50:n=30}else e.progress>.7?n=80:e.progress>.3?n=60:n=40;let r=100;e.momentumHealth==="stalled"?r=20:e.momentumHealth==="weak"?r=50:e.momentumHealth==="moderate"?r=75:r=95;let s=100;e.daysToDeadline!==null&&(e.daysToDeadline<0?s=0:e.daysToDeadline<7?s=30:e.daysToDeadline<30?s=60:s=90);const i=Math.round(n*.5+r*.3+s*.2);return{...e,progressHealth:n,momentumHealth:r,urgencyHealth:s,overallHealth:i}}function vy(e){const t=e.filter(s=>s.isPortfolio);if(t.length===0)return{overall:100,count:0,breakdown:{}};const n=t.reduce((s,i)=>s+(i.overallHealth||50),0)/t.length,r={excellent:t.filter(s=>s.overallHealth>=85).length,good:t.filter(s=>s.overallHealth>=70&&s.overallHealth<85).length,fair:t.filter(s=>s.overallHealth>=50&&s.overallHealth<70).length,poor:t.filter(s=>s.overallHealth>=30&&s.overallHealth<50).length,critical:t.filter(s=>s.overallHealth<30).length};return{overall:Math.round(n),count:t.length,breakdown:r}}function gy(e,t){const n=[];let r=1;const s=(i,o,l,c)=>t.some(d=>d.entity_id===i&&d.entity_type===o&&d.issue_category===l&&d.issue_title===c&&d.status==="resolved");for(const i of e.companies)if(i.isPortfolio){if(i.runway!==null&&i.runway<6){const o=i.runway<3?"critical":"high",l=`Runway at ${i.runway.toFixed(1)} months`,c="capital_sufficiency";s(i.id,"company",c,l)||n.push({id:`issue-${r++}`,entityId:i.id,entityType:"company",entityName:i.name,category:c,severity:o,urgencyScore:Math.round(100-i.runway*15),title:l,description:`${i.name} has ${i.runway.toFixed(1)} months of runway remaining`,suggestedAction:i.runway<3?"Emergency bridge or accelerate close":"Review fundraising timeline",triggerCondition:`runway=${i.runway.toFixed(1)} < 6`,impact:"high",effortEstimate:"high"})}if(i.burnMultiple!==null&&i.burnMultiple>3){const o=`Burn multiple at ${i.burnMultiple.toFixed(1)}x`,l="revenue_viability";s(i.id,"company",l,o)||n.push({id:`issue-${r++}`,entityId:i.id,entityType:"company",entityName:i.name,category:l,severity:i.burnMultiple>5?"high":"medium",urgencyScore:Math.round(Math.min(i.burnMultiple*15,90)),title:o,description:`${i.name} burning ${i.burnMultiple.toFixed(1)}x MRR`,suggestedAction:"Review unit economics and path to efficiency",triggerCondition:`burnMultiple=${i.burnMultiple.toFixed(1)} > 3`,impact:"medium",effortEstimate:"high"})}if(i.revenueGrowthTrend!==null&&i.revenueGrowthTrend<0){const o=`Negative revenue growth: ${(i.revenueGrowthTrend*100).toFixed(1)}%`,l="revenue_viability";s(i.id,"company",l,o)||n.push({id:`issue-${r++}`,entityId:i.id,entityType:"company",entityName:i.name,category:l,severity:"high",urgencyScore:75,title:o,description:`${i.name} experiencing revenue decline`,suggestedAction:"Investigate churn, sales pipeline, and market fit",triggerCondition:`revenueGrowthTrend=${(i.revenueGrowthTrend*100).toFixed(1)}% < 0`,impact:"high",effortEstimate:"medium"})}if(i.daysSinceUpdate!==null&&i.daysSinceUpdate>14){const o=`No update in ${i.daysSinceUpdate} days`,l="attention_misallocation";s(i.id,"company",l,o)||n.push({id:`issue-${r++}`,entityId:i.id,entityType:"company",entityName:i.name,category:l,severity:i.daysSinceUpdate>30?"high":"medium",urgencyScore:Math.round(Math.min(i.daysSinceUpdate*2,80)),title:o,description:`${i.name} has not provided update recently`,suggestedAction:"Schedule check-in",triggerCondition:`daysSinceUpdate=${i.daysSinceUpdate} > 14`,impact:"low",effortEstimate:"low"})}if(i.teamGrowthTrend<-2){const o=`Team shrinking: ${Math.abs(i.teamGrowthTrend)} employees lost`,l="talent_gaps";s(i.id,"company",l,o)||n.push({id:`issue-${r++}`,entityId:i.id,entityType:"company",entityName:i.name,category:l,severity:"high",urgencyScore:70,title:o,description:`${i.name} experiencing high turnover`,suggestedAction:"Investigate retention issues and culture",triggerCondition:`teamGrowthTrend=${i.teamGrowthTrend} < -2`,impact:"high",effortEstimate:"high"})}}for(const i of e.rounds){if(i.status!=="active"&&i.status!=="closing")continue;const o=e.companies.find(l=>l.id===i.companyId);if(o!=null&&o.isPortfolio){if(i.daysOpen>45&&i.coverage<.3){const l=`${i.roundType} open ${i.daysOpen}d, ${(i.coverage*100).toFixed(0)}% covered`,c="capital_sufficiency";s(i.id,"round",c,l)||n.push({id:`issue-${r++}`,entityId:i.id,entityType:"round",entityName:`${o.name} - ${i.roundType}`,category:c,severity:"high",urgencyScore:Math.round(60+i.daysOpen*.5),title:l,description:`${o.name} ${i.roundType} fundraise stalled`,suggestedAction:"Assess pipeline, consider repositioning",triggerCondition:`daysOpen=${i.daysOpen} > 45 && coverage < 0.3`,impact:"high",effortEstimate:"medium"})}if(!i.hasLead&&i.daysOpen>30){const l=`${i.roundType} needs lead, ${i.daysOpen}d open`,c="market_access";s(i.id,"round",c,l)||n.push({id:`issue-${r++}`,entityId:i.id,entityType:"round",entityName:`${o.name} - ${i.roundType}`,category:c,severity:"medium",urgencyScore:Math.round(40+i.daysOpen*.3),title:l,description:`${o.name} ${i.roundType} missing lead investor`,suggestedAction:"Focus on lead-capable firms",triggerCondition:`hasLead=false && daysOpen=${i.daysOpen} > 30`,impact:"high",effortEstimate:"high"})}if(i.fundraisingMomentum==="weak"||i.fundraisingMomentum==="none"){const l=`${i.roundType} fundraising momentum ${i.fundraisingMomentum}`,c="market_access";s(i.id,"round",c,l)||n.push({id:`issue-${r++}`,entityId:i.id,entityType:"round",entityName:`${o.name} - ${i.roundType}`,category:c,severity:"medium",urgencyScore:60,title:l,description:`${o.name} ${i.roundType} showing weak investor interest`,suggestedAction:"Reassess positioning, narrative, and target investors",triggerCondition:`fundraisingMomentum=${i.fundraisingMomentum}`,impact:"medium",effortEstimate:"medium"})}}}for(const i of e.goals){const o=e.companies.find(l=>l.id===i.companyId);if(o!=null&&o.isPortfolio){if(i.progress<1&&i.daysToDeadline!==null&&i.daysToDeadline<30&&i.progress<.7){const l=`${i.title}: ${(i.progress*100).toFixed(0)}% complete, ${i.daysToDeadline}d left`,c="goal_risk";s(i.id,"goal",c,l)||n.push({id:`issue-${r++}`,entityId:i.id,entityType:"goal",entityName:`${o.name} - ${i.title}`,category:c,severity:i.daysToDeadline<0||i.progress<.3?"high":"medium",urgencyScore:Math.round(50+(1-i.progress)*30+Math.max(0,30-i.daysToDeadline)),title:l,description:`${o.name} goal at risk of missing deadline`,suggestedAction:"Review blockers and acceleration options",triggerCondition:`progress=${(i.progress*100).toFixed(0)}% < 70% && daysToDeadline=${i.daysToDeadline} < 30`,impact:"medium",effortEstimate:"medium"})}if(i.progress<1&&i.daysSinceUpdate!==null&&i.daysSinceUpdate>21){const l=`${i.title}: No update in ${i.daysSinceUpdate} days`,c="goal_risk";s(i.id,"goal",c,l)||n.push({id:`issue-${r++}`,entityId:i.id,entityType:"goal",entityName:`${o.name} - ${i.title}`,category:c,severity:"medium",urgencyScore:Math.round(40+i.daysSinceUpdate),title:l,description:`${o.name} goal appears stalled`,suggestedAction:"Check in on progress and blockers",triggerCondition:`daysSinceUpdate=${i.daysSinceUpdate} > 21`,impact:"low",effortEstimate:"low"})}if(i.completionTrend==="at-risk"&&i.progress<.5){const l=`${i.title}: At risk, ${(i.progress*100).toFixed(0)}% complete`,c="execution_risk";s(i.id,"goal",c,l)||n.push({id:`issue-${r++}`,entityId:i.id,entityType:"goal",entityName:`${o.name} - ${i.title}`,category:c,severity:"high",urgencyScore:75,title:l,description:`${o.name} goal significantly behind schedule`,suggestedAction:"Escalate to founder, identify critical blockers",triggerCondition:`completionTrend=at-risk && progress=${(i.progress*100).toFixed(0)}% < 50%`,impact:"high",effortEstimate:"medium"})}}}return{...e,issues:n}}function yy(e){const t=e.issues.map(n=>{const r=wy(n),s=_y(n,e),i=xy(n),o=n.urgencyScore*.5+s*.3+(100-i)*.2;return{...n,impactScore:s,effortScore:i,priorityScore:Math.round(o),resolutionTemplate:r.template,resolutionSteps:r.steps,dependencies:r.dependencies,cascadeEffect:r.cascadeEffect}});return t.sort((n,r)=>r.priorityScore-n.priorityScore),{...e,priorities:t}}function wy(e){const t={capital_sufficiency_runway:{template:"Emergency Capital Extension",steps:["Assess immediate cash needs and burn rate","Identify bridge financing options (existing investors, revenue-based financing, venture debt)","Prepare emergency deck with updated metrics and timeline","Reach out to committed investors for emergency bridge","If needed, implement cost reduction measures","Accelerate current fundraising close"],dependencies:["Updated financial model","Board alignment"],cascadeEffect:"Prevents shutdown, enables continued operations"},capital_sufficiency_stalled:{template:"Reposition Fundraise",steps:["Analyze why fundraise stalled (market, narrative, valuation, traction)","Gather honest feedback from passed investors","Revise positioning and narrative based on feedback","Update pitch deck with stronger traction proof points","Identify new investor segments to target","Relaunch with refreshed approach"],dependencies:["Investor feedback","Updated metrics"],cascadeEffect:"Unlocks capital, extends runway, enables growth"},revenue_viability_burn:{template:"Unit Economics Review",steps:["Calculate true unit economics (CAC, LTV, gross margin)","Identify primary drivers of burn inefficiency","Model path to capital efficiency milestones","Present findings to founder with recommendations","Implement quick wins to improve burn multiple","Set target metrics and monthly review cadence"],dependencies:["Detailed P&L","Cohort analysis"],cascadeEffect:"Improves capital efficiency, extends runway, increases fundability"},revenue_viability_growth:{template:"Growth Recovery Plan",steps:["Diagnose root cause (churn, sales velocity, market fit)","Analyze cohort retention and expansion metrics","Review sales pipeline and conversion rates","Interview churned customers for feedback","Develop action plan targeting root causes","Implement and track weekly metrics"],dependencies:["Customer data","Sales pipeline data"],cascadeEffect:"Restores growth trajectory, improves fundability, increases valuation"},market_access_lead:{template:"Lead Investor Hunt",steps:["List all lead-capable firms in stage/sector","Prioritize by fit, relationship, and conviction potential","Craft lead-specific narrative and deck","Leverage warm intros from existing investors/advisors","Run tight process with urgency and FOMO","Close lead, then fill round quickly"],dependencies:["Strong existing investor relationships","Compelling narrative"],cascadeEffect:"Unlocks round close, validates valuation, attracts followers"},market_access_momentum:{template:"Rebuild Fundraising Momentum",steps:["Assess current investor pipeline stage distribution","Identify sticking points causing drop-off","Add 20+ new qualified prospects to top of funnel","Accelerate meeting cadence to create urgency","Manufacture FOMO through visible progress","Convert momentum into term sheets"],dependencies:["Investor pipeline CRM","Warm intro sources"],cascadeEffect:"Creates competitive pressure, improves terms, accelerates close"},talent_gaps_turnover:{template:"Retention Investigation",steps:["Conduct exit interviews with recent departures","Survey current team on satisfaction and concerns","Identify systemic issues (comp, culture, leadership)","Present findings to founder confidentially","Develop retention plan with quick wins","Monitor turnover trend monthly"],dependencies:["Trust with founder","Access to team"],cascadeEffect:"Stabilizes team, preserves institutional knowledge, improves morale"},attention_misallocation_update:{template:"Schedule Check-in",steps:["Send WhatsApp/email requesting 30min sync","Prepare specific questions on metrics and blockers","Conduct call with active listening","Identify any emerging issues or needs","Document key updates in CRM","Schedule next touchpoint"],dependencies:["Founder availability"],cascadeEffect:"Surfaces hidden issues, maintains relationship, enables proactive support"},goal_risk_deadline:{template:"Goal Acceleration",steps:["Review goal progress and current blockers","Identify if deadline is realistic or needs revision","Brainstorm acceleration tactics with founder","Assign ownership and accountability","Remove blockers within your control","Weekly check-ins until completion or deadline"],dependencies:["Founder commitment","Clear blockers"],cascadeEffect:"Achieves milestone, builds momentum, proves execution"},goal_risk_stalled:{template:"Goal Unblock",steps:["Identify why goal is stalled (attention, resources, clarity)","Determine if goal is still relevant/valuable","If relevant: create unblock plan with founder","If not relevant: archive goal to reduce noise","Implement unblock actions","Restart progress tracking"],dependencies:["Founder prioritization"],cascadeEffect:"Restarts progress, clears dead goals, focuses attention"},execution_risk_behind:{template:"Milestone Recovery",steps:["Assess severity and impact of being behind","Identify critical path to catch up","Determine if additional resources can accelerate","Escalate to founder with urgency","Provide specific support (intros, advice, hands-on help)","Track daily/weekly until back on track"],dependencies:["Founder urgency","Resource availability"],cascadeEffect:"Recovers milestone, preserves credibility, maintains fundraising timeline"}},n=`${e.category}_${e.severity==="critical"||e.category==="capital_sufficiency"&&e.urgencyScore>80?"runway":e.title.includes("stalled")||e.title.includes("open")?"stalled":e.title.includes("multiple")?"burn":e.title.includes("growth")?"growth":e.title.includes("lead")?"lead":e.title.includes("momentum")?"momentum":e.title.includes("turnover")||e.title.includes("shrinking")?"turnover":e.title.includes("No update")?"update":e.daysToDeadline!==void 0&&e.daysToDeadline<30?"deadline":e.title.includes("stalled")?"stalled":"behind"}`;return t[n]||{template:"Generic Resolution",steps:["Assess situation thoroughly","Identify root cause","Develop action plan","Execute with urgency","Track progress","Adjust as needed"],dependencies:["Information","Resources"],cascadeEffect:"Resolves issue"}}function _y(e,t){let n=50;e.category==="capital_sufficiency"?n=95:e.category==="revenue_viability"?n=85:e.category==="market_access"?n=80:e.category==="execution_risk"?n=70:e.category==="talent_gaps"?n=65:e.category==="goal_risk"?n=55:e.category==="attention_misallocation"&&(n=30),e.severity==="critical"&&(n=Math.min(100,n+20)),e.severity==="high"&&(n=Math.min(100,n+10));const r=t.companies.find(s=>{var i,o;return s.id===e.entityId||e.entityType==="round"&&((i=t.rounds.find(l=>l.id===e.entityId))==null?void 0:i.companyId)===s.id||e.entityType==="goal"&&((o=t.goals.find(l=>l.id===e.entityId))==null?void 0:o.companyId)===s.id});return(r==null?void 0:r.overallHealth)<50&&(n=Math.min(100,n+15)),Math.round(n)}function xy(e){const t={"Schedule check-in":20,"Check in on progress":20,"Review blockers":40,"Review fundraising timeline":50,"Focus on lead-capable firms":70,"Assess pipeline":60,"Review unit economics":60,"Investigate churn":70,"Emergency bridge":90,"Investigate retention issues":80};for(const[n,r]of Object.entries(t))if(e.suggestedAction.includes(n))return r;return e.severity==="critical"?90:e.severity==="high"?70:e.severity==="medium"?50:30}function Ny(e){const t=e.priorities.slice(0,20),n=t.reduce((i,o)=>{const l=o.entityId;return i[l]||(i[l]=[]),i[l].push(o),i},{}),r=t.reduce((i,o)=>{const l=o.category;return i[l]||(i[l]=[]),i[l].push(o),i},{}),s={totalPriorities:e.priorities.length,criticalCount:e.priorities.filter(i=>i.severity==="critical").length,highCount:e.priorities.filter(i=>i.severity==="high").length,mediumCount:e.priorities.filter(i=>i.severity==="medium").length,avgPriorityScore:Math.round(e.priorities.reduce((i,o)=>i+o.priorityScore,0)/e.priorities.length),topCategories:Object.keys(r).map(i=>({category:i,count:r[i].length})).sort((i,o)=>o.count-i.count).slice(0,5)};return{...e,topPriorities:t,groupedByEntity:n,groupedByCategory:r,summary:s}}function jy(e){return Wh(e,{companies:[],rounds:[],goals:[],investors:[],companyInvestors:[],talent:[],employees:[]})}function Sy(e){return qh(e,{companies:[],rounds:[],goals:[],investors:[],companyInvestors:[],talent:[],employees:[]})}function ky(e){return Kh(e)}function Pi(e,t,n,r=[]){return kl({companies:e,rounds:t,goals:n,investors:[],companyInvestors:[],talent:[],employees:[]},r).l4.issues}function $i(e,t){const n=t.filter(s=>s.entityId===e.id);let r=100;for(const s of n){const i=s.severity==="critical"?25:s.severity==="high"?15:s.severity==="medium"?8:3;r-=i}return Math.max(0,Math.min(100,r))}const by="https://ztlwymnknqeapyrihcmd.supabase.co",Ey="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inp0bHd5bW5rbnFlYXB5cmloY21kIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjczODg0ODIsImV4cCI6MjA4Mjk2NDQ4Mn0.5tg9Ct-MXyTPP_kTmxA_eLkj4TTltiZiVcvByEzu3Z4",H=ry(by,Ey);async function Cy(e,t,n,r=null){const{data:s,error:i}=await H.from("priority_resolutions").insert([{company_id:e,issue_category:t,issue_title:n,resolution_notes:r}]).select().maybeSingle();if(i)throw console.error("Error marking priority as resolved:",i),i;return s}async function su(){const{data:e,error:t}=await H.from("priority_resolutions").select("*").order("resolved_at",{ascending:!1});if(t)throw console.error("Error fetching resolved priorities:",t),t;return e||[]}function Nn(e){if(!e)return e;const t={};for(const n in e){const r=n.replace(/_([a-z])/g,(s,i)=>i.toUpperCase());t[r]=e[n]}return t}async function Ty(){const[{data:e,error:t},{data:n,error:r},{data:s,error:i},{data:o,error:l},{data:c,error:d},{data:h,error:y}]=await Promise.all([H.from("companies").select("*"),H.from("people").select("*"),H.from("firms").select("*"),H.from("rounds").select("*"),H.from("goals").select("*"),H.from("deals").select("*")]);return t&&console.error("Error loading companies:",t),r&&console.error("Error loading people:",r),i&&console.error("Error loading firms:",i),l&&console.error("Error loading rounds:",l),d&&console.error("Error loading goals:",d),y&&console.error("Error loading deals:",y),{companies:(e||[]).map(v=>jy(Nn(v))),people:(n||[]).map(Nn),firms:(s||[]).map(Nn),rounds:(o||[]).map(v=>Sy(Nn(v))),goals:(c||[]).map(v=>ky(Nn(v))),deals:(h||[]).map(Nn)}}const Ry=["James","Sarah","Michael","Emma","David","Olivia","Robert","Sophia","William","Isabella","John","Mia","Richard","Charlotte","Thomas","Amelia","Christopher","Harper","Daniel","Evelyn","Matthew","Abigail","Anthony","Emily","Mark","Elizabeth","Andrew","Sofia","Joshua","Avery","Steven","Ella","Kevin","Scarlett","Brian","Grace","George","Chloe","Edward","Victoria","Alexander","Riley","Benjamin","Aria","Samuel","Lily","Henry","Aurora","Patrick","Zoey"],Iy=["Smith","Johnson","Williams","Brown","Jones","Garcia","Miller","Davis","Rodriguez","Martinez","Anderson","Taylor","Thomas","Moore","Jackson","Martin","Lee","Thompson","White","Harris","Sanchez","Clark","Lewis","Robinson","Walker","Young","Allen","King","Wright","Scott","Torres","Hill","Flores","Green","Adams","Nelson","Baker","Hall","Rivera","Campbell","Mitchell","Carter","Roberts","Gomez","Phillips","Evans","Turner","Diaz","Parker"],Ay=["Nova","Quantum","Vertex","Apex","Nexus","Flux","Pulse","Forge","Cipher","Vector","Prism","Atlas","Aero","Helix","Orbit","Tensor","Axiom","Stratos","Kinetic","Photon","Radiant","Stellar","Vantage","Zenith","Lumen","Optic","Arcus","Nimbus","Solace","Vivid"],Oy=["Labs","AI","Tech","Systems","Analytics","Software","Solutions","Dynamics","Networks","Platforms","Ventures","Digital","Data","Logic","Cloud","Intelligence","Automation","Robotics","Bio","Finance","Pay","Health","Security","Science","Works"],Py=["Sequoia","Andreessen","Benchmark","Accel","Greylock","Lightspeed","Index","Founders","General","Battery","Bessemer","Insight","NEA","Khosla","Union","First","Social","Tiger","Coatue","Thrive","Ribbit","QED","Felicis","Craft","Abstract","Matrix","Emergence","Scale","Point","Foundation"],$y=["Capital","Ventures","Partners","Fund","Growth","Equity","Catalyst","Investments","Holdings","Management"],Dy=["fintech","healthtech","edtech","enterprise_saas","consumer","marketplace","infrastructure","ai_ml","climate","other"],Ly=["pre_seed","seed","series_a","series_b","series_c","growth"],Uy=["US","GB","DE","FR","CA","AU","SG","NL","SE","IL"],My=["vc","angel_syndicate","family_office","corporate_vc","accelerator"],Fy=["identified","contacted","meeting_scheduled","meeting_held","diligence","term_sheet","committed","closed","dropped"],zy=["pre_seed","seed","seed_extension","series_a","series_b","bridge"],By=["fundraise","revenue","hiring","product","partnership","operational"],W=e=>e[Math.floor(Math.random()*e.length)],Vy=(e,t)=>[...e].sort(()=>.5-Math.random()).slice(0,t),jn=()=>crypto.randomUUID(),U=(e,t)=>Math.floor(Math.random()*(t-e+1))+e,Sn=(e,t)=>Math.random()*(t-e)+e,ye=e=>new Date(Date.now()-e*864e5).toISOString(),Es=e=>new Date(Date.now()+e*864e5).toISOString(),Hy=()=>`${W(Ay)}${W(Oy)}`,Gy=()=>`${W(Py)} ${W($y)}`,Wy=()=>({firstName:W(Ry),lastName:W(Iy)}),mi={default:{critical:{runwayRange:[0,3],burnMultiple:[4,8],activityDays:[45,90],weight:.1},struggling:{runwayRange:[3,6],burnMultiple:[2.5,4],activityDays:[20,45],weight:.15},concerning:{runwayRange:[6,9],burnMultiple:[1.5,2.5],activityDays:[10,20],weight:.25},stable:{runwayRange:[9,15],burnMultiple:[1,2],activityDays:[3,10],weight:.3},healthy:{runwayRange:[15,24],burnMultiple:[.5,1.5],activityDays:[0,5],weight:.2}},moderate:{critical:{runwayRange:[0,3],burnMultiple:[4,8],activityDays:[45,90],weight:.2},struggling:{runwayRange:[3,6],burnMultiple:[2.5,4],activityDays:[20,45],weight:.25},concerning:{runwayRange:[6,9],burnMultiple:[1.5,2.5],activityDays:[10,20],weight:.25},stable:{runwayRange:[9,15],burnMultiple:[1,2],activityDays:[3,10],weight:.2},healthy:{runwayRange:[15,24],burnMultiple:[.5,1.5],activityDays:[0,5],weight:.1}},high:{critical:{runwayRange:[0,2],burnMultiple:[5,10],activityDays:[60,120],weight:.3},struggling:{runwayRange:[2,5],burnMultiple:[3,5],activityDays:[30,60],weight:.3},concerning:{runwayRange:[5,8],burnMultiple:[2,3],activityDays:[15,30],weight:.25},stable:{runwayRange:[8,12],burnMultiple:[1.5,2.5],activityDays:[5,15],weight:.1},healthy:{runwayRange:[12,18],burnMultiple:[1,2],activityDays:[0,7],weight:.05}}},qy=(e,t)=>{if(!e)return W(["stable","healthy","concerning"]);const n=mi[t]||mi.default,r=Math.random();let s=0;for(const[i,o]of Object.entries(n))if(s+=o.weight,r<s)return i;return"stable"},Ky={pre_seed:{cash:[5e4,5e5],burn:[1e4,5e4],mrr:[0,5e3],employees:[1,5]},seed:{cash:[2e5,3e6],burn:[3e4,15e4],mrr:[0,5e4],employees:[3,15]},series_a:{cash:[2e6,15e6],burn:[1e5,5e5],mrr:[2e4,3e5],employees:[10,50]},series_b:{cash:[1e7,5e7],burn:[3e5,15e5],mrr:[1e5,1e6],employees:[30,150]},series_c:{cash:[3e7,15e7],burn:[8e5,4e6],mrr:[5e5,5e6],employees:[80,400]},growth:{cash:[5e7,3e8],burn:[2e6,1e7],mrr:[2e6,2e7],employees:[200,1e3]}},iu={pre_seed:[1e5,1e6],seed:[5e5,4e6],seed_extension:[5e5,2e6],series_a:[5e6,2e7],series_b:[15e6,5e7],bridge:[2e6,1e7]};function Jy(e=12,t="default"){const n=Math.round(e/.2),r=Math.round(n*3),s=Math.round(n*2.5),i=Math.round(s*11),o=Math.round(n*4),l=mi[t]||mi.default,c=[];for(let p=0;p<r;p++){const N=W(My),j=N==="vc"?U(1e5,5e6):U(25e3,5e5);c.push({id:jn(),name:Gy(),firmType:N,typicalCheckMin:j,typicalCheckMax:j*U(2,10)})}const d=[],h=new Set;for(let p=0;p<o;p++){const N=Wy(),j=p<n*1.5?"founder":p<n*2.5?"investor":W(["operator","advisor","employee"]),k=j==="investor"?W(c):null;let b,S=0;do{const C=S>0?S:"",R=j==="investor"&&k?k.name.toLowerCase().replace(/\s/g,""):"gmail";b=`${N.firstName.toLowerCase()}.${N.lastName.toLowerCase()}${C}@${R}.com`,S++}while(h.has(b));h.add(b),d.push({id:jn(),firstName:N.firstName,lastName:N.lastName,email:b,role:j,firm_id:(k==null?void 0:k.id)||null,title:W(j==="founder"?["CEO","CTO","COO"]:j==="investor"?["Partner","Principal","Associate"]:["VP Engineering","Head of Product"]),lastContactedAt:ye(U(1,90))})}const y=d.filter(p=>p.role==="founder"),v=d.filter(p=>p.role==="investor"),x=[],_=[];for(let p=0;p<e;p++)_.push(W(["seed","series_a","series_b"]));for(let p=e;p<n;p++)_.push(W(Ly));for(let p=0;p<n;p++){const N=p<e,j=_[p],k=qy(N,t),b=l[k]||l.stable,S=Ky[j],C=U(S.burn[0],S.burn[1]),R=Sn(b.runwayRange[0],b.runwayRange[1]),T=Math.round(C*R),L=W(y),Y=U(S.mrr[0],S.mrr[1]),ae=U(b.activityDays[0],b.activityDays[1]);x.push({id:jn(),name:Hy(),isPortfolio:N,founder_id:L.id,foundedAt:ye(U(365,2e3)),country:W(Uy),cashOnHand:T,monthlyBurn:C,mrr:Y,revenueGrowthRate:Sn(.05,.5),grossMargin:Sn(.4,.85),cacPayback:U(6,36),stage:j,sector:W(Dy),employeeCount:U(S.employees[0],S.employees[1]),lastMaterialUpdate_at:ye(ae),cashOnHandUpdated_at:ye(U(0,ae+10)),monthlyBurnUpdated_at:ye(U(0,ae+10)),mrrUpdated_at:ye(U(0,ae+5))})}const g=x.filter(p=>p.isPortfolio),w=[],m=[...g,...Vy(x.filter(p=>!p.isPortfolio),Math.round(s-g.length*1.5))];for(const p of m){const N=p.isPortfolio?U(1,3):U(0,2);for(let j=0;j<N&&w.length<s;j++){const k=W(zy),b=iu[k]||iu.seed,S=U(b[0],b[1]),C=j===N-1&&Math.random()>.3,R=C?Sn(.1,.9):Math.random()>.2?1:Sn(.5,1),T=R>.3||Math.random()>.5,L=T?W(v):null;w.push({id:jn(),companyId:p.id,stage:k,amount:S,closeDate:C?R>=1?ye(U(10,90)):Es(U(30,120)):ye(U(30,365)),leadInvestor:T?`${L.firstName} ${L.lastName}`:"TBD",company_id:p.id,roundType:k,targetAmount:S,raisedAmount:Math.round(S*R),status:C?W(["active","closing"]):R>=1?"closed":"abandoned",startedAt:ye(U(60,300)),targetCloseDate:C?Es(U(30,120)):ye(U(30,365)),leadInvestor_id:(L==null?void 0:L.id)||null})}}const u=[];for(const p of g){const N=U(2,5);for(let j=0;j<N;j++){const k=W(By),b=k==="fundraise"?U(1e6,2e7):k==="revenue"?U(1e4,5e5):k==="hiring"?U(2,20):100,S=Sn(.1,1.2),C=U(-30,180),R=ye(U(30,180)),T=U(0,14);u.push({id:jn(),companyId:p.id,metric:k==="fundraise"?"Close Series A":k==="revenue"?`Hit $${(b/1e3).toFixed(0)}k MRR`:k==="hiring"?`Hire ${b} engineers`:"Launch v2",targetValue:b.toString(),currentValue:Math.round(b*Math.min(S,1)).toString(),deadline:C>0?Es(C):ye(Math.abs(C)),company_id:p.id,goalType:k,title:k==="fundraise"?"Close Series A":k==="revenue"?`Hit $${(b/1e3).toFixed(0)}k MRR`:k==="hiring"?`Hire ${b} engineers`:"Launch v2",startDate:R,targetDate:C>0?Es(C):ye(Math.abs(C)),lastUpdatedAt:ye(T),currentValueUpdated_at:ye(T)})}}const f=[];for(const p of w){const N=p.status==="active"?U(8,15):p.status==="closing"?U(5,12):U(3,8);for(let j=0;j<N&&f.length<i;j++){const k=W(v),b=p.status==="closed"?W(["closed","committed"]):W(Fy),S=b==="closed"||b==="committed"?U(30,180):b==="dropped"?U(45,120):b==="diligence"||b==="term_sheet"?U(0,7):b==="meeting_held"?U(3,21):b==="meeting_scheduled"?U(0,7):b==="contacted"?U(7,30):U(14,60),C=b==="closed"||b==="committed"?S:b==="term_sheet"?U(0,14):b==="diligence"?U(7,30):U(14,45);f.push({id:jn(),round_id:p.id,firm_id:k.firm_id,person_id:k.id,dealStage:b,lastContactDate:ye(S),introducedBy_id:Math.random()>.3?W(d).id:null,expectedAmount:b==="term_sheet"||b==="committed"||b==="closed"?U(5e4,Math.round(p.targetAmount*.4)):null,stageEntry_date:ye(C)})}}return{companies:x,firms:c,people:d,rounds:w,goals:u,deals:f}}async function Jh(){const{error:e}=await H.from("deals").delete().gte("id","00000000-0000-0000-0000-000000000000");if(e)throw new Error(`Failed to clear deals: ${e.message}`);const{error:t}=await H.from("goals").delete().gte("id","00000000-0000-0000-0000-000000000000");if(t)throw new Error(`Failed to clear goals: ${t.message}`);const{error:n}=await H.from("rounds").delete().gte("id","00000000-0000-0000-0000-000000000000");if(n)throw new Error(`Failed to clear rounds: ${n.message}`);const{error:r}=await H.from("companies").delete().gte("id","00000000-0000-0000-0000-000000000000");if(r)throw new Error(`Failed to clear companies: ${r.message}`);const{error:s}=await H.from("people").delete().gte("id","00000000-0000-0000-0000-000000000000");if(s)throw new Error(`Failed to clear people: ${s.message}`);const{error:i}=await H.from("firms").delete().gte("id","00000000-0000-0000-0000-000000000000");if(i)throw new Error(`Failed to clear firms: ${i.message}`)}async function Qh(e=12,t="default"){const n=Jy(e,t),r=n.firms.map(g=>({id:g.id,name:g.name,firm_type:g.firmType,typical_check_min:g.typicalCheckMin,typical_check_max:g.typicalCheckMax})),{error:s}=await H.from("firms").insert(r);if(s)throw new Error(`Failed to insert firms: ${s.message}`);const i=n.people.map(g=>({id:g.id,first_name:g.firstName,last_name:g.lastName,email:g.email,role:g.role,firm_id:g.firm_id,title:g.title,last_contacted_at:g.lastContactedAt})),{error:o}=await H.from("people").insert(i);if(o)throw new Error(`Failed to insert people: ${o.message}`);const l=n.companies.map(g=>({id:g.id,name:g.name,is_portfolio:g.isPortfolio,founder_id:g.founder_id,founded_at:g.foundedAt,country:g.country,cash_on_hand:g.cashOnHand,monthly_burn:g.monthlyBurn,mrr:g.mrr,revenue_growth_rate:g.revenueGrowthRate,gross_margin:g.grossMargin,cac_payback:g.cacPayback,stage:g.stage,sector:g.sector,employee_count:g.employeeCount,last_material_update_at:g.lastMaterialUpdate_at,cash_on_hand_updated_at:g.cashOnHandUpdated_at,monthly_burn_updated_at:g.monthlyBurnUpdated_at,mrr_updated_at:g.mrrUpdated_at})),{error:c}=await H.from("companies").insert(l);if(c)throw new Error(`Failed to insert companies: ${c.message}`);const d=n.rounds.map(g=>({id:g.id,company_id:g.company_id,round_type:g.roundType,target_amount:g.targetAmount,raised_amount:g.raisedAmount,status:g.status,started_at:g.startedAt,target_close_date:g.targetCloseDate,actual_close_date:g.status==="closed"?g.closeDate:null,lead_investor_id:g.leadInvestor_id})),{error:h}=await H.from("rounds").insert(d);if(h)throw new Error(`Failed to insert rounds: ${h.message}`);const y=n.goals.map(g=>({id:g.id,company_id:g.company_id,goal_type:g.goalType,title:g.title,target_value:g.targetValue,current_value:g.currentValue,start_date:g.startDate,target_date:g.targetDate,last_updated_at:g.lastUpdatedAt,current_value_updated_at:g.currentValueUpdated_at})),{error:v}=await H.from("goals").insert(y);if(v)throw new Error(`Failed to insert goals: ${v.message}`);const x=n.deals.map(g=>({id:g.id,round_id:g.round_id,firm_id:g.firm_id,person_id:g.person_id,deal_stage:g.dealStage,expected_amount:g.expectedAmount,last_contact_date:g.lastContactDate,introduced_by_id:g.introducedBy_id,stage_entry_date:g.stageEntry_date})),{error:_}=await H.from("deals").insert(x);if(_)throw new Error(`Failed to insert deals: ${_.message}`);return{firms:n.firms.length,people:n.people.length,companies:n.companies.length,rounds:n.rounds.length,goals:n.goals.length,deals:n.deals.length}}function Qy({onComplete:e}){const[t,n]=P.useState(12),[r,s]=P.useState("default"),[i,o]=P.useState(!1),[l,c]=P.useState(""),[d,h]=P.useState("");async function y(){o(!0),c(""),h("");try{h("Clearing existing data..."),await Jh(),h("Generating portfolio data...");const v=await Qh(t,r);h(`Generated ${v.companies} companies, ${v.rounds} rounds, ${v.deals} deals`),setTimeout(()=>{e()},1500)}catch(v){c("Data generation failed: "+v.message),o(!1)}}return a.jsx("div",{className:"load-data-container",children:a.jsxs("div",{className:"load-data-card",children:[a.jsxs("div",{className:"load-data-header",children:[a.jsx("h1",{children:"Load Sample Data"}),a.jsx("p",{children:"Generate realistic portfolio data to explore Backbone"})]}),a.jsxs("div",{className:"load-data-controls",children:[a.jsxs("div",{className:"control-row",children:[a.jsx("label",{children:"Portfolio Companies"}),a.jsx("input",{type:"number",min:"1",max:"50",value:t,onChange:v=>n(parseInt(v.target.value)||12),disabled:i})]}),a.jsxs("div",{className:"control-row",children:[a.jsx("label",{children:"Stress Level"}),a.jsxs("select",{value:r,onChange:v=>s(v.target.value),disabled:i,children:[a.jsx("option",{value:"default",children:"Default (Balanced)"}),a.jsx("option",{value:"moderate",children:"Moderate (Some Issues)"}),a.jsx("option",{value:"high",children:"High (Critical Portfolio)"})]})]})]}),d&&!l&&a.jsx("div",{className:"status-message",children:d}),l&&a.jsx("div",{className:"error-message",children:l}),a.jsx("button",{className:"generate-button",onClick:y,disabled:i,children:i?"Generating...":"Generate Sample Data"}),a.jsx("div",{className:"load-data-info",children:a.jsx("p",{children:"This will create sample companies, investors, deals, and goals to demonstrate Backbone's capabilities."})})]})})}function Yy({violation:e,onBack:t}){if(!e)return null;const{type:n,title:r,description:s,severity:i,violations:o,remedy:l,northStar:c}=e,d=h=>({critical:"#ef4444",high:"#f97316",medium:"#eab308",low:"#3b82f6"})[h]||"#64748b";return a.jsxs("div",{className:"qa-violation-detail",children:[a.jsx("button",{className:"back-btn",onClick:t,children:" Back to QA"}),a.jsxs("div",{className:"violation-header",children:[a.jsxs("div",{className:"violation-title-row",children:[a.jsx("h2",{children:r}),a.jsx("span",{className:"severity-badge",style:{backgroundColor:`${d(i)}15`,color:d(i)},children:i==null?void 0:i.toUpperCase()})]}),c&&a.jsxs("div",{className:"north-star-badge",children:["North Star Violation: ",c]}),a.jsx("p",{className:"violation-description",children:s})]}),a.jsxs("div",{className:"violation-content",children:[a.jsxs("div",{className:"violations-section",children:[a.jsxs("div",{className:"section-header",children:[a.jsx("h3",{children:"Affected Records"}),a.jsxs("span",{className:"count-badge",children:[(o==null?void 0:o.length)||0," violations"]})]}),o&&o.length>0?a.jsx("div",{className:"violations-list",children:o.map((h,y)=>a.jsxs("div",{className:"violation-item",children:[a.jsxs("div",{className:"violation-item-header",children:[a.jsxs("span",{className:"violation-index",children:["#",y+1]}),a.jsx("span",{className:"entity-type",children:h.entityType}),h.entityName&&a.jsx("span",{className:"entity-name",children:h.entityName})]}),a.jsxs("div",{className:"violation-item-details",children:[h.field&&a.jsxs("div",{className:"detail-row",children:[a.jsx("span",{className:"detail-label",children:"Field:"}),a.jsx("code",{className:"detail-value",children:h.field})]}),h.value!==void 0&&a.jsxs("div",{className:"detail-row",children:[a.jsx("span",{className:"detail-label",children:"Value:"}),a.jsx("code",{className:"detail-value",children:JSON.stringify(h.value)})]}),h.reason&&a.jsxs("div",{className:"detail-row",children:[a.jsx("span",{className:"detail-label",children:"Reason:"}),a.jsx("span",{className:"detail-value",children:h.reason})]}),h.context&&a.jsxs("div",{className:"detail-row",children:[a.jsx("span",{className:"detail-label",children:"Context:"}),a.jsx("span",{className:"detail-value",children:h.context})]}),h.recordId&&a.jsxs("div",{className:"detail-row",children:[a.jsx("span",{className:"detail-label",children:"Record ID:"}),a.jsx("code",{className:"detail-value record-id",children:h.recordId})]})]})]},y))}):a.jsx("div",{className:"empty-state",children:"No violations found"})]}),a.jsxs("div",{className:"remedy-section",children:[a.jsx("h3",{children:"How to Fix"}),a.jsx("div",{className:"remedy-content",children:l?Array.isArray(l)?a.jsx("ol",{className:"remedy-steps",children:l.map((h,y)=>a.jsx("li",{children:h},y))}):a.jsx("p",{children:l}):a.jsx("p",{children:"No remedy information available."})})]}),a.jsxs("div",{className:"impact-section",children:[a.jsx("h3",{children:"Why This Matters"}),a.jsxs("div",{className:"impact-content",children:[n==="storedDerivations"&&a.jsx("p",{children:"Stored derivations violate the NoStoredDerivs North Star. When computed values are persisted to the database, they can become stale and create inconsistencies. All derived values must be computed on-the-fly from raw inputs to ensure accuracy."}),n==="missingTTL"&&a.jsx("p",{children:"Missing TTL (time-to-live) timestamps prevent the system from knowing when data was last updated. This breaks trajectory calculations and makes it impossible to detect stale data that should trigger priority alerts."}),n==="portfolioMixedState"&&a.jsx("p",{children:"Portfolio entities are mixing stored state with computed views. This violates the Portfolio=VIEW North Star, which requires portfolio aggregations to be pure presentation layers, not stored state."}),n==="goalOrphans"&&a.jsx("p",{children:"Goals without proper risk context cannot contribute to priority calculations. All goals must map to specific risks (RiskGoal North Star) to enable gap-based urgency scoring."})]})]})]})]})}function Yh(){var g;const[e,t]=P.useState({}),[n,r]=P.useState(!1),[s,i]=P.useState(null),[o,l]=P.useState({});P.useEffect(()=>{c()},[]);async function c(){r(!0);const w={};try{const{data:m}=await H.from("companies").select("*"),{data:u}=await H.from("people").select("*"),{data:f}=await H.from("rounds").select("*"),{data:p}=await H.from("goals").select("*"),{data:N}=await H.from("deals").select("*"),j=v(m,p,N,f),k=h(m,p,N),b=_(p,m),S=x(m);w.invariants={derivedValuesStored:d(m,p,N),missingTTL:k.count,storedDerivationsFound:j.count,portfolioNotView:S.count,goalOrphans:b.count,silentOverwrites:0},l({storedDerivationsFound:{type:"storedDerivations",title:"Stored Derivations Found",description:"Computed values are being persisted to the database, violating the NoStoredDerivs North Star.",severity:"critical",northStar:"NoStoredDerivs",violations:j.violations,remedy:["Remove derived columns from database schema (arr, runway, is_on_track)","Move all computation logic to derivations.js","Update queries to compute values on-the-fly","Verify no application code writes to derived columns"]},missingTTL:{type:"missingTTL",title:"Missing TTL Timestamps",description:"Critical fields lack time-to-live timestamps, preventing stale data detection.",severity:"high",northStar:"NoStoredDerivs",violations:k.violations,remedy:["Add *_updated_at timestamp fields for all critical value fields","Populate timestamps when values are created or updated","Use timestamps in trajectory calculations"]},goalOrphans:{type:"goalOrphans",title:"Goals Without Risk Context",description:"Goals lack proper risk mapping, preventing priority calculation.",severity:"medium",northStar:"RiskGoal",violations:b.violations,remedy:["Ensure all goals have target_value, current_value, and target_date","Link goals to specific company risks","Remove or complete orphaned goals"]},portfolioNotView:{type:"portfolioMixedState",title:"Portfolio Mixed State",description:"Portfolio entities are storing state instead of being pure views.",severity:"medium",northStar:"Portfolio=VIEW",violations:S.violations,remedy:["Remove stored state from portfolio aggregations","Compute portfolio metrics on-the-fly from company data","Ensure portfolio views are read-only presentation layers"]}}),w.companies={total:(m==null?void 0:m.length)||0,portfolio:(m==null?void 0:m.filter(C=>C.is_portfolio).length)||0,missingFounder:(m==null?void 0:m.filter(C=>!C.founder_id).length)||0,negativeCash:(m==null?void 0:m.filter(C=>C.cash_on_hand<0).length)||0},w.people={total:(u==null?void 0:u.length)||0,duplicateEmails:y(u||[]),missingRole:(u==null?void 0:u.filter(C=>!C.role).length)||0},w.goals={total:(p==null?void 0:p.length)||0,overdue:(p==null?void 0:p.filter(C=>new Date(C.target_date)<new Date).length)||0,orphaned:(p==null?void 0:p.filter(C=>!(m!=null&&m.find(R=>R.id===C.company_id))).length)||0},w.deals={total:(N==null?void 0:N.length)||0,missingRound:(N==null?void 0:N.filter(C=>!(f!=null&&f.find(R=>R.id===C.round_id))).length)||0},t(w)}catch(m){console.error("QA check failed:",m)}finally{r(!1)}}function d(w,m,u){let f=0;return w==null||w.forEach(p=>{(p.health_score!=null||p.priority_score!=null||p.failure_risk!=null)&&f++}),m==null||m.forEach(p=>{(p.risk_score!=null||p.priority_score!=null)&&f++}),u==null||u.forEach(p=>{p.priority_score!=null&&f++}),f}function h(w,m,u){const f=[],p=[{value:"cash_on_hand",timestamp:"cash_on_hand_updated_at"},{value:"monthly_burn",timestamp:"monthly_burn_updated_at"},{value:"mrr",timestamp:"mrr_updated_at"}];w==null||w.forEach(j=>{p.forEach(k=>{j[k.value]!=null&&!j[k.timestamp]&&f.push({entityType:"Company",entityName:j.name,recordId:j.id,field:k.timestamp,value:null,reason:`Field ${k.value} has value but missing TTL timestamp`,context:`${k.value}: ${j[k.value]}`})})});const N=[{value:"current_value",timestamp:"current_value_updated_at"}];return m==null||m.forEach(j=>{N.forEach(k=>{j[k.value]!=null&&!j[k.timestamp]&&f.push({entityType:"Goal",entityName:j.title||"Untitled Goal",recordId:j.id,field:k.timestamp,value:null,reason:`Field ${k.value} has value but missing TTL timestamp`,context:`${k.value}: ${j[k.value]}`})})}),u==null||u.forEach(j=>{j.deal_stage!=null&&!j.stage_entry_date&&f.push({entityType:"Deal",entityName:`Deal in ${j.deal_stage}`,recordId:j.id,field:"stage_entry_date",value:null,reason:"Deal has stage but missing stage entry timestamp",context:`Stage: ${j.deal_stage}`})}),{count:f.length,violations:f}}function y(w){const m=w.map(f=>{var p;return(p=f.email)==null?void 0:p.toLowerCase()}),u=m.filter((f,p)=>f&&m.indexOf(f)!==p);return new Set(u).size}function v(w,m,u,f){const p=[];return w==null||w.forEach(N=>{N.arr!=null&&p.push({entityType:"Company",entityName:N.name,recordId:N.id,field:"arr",value:N.arr,reason:"Stored derived value - should be computed from MRR * 12"}),N.runway!=null&&p.push({entityType:"Company",entityName:N.name,recordId:N.id,field:"runway",value:N.runway,reason:"Stored derived value - should be computed from cash_on_hand / monthly_burn"}),N.burn_multiple!=null&&p.push({entityType:"Company",entityName:N.name,recordId:N.id,field:"burn_multiple",value:N.burn_multiple,reason:"Stored derived value - should be computed from monthly_burn / mrr"})}),m==null||m.forEach(N=>{N.is_on_track!=null&&p.push({entityType:"Goal",entityName:N.title||"Untitled Goal",recordId:N.id,field:"is_on_track",value:N.is_on_track,reason:"Stored derived value - should be computed from progress and deadline"})}),{count:p.length,violations:p}}function x(w){const m=[];return w==null||w.forEach(u=>{if(!u.is_portfolio)return;u.cash_on_hand!=null&&u.monthly_burn!=null&&u.last_material_update_at!=null&&!1&&m.push({entityType:"Company",entityName:u.name,recordId:u.id,reason:"Portfolio entity mixing stored state with computed views",context:"Should be pure presentation layer"})}),{count:m.length,violations:m}}function _(w,m){const u=[];return w==null||w.forEach(f=>{if(!(m==null?void 0:m.find(N=>N.id===f.company_id))){u.push({entityType:"Goal",entityName:f.title||"Untitled Goal",recordId:f.id,reason:"Goal has no associated company",context:`Company ID: ${f.company_id}`});return}if(!f.target_value||!f.current_value||!f.target_date){const N=[];f.target_value||N.push("target_value"),f.current_value||N.push("current_value"),f.target_date||N.push("target_date"),u.push({entityType:"Goal",entityName:f.title||"Untitled Goal",recordId:f.id,field:N.join(", "),reason:"Goal missing critical fields for risk calculation",context:`Missing: ${N.join(", ")}`})}}),{count:u.length,violations:u}}return n?a.jsx("div",{className:"admin-qa",children:a.jsx("div",{className:"loading",children:"Running QA checks..."})}):s?a.jsx(Yy,{violation:s,onBack:()=>i(null)}):a.jsxs("div",{className:"admin-qa",children:[a.jsxs("div",{className:"qa-header",children:[a.jsx("h3",{children:"Data Quality Assurance"}),a.jsx("button",{className:"refresh-btn",onClick:c,children:"Refresh"})]}),a.jsxs("div",{className:"qa-grid",children:[a.jsx(hr,{title:"System Invariants",data:e.invariants,critical:!0,onClickViolation:w=>{o[w]&&i(o[w])}}),a.jsx(hr,{title:"Companies",data:e.companies}),a.jsx(hr,{title:"People",data:e.people}),a.jsx(hr,{title:"Goals",data:e.goals}),a.jsx(hr,{title:"Deals",data:e.deals})]}),((g=e.invariants)==null?void 0:g.storedDerivationsFound)>0&&a.jsxs("div",{className:"qa-recommendations",children:[a.jsx("h4",{children:"North Stars Violations Detected"}),a.jsxs("div",{className:"violation-detail",children:[a.jsx("strong",{children:"NoStoredDerivs Violation:"})," ",e.invariants.storedDerivationsFound," records contain derived values in database.",a.jsx("br",{}),a.jsx("span",{className:"remedy",children:"Remedy: Remove arr, runway, is_on_track columns from schema. Compute on-the-fly in derivations.js"})]})]})]})}function hr({title:e,data:t,critical:n,onClickViolation:r}){if(!t)return null;const i=Object.entries(t).filter(([o,l])=>o!=="total"&&typeof l=="number"&&l>0).length>0;return a.jsxs("div",{className:`qa-section ${i?n?"critical":"has-issues":"clean"}`,children:[a.jsxs("div",{className:"qa-section-header",children:[a.jsx("h4",{children:e}),a.jsx("span",{className:`status-badge ${i?n?"critical":"warning":"success"}`,children:i?n?"VIOLATION":"Issues Found":"Clean"})]}),a.jsxs("div",{className:"qa-stats",children:[t.total!==void 0&&a.jsxs("div",{className:"qa-stat",children:[a.jsx("span",{className:"qa-label",children:"Total:"}),a.jsx("span",{className:"qa-value",children:t.total})]}),Object.entries(t).map(([o,l])=>{if(o==="total")return null;const c=r&&l>0;return a.jsxs("div",{className:`qa-stat ${l>0?"issue":""} ${c?"clickable":""}`,onClick:()=>c&&r(o),children:[a.jsxs("span",{className:"qa-label",children:[Xy(o),":"]}),a.jsx("span",{className:"qa-value",children:l}),c&&a.jsx("span",{className:"click-hint",children:""})]},o)})]})]})}function Xy(e){return e.replace(/([A-Z])/g," $1").replace(/^./,t=>t.toUpperCase())}const au={critical:{label:"CRITICAL",color:"#ef4444",bg:"rgba(239, 68, 68, 0.1)"},high:{label:"HIGH",color:"#f97316",bg:"rgba(249, 115, 22, 0.1)"},medium:{label:"MEDIUM",color:"#eab308",bg:"rgba(234, 179, 8, 0.1)"},low:{label:"LOW",color:"#22c55e",bg:"rgba(34, 197, 94, 0.1)"}};function ou({rawData:e,resolvedPriorities:t=[],onSelectIssue:n,onSelectCompany:r}){var c,d,h,y,v;const s=kl({companies:e.companies||[],rounds:e.rounds||[],goals:e.goals||[],investors:e.investors||[],companyInvestors:e.companyInvestors||[],talent:e.talent||[],employees:e.employees||[]},t),i=((c=s.l6)==null?void 0:c.topPriorities)||[],o=((d=s.l3)==null?void 0:d.companies)||[],l=x=>{var _,g,w,m;if(x.entityType==="company")return o.find(u=>u.id===x.entityId);if(x.entityType==="round"){const u=(g=(_=s.l3)==null?void 0:_.rounds)==null?void 0:g.find(f=>f.id===x.entityId);return o.find(f=>f.id===(u==null?void 0:u.companyId))}else if(x.entityType==="goal"){const u=(m=(w=s.l3)==null?void 0:w.goals)==null?void 0:m.find(f=>f.id===x.entityId);return o.find(f=>f.id===(u==null?void 0:u.companyId))}return null};return i.length===0?a.jsxs("div",{className:"priority-queue",children:[a.jsx("h2",{children:"Priority Queue"}),a.jsx("div",{className:"empty-state",children:"No priorities detected. All clear."})]}):a.jsxs("div",{className:"priority-queue",children:[a.jsx("div",{className:"queue-header",children:a.jsxs("span",{className:"queue-meta",children:[((h=s.l6)==null?void 0:h.summary.totalPriorities)||0," priorities ",((y=s.l6)==null?void 0:y.summary.criticalCount)||0," critical  Avg score: ",((v=s.l6)==null?void 0:v.summary.avgPriorityScore)||0]})}),a.jsx("div",{className:"queue-list",children:i.map((x,_)=>{const g=au[x.severity]||au.medium,w=l(x);return a.jsxs("div",{onClick:()=>n?n(x):w&&r&&r(w),className:"queue-item",style:{borderLeftColor:g.color},children:[a.jsx("div",{className:"item-rank",children:_+1}),a.jsxs("div",{className:"item-content",children:[a.jsxs("div",{className:"item-header",children:[a.jsx("span",{className:"severity-badge",style:{color:g.color,backgroundColor:g.bg},children:g.label}),a.jsx("span",{className:"company-name",children:x.entityName}),a.jsx("span",{className:"priority-score",style:{color:x.priorityScore>=80?"#ef4444":x.priorityScore>=60?"#f97316":"#eab308",fontWeight:600,marginLeft:"auto"},children:x.priorityScore})]}),a.jsx("div",{className:"item-title",children:x.title}),a.jsxs("div",{className:"item-action",children:[a.jsx("span",{className:"action-arrow",children:""}),a.jsx("span",{className:"action-text",children:x.resolutionTemplate})]}),a.jsxs("div",{className:"item-metrics",children:[a.jsxs("span",{className:"metric",children:["Impact: ",x.impactScore]}),a.jsxs("span",{className:"metric",children:["Effort: ",x.effortScore]}),a.jsxs("span",{className:"metric",children:["Urgency: ",x.urgencyScore]})]})]})]},x.id)})})]})}function Zy(e,t){const n={...t,companies:[...t.companies],rounds:[...t.rounds],goals:[...t.goals]},{companyId:r,category:s,title:i}=e,o=n.companies.findIndex(c=>c.id===r);if(o===-1)return t;const l={...n.companies[o]};switch(s){case"capital_sufficiency":if(i.includes("Runway")){const h=l.runway+6;l.cashOnHand=Math.round(l.monthlyBurn*h),l.lastMaterialUpdate_at=new Date().toISOString()}break;case"revenue_viability":if(i.includes("Burn multiple")){const y=Math.round(l.monthlyBurn/2);l.mrr=y,l.lastMaterialUpdate_at=new Date().toISOString()}break;case"attention_misallocation":i.includes("No update")&&(l.lastMaterialUpdate_at=new Date().toISOString());break;case"market_access":if(i.includes("needs lead")){const h=n.rounds.find(y=>y.company_id===r&&(y.status==="active"||y.status==="closing"));if(h){const y=n.rounds.findIndex(x=>x.id===h.id),v=n.people.filter(x=>x.role==="investor");if(v.length>0){const x=v[0];n.rounds[y]={...h,leadInvestor_id:x.id,leadInvestor:`${x.firstName} ${x.lastName}`}}}}break;case"goal_risk":const c=i.split(":")[0],d=n.goals.find(h=>h.company_id===r&&h.title===c);if(d){const h=n.goals.findIndex(x=>x.id===d.id),y=d.currentValue/d.targetValue,v=Math.min(y+.3,1);n.goals[h]={...d,currentValue:Math.round(d.targetValue*v),lastUpdatedAt:new Date().toISOString()}}break}return n.companies[o]=l,n}function lu(e){const{category:t,title:n}=e;switch(t){case"capital_sufficiency":return n.includes("Runway")?"Extended runway by 6 months (bridge round secured or cost optimization)":"Capital sufficiency improved";case"revenue_viability":return n.includes("Burn multiple")?"Improved burn multiple to 2.0x (revenue acceleration or cost reduction)":"Revenue viability improved";case"attention_misallocation":return n.includes("No update")?"Material update received and logged":"Attention restored";case"market_access":return n.includes("needs lead")?"Lead investor secured for round":"Market access improved";case"goal_risk":return"Goal progress updated (+30% advancement)";default:return"Issue resolved"}}function e0({issue:e,rawData:t,onBack:n,onSelectCompany:r,onSelectIssue:s,onSelectGoal:i,onResolved:o,onDataUpdate:l}){var b,S,C;const[c,d]=P.useState(!1),[h,y]=P.useState(!1),v=kl({companies:t.companies||[],rounds:t.rounds||[],goals:t.goals||[],investors:t.investors||[],companyInvestors:t.companyInvestors||[],talent:t.talent||[],employees:t.employees||[]},[]),_=(((b=v.l3)==null?void 0:b.companies)||[]).find(R=>{var T,L,Y,ae,oe,fe;return R.id===e.entityId||e.entityType==="round"&&((Y=(L=(T=v.l3)==null?void 0:T.rounds)==null?void 0:L.find(I=>I.id===e.entityId))==null?void 0:Y.companyId)===R.id||e.entityType==="goal"&&((fe=(oe=(ae=v.l3)==null?void 0:ae.goals)==null?void 0:oe.find(I=>I.id===e.entityId))==null?void 0:fe.companyId)===R.id}),g=(((S=v.l5)==null?void 0:S.priorities)||[]).filter(R=>{var T,L,Y,ae;if(R.entityId===e.entityId)return!1;if(R.entityType==="company"&&R.entityId===(_==null?void 0:_.id))return!0;if(R.entityType==="round"){const oe=(L=(T=v.l3)==null?void 0:T.rounds)==null?void 0:L.find(fe=>fe.id===R.entityId);return(oe==null?void 0:oe.companyId)===(_==null?void 0:_.id)}if(R.entityType==="goal"){const oe=(ae=(Y=v.l3)==null?void 0:Y.goals)==null?void 0:ae.find(fe=>fe.id===R.entityId);return(oe==null?void 0:oe.companyId)===(_==null?void 0:_.id)}return!1}),w=()=>{y(!0)},m=async()=>{d(!0);const R=lu(e);try{await Cy(e.entityId,e.entityType,e.category,e.title,R);const T=Zy(e,t);l&&l(T),o&&o(),n()}catch(T){console.error("Failed to resolve priority:",T),d(!1),y(!1)}},u=()=>{y(!1)};(((C=v.l3)==null?void 0:C.goals)||[]).filter(R=>R.companyId===(_==null?void 0:_.id));const p=R=>R==="critical"?"severity-critical":R==="high"?"severity-high":R==="medium"?"severity-medium":"severity-low",N=R=>R>=80?"impact-critical":R>=60?"impact-high":R>=40?"impact-medium":"impact-low",j=R=>R>=80?"#ef4444":R>=60?"#f97316":R>=40?"#eab308":"#22c55e",k=lu(e);return h?a.jsx("div",{className:"priority-detail",children:a.jsx("div",{className:"resolve-interstitial",children:a.jsxs("div",{className:"interstitial-card",children:[a.jsx("div",{className:"interstitial-icon",children:""}),a.jsx("h2",{className:"interstitial-title",children:"Confirm Resolution"}),a.jsx("p",{className:"interstitial-subtitle",children:"This action will modify underlying data and recalculate all priorities"}),a.jsxs("div",{className:"resolution-summary-box",children:[a.jsx("div",{className:"resolution-label",children:"Changes to be applied:"}),a.jsx("div",{className:"resolution-text",children:k})]}),a.jsxs("div",{className:"interstitial-actions",children:[a.jsx("button",{className:"interstitial-btn cancel",onClick:u,disabled:c,children:"Cancel"}),a.jsx("button",{className:"interstitial-btn confirm",onClick:m,disabled:c,children:c?"Resolving...":"Confirm Resolution"})]})]})})}):a.jsxs("div",{className:"priority-detail",children:[a.jsx("button",{className:"back-btn",onClick:n,children:" Back to Priorities"}),a.jsxs("div",{className:`priority-hero ${p(e.severity)}`,children:[a.jsxs("div",{className:"hero-top",children:[a.jsx("div",{className:"hero-company",onClick:()=>_&&r&&r(_),children:(_==null?void 0:_.name)||"Unknown Company"}),a.jsxs("button",{className:"hero-resolve-btn",onClick:w,disabled:c,children:[a.jsx("span",{className:"resolve-icon",children:""}),"Resolve"]})]}),a.jsx("h1",{className:"hero-title",children:e.title}),a.jsx("div",{className:"hero-description",children:e.description||e.title}),a.jsxs("div",{className:"hero-action",children:[a.jsx("div",{className:"action-label",children:"Recommended Action"}),a.jsx("div",{className:"action-text",children:e.suggestedAction})]})]}),a.jsxs("div",{className:"priority-body",children:[a.jsxs("div",{className:"metrics-row",children:[a.jsxs("div",{className:"metric-card",children:[a.jsx("div",{className:"metric-label",children:"Priority Score"}),a.jsx("div",{className:"metric-value",style:{color:j(e.priorityScore)},children:e.priorityScore})]}),a.jsxs("div",{className:"metric-card",children:[a.jsx("div",{className:"metric-label",children:"Impact"}),a.jsx("div",{className:"metric-value",style:{color:j(e.impactScore)},children:e.impactScore})]}),a.jsxs("div",{className:"metric-card",children:[a.jsx("div",{className:"metric-label",children:"Urgency"}),a.jsx("div",{className:"metric-value",style:{color:j(e.urgencyScore)},children:e.urgencyScore})]}),a.jsxs("div",{className:"metric-card",children:[a.jsx("div",{className:"metric-label",children:"Effort"}),a.jsx("div",{className:"metric-value",style:{color:j(100-e.effortScore)},children:e.effortScore})]})]}),a.jsxs("div",{className:`entity-card company-card ${N(e.impactScore)}`,children:[a.jsx("div",{className:"card-shine"}),a.jsxs("div",{className:"card-header",children:[a.jsx("div",{className:"card-title",children:"Company Health"}),a.jsx("div",{className:"card-badge",children:e.category.replace(/_/g," ")})]}),a.jsxs("div",{className:"card-body",children:[a.jsx("div",{className:"card-name",children:(_==null?void 0:_.name)||"Unknown"}),a.jsxs("div",{className:"card-stats",children:[a.jsxs("div",{className:"stat-item",children:[a.jsx("div",{className:"stat-label",children:"Overall"}),a.jsx("div",{className:"stat-value",style:{color:j(_==null?void 0:_.overallHealth)},children:(_==null?void 0:_.overallHealth)||0})]}),a.jsxs("div",{className:"stat-item",children:[a.jsx("div",{className:"stat-label",children:"Capital"}),a.jsx("div",{className:"stat-value",style:{color:j(_==null?void 0:_.capitalHealth)},children:(_==null?void 0:_.capitalHealth)||0})]}),a.jsxs("div",{className:"stat-item",children:[a.jsx("div",{className:"stat-label",children:"Revenue"}),a.jsx("div",{className:"stat-value",style:{color:j(_==null?void 0:_.revenueHealth)},children:(_==null?void 0:_.revenueHealth)||0})]}),a.jsxs("div",{className:"stat-item",children:[a.jsx("div",{className:"stat-label",children:"Operational"}),a.jsx("div",{className:"stat-value",style:{color:j(_==null?void 0:_.operationalHealth)},children:(_==null?void 0:_.operationalHealth)||0})]})]})]})]}),e.resolutionSteps&&e.resolutionSteps.length>0&&a.jsxs("div",{className:"resolution-section",children:[a.jsxs("div",{className:"section-header",children:[a.jsx("span",{className:"section-icon",children:""}),a.jsx("h3",{className:"section-title",children:e.resolutionTemplate})]}),a.jsx("div",{className:"resolution-steps",children:e.resolutionSteps.map((R,T)=>a.jsxs("div",{className:"resolution-step",children:[a.jsx("div",{className:"step-number",children:T+1}),a.jsx("div",{className:"step-text",children:R})]},T))}),e.dependencies&&e.dependencies.length>0&&a.jsxs("div",{className:"resolution-meta",children:[a.jsx("div",{className:"meta-label",children:"Dependencies:"}),a.jsx("div",{className:"meta-value",children:e.dependencies.join(", ")})]}),e.cascadeEffect&&a.jsxs("div",{className:"resolution-meta",children:[a.jsx("div",{className:"meta-label",children:"Cascade Effect:"}),a.jsx("div",{className:"meta-value",children:e.cascadeEffect})]})]}),g.length>0&&a.jsxs("div",{className:"related-section",children:[a.jsxs("div",{className:"section-header",children:[a.jsx("span",{className:"section-icon",children:""}),a.jsx("h3",{className:"section-title",children:"Related Priorities"}),a.jsx("span",{className:"section-count",children:g.length})]}),a.jsx("div",{className:"related-grid",children:g.slice(0,6).map((R,T)=>a.jsxs("div",{className:`related-card ${p(R.severity)} clickable`,onClick:()=>s&&s(R),children:[a.jsx("div",{className:"related-card-shine"}),a.jsx("div",{className:"related-title",children:R.title}),a.jsx("div",{className:"related-type",children:R.category.replace(/_/g," ")}),a.jsx("div",{className:"related-score",style:{color:j(R.priorityScore)},children:R.priorityScore})]},T))})]})]})]})}function t0({rawData:e,onSelectCompany:t}){const[n,r]=P.useState("health"),[s,i]=P.useState("all"),[o,l]=P.useState("all"),c=Pi(e.companies||[],e.rounds||[],e.goals||[],[]),h=(e.companies||[]).map(u=>{const f=$i(u,c),p=c.filter(j=>j.companyId===u.id),N=p.length>0?Math.max(...p.map(j=>j.urgencyScore||0)):0;return{...u,healthScore:f,priorityScore:N,issueCount:p.length}}).filter(u=>u.isPortfolio),y=P.useMemo(()=>{const u=new Set(h.map(f=>f.stage).filter(Boolean));return["all",...Array.from(u).sort()]},[h]),v=P.useMemo(()=>{const u=new Set(h.map(f=>f.vertical).filter(Boolean));return["all",...Array.from(u).sort()]},[h]),x=P.useMemo(()=>{let u=[...h];return s!=="all"&&(u=u.filter(f=>f.stage===s)),o!=="all"&&(u=u.filter(f=>f.vertical===o)),n==="health"?u.sort((f,p)=>f.healthScore-p.healthScore):u.sort((f,p)=>p.priorityScore-f.priorityScore),u},[h,n,s,o]),_=u=>u>=80?"#10b981":u>=60?"#3b82f6":u>=40?"#f59e0b":"#ef4444",g=u=>u>=80?"#ef4444":u>=60?"#f59e0b":u>=40?"#3b82f6":"#10b981",w=u=>n==="health"?_(u.healthScore):g(u.priorityScore),m=u=>n==="health"?u.healthScore:u.issueCount>0?`${u.issueCount}`:"0";return a.jsxs("div",{className:"portfolio-overview",children:[a.jsxs("div",{className:"overview-controls",children:[a.jsxs("div",{className:"view-tabs",children:[a.jsx("button",{className:`view-tab ${n==="health"?"active":""}`,onClick:()=>r("health"),children:"Health"}),a.jsx("button",{className:`view-tab ${n==="priority"?"active":""}`,onClick:()=>r("priority"),children:"Priorities"})]}),a.jsxs("div",{className:"overview-filters",children:[a.jsx("div",{className:"filter-group",children:a.jsx("select",{className:"filter-select",value:s,onChange:u=>i(u.target.value),children:y.map(u=>a.jsx("option",{value:u,children:u==="all"?"All Stages":u},u))})}),a.jsx("div",{className:"filter-group",children:a.jsx("select",{className:"filter-select",value:o,onChange:u=>l(u.target.value),children:v.map(u=>a.jsx("option",{value:u,children:u==="all"?"All Verticals":u},u))})})]})]}),a.jsx("div",{className:"companies-grid",children:x.map(u=>a.jsxs("div",{className:"company-card",style:{background:w(u),borderColor:w(u)},onClick:()=>t&&t(u),children:[a.jsx("div",{className:"company-card-name",children:u.name}),a.jsx("div",{className:"company-card-score",children:m(u)}),n==="priority"&&u.issueCount>0&&a.jsxs("div",{className:"company-card-issues",children:[u.issueCount," issue",u.issueCount!==1?"s":""]})]},u.id))}),x.length===0&&a.jsx("div",{className:"empty-state",children:"No companies match the selected filters"})]})}function n0({rawData:e,onSelectCompany:t}){const[n,r]=P.useState(""),s=Pi(e.companies||[],e.rounds||[],e.goals||[],[]),o=(e.companies||[]).map(h=>({...h,healthScore:$i(h,s)})).filter(h=>h.isPortfolio),l=o.filter(h=>{var y;return n===""||h.name.toLowerCase().includes(n.toLowerCase())||((y=h.sector)==null?void 0:y.toLowerCase().includes(n.toLowerCase()))}),c=h=>h>=80?"#10b981":h>=60?"#3b82f6":h>=40?"#f59e0b":"#ef4444",d=h=>h.isPortfolio?a.jsx("span",{className:"status-badge portfolio",children:"Portfolio"}):a.jsx("span",{className:"status-badge prospect",children:"Prospect"});return a.jsxs("div",{className:"companies-list",children:[a.jsx("div",{className:"list-header",children:a.jsx("div",{className:"list-stats",children:a.jsxs("div",{className:"stat-item",children:[a.jsx("span",{className:"stat-value",children:o.length}),a.jsx("span",{className:"stat-label",children:"Portfolio Companies"})]})})}),a.jsx("div",{className:"companies-controls",children:a.jsx("input",{type:"text",placeholder:"Search companies...",className:"search-input",value:n,onChange:h=>r(h.target.value)})}),a.jsx("div",{className:"companies-grid",children:l.map(h=>a.jsxs("div",{className:"company-card",onClick:()=>t(h),children:[a.jsxs("div",{className:"company-card-header",children:[a.jsxs("div",{className:"company-info",children:[a.jsx("h3",{className:"company-name",children:h.name}),a.jsxs("div",{className:"company-meta",children:[a.jsx("span",{className:"company-sector",children:h.sector}),d(h)]})]}),a.jsx("div",{className:"health-indicator",children:a.jsx("div",{className:"health-circle",style:{borderColor:c(h.healthScore)},children:a.jsx("span",{style:{color:c(h.healthScore)},children:h.healthScore})})})]}),a.jsxs("div",{className:"company-metrics",children:[a.jsxs("div",{className:"metric",children:[a.jsx("div",{className:"metric-label",children:"ARR"}),a.jsxs("div",{className:"metric-value",children:["$",(h.arr/1e6).toFixed(1),"M"]})]}),a.jsxs("div",{className:"metric",children:[a.jsx("div",{className:"metric-label",children:"Burn"}),a.jsxs("div",{className:"metric-value",children:["$",(h.monthlyBurn/1e3).toFixed(0),"K/mo"]})]}),a.jsxs("div",{className:"metric",children:[a.jsx("div",{className:"metric-label",children:"Runway"}),a.jsxs("div",{className:"metric-value",children:[h.runway," mo"]})]}),a.jsxs("div",{className:"metric",children:[a.jsx("div",{className:"metric-label",children:"Growth"}),a.jsxs("div",{className:"metric-value",children:[(h.revenueGrowthRate*100).toFixed(0),"%"]})]})]})]},h.id))}),l.length===0&&a.jsx("div",{className:"empty-state",children:"No companies found"})]})}function r0({rawData:e,onSelectCompany:t}){const[n,r]=P.useState(""),s=Pi(e.companies||[],e.rounds||[],e.goals||[],[]),o=(e.companies||[]).map(h=>({...h,healthScore:$i(h,s)})).filter(h=>!h.isPortfolio),l=o.filter(h=>{var y;return n===""||h.name.toLowerCase().includes(n.toLowerCase())||((y=h.sector)==null?void 0:y.toLowerCase().includes(n.toLowerCase()))}),c=h=>h>=80?"#10b981":h>=60?"#3b82f6":h>=40?"#f59e0b":"#ef4444",d=h=>a.jsx("span",{className:"status-badge prospect",children:"Pipeline"});return a.jsxs("div",{className:"companies-list",children:[a.jsx("div",{className:"list-header",children:a.jsx("div",{className:"list-stats",children:a.jsxs("div",{className:"stat-item",children:[a.jsx("span",{className:"stat-value",children:o.length}),a.jsx("span",{className:"stat-label",children:"Pipeline Companies"})]})})}),a.jsx("div",{className:"companies-controls",children:a.jsx("input",{type:"text",placeholder:"Search companies...",className:"search-input",value:n,onChange:h=>r(h.target.value)})}),a.jsx("div",{className:"companies-grid",children:l.map(h=>a.jsxs("div",{className:"company-card",onClick:()=>t(h),children:[a.jsxs("div",{className:"company-card-header",children:[a.jsxs("div",{className:"company-info",children:[a.jsx("h3",{className:"company-name",children:h.name}),a.jsxs("div",{className:"company-meta",children:[a.jsx("span",{className:"company-sector",children:h.sector}),d()]})]}),a.jsx("div",{className:"health-indicator",children:a.jsx("div",{className:"health-circle",style:{borderColor:c(h.healthScore)},children:a.jsx("span",{style:{color:c(h.healthScore)},children:h.healthScore})})})]}),a.jsxs("div",{className:"company-metrics",children:[a.jsxs("div",{className:"metric",children:[a.jsx("div",{className:"metric-label",children:"ARR"}),a.jsxs("div",{className:"metric-value",children:["$",(h.arr/1e6).toFixed(1),"M"]})]}),a.jsxs("div",{className:"metric",children:[a.jsx("div",{className:"metric-label",children:"Burn"}),a.jsxs("div",{className:"metric-value",children:["$",(h.monthlyBurn/1e3).toFixed(0),"K/mo"]})]}),a.jsxs("div",{className:"metric",children:[a.jsx("div",{className:"metric-label",children:"Runway"}),a.jsxs("div",{className:"metric-value",children:[h.runway," mo"]})]}),a.jsxs("div",{className:"metric",children:[a.jsx("div",{className:"metric-label",children:"Growth"}),a.jsxs("div",{className:"metric-value",children:[(h.revenueGrowthRate*100).toFixed(0),"%"]})]})]})]},h.id))}),l.length===0&&a.jsx("div",{className:"empty-state",children:"No pipeline companies found"})]})}function s0({company:e,rawData:t,onBack:n,onSelectRound:r,onSelectGoal:s}){const i=Pi(t.companies||[],t.rounds||[],t.goals||[],[]),o=$i(e,i),l=i.filter(v=>v.companyId===e.id),c=(t.rounds||[]).filter(v=>(v.companyId||v.company_id)===e.id),d=(t.goals||[]).filter(v=>(v.companyId||v.company_id)===e.id),h=v=>v>=80?"#10b981":v>=60?"#3b82f6":v>=40?"#f59e0b":"#ef4444",y=v=>v==="critical"?"#ef4444":v==="high"?"#f59e0b":v==="medium"?"#3b82f6":"#64748b";return a.jsxs("div",{className:"company-detail",children:[a.jsx("button",{className:"back-btn",onClick:n,children:" Back to Companies"}),a.jsxs("div",{className:"detail-header",children:[a.jsxs("div",{className:"detail-title-section",children:[a.jsx("h1",{className:"detail-title",children:e.name}),a.jsxs("div",{className:"detail-badges",children:[a.jsxs("span",{className:"entity-id",children:["ID: ",e.id]}),a.jsx("span",{className:"detail-badge",children:e.sector}),e.isPortfolio&&a.jsx("span",{className:"detail-badge portfolio",children:"Portfolio"})]})]}),a.jsxs("div",{className:"detail-health",children:[a.jsx("div",{className:"detail-health-circle",style:{borderColor:h(o)},children:a.jsx("span",{style:{color:h(o)},children:o})}),a.jsx("div",{className:"detail-health-label",children:"Health Score"})]})]}),a.jsxs("div",{className:"detail-grid",children:[a.jsxs("div",{className:"detail-section",children:[a.jsx("h2",{className:"section-title",children:"Key Metrics"}),a.jsxs("div",{className:"metrics-grid",children:[a.jsxs("div",{className:"metric-box",children:[a.jsx("div",{className:"metric-box-label",children:"Annual Recurring Revenue"}),a.jsxs("div",{className:"metric-box-value",children:["$",(e.arr/1e6).toFixed(2),"M"]})]}),a.jsxs("div",{className:"metric-box",children:[a.jsx("div",{className:"metric-box-label",children:"Monthly Burn"}),a.jsxs("div",{className:"metric-box-value",children:["$",(e.monthlyBurn/1e3).toFixed(0),"K"]})]}),a.jsxs("div",{className:"metric-box",children:[a.jsx("div",{className:"metric-box-label",children:"Runway"}),a.jsxs("div",{className:"metric-box-value",children:[e.runway.toFixed(1)," months"]})]}),a.jsxs("div",{className:"metric-box",children:[a.jsx("div",{className:"metric-box-label",children:"Revenue Growth"}),a.jsxs("div",{className:"metric-box-value",children:[(e.revenueGrowthRate*100).toFixed(1),"%"]})]}),a.jsxs("div",{className:"metric-box",children:[a.jsx("div",{className:"metric-box-label",children:"Gross Margin"}),a.jsxs("div",{className:"metric-box-value",children:[(e.grossMargin*100).toFixed(1),"%"]})]}),a.jsxs("div",{className:"metric-box",children:[a.jsx("div",{className:"metric-box-label",children:"CAC Payback"}),a.jsxs("div",{className:"metric-box-value",children:[e.cacPayback," months"]})]})]})]}),l.length>0&&a.jsxs("div",{className:"detail-section",children:[a.jsxs("h2",{className:"section-title",children:["Active Issues (",l.length,")"]}),a.jsx("div",{className:"issues-list",children:l.map((v,x)=>a.jsxs("div",{className:"issue-item",children:[a.jsxs("div",{className:"issue-header",children:[a.jsx("span",{className:"issue-severity",style:{background:y(v.severity)},children:v.severity}),a.jsx("span",{className:"issue-type",children:v.type})]}),a.jsx("div",{className:"issue-description",children:v.title||v.description}),a.jsx("div",{className:"issue-action",children:v.suggestedAction})]},x))})]}),a.jsxs("div",{className:"detail-section",children:[a.jsxs("h2",{className:"section-title",children:["Funding Rounds (",c.length,")"]}),c.length>0?a.jsx("div",{className:"rounds-list",children:c.map(v=>a.jsxs("div",{className:"round-item clickable",onClick:()=>r&&r(v),children:[a.jsxs("div",{className:"round-info",children:[a.jsx("div",{className:"round-stage",children:v.stage||v.roundType}),a.jsx("div",{className:"round-date",children:new Date(v.closeDate||v.targetCloseDate).toLocaleDateString()})]}),a.jsxs("div",{className:"round-amount",children:["$",((v.amount||v.targetAmount)/1e6).toFixed(2),"M"]})]},v.id))}):a.jsx("div",{className:"empty-state",children:"No funding rounds recorded"})]}),a.jsxs("div",{className:"detail-section",children:[a.jsxs("h2",{className:"section-title",children:["Goals (",d.length,")"]}),d.length>0?a.jsx("div",{className:"goals-list",children:d.map(v=>a.jsxs("div",{className:"goal-item clickable",onClick:()=>s&&s(v),children:[a.jsxs("div",{className:"goal-header",children:[a.jsx("span",{className:"goal-metric",children:v.metric||v.title}),a.jsx("span",{className:`goal-status ${v.isOnTrack?"on-track":"off-track"}`,children:v.isOnTrack?"On Track":"Off Track"})]}),a.jsxs("div",{className:"goal-details",children:[a.jsxs("div",{className:"goal-progress",children:["Current: ",a.jsx("strong",{children:v.currentValue})]}),a.jsxs("div",{className:"goal-target",children:["Target: ",a.jsx("strong",{children:v.targetValue})]}),a.jsxs("div",{className:"goal-deadline",children:["Due: ",new Date(v.deadline||v.targetDate).toLocaleDateString()]})]})]},v.id))}):a.jsx("div",{className:"empty-state",children:"No goals set"})]})]})]})}function i0({rawData:e,onSelectGoal:t}){const[n,r]=P.useState(""),s=e.goals||[],i=e.companies||[],o=i.filter(w=>w.isPortfolio),l=s.filter(w=>{const m=w.companyId||w.company_id;return o.some(u=>u.id===m)}),c=w=>{const m=w.companyId||w.company_id,u=i.find(f=>f.id===m);return u?u.name:"Unknown"},d=l.filter(w=>{const m=c(w),u=w.metric||w.title||"";return n===""||m.toLowerCase().includes(n.toLowerCase())||u.toLowerCase().includes(n.toLowerCase())}),h=d.filter(w=>w.isOnTrack).length,y=d.filter(w=>!w.isOnTrack).length,v=d.filter(w=>{const f=(new Date(w.deadline||w.targetDate)-new Date)/(1e3*60*60*24);return f<=30&&f>0}).length,x=[...d].sort((w,m)=>w.isOnTrack!==m.isOnTrack?w.isOnTrack?1:-1:new Date(w.deadline||w.targetDate)-new Date(m.deadline||m.targetDate)),_=w=>{const m=parseFloat(w.currentValue),u=parseFloat(w.targetValue);return isNaN(m)||isNaN(u)||u===0?0:Math.min(100,Math.max(0,m/u*100))},g=w=>{const m=w.deadline||w.targetDate,u=new Date,f=new Date(m);return Math.ceil((f-u)/(1e3*60*60*24))};return a.jsxs("div",{className:"goals-list",children:[a.jsx("div",{className:"list-header",children:a.jsxs("div",{className:"list-stats",children:[a.jsxs("div",{className:"stat-item",children:[a.jsx("span",{className:"stat-value",children:d.length}),a.jsx("span",{className:"stat-label",children:"Total Goals"})]}),a.jsxs("div",{className:"stat-item",children:[a.jsx("span",{className:"stat-value on-track",children:h}),a.jsx("span",{className:"stat-label",children:"On Track"})]}),a.jsxs("div",{className:"stat-item",children:[a.jsx("span",{className:"stat-value off-track",children:y}),a.jsx("span",{className:"stat-label",children:"Off Track"})]}),a.jsxs("div",{className:"stat-item",children:[a.jsx("span",{className:"stat-value",children:v}),a.jsx("span",{className:"stat-label",children:"Due Soon"})]})]})}),a.jsx("div",{className:"goals-controls",children:a.jsx("input",{type:"text",placeholder:"Search goals...",className:"search-input",value:n,onChange:w=>r(w.target.value)})}),a.jsx("div",{className:"goals-grid",children:x.map(w=>{var f,p;const m=g(w),u=_(w);return a.jsxs("div",{className:`goal-card ${w.isOnTrack?"":"off-track-card"}`,onClick:()=>t(w),children:[a.jsxs("div",{className:"goal-card-header",children:[a.jsx("div",{className:"goal-company",children:c(w)}),a.jsx("span",{className:`goal-status-badge ${w.isOnTrack?"on-track":"off-track"}`,children:w.isOnTrack?"On Track":"Off Track"})]}),a.jsx("h3",{className:"goal-metric-name",children:w.metric||w.title}),a.jsxs("div",{className:"goal-progress-section",children:[a.jsxs("div",{className:"goal-values",children:[a.jsxs("div",{className:"goal-current",children:[a.jsx("span",{className:"value-label",children:"Current"}),a.jsx("span",{className:"value-number",children:w.metric==="MRR"||(f=w.title)!=null&&f.toLowerCase().includes("mrr")?`$${(parseFloat(w.currentValue)/1e3).toFixed(1)}K`:w.currentValue})]}),a.jsx("div",{className:"goal-arrow",children:""}),a.jsxs("div",{className:"goal-target",children:[a.jsx("span",{className:"value-label",children:"Target"}),a.jsx("span",{className:"value-number",children:w.metric==="MRR"||(p=w.title)!=null&&p.toLowerCase().includes("mrr")?`$${(parseFloat(w.targetValue)/1e3).toFixed(1)}K`:w.targetValue})]})]}),a.jsx("div",{className:"progress-bar",children:a.jsx("div",{className:"progress-fill",style:{width:`${u}%`,background:w.isOnTrack?"#10b981":"#ef4444"}})})]}),a.jsxs("div",{className:"goal-deadline",children:[a.jsx("span",{className:`deadline-text ${m<=30?"urgent":""}`,children:m>0?`${m} days remaining`:`${Math.abs(m)} days overdue`}),a.jsx("span",{className:"deadline-date",children:new Date(w.deadline||w.targetDate).toLocaleDateString()})]})]},w.id)})}),x.length===0&&a.jsx("div",{className:"empty-state",children:"No goals found"})]})}function a0({goal:e,rawData:t,onBack:n}){const r=(t.companies||[]).find(d=>d.id===(e.companyId||e.company_id)),s=d=>{const h=(e.metric||e.title||"").toLowerCase(),y=parseFloat(d);return isNaN(y)?d:h.includes("arr")||h.includes("revenue")||h.includes("mrr")?y>=1e6?`$${(y/1e6).toFixed(2)}M`:y>=1e3?`$${(y/1e3).toFixed(0)}K`:`$${y.toLocaleString()}`:h.includes("burn")||h.includes("cost")?y>=1e3?`$${(y/1e3).toFixed(0)}K`:`$${y.toLocaleString()}`:h.includes("customer")||h.includes("user")||h.includes("count")?y.toLocaleString():h.includes("rate")||h.includes("growth")||h.includes("%")?`${y}%`:y.toLocaleString()},i=()=>{const d=parseFloat(e.currentValue),h=parseFloat(e.targetValue);return isNaN(d)||isNaN(h)||h===0?0:Math.min(100,Math.max(0,d/h*100))},o=()=>{const d=e.deadline||e.targetDate,h=new Date,y=new Date(d);return Math.ceil((y-h)/(1e3*60*60*24))},l=i(),c=o();return a.jsxs("div",{className:"goal-detail",children:[a.jsx("button",{className:"back-btn",onClick:n,children:" Back to Goals"}),a.jsx("div",{className:"detail-header",children:a.jsxs("div",{className:"detail-title-section",children:[a.jsx("div",{className:"goal-company-link",children:(r==null?void 0:r.name)||"Unknown Company"}),a.jsx("h1",{className:"detail-title",children:e.metric||e.title}),a.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[a.jsxs("span",{className:"entity-id",children:["ID: ",e.id]}),a.jsx("span",{className:`goal-status-badge-large ${e.isOnTrack?"on-track":"off-track"}`,children:e.isOnTrack?"On Track":"Off Track"})]})]})}),a.jsxs("div",{className:"detail-grid",children:[a.jsxs("div",{className:"detail-section",children:[a.jsx("h2",{className:"section-title",children:"Progress"}),a.jsxs("div",{className:"progress-visualization",children:[a.jsxs("div",{className:"progress-stats",children:[a.jsxs("div",{className:"progress-stat",children:[a.jsx("div",{className:"progress-stat-label",children:"Current Value"}),a.jsx("div",{className:"progress-stat-value current",children:s(e.currentValue)})]}),a.jsxs("div",{className:"progress-stat",children:[a.jsx("div",{className:"progress-stat-label",children:"Target Value"}),a.jsx("div",{className:"progress-stat-value target",children:s(e.targetValue)})]}),a.jsxs("div",{className:"progress-stat",children:[a.jsx("div",{className:"progress-stat-label",children:"Progress"}),a.jsxs("div",{className:"progress-stat-value progress",children:[l.toFixed(1),"%"]})]})]}),a.jsx("div",{className:"progress-bar-large",children:a.jsx("div",{className:"progress-fill-large",style:{width:`${l}%`,background:e.isOnTrack?"#10b981":"#ef4444"}})})]})]}),a.jsxs("div",{className:"detail-section",children:[a.jsx("h2",{className:"section-title",children:"Timeline"}),a.jsxs("div",{className:"timeline-info",children:[a.jsxs("div",{className:"timeline-item",children:[a.jsx("div",{className:"timeline-label",children:"Deadline"}),a.jsx("div",{className:"timeline-value",children:new Date(e.deadline||e.targetDate).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]}),a.jsxs("div",{className:"timeline-item",children:[a.jsx("div",{className:"timeline-label",children:"Days Remaining"}),a.jsx("div",{className:`timeline-value ${c<=30?"urgent":""}`,children:c>0?`${c} days`:`${Math.abs(c)} days overdue`})]}),a.jsxs("div",{className:"timeline-item",children:[a.jsx("div",{className:"timeline-label",children:"Status"}),a.jsx("div",{className:"timeline-value",children:e.isOnTrack?"Trending toward target":"Needs attention"})]})]})]}),r&&a.jsxs("div",{className:"detail-section",children:[a.jsx("h2",{className:"section-title",children:"Company Context"}),a.jsxs("div",{className:"company-context",children:[a.jsxs("div",{className:"context-item",children:[a.jsx("div",{className:"context-label",children:"Company"}),a.jsx("div",{className:"context-value",children:r.name})]}),a.jsxs("div",{className:"context-item",children:[a.jsx("div",{className:"context-label",children:"Sector"}),a.jsx("div",{className:"context-value",children:r.sector})]}),a.jsxs("div",{className:"context-item",children:[a.jsx("div",{className:"context-label",children:"ARR"}),a.jsxs("div",{className:"context-value",children:["$",(r.arr/1e6).toFixed(2),"M"]})]}),a.jsxs("div",{className:"context-item",children:[a.jsx("div",{className:"context-label",children:"Growth Rate"}),a.jsxs("div",{className:"context-value",children:[(r.revenueGrowthRate*100).toFixed(0),"%"]})]}),a.jsxs("div",{className:"context-item",children:[a.jsx("div",{className:"context-label",children:"Runway"}),a.jsxs("div",{className:"context-value",children:[r.runway.toFixed(1)," months"]})]})]})]})]})]})}function ya({rawData:e,onSelectRound:t,pipelineOnly:n=!1,firmPerspective:r=!1,showAllFirms:s=!1}){const[i,o]=P.useState(""),l=e.rounds||[],c=e.companies||[],d=s?c:n?c.filter(m=>!m.isPortfolio):c.filter(m=>m.isPortfolio),h=l.filter(m=>{const u=m.companyId||m.company_id;return d.some(f=>f.id===u)}),y=m=>{const u=m.companyId||m.company_id,f=c.find(p=>p.id===u);return f?f.name:"Unknown"},v=h.filter(m=>{const u=y(m),f=m.stage||m.roundType||"",p=m.leadInvestor||"";return i===""||u.toLowerCase().includes(i.toLowerCase())||f.toLowerCase().includes(i.toLowerCase())||p.toLowerCase().includes(i.toLowerCase())}),x=[...v].sort((m,u)=>new Date(u.closeDate||u.targetCloseDate)-new Date(m.closeDate||m.targetCloseDate)),_=v.reduce((m,u)=>m+(u.amount||u.targetAmount||0),0),g=v.length>0?_/v.length:0,w=m=>{const u=(m||"").toLowerCase().replace(/_/g," ");return{seed:"#10b981","pre seed":"#10b981","series a":"#3b82f6","series b":"#8b5cf6","series c":"#ec4899","series d+":"#f59e0b",bridge:"#f59e0b"}[u]||"#64748b"};return a.jsxs("div",{className:"rounds-list",children:[a.jsx("div",{className:"list-header",children:a.jsxs("div",{className:"list-stats",children:[a.jsxs("div",{className:"stat-item",children:[a.jsx("span",{className:"stat-value",children:v.length}),a.jsx("span",{className:"stat-label",children:"Total Rounds"})]}),a.jsxs("div",{className:"stat-item",children:[a.jsxs("span",{className:"stat-value",children:["$",(_/1e6).toFixed(1),"M"]}),a.jsx("span",{className:"stat-label",children:"Total Raised"})]}),a.jsxs("div",{className:"stat-item",children:[a.jsxs("span",{className:"stat-value",children:["$",(g/1e6).toFixed(1),"M"]}),a.jsx("span",{className:"stat-label",children:"Avg Round"})]})]})}),a.jsx("div",{className:"rounds-controls",children:a.jsx("input",{type:"text",placeholder:"Search rounds...",className:"search-input",value:i,onChange:m=>o(m.target.value)})}),a.jsxs("div",{className:"rounds-table",children:[a.jsxs("div",{className:"rounds-table-header",children:[a.jsx("div",{className:"col-company",children:"Company"}),a.jsx("div",{className:"col-stage",children:"Stage"}),a.jsx("div",{className:"col-amount",children:"Amount"}),a.jsx("div",{className:"col-date",children:"Close Date"}),a.jsx("div",{className:"col-lead",children:"Lead Investor"})]}),a.jsx("div",{className:"rounds-table-body",children:x.map(m=>{const u=m.stage||m.roundType||"Unknown";return a.jsxs("div",{className:"round-row",onClick:()=>t(m),children:[a.jsx("div",{className:"col-company",children:a.jsx("span",{className:"company-name-link",children:y(m)})}),a.jsx("div",{className:"col-stage",children:a.jsx("span",{className:"stage-badge",style:{background:w(u)},children:u})}),a.jsxs("div",{className:"col-amount amount-value",children:["$",((m.amount||m.targetAmount)/1e6).toFixed(2),"M"]}),a.jsx("div",{className:"col-date",children:new Date(m.closeDate||m.targetCloseDate).toLocaleDateString()}),a.jsx("div",{className:"col-lead",children:m.leadInvestor||"TBD"})]},m.id)})})]}),x.length===0&&a.jsx("div",{className:"empty-state",children:"No rounds found"})]})}function o0({round:e,rawData:t,onBack:n,onSelectCompany:r,onSelectDeal:s,onSelectFirm:i,onSelectPerson:o}){const l=(t.companies||[]).find(_=>_.id===(e.companyId||e.company_id)),c=(t.deals||[]).filter(_=>_.roundId===e.id),d=t.firms||[],h=t.people||[],y=_=>({Seed:"#10b981","Series A":"#3b82f6","Series B":"#8b5cf6","Series C":"#ec4899","Series D+":"#f59e0b"})[_]||"#64748b",v=_=>({initial_contact:"Initial Contact",meeting_scheduled:"Meeting Scheduled",meeting_held:"Meeting Held",diligence:"Due Diligence",term_sheet:"Term Sheet",committed:"Committed",closed:"Closed",passed:"Passed"})[_]||_,x=_=>({initial_contact:"#94a3b8",meeting_scheduled:"#60a5fa",meeting_held:"#3b82f6",diligence:"#8b5cf6",term_sheet:"#a855f7",committed:"#10b981",closed:"#059669",passed:"#64748b"})[_]||"#64748b";return a.jsxs("div",{className:"round-detail",children:[a.jsx("button",{className:"back-btn",onClick:n,children:" Back to Rounds"}),a.jsxs("div",{className:"detail-header",children:[a.jsxs("div",{className:"detail-title-section",children:[a.jsx("h1",{className:"detail-title clickable",onClick:()=>l&&r&&r(l),children:(l==null?void 0:l.name)||"Unknown Company"}),a.jsxs("div",{className:"detail-subtitle",children:[a.jsxs("span",{className:"entity-id",style:{marginRight:"0.5rem"},children:["ID: ",e.id]}),a.jsx("span",{className:"stage-badge-large",style:{background:y(e.stage||e.roundType)},children:e.stage||e.roundType}),a.jsxs("span",{className:"round-date-large",children:["Closed ",new Date(e.closeDate||e.targetCloseDate).toLocaleDateString()]})]})]}),a.jsxs("div",{className:"detail-amount-box",children:[a.jsx("div",{className:"amount-label",children:"Round Size"}),a.jsxs("div",{className:"amount-value-large",children:["$",((e.amount||e.targetAmount)/1e6).toFixed(2),"M"]})]})]}),a.jsxs("div",{className:"detail-grid",children:[a.jsxs("div",{className:"detail-section",children:[a.jsx("h2",{className:"section-title",children:"Round Details"}),a.jsxs("div",{className:"details-grid",children:[a.jsxs("div",{className:"detail-item",children:[a.jsx("div",{className:"detail-item-label",children:"Lead Investor"}),a.jsx("div",{className:"detail-item-value",children:e.leadInvestor||"TBD"})]}),a.jsxs("div",{className:"detail-item",children:[a.jsx("div",{className:"detail-item-label",children:"Stage"}),a.jsx("div",{className:"detail-item-value",children:e.stage||e.roundType})]}),a.jsxs("div",{className:"detail-item",children:[a.jsx("div",{className:"detail-item-label",children:"Amount Raised"}),a.jsxs("div",{className:"detail-item-value",children:["$",((e.amount||e.targetAmount)/1e6).toFixed(2),"M"]})]}),a.jsxs("div",{className:"detail-item",children:[a.jsx("div",{className:"detail-item-label",children:"Close Date"}),a.jsx("div",{className:"detail-item-value",children:new Date(e.closeDate||e.targetCloseDate).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]})]})]}),l&&a.jsxs("div",{className:"detail-section",children:[a.jsx("h2",{className:"section-title",children:"Company Snapshot"}),a.jsxs("div",{className:"company-snapshot",children:[a.jsxs("div",{className:"snapshot-item",children:[a.jsx("div",{className:"snapshot-label",children:"Sector"}),a.jsx("div",{className:"snapshot-value",children:l.sector})]}),a.jsxs("div",{className:"snapshot-item",children:[a.jsx("div",{className:"snapshot-label",children:"ARR at Close"}),a.jsxs("div",{className:"snapshot-value",children:["$",(l.arr/1e6).toFixed(2),"M"]})]}),a.jsxs("div",{className:"snapshot-item",children:[a.jsx("div",{className:"snapshot-label",children:"Growth Rate"}),a.jsxs("div",{className:"snapshot-value",children:[(l.revenueGrowthRate*100).toFixed(0),"%"]})]}),a.jsxs("div",{className:"snapshot-item",children:[a.jsx("div",{className:"snapshot-label",children:"Gross Margin"}),a.jsxs("div",{className:"snapshot-value",children:[(l.grossMargin*100).toFixed(0),"%"]})]}),a.jsxs("div",{className:"snapshot-item",children:[a.jsx("div",{className:"snapshot-label",children:"Monthly Burn"}),a.jsxs("div",{className:"snapshot-value",children:["$",(l.monthlyBurn/1e3).toFixed(0),"K"]})]}),a.jsxs("div",{className:"snapshot-item",children:[a.jsx("div",{className:"snapshot-label",children:"Runway"}),a.jsxs("div",{className:"snapshot-value",children:[l.runway," months"]})]})]})]}),c.length>0&&a.jsxs("div",{className:"detail-section",children:[a.jsxs("h2",{className:"section-title",children:["Associated Deals (",c.length,")"]}),a.jsx("div",{className:"deals-list",children:c.map(_=>{const g=d.find(m=>m.id===_.firmId),w=h.find(m=>m.id===_.personId);return a.jsxs("div",{className:"deal-item clickable",onClick:()=>s&&s(_),children:[a.jsxs("div",{className:"deal-main",children:[a.jsxs("div",{className:"deal-investor",children:[a.jsx("div",{className:"deal-firm-name clickable-text",onClick:m=>{m.stopPropagation(),g&&i&&i(g)},children:(g==null?void 0:g.name)||"Unknown Firm"}),a.jsx("div",{className:"deal-person-name clickable-text",onClick:m=>{m.stopPropagation(),w&&o&&o(w)},children:(w==null?void 0:w.name)||"No contact"})]}),a.jsx("div",{className:"deal-stage-badge",style:{background:x(_.dealStage)},children:v(_.dealStage)})]}),_.amount&&a.jsxs("div",{className:"deal-amount",children:["$",(_.amount/1e6).toFixed(2),"M"]})]},_.id)})})]})]})]})}const Cs=[{key:"identified",label:"Identified",color:"#9ca3af"},{key:"contacted",label:"Contacted",color:"#6b7280"},{key:"meeting_scheduled",label:"Meeting Scheduled",color:"#3b82f6"},{key:"meeting_held",label:"Meeting Held",color:"#3b82f6"},{key:"diligence",label:"Diligence",color:"#8b5cf6"},{key:"term_sheet",label:"Term Sheet",color:"#10b981"},{key:"committed",label:"Committed",color:"#059669"},{key:"closed",label:"Closed",color:"#047857"},{key:"dropped",label:"Dropped",color:"#ef4444"}];function cu({rawData:e,onSelectDeal:t,pipelineOnly:n=!1,showAllFirms:r=!1}){var C,R;const[s,i]=P.useState("list"),[o,l]=P.useState(""),c=e.deals||[],d=e.rounds||[],h=e.companies||[],y=e.people||[],v=e.firms||[],x=c.map(T=>{const L=d.find(fe=>fe.id===T.roundId),Y=h.find(fe=>fe.id===(L==null?void 0:L.companyId)),ae=y.find(fe=>fe.id===T.personId),oe=v.find(fe=>fe.id===T.firmId);return{...T,companyName:(Y==null?void 0:Y.name)||"Unknown",roundType:(L==null?void 0:L.roundType)||"unknown",investorName:ae?`${ae.firstName} ${ae.lastName}`:"Unknown",firmName:(oe==null?void 0:oe.name)||"Unknown",company:Y,round:L}}),g=(r?x:n?x.filter(T=>{var L;return!((L=T.company)!=null&&L.isPortfolio)}):x.filter(T=>{var L;return(L=T.company)==null?void 0:L.isPortfolio})).filter(T=>o===""||T.companyName.toLowerCase().includes(o.toLowerCase())||T.investorName.toLowerCase().includes(o.toLowerCase())||T.firmName.toLowerCase().includes(o.toLowerCase())||T.roundType.toLowerCase().includes(o.toLowerCase())),w=Cs.map(T=>({...T,count:g.filter(L=>L.dealStage===T.key).length})),m=g.length,f=w.filter(T=>!["closed","dropped"].includes(T.key)).reduce((T,L)=>T+L.count,0),p=((C=w.find(T=>T.key==="closed"))==null?void 0:C.count)||0,N=((R=w.find(T=>T.key==="dropped"))==null?void 0:R.count)||0,j=m>0?(p/m*100).toFixed(1):0,b=[...g.filter(T=>["contacted","meeting_scheduled","meeting_held","diligence","term_sheet","committed"].includes(T.dealStage))].sort((T,L)=>{const Y=Cs.map(ae=>ae.key);return Y.indexOf(L.dealStage)-Y.indexOf(T.dealStage)}),S=T=>Cs.find(L=>L.key===T)||Cs[0];return a.jsxs("div",{className:"deals-pipeline",children:[a.jsxs("div",{className:"pipeline-header",children:[a.jsxs("div",{className:"pipeline-stats",children:[a.jsxs("div",{className:"pipeline-stat",children:[a.jsx("span",{className:"stat-value",children:f}),a.jsx("span",{className:"stat-label",children:"Active Deals"})]}),a.jsxs("div",{className:"pipeline-stat",children:[a.jsx("span",{className:"stat-value",style:{color:"#10b981"},children:p}),a.jsx("span",{className:"stat-label",children:"Closed"})]}),a.jsxs("div",{className:"pipeline-stat",children:[a.jsx("span",{className:"stat-value",style:{color:"#ef4444"},children:N}),a.jsx("span",{className:"stat-label",children:"Dropped"})]}),a.jsxs("div",{className:"pipeline-stat",children:[a.jsxs("span",{className:"stat-value",children:[j,"%"]}),a.jsx("span",{className:"stat-label",children:"Conversion"})]})]}),a.jsxs("div",{className:"view-toggle",children:[a.jsx("button",{className:`toggle-btn ${s==="funnel"?"active":""}`,onClick:()=>i("funnel"),children:"Funnel"}),a.jsx("button",{className:`toggle-btn ${s==="list"?"active":""}`,onClick:()=>i("list"),children:"List"})]})]}),a.jsx("div",{className:"deals-controls",children:a.jsx("input",{type:"text",placeholder:"Search deals...",className:"search-input",value:o,onChange:T=>l(T.target.value)})}),s==="funnel"?a.jsx("div",{className:"funnel-view",children:w.map((T,L)=>{const Y=Math.max(...w.map(oe=>oe.count),1),ae=T.count/Y*100;return a.jsxs("div",{className:"funnel-stage",children:[a.jsxs("div",{className:"stage-label",children:[a.jsx("span",{className:"stage-name",children:T.label}),a.jsx("span",{className:"stage-count",children:T.count})]}),a.jsx("div",{className:"stage-bar-container",children:a.jsx("div",{className:"stage-bar",style:{width:`${ae}%`,background:T.color}})})]},T.key)})}):a.jsx("div",{className:"deals-list-view",children:b.map(T=>{const L=S(T.dealStage),Y=T.lastContactDate?Math.floor((Date.now()-new Date(T.lastContactDate))/864e5):null;return a.jsxs("div",{className:"deal-card",onClick:()=>t&&t(T),children:[a.jsxs("div",{className:"deal-header",children:[a.jsxs("div",{className:"deal-company",children:[a.jsx("h3",{className:"deal-company-name",children:T.companyName}),a.jsx("span",{className:"deal-round-type",children:T.roundType.replace("_"," ")})]}),a.jsx("span",{className:"deal-stage-badge",style:{background:`${L.color}15`,color:L.color},children:L.label})]}),a.jsxs("div",{className:"deal-details",children:[a.jsxs("div",{className:"deal-investor",children:[a.jsx("span",{className:"detail-label",children:"Investor:"}),a.jsx("span",{className:"detail-value",children:T.investorName})]}),a.jsxs("div",{className:"deal-firm",children:[a.jsx("span",{className:"detail-label",children:"Firm:"}),a.jsx("span",{className:"detail-value",children:T.firmName})]}),T.expectedAmount&&a.jsxs("div",{className:"deal-amount",children:[a.jsx("span",{className:"detail-label",children:"Expected:"}),a.jsxs("span",{className:"detail-value",children:["$",(T.expectedAmount/1e6).toFixed(1),"M"]})]}),Y!==null&&a.jsxs("div",{className:"deal-contact",children:[a.jsx("span",{className:"detail-label",children:"Last Contact:"}),a.jsxs("span",{className:"detail-value",children:[Y,"d ago"]})]})]})]},T.id)})}),g.length===0&&a.jsx("div",{className:"empty-state",children:"No deals found"})]})}const uu=[{key:"identified",label:"Identified",color:"#9ca3af"},{key:"contacted",label:"Contacted",color:"#6b7280"},{key:"meeting_scheduled",label:"Meeting Scheduled",color:"#3b82f6"},{key:"meeting_held",label:"Meeting Held",color:"#3b82f6"},{key:"diligence",label:"Diligence",color:"#8b5cf6"},{key:"term_sheet",label:"Term Sheet",color:"#10b981"},{key:"committed",label:"Committed",color:"#059669"},{key:"closed",label:"Closed",color:"#047857"},{key:"dropped",label:"Dropped",color:"#ef4444"}];function l0({deal:e,rawData:t,onBack:n,onSelectCompany:r,onSelectPerson:s,onSelectFirm:i,onSelectRound:o}){var _,g;const l=(t.rounds||[]).find(w=>w.id===e.roundId),c=(t.companies||[]).find(w=>w.id===(l==null?void 0:l.companyId)),d=(t.people||[]).find(w=>w.id===e.personId),h=(t.firms||[]).find(w=>w.id===e.firmId),y=e.introducedById?(t.people||[]).find(w=>w.id===e.introducedById):null,v=uu.find(w=>w.key===e.dealStage)||uu[0],x=e.lastContactDate?Math.floor((Date.now()-new Date(e.lastContactDate))/864e5):null;return a.jsxs("div",{className:"deal-detail",children:[a.jsx("button",{className:"back-btn",onClick:n,children:" Back to Deals"}),a.jsxs("div",{className:"detail-header",children:[a.jsxs("div",{className:"detail-title-section",children:[a.jsx("h1",{className:"detail-title clickable",onClick:()=>c&&r&&r(c),children:(c==null?void 0:c.name)||"Unknown Company"}),a.jsxs("div",{className:"detail-subtitle",children:[a.jsxs("span",{className:"entity-id",style:{marginRight:"0.5rem"},children:["ID: ",e.id]}),a.jsx("span",{className:"round-type-badge clickable",onClick:w=>{w.stopPropagation(),l&&o&&o(l)},children:((_=l==null?void 0:l.roundType)==null?void 0:_.replace("_"," "))||"Unknown Round"}),a.jsx("span",{className:"deal-stage-badge-large",style:{background:`${v.color}15`,color:v.color},children:v.label})]})]}),e.expectedAmount&&a.jsxs("div",{className:"detail-amount-box",children:[a.jsx("div",{className:"amount-label",children:"Expected Investment"}),a.jsxs("div",{className:"amount-value-large",children:["$",(e.expectedAmount/1e6).toFixed(2),"M"]})]})]}),a.jsxs("div",{className:"detail-grid",children:[a.jsxs("div",{className:"detail-section",children:[a.jsx("h2",{className:"section-title",children:"Investor Details"}),d&&a.jsxs("div",{className:"investor-details-box",children:[a.jsxs("div",{className:"detail-row",children:[a.jsx("div",{className:"detail-row-label",children:"Name"}),a.jsxs("div",{className:"detail-row-value clickable",onClick:()=>s&&s(d),children:[d.firstName," ",d.lastName]})]}),a.jsxs("div",{className:"detail-row",children:[a.jsx("div",{className:"detail-row-label",children:"Title"}),a.jsx("div",{className:"detail-row-value",children:d.title})]}),a.jsxs("div",{className:"detail-row",children:[a.jsx("div",{className:"detail-row-label",children:"Email"}),a.jsx("div",{className:"detail-row-value",children:d.email})]}),h&&a.jsxs("div",{className:"detail-row",children:[a.jsx("div",{className:"detail-row-label",children:"Firm"}),a.jsx("div",{className:"detail-row-value clickable",onClick:()=>i&&i(h),children:h.name})]})]})]}),a.jsxs("div",{className:"detail-section",children:[a.jsx("h2",{className:"section-title",children:"Deal Status"}),a.jsxs("div",{className:"status-details-box",children:[a.jsxs("div",{className:"detail-row",children:[a.jsx("div",{className:"detail-row-label",children:"Current Stage"}),a.jsx("div",{className:"detail-row-value",children:a.jsx("span",{style:{color:v.color},children:v.label})})]}),x!==null&&a.jsxs("div",{className:"detail-row",children:[a.jsx("div",{className:"detail-row-label",children:"Last Contact"}),a.jsxs("div",{className:"detail-row-value",children:[x," days ago"]})]}),e.isLead!==void 0&&a.jsxs("div",{className:"detail-row",children:[a.jsx("div",{className:"detail-row-label",children:"Lead Investor"}),a.jsx("div",{className:"detail-row-value",children:e.isLead?"Yes":"No"})]}),y&&a.jsxs("div",{className:"detail-row",children:[a.jsx("div",{className:"detail-row-label",children:"Introduced By"}),a.jsxs("div",{className:"detail-row-value clickable",onClick:()=>s&&s(y),children:[y.firstName," ",y.lastName]})]})]})]}),c&&a.jsxs("div",{className:"detail-section",children:[a.jsx("h2",{className:"section-title",children:"Company Snapshot"}),a.jsxs("div",{className:"company-snapshot-grid",children:[a.jsxs("div",{className:"snapshot-stat",children:[a.jsx("div",{className:"snapshot-stat-label",children:"Sector"}),a.jsx("div",{className:"snapshot-stat-value",children:c.sector})]}),a.jsxs("div",{className:"snapshot-stat",children:[a.jsx("div",{className:"snapshot-stat-label",children:"ARR"}),a.jsxs("div",{className:"snapshot-stat-value",children:["$",(c.arr/1e6).toFixed(2),"M"]})]}),a.jsxs("div",{className:"snapshot-stat",children:[a.jsx("div",{className:"snapshot-stat-label",children:"Growth Rate"}),a.jsxs("div",{className:"snapshot-stat-value",children:[(c.revenueGrowthRate*100).toFixed(0),"%"]})]}),a.jsxs("div",{className:"snapshot-stat",children:[a.jsx("div",{className:"snapshot-stat-label",children:"Runway"}),a.jsxs("div",{className:"snapshot-stat-value",children:[c.runway.toFixed(1)," months"]})]})]})]}),l&&a.jsxs("div",{className:"detail-section",children:[a.jsx("h2",{className:"section-title",children:"Round Information"}),a.jsxs("div",{className:"round-info-box",children:[a.jsxs("div",{className:"detail-row",children:[a.jsx("div",{className:"detail-row-label",children:"Round Type"}),a.jsx("div",{className:"detail-row-value",children:(g=l.roundType)==null?void 0:g.replace("_"," ")})]}),a.jsxs("div",{className:"detail-row",children:[a.jsx("div",{className:"detail-row-label",children:"Target Amount"}),a.jsxs("div",{className:"detail-row-value",children:["$",((l.targetAmount||l.amount)/1e6).toFixed(2),"M"]})]}),a.jsxs("div",{className:"detail-row",children:[a.jsx("div",{className:"detail-row-label",children:"Target Close Date"}),a.jsx("div",{className:"detail-row-value",children:new Date(l.targetCloseDate||l.closeDate).toLocaleDateString()})]}),l.leadInvestor&&a.jsxs("div",{className:"detail-row",children:[a.jsx("div",{className:"detail-row-label",children:"Lead Investor"}),a.jsx("div",{className:"detail-row-value",children:l.leadInvestor})]})]})]})]})]})}const du={vc:"Venture Capital",angel_syndicate:"Angel Syndicate",family_office:"Family Office",corporate_vc:"Corporate VC",accelerator:"Accelerator"};function hu({rawData:e,onSelectFirm:t,portfolioInvestorsOnly:n=!1}){const[r,s]=P.useState(""),i=e.firms||[],o=e.people||[],l=e.deals||[],c=e.companies||[],d=e.rounds||[],h=c.filter(u=>u.isPortfolio),y=d.filter(u=>{const f=u.companyId||u.company_id;return h.some(p=>p.id===f)}),v=l.filter(u=>y.some(f=>f.id===u.roundId)),x=i.map(u=>{const f=o.filter(R=>R.firmId===u.id),p=v.filter(R=>R.firmId===u.id),N=p.filter(R=>["meeting_scheduled","meeting_held","diligence","term_sheet","committed"].includes(R.dealStage)),j=new Set(p.map(R=>{const T=y.find(L=>L.id===R.roundId);return T?T.companyId||T.company_id:null}).filter(Boolean)),k=p.reduce((R,T)=>R+(T.committedAmount||0),0),b=j.size>0,S=N.length>0,C=b||S;return{...u,investorCount:f.length,portfolioCompanies:j.size,totalInvestedAmount:k,activeDeals:N.length,isExistingInvestor:b,isPortfolioRelevant:C}}),w=[...(n?x.filter(u=>u.isPortfolioRelevant):x).filter(u=>{var f;return r===""||u.name.toLowerCase().includes(r.toLowerCase())||((f=du[u.firmType])==null?void 0:f.toLowerCase().includes(r.toLowerCase()))})].sort((u,f)=>f.activeDeals-u.activeDeals),m=u=>u>=1e6?`$${(u/1e6).toFixed(1)}M`:u>=1e3?`$${(u/1e3).toFixed(0)}k`:`$${u}`;return a.jsxs("div",{className:"firms-list",children:[a.jsx("div",{className:"firms-controls",children:a.jsx("input",{type:"text",placeholder:"Search firms...",className:"search-input",value:r,onChange:u=>s(u.target.value)})}),a.jsx("div",{className:"firms-grid",children:w.map(u=>a.jsxs("div",{className:`firm-card ${u.isExistingInvestor?"existing-investor":""}`,onClick:()=>t&&t(u),children:[a.jsxs("div",{className:"firm-header",children:[a.jsxs("div",{className:"firm-name-section",children:[a.jsx("h3",{className:"firm-name",children:u.name}),u.isExistingInvestor&&a.jsx("span",{className:"existing-badge",children:"Portfolio Investor"})]}),a.jsx("span",{className:"firm-type-badge",children:du[u.firmType]||u.firmType})]}),a.jsxs("div",{className:"firm-metrics",children:[a.jsxs("div",{className:"firm-metric",children:[a.jsx("span",{className:"metric-label",children:"Check Size"}),a.jsxs("span",{className:"metric-value",children:[m(u.typicalCheckMin)," - ",m(u.typicalCheckMax)]})]}),a.jsxs("div",{className:"firm-metric",children:[a.jsx("span",{className:"metric-label",children:"Partners"}),a.jsx("span",{className:"metric-value",children:u.investorCount})]})]}),a.jsxs("div",{className:"firm-portfolio-summary",children:[a.jsx("div",{className:"portfolio-stat-label",children:"Portfolio Investments"}),a.jsxs("div",{className:"firm-activity",children:[a.jsxs("div",{className:"activity-stat",children:[a.jsx("span",{className:"activity-value companies",children:u.portfolioCompanies}),a.jsx("span",{className:"activity-label",children:"Companies"})]}),a.jsxs("div",{className:"activity-stat",children:[a.jsx("span",{className:"activity-value amount",children:m(u.totalInvestedAmount)}),a.jsx("span",{className:"activity-label",children:"Invested"})]}),a.jsxs("div",{className:"activity-stat",children:[a.jsx("span",{className:"activity-value active",children:u.activeDeals}),a.jsx("span",{className:"activity-label",children:"Active Deals"})]})]})]})]},u.id))}),w.length===0&&a.jsx("div",{className:"empty-state",children:"No firms found"})]})}const fu={vc:"Venture Capital",angel_syndicate:"Angel Syndicate",family_office:"Family Office",corporate_vc:"Corporate VC",accelerator:"Accelerator"};function c0({firm:e,rawData:t,onBack:n,onSelectPerson:r,onSelectDeal:s,onSelectCompany:i}){const[o,l]=P.useState(""),c=(t.people||[]).filter(p=>p.firmId===e.id),d=(t.deals||[]).filter(p=>p.firmId===e.id),h=t.rounds||[],y=t.companies||[],v=d.map(p=>{const N=h.find(b=>b.id===p.roundId),j=y.find(b=>b.id===(N==null?void 0:N.companyId)),k=c.find(b=>b.id===p.personId);return{...p,round:N,company:j,person:k}}),x=v.filter(p=>["meeting_scheduled","meeting_held","diligence","term_sheet","committed"].includes(p.dealStage)),_=v.filter(p=>p.dealStage==="closed"),g=v.filter(p=>p.dealStage==="passed"),w=_.reduce((p,N)=>p+(N.amount||0),0),m=p=>p?p>=1e6?`$${(p/1e6).toFixed(1)}M`:`$${(p/1e3).toFixed(0)}K`:"N/A",u=p=>({initial_contact:"Initial Contact",meeting_scheduled:"Meeting Scheduled",meeting_held:"Meeting Held",diligence:"Due Diligence",term_sheet:"Term Sheet",committed:"Committed",closed:"Closed",passed:"Passed"})[p]||p,f=p=>({initial_contact:"#94a3b8",meeting_scheduled:"#60a5fa",meeting_held:"#3b82f6",diligence:"#8b5cf6",term_sheet:"#a855f7",committed:"#10b981",closed:"#059669",passed:"#64748b"})[p]||"#64748b";return a.jsxs("div",{className:"firm-detail",children:[a.jsx("button",{className:"back-btn",onClick:n,children:" Back to Firms"}),a.jsxs("div",{className:"detail-header",children:[a.jsxs("div",{className:"detail-title-section",children:[a.jsx("h1",{className:"detail-title",children:e.name}),a.jsxs("div",{className:"firm-badges",children:[a.jsxs("span",{className:"entity-id",style:{marginRight:"0.5rem"},children:["ID: ",e.id]}),a.jsx("span",{className:"firm-type-badge-large",children:fu[e.firmType]||e.firmType})]})]}),a.jsxs("div",{className:"detail-amount-box",children:[a.jsx("div",{className:"amount-label",children:"Total Invested"}),a.jsx("div",{className:"amount-value-large",children:m(w)})]})]}),a.jsxs("div",{className:"detail-grid",children:[a.jsxs("div",{className:"detail-section",children:[a.jsx("h2",{className:"section-title",children:"Firm Details"}),a.jsxs("div",{className:"details-grid",children:[a.jsxs("div",{className:"detail-item",children:[a.jsx("div",{className:"detail-item-label",children:"Type"}),a.jsx("div",{className:"detail-item-value",children:fu[e.firmType]||e.firmType})]}),a.jsxs("div",{className:"detail-item",children:[a.jsx("div",{className:"detail-item-label",children:"Typical Check Size"}),a.jsxs("div",{className:"detail-item-value",children:[m(e.typicalCheckMin)," - ",m(e.typicalCheckMax)]})]}),a.jsxs("div",{className:"detail-item",children:[a.jsx("div",{className:"detail-item-label",children:"Stage Focus"}),a.jsx("div",{className:"detail-item-value",children:e.stageFocus||"N/A"})]}),a.jsxs("div",{className:"detail-item",children:[a.jsx("div",{className:"detail-item-label",children:"People"}),a.jsx("div",{className:"detail-item-value",children:c.length})]})]})]}),a.jsxs("div",{className:"detail-section",children:[a.jsx("h2",{className:"section-title",children:"Deal Activity"}),a.jsxs("div",{className:"activity-stats",children:[a.jsxs("div",{className:"activity-stat-box",children:[a.jsx("div",{className:"activity-stat-value",children:x.length}),a.jsx("div",{className:"activity-stat-label",children:"Active Deals"})]}),a.jsxs("div",{className:"activity-stat-box",children:[a.jsx("div",{className:"activity-stat-value",children:_.length}),a.jsx("div",{className:"activity-stat-label",children:"Closed Deals"})]}),a.jsxs("div",{className:"activity-stat-box",children:[a.jsx("div",{className:"activity-stat-value",children:g.length}),a.jsx("div",{className:"activity-stat-label",children:"Passed"})]})]})]}),c.length>0&&a.jsxs("div",{className:"detail-section",children:[a.jsxs("h2",{className:"section-title",children:["People (",c.length,")"]}),a.jsx("input",{type:"text",placeholder:"",className:"search-input",value:o,onChange:p=>l(p.target.value),style:{marginBottom:"1rem",width:"100%"}}),a.jsx("div",{className:"people-list",children:c.filter(p=>{if(!o)return!0;const N=`${p.firstName} ${p.lastName}`.toLowerCase(),j=(p.title||"").toLowerCase(),k=o.toLowerCase();return N.includes(k)||j.includes(k)}).map(p=>a.jsxs("div",{className:"person-item clickable",onClick:()=>r&&r(p),children:[a.jsxs("div",{className:"person-name",children:[p.firstName," ",p.lastName]}),a.jsx("div",{className:"person-title",children:p.title})]},p.id))})]}),v.length>0&&a.jsxs("div",{className:"detail-section",children:[a.jsxs("h2",{className:"section-title",children:["Deals (",v.length,")"]}),a.jsx("div",{className:"deals-list",children:v.map(p=>{var N,j,k;return a.jsxs("div",{className:"deal-item clickable",onClick:()=>s&&s(p),children:[a.jsxs("div",{className:"deal-main",children:[a.jsxs("div",{className:"deal-info",children:[a.jsx("div",{className:"deal-company-name clickable-text",onClick:b=>{b.stopPropagation(),p.company&&i&&i(p.company)},children:((N=p.company)==null?void 0:N.name)||"Unknown"}),a.jsxs("div",{className:"deal-person-name clickable-text",onClick:b=>{b.stopPropagation(),p.person&&r&&r(p.person)},children:[(j=p.person)==null?void 0:j.firstName," ",(k=p.person)==null?void 0:k.lastName]})]}),a.jsx("div",{className:"deal-stage-badge",style:{background:f(p.dealStage)},children:u(p.dealStage)})]}),p.amount&&a.jsx("div",{className:"deal-amount",children:m(p.amount)})]},p.id)})})]})]})]})}const mu={founder:"Founder",investor:"Investor",operator:"Operator",advisor:"Advisor",employee:"Employee"};function wa({rawData:e,onSelectPerson:t,filterToInvestors:n=!1,showAllFirms:r=!1}){const[s,i]=P.useState(""),o=n?(e.people||[]).filter(p=>p.role==="investor"):e.people||[],l=e.firms||[],c=e.deals||[],d=e.companies||[],h=e.rounds||[],y=d.filter(p=>p.isPortfolio),v=h.filter(p=>{const N=p.companyId||p.company_id;return y.some(j=>j.id===N)}),x=c.filter(p=>v.some(N=>N.id===p.roundId)),_=new Set(x.map(p=>p.firmId).filter(Boolean)),u=[...(r?o:o.filter(p=>!p.firmId||_.has(p.firmId))).map(p=>{const N=l.find(S=>S.id===p.firmId),j=x.filter(S=>S.personId===p.id),k=j.filter(S=>["meeting_scheduled","meeting_held","diligence","term_sheet","committed"].includes(S.dealStage)),b=p.lastContactedAt?Math.floor((Date.now()-new Date(p.lastContactedAt))/864e5):null;return{...p,firmName:(N==null?void 0:N.name)||null,totalDeals:j.length,activeDeals:k.length,daysSinceContact:b}}).filter(p=>{var N;return s===""||`${p.firstName} ${p.lastName}`.toLowerCase().includes(s.toLowerCase())||p.email.toLowerCase().includes(s.toLowerCase())||p.firmName&&p.firmName.toLowerCase().includes(s.toLowerCase())||((N=mu[p.role])==null?void 0:N.toLowerCase().includes(s.toLowerCase()))})].sort((p,N)=>p.role==="investor"&&N.role==="investor"?N.activeDeals-p.activeDeals:(p.daysSinceContact||999)-(N.daysSinceContact||999)),f=p=>p===null?{label:"Never",color:"#9ca3af"}:p<7?{label:`${p}d ago`,color:"#10b981"}:p<30?{label:`${p}d ago`,color:"#3b82f6"}:p<90?{label:`${p}d ago`,color:"#f59e0b"}:{label:`${p}d ago`,color:"#ef4444"};return a.jsxs("div",{className:"people-list",children:[a.jsx("div",{className:"people-controls",children:a.jsx("input",{type:"text",placeholder:"Search people...",className:"search-input",value:s,onChange:p=>i(p.target.value)})}),a.jsx("div",{className:"people-grid",children:u.map(p=>{const N=f(p.daysSinceContact);return a.jsxs("div",{className:"person-card",onClick:()=>t&&t(p),children:[a.jsx("div",{className:"person-header",children:a.jsxs("div",{className:"person-info",children:[a.jsxs("h3",{className:"person-name",children:[p.firstName," ",p.lastName]}),a.jsx("p",{className:"person-title",children:p.title})]})}),a.jsxs("div",{className:"person-meta",children:[a.jsx("span",{className:"role-badge",children:mu[p.role]}),p.firmName&&a.jsx("span",{className:"firm-badge",children:p.firmName})]}),a.jsx("div",{className:"person-contact",children:a.jsx("span",{className:"contact-email",children:p.email})}),a.jsxs("div",{className:"person-stats",children:[p.role==="investor"&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"stat",children:[a.jsx("span",{className:"stat-value",children:p.activeDeals}),a.jsx("span",{className:"stat-label",children:"Active"})]}),a.jsxs("div",{className:"stat",children:[a.jsx("span",{className:"stat-value",children:p.totalDeals}),a.jsx("span",{className:"stat-label",children:"Total"})]})]}),a.jsxs("div",{className:"stat",children:[a.jsx("span",{className:"stat-value",style:{color:N.color},children:N.label}),a.jsx("span",{className:"stat-label",children:"Last Contact"})]})]})]},p.id)})}),u.length===0&&a.jsx("div",{className:"empty-state",children:"No people found"})]})}const pu={founder:"Founder",investor:"Investor",operator:"Operator",advisor:"Advisor",employee:"Employee"},u0=[{key:"identified",label:"Identified"},{key:"contacted",label:"Contacted"},{key:"meeting_scheduled",label:"Meeting Scheduled"},{key:"meeting_held",label:"Meeting Held"},{key:"diligence",label:"Diligence"},{key:"term_sheet",label:"Term Sheet"},{key:"committed",label:"Committed"},{key:"closed",label:"Closed"},{key:"dropped",label:"Dropped"}];function d0({person:e,rawData:t,onBack:n,onSelectFirm:r,onSelectDeal:s,onSelectCompany:i,onSelectRound:o}){const l=(t.firms||[]).find(f=>f.id===e.firmId),c=(t.deals||[]).filter(f=>f.personId===e.id),d=t.rounds||[],h=t.companies||[],y=c.map(f=>{const p=d.find(k=>k.id===f.roundId),N=h.find(k=>k.id===(p==null?void 0:p.companyId)),j=u0.find(k=>k.key===f.dealStage);return{...f,round:p,company:N,stageLabel:(j==null?void 0:j.label)||"Unknown"}}),v=y.filter(f=>["meeting_scheduled","meeting_held","diligence","term_sheet","committed"].includes(f.dealStage)),x=y.filter(f=>f.dealStage==="closed"),_=y.filter(f=>f.dealStage==="dropped"),g=(t.deals||[]).filter(f=>f.introducedById===e.id),w=e.lastContactedAt?Math.floor((Date.now()-new Date(e.lastContactedAt))/864e5):null,u=(f=>f===null?{label:"Never",color:"#9ca3af"}:f<7?{color:"#10b981"}:f<30?{color:"#3b82f6"}:f<90?{color:"#f59e0b"}:{color:"#ef4444"})(w);return a.jsxs("div",{className:"person-detail",children:[a.jsx("button",{className:"back-btn",onClick:n,children:" Back to People"}),a.jsx("div",{className:"detail-header",children:a.jsxs("div",{className:"detail-title-section",children:[a.jsxs("h1",{className:"detail-title",children:[e.firstName," ",e.lastName]}),a.jsxs("div",{className:"detail-subtitle",children:[a.jsxs("span",{className:"entity-id",style:{marginRight:"0.5rem"},children:["ID: ",e.id]}),a.jsx("span",{className:"person-title-text",children:e.title}),l&&a.jsx("span",{className:"person-firm-link clickable",onClick:f=>{f.stopPropagation(),r&&r(l)},children:l.name})]}),a.jsxs("div",{className:"person-badges",children:[a.jsx("span",{className:"role-badge-large",children:pu[e.role]}),w!==null&&a.jsxs("span",{className:"contact-badge",style:{color:u.color},children:["Last contact: ",w,"d ago"]})]})]})}),a.jsxs("div",{className:"detail-grid",children:[a.jsxs("div",{className:"detail-section",children:[a.jsx("h2",{className:"section-title",children:"Contact Information"}),a.jsxs("div",{className:"contact-info-box",children:[a.jsxs("div",{className:"detail-row",children:[a.jsx("div",{className:"detail-row-label",children:"Email"}),a.jsx("div",{className:"detail-row-value",children:e.email})]}),a.jsxs("div",{className:"detail-row",children:[a.jsx("div",{className:"detail-row-label",children:"Role"}),a.jsx("div",{className:"detail-row-value",children:pu[e.role]})]}),l&&a.jsxs("div",{className:"detail-row",children:[a.jsx("div",{className:"detail-row-label",children:"Firm"}),a.jsx("div",{className:"detail-row-value",children:l.name})]}),e.linkedinUrl&&a.jsxs("div",{className:"detail-row",children:[a.jsx("div",{className:"detail-row-label",children:"LinkedIn"}),a.jsx("div",{className:"detail-row-value",children:a.jsx("a",{href:e.linkedinUrl,target:"_blank",rel:"noopener noreferrer",className:"external-link",children:"View Profile"})})]})]})]}),a.jsxs("div",{className:"detail-section",children:[a.jsx("h2",{className:"section-title",children:"Activity Summary"}),a.jsxs("div",{className:"activity-stats-grid",children:[a.jsxs("div",{className:"activity-stat-box",children:[a.jsx("div",{className:"activity-stat-value",children:v.length}),a.jsx("div",{className:"activity-stat-label",children:"Active Deals"})]}),a.jsxs("div",{className:"activity-stat-box",children:[a.jsx("div",{className:"activity-stat-value",children:x.length}),a.jsx("div",{className:"activity-stat-label",children:"Closed"})]}),a.jsxs("div",{className:"activity-stat-box",children:[a.jsx("div",{className:"activity-stat-value",children:_.length}),a.jsx("div",{className:"activity-stat-label",children:"Dropped"})]}),a.jsxs("div",{className:"activity-stat-box",children:[a.jsx("div",{className:"activity-stat-value",children:g.length}),a.jsx("div",{className:"activity-stat-label",children:"Intros Made"})]})]})]}),y.length>0&&a.jsxs("div",{className:"detail-section full-width",children:[a.jsxs("h2",{className:"section-title",children:["Deal History (",y.length,")"]}),a.jsx("div",{className:"deals-history-list",children:y.map(f=>{var p,N,j;return a.jsxs("div",{className:"deal-history-item clickable",onClick:()=>s&&s(f),children:[a.jsxs("div",{className:"deal-history-header",children:[a.jsx("div",{className:"deal-history-company clickable-text",onClick:k=>{k.stopPropagation(),f.company&&i&&i(f.company)},children:((p=f.company)==null?void 0:p.name)||"Unknown"}),a.jsx("span",{className:"deal-history-stage",children:f.stageLabel})]}),a.jsxs("div",{className:"deal-history-meta",children:[a.jsx("span",{className:"clickable-text",onClick:k=>{k.stopPropagation(),f.round&&o&&o(f.round)},children:((j=(N=f.round)==null?void 0:N.roundType)==null?void 0:j.replace("_"," "))||"Unknown Round"}),f.expectedAmount&&a.jsxs("span",{children:["$",(f.expectedAmount/1e6).toFixed(1),"M"]})]})]},f.id)})})]}),g.length>0&&a.jsxs("div",{className:"detail-section full-width",children:[a.jsxs("h2",{className:"section-title",children:["Introductions Made (",g.length,")"]}),a.jsx("div",{className:"intros-list",children:g.map(f=>{const p=d.find(k=>k.id===f.round_id),N=h.find(k=>k.id===(p==null?void 0:p.company_id)),j=(t.people||[]).find(k=>k.id===f.person_id);return a.jsxs("div",{className:"intro-item",children:[a.jsx("div",{className:"intro-company",children:(N==null?void 0:N.name)||"Unknown"}),a.jsx("div",{className:"intro-arrow",children:""}),a.jsx("div",{className:"intro-investor",children:j?`${j.firstName} ${j.lastName}`:"Unknown"})]},f.id)})})]})]})]})}function h0({rawData:e,onSelectRelationship:t}){P.useState(null);const n=e.companies||[],r=e.people||[],s=e.firms||[],i=e.deals||[],o=e.rounds||[],d=(()=>{const w=[];return i.forEach(m=>{const u=o.find(j=>j.id===m.roundId),f=n.find(j=>j.id===(u==null?void 0:u.companyId)),p=r.find(j=>j.id===m.personId),N=s.find(j=>j.id===m.firmId);f&&p&&N&&w.push({id:m.id,type:"deal",company:f,person:p,firm:N,dealStage:m.dealStage,introducedBy:m.introducedById?r.find(j=>j.id===m.introducedById):null})}),w})().filter(w=>w.company.isPortfolio),h={};d.forEach(w=>{h[w.company.id]||(h[w.company.id]={company:w.company,firms:new Set,investors:new Set,introSources:new Set}),h[w.company.id].firms.add(w.firm.name),h[w.company.id].investors.add(`${w.person.firstName} ${w.person.lastName}`),w.introducedBy&&h[w.company.id].introSources.add(`${w.introducedBy.firstName} ${w.introducedBy.lastName}`)});const y=Object.values(h).map(w=>({company:w.company,firmCount:w.firms.size,investorCount:w.investors.size,introSourceCount:w.introSources.size})).sort((w,m)=>m.investorCount-w.investorCount),v={};d.forEach(w=>{const m=`${w.person.firstName} ${w.person.lastName}`;v[m]||(v[m]={person:w.person,firm:w.firm,companies:new Set,activeDeals:0}),v[m].companies.add(w.company.name),["meeting_scheduled","meeting_held","diligence","term_sheet","committed"].includes(w.dealStage)&&v[m].activeDeals++});const x=Object.values(v).map(w=>({...w,companyCount:w.companies.size})).sort((w,m)=>m.activeDeals-w.activeDeals).slice(0,15),_={};d.forEach(w=>{if(w.introducedBy){const m=`${w.introducedBy.firstName} ${w.introducedBy.lastName}`;_[m]||(_[m]={person:w.introducedBy,introCount:0,companies:new Set,firms:new Set}),_[m].introCount++,_[m].companies.add(w.company.name),_[m].firms.add(w.firm.name)}});const g=Object.values(_).sort((w,m)=>m.introCount-w.introCount).slice(0,10);return a.jsxs("div",{className:"relationships-view",children:[a.jsxs("div",{className:"relationships-header",children:[a.jsxs("div",{className:"header-stat",children:[a.jsx("span",{className:"stat-value",children:d.length}),a.jsx("span",{className:"stat-label",children:"Total Relationships"})]}),a.jsxs("div",{className:"header-stat",children:[a.jsx("span",{className:"stat-value",children:y.length}),a.jsx("span",{className:"stat-label",children:"Connected Companies"})]}),a.jsxs("div",{className:"header-stat",children:[a.jsx("span",{className:"stat-value",children:x.length}),a.jsx("span",{className:"stat-label",children:"Active Investors"})]}),a.jsxs("div",{className:"header-stat",children:[a.jsx("span",{className:"stat-value",children:g.length}),a.jsx("span",{className:"stat-label",children:"Intro Sources"})]})]}),a.jsxs("div",{className:"relationships-sections",children:[a.jsxs("section",{className:"relationships-section",children:[a.jsx("h2",{className:"section-title",children:"Company Network Strength"}),a.jsx("div",{className:"network-grid",children:y.map(w=>{const m=d.find(u=>u.company.id===w.company.id);return a.jsxs("div",{className:"network-card",onClick:()=>m&&t&&t(m),children:[a.jsx("h3",{className:"network-company-name",children:w.company.name}),a.jsxs("div",{className:"network-stats",children:[a.jsxs("div",{className:"network-stat",children:[a.jsx("span",{className:"network-stat-value",children:w.investorCount}),a.jsx("span",{className:"network-stat-label",children:"Investors"})]}),a.jsxs("div",{className:"network-stat",children:[a.jsx("span",{className:"network-stat-value",children:w.firmCount}),a.jsx("span",{className:"network-stat-label",children:"Firms"})]}),a.jsxs("div",{className:"network-stat",children:[a.jsx("span",{className:"network-stat-value",children:w.introSourceCount}),a.jsx("span",{className:"network-stat-label",children:"Intros"})]})]})]},w.company.id)})})]}),a.jsxs("section",{className:"relationships-section",children:[a.jsx("h2",{className:"section-title",children:"Most Active Investors"}),a.jsx("div",{className:"investors-list",children:x.map((w,m)=>a.jsxs("div",{className:"investor-row",children:[a.jsx("div",{className:"investor-rank",children:m+1}),a.jsxs("div",{className:"investor-info",children:[a.jsxs("div",{className:"investor-name",children:[w.person.firstName," ",w.person.lastName]}),a.jsx("div",{className:"investor-firm",children:w.firm.name})]}),a.jsxs("div",{className:"investor-stats",children:[a.jsxs("div",{className:"investor-stat",children:[a.jsx("span",{className:"investor-stat-value active",children:w.activeDeals}),a.jsx("span",{className:"investor-stat-label",children:"Active"})]}),a.jsxs("div",{className:"investor-stat",children:[a.jsx("span",{className:"investor-stat-value",children:w.companyCount}),a.jsx("span",{className:"investor-stat-label",children:"Companies"})]})]})]},m))})]}),a.jsxs("section",{className:"relationships-section",children:[a.jsx("h2",{className:"section-title",children:"Top Intro Sources"}),a.jsx("div",{className:"intro-sources-list",children:g.map((w,m)=>a.jsxs("div",{className:"intro-source-card",children:[a.jsxs("div",{className:"intro-source-header",children:[a.jsx("div",{className:"intro-source-rank",children:m+1}),a.jsxs("div",{className:"intro-source-info",children:[a.jsxs("div",{className:"intro-source-name",children:[w.person.firstName," ",w.person.lastName]}),a.jsxs("div",{className:"intro-source-meta",children:[w.person.title,"  ",w.person.role]})]})]}),a.jsxs("div",{className:"intro-source-stats",children:[a.jsxs("div",{className:"intro-stat",children:[a.jsx("span",{className:"intro-stat-value",children:w.introCount}),a.jsx("span",{className:"intro-stat-label",children:"Introductions"})]}),a.jsxs("div",{className:"intro-stat",children:[a.jsx("span",{className:"intro-stat-value",children:w.companies.size}),a.jsx("span",{className:"intro-stat-label",children:"Companies"})]}),a.jsxs("div",{className:"intro-stat",children:[a.jsx("span",{className:"intro-stat-value",children:w.firms.size}),a.jsx("span",{className:"intro-stat-label",children:"Firms"})]})]})]},m))})]})]})]})}function f0({relationship:e,rawData:t,onBack:n}){const{company:r,person:s,firm:i,dealStage:o,introducedBy:l}=e,c=(t.deals||[]).filter(x=>x.personId===s.id&&(t.rounds||[]).find(_=>_.id===x.roundId&&_.companyId===r.id)),d=x=>({meeting_scheduled:"#3b82f6",meeting_held:"#3b82f6",diligence:"#8b5cf6",term_sheet:"#10b981",committed:"#059669",closed:"#047857",dropped:"#ef4444"})[x]||"#9ca3af",h=x=>x.split("_").map(_=>_.charAt(0).toUpperCase()+_.slice(1)).join(" "),y=c.length>0?Math.min(...c.map(x=>x.lastContactDate?new Date(x.lastContactDate).getTime():Date.now())):null,v=y?Math.floor((Date.now()-y)/864e5):null;return a.jsxs("div",{className:"relationship-detail",children:[a.jsx("button",{className:"back-btn",onClick:n,children:" Back to Network"}),a.jsx("div",{className:"detail-header",children:a.jsxs("div",{className:"detail-title-section",children:[a.jsxs("h1",{className:"detail-title",children:[r.name,"  ",i.name]}),a.jsxs("div",{className:"detail-subtitle",children:[a.jsxs("span",{className:"entity-id",style:{marginRight:"0.5rem"},children:["ID: ",e.id]}),a.jsxs("span",{className:"investor-name-text",children:[s.firstName," ",s.lastName]}),a.jsx("span",{className:"investor-title-text",children:s.title})]})]})}),a.jsxs("div",{className:"detail-grid",children:[a.jsxs("div",{className:"detail-section",children:[a.jsx("h2",{className:"section-title",children:"Company"}),a.jsxs("div",{className:"entity-info-box",children:[a.jsx("div",{className:"entity-name",children:r.name}),a.jsxs("div",{className:"entity-details",children:[a.jsxs("div",{className:"entity-detail-item",children:[a.jsx("span",{className:"entity-detail-label",children:"Sector:"}),a.jsx("span",{className:"entity-detail-value",children:r.sector})]}),a.jsxs("div",{className:"entity-detail-item",children:[a.jsx("span",{className:"entity-detail-label",children:"ARR:"}),a.jsxs("span",{className:"entity-detail-value",children:["$",(r.arr/1e6).toFixed(2),"M"]})]}),a.jsxs("div",{className:"entity-detail-item",children:[a.jsx("span",{className:"entity-detail-label",children:"Growth:"}),a.jsxs("span",{className:"entity-detail-value",children:[(r.revenueGrowthRate*100).toFixed(0),"%"]})]})]})]})]}),a.jsxs("div",{className:"detail-section",children:[a.jsx("h2",{className:"section-title",children:"Investor"}),a.jsxs("div",{className:"entity-info-box",children:[a.jsxs("div",{className:"entity-name",children:[s.firstName," ",s.lastName]}),a.jsxs("div",{className:"entity-details",children:[a.jsxs("div",{className:"entity-detail-item",children:[a.jsx("span",{className:"entity-detail-label",children:"Firm:"}),a.jsx("span",{className:"entity-detail-value",children:i.name})]}),a.jsxs("div",{className:"entity-detail-item",children:[a.jsx("span",{className:"entity-detail-label",children:"Title:"}),a.jsx("span",{className:"entity-detail-value",children:s.title})]}),a.jsxs("div",{className:"entity-detail-item",children:[a.jsx("span",{className:"entity-detail-label",children:"Email:"}),a.jsx("span",{className:"entity-detail-value",children:s.email})]})]})]})]}),a.jsxs("div",{className:"detail-section",children:[a.jsx("h2",{className:"section-title",children:"Relationship Status"}),a.jsxs("div",{className:"status-info-box",children:[a.jsxs("div",{className:"detail-row",children:[a.jsx("div",{className:"detail-row-label",children:"Current Stage"}),a.jsx("div",{className:"detail-row-value",children:a.jsx("span",{className:"stage-badge",style:{background:`${d(o)}15`,color:d(o)},children:h(o)})})]}),l&&a.jsxs("div",{className:"detail-row",children:[a.jsx("div",{className:"detail-row-label",children:"Introduced By"}),a.jsxs("div",{className:"detail-row-value",children:[l.firstName," ",l.lastName]})]}),v!==null&&a.jsxs("div",{className:"detail-row",children:[a.jsx("div",{className:"detail-row-label",children:"Relationship Age"}),a.jsxs("div",{className:"detail-row-value",children:[v," days"]})]}),a.jsxs("div",{className:"detail-row",children:[a.jsx("div",{className:"detail-row-label",children:"Active Interactions"}),a.jsx("div",{className:"detail-row-value",children:c.length})]})]})]}),l&&a.jsxs("div",{className:"detail-section",children:[a.jsx("h2",{className:"section-title",children:"Introduction Source"}),a.jsxs("div",{className:"intro-source-box",children:[a.jsxs("div",{className:"intro-source-name",children:[l.firstName," ",l.lastName]}),a.jsxs("div",{className:"intro-source-details",children:[a.jsxs("div",{className:"intro-source-item",children:[a.jsx("span",{className:"intro-source-label",children:"Role:"}),a.jsx("span",{className:"intro-source-value",children:l.role})]}),a.jsxs("div",{className:"intro-source-item",children:[a.jsx("span",{className:"intro-source-label",children:"Title:"}),a.jsx("span",{className:"intro-source-value",children:l.title})]})]})]})]}),c.length>0&&a.jsxs("div",{className:"detail-section full-width",children:[a.jsxs("h2",{className:"section-title",children:["Interaction History (",c.length,")"]}),a.jsx("div",{className:"interactions-timeline",children:c.map(x=>{var w;const _=(t.rounds||[]).find(m=>m.id===x.roundId),g=x.lastContactDate?Math.floor((Date.now()-new Date(x.lastContactDate))/864e5):null;return a.jsxs("div",{className:"interaction-item",children:[a.jsxs("div",{className:"interaction-header",children:[a.jsx("span",{className:"interaction-stage",style:{background:`${d(x.dealStage)}15`,color:d(x.dealStage)},children:h(x.dealStage)}),a.jsx("span",{className:"interaction-round",children:((w=_==null?void 0:_.roundType)==null?void 0:w.replace("_"," "))||"Unknown Round"})]}),a.jsxs("div",{className:"interaction-meta",children:[x.expectedAmount&&a.jsxs("span",{children:["Expected: $",(x.expectedAmount/1e6).toFixed(1),"M"]}),g!==null&&a.jsxs("span",{children:["Last contact: ",g,"d ago"]})]})]},x.id)})})]})]})]})}function vu(e){const t=e.trim().split(`
`);if(t.length<2)return[];const n=t[0].split(",").map(r=>r.trim());return t.slice(1).map(r=>{const s=[];let i="",o=!1;for(const c of r)c==='"'?o=!o:c===","&&!o?(s.push(i.trim()),i=""):i+=c;s.push(i.trim());const l={};return n.forEach((c,d)=>{let h=s[d]||"";h==="true"?h=!0:h==="false"?h=!1:!isNaN(h)&&h!==""&&(h=Number(h)),l[c]=h}),l})}function m0(e,t){if(!e||e.length===0)return"";const n=t||Object.keys(e[0]),r=n.join(","),s=e.map(i=>n.map(o=>{const l=i[o];return l==null?"":typeof l=="string"&&(l.includes(",")||l.includes('"'))?`"${l.replace(/"/g,'""')}"`:l}).join(","));return[r,...s].join(`
`)}async function p0(e){let t=e;if(e.includes("/edit")){const s=e.match(/\/d\/([a-zA-Z0-9-_]+)/);if(s){const i=s[1];let o="0";const l=e.match(/gid=([0-9]+)/);l&&(o=l[1]),t=`https://docs.google.com/spreadsheets/d/${i}/export?format=csv&gid=${o}`}}const n=await fetch(t);if(!n.ok)throw new Error("Failed to fetch Google Sheet");return await n.text()}const v0={companies:{headers:"name,is_portfolio,stage,sector,country,cash_on_hand,monthly_burn,mrr,employee_count,founded_at",example:"Acme Corp,true,seed,fintech,US,500000,50000,10000,12,2023-01-15"},firms:{headers:"name,firm_type,typical_check_min,typical_check_max",example:"Sequoia Capital,vc,1000000,10000000"},people:{headers:"first_name,last_name,email,role,title",example:"John,Doe,john@example.com,founder,CEO"},rounds:{headers:"round_type,target_amount,raised_amount,status,target_close_date",example:"seed,2000000,1500000,active,2024-06-30"},goals:{headers:"title,goal_type,target_value,current_value,target_date",example:"Hit $50k MRR,revenue,50000,35000,2024-12-31"},deals:{headers:"deal_stage,expected_amount,last_contact_date",example:"diligence,250000,2024-01-15"}};function g0(){const[e,t]=P.useState({}),[n,r]=P.useState({}),[s,i]=P.useState({}),[o,l]=P.useState({}),[c,d]=P.useState({}),h=["companies","people","firms","rounds","goals","deals"];async function y(g){const w=n[g];if(!(w!=null&&w.trim())){l({...o,[g]:"Please paste CSV data"});return}d({...c,[g]:!0}),l({...o,[g]:""}),i({...s,[g]:""});try{const m=vu(w);if(m.length===0){l({...o,[g]:"No data found in CSV"});return}const{error:u}=await H.from(g).insert(m);if(u)throw u;i({...s,[g]:`Imported ${m.length} rows`}),r({...n,[g]:""})}catch(m){l({...o,[g]:"Import failed: "+m.message})}finally{d({...c,[g]:!1})}}async function v(g){const w=e[g];if(!(w!=null&&w.trim())){l({...o,[g]:"Please enter a Google Sheets URL"});return}d({...c,[g]:!0}),l({...o,[g]:""}),i({...s,[g]:""});try{const m=await p0(w),u=vu(m);if(u.length===0){l({...o,[g]:"No data found in Google Sheet"});return}const{error:f}=await H.from(g).insert(u);if(f)throw f;i({...s,[g]:`Imported ${u.length} rows from Sheets`}),t({...e,[g]:""})}catch(m){l({...o,[g]:"Sheets import failed: "+m.message})}finally{d({...c,[g]:!1})}}async function x(g){d({...c,[g]:!0}),l({...o,[g]:""}),i({...s,[g]:""});try{const{data:w,error:m}=await H.from(g).select("*");if(m)throw m;if(!w||w.length===0){l({...o,[g]:"No data to export"});return}const u=m0(w),f=new Blob([u],{type:"text/csv"}),p=URL.createObjectURL(f),N=document.createElement("a");N.href=p,N.download=`${g}_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(N),N.click(),document.body.removeChild(N),URL.revokeObjectURL(p),i({...s,[g]:`Exported ${w.length} rows`})}catch(w){l({...o,[g]:"Export failed: "+w.message})}finally{d({...c,[g]:!1})}}function _(g,w){const m=w.target.files[0];if(!m)return;const u=new FileReader;u.onload=f=>{r({...n,[g]:f.target.result}),i({...s,[g]:"File loaded"})},u.readAsText(m)}return a.jsxs("div",{className:"admin-import-export",children:[a.jsxs("div",{className:"import-export-header",children:[a.jsx("h3",{children:"Import/Export Data"}),a.jsx("p",{children:"Manage data for all entity types"})]}),a.jsx("div",{className:"entities-table",children:h.map(g=>{var p;const w=v0[g],m=c[g],u=s[g],f=o[g];return a.jsxs("div",{className:"entity-row",children:[a.jsxs("div",{className:"entity-name-col",children:[a.jsx("h4",{children:g}),a.jsxs("div",{className:"template-hint",children:[w.headers.split(",").slice(0,3).join(", "),"..."]})]}),a.jsxs("div",{className:"entity-actions-col",children:[a.jsxs("div",{className:"action-group",children:[a.jsx("input",{type:"text",placeholder:"",className:"sheets-url-compact",value:e[g]||"",onChange:N=>t({...e,[g]:N.target.value})}),a.jsx("button",{className:"action-btn sheets-btn",onClick:()=>v(g),disabled:m||!((p=e[g])!=null&&p.trim()),children:"Sheets"})]}),a.jsxs("div",{className:"action-group",children:[a.jsxs("label",{className:"file-upload-compact",children:["CSV",a.jsx("input",{type:"file",accept:".csv",onChange:N=>_(g,N)})]}),n[g]&&a.jsx("button",{className:"action-btn import-btn-compact",onClick:()=>y(g),disabled:m,children:"Import"})]}),a.jsx("div",{className:"action-group",children:a.jsx("button",{className:"action-btn export-btn-compact",onClick:()=>x(g),disabled:m,children:"Export"})})]}),(u||f)&&a.jsxs("div",{className:"entity-status",children:[u&&a.jsx("span",{className:"status-text success",children:u}),f&&a.jsx("span",{className:"status-text error",children:f})]})]},g)})})]})}function y0(){const[e,t]=P.useState(12),[n,r]=P.useState("default"),[s,i]=P.useState(!1),[o,l]=P.useState(""),[c,d]=P.useState("");async function h(){i(!0),l(""),d("");try{d("Clearing existing data..."),await Jh(),d("Generating portfolio data...");const y=await Qh(e,n);d(`Generated ${y.companies} companies, ${y.rounds} rounds, ${y.deals} deals`),i(!1)}catch(y){l("Data generation failed: "+y.message),i(!1)}}return a.jsxs("div",{className:"admin-generate",children:[a.jsxs("div",{className:"generate-header",children:[a.jsx("h3",{children:"Generate Sample Data"}),a.jsx("p",{children:"Create realistic portfolio data with configurable parameters"})]}),a.jsxs("div",{className:"generate-content",children:[a.jsxs("div",{className:"generate-controls",children:[a.jsxs("div",{className:"control-group",children:[a.jsx("label",{children:"Portfolio Companies"}),a.jsx("input",{type:"number",className:"number-input",min:"1",max:"50",value:e,onChange:y=>t(parseInt(y.target.value)||12),disabled:s})]}),a.jsxs("div",{className:"control-group",children:[a.jsx("label",{children:"Stress Level"}),a.jsxs("select",{className:"select-input",value:n,onChange:y=>r(y.target.value),disabled:s,children:[a.jsx("option",{value:"default",children:"Default (Balanced)"}),a.jsx("option",{value:"moderate",children:"Moderate (Some Issues)"}),a.jsx("option",{value:"high",children:"High (Critical Portfolio)"})]})]}),a.jsx("button",{className:"generate-btn",onClick:h,disabled:s,children:s?"Generating...":"Generate Data"})]}),c&&!o&&a.jsx("div",{className:"status-msg success",children:c}),o&&a.jsx("div",{className:"status-msg error",children:o}),a.jsx("div",{className:"generate-info",children:a.jsx("p",{children:"This will clear all existing data and generate sample companies, investors, deals, and goals."})})]})]})}function w0(){const[e,t]=P.useState("enrich");return a.jsxs("div",{className:"admin-analyze",children:[a.jsx("div",{className:"analyze-header",children:a.jsx("h3",{children:"Data Analysis"})}),a.jsxs("div",{className:"analyze-tabs",children:[a.jsx("button",{className:`analyze-tab ${e==="enrich"?"active":""}`,onClick:()=>t("enrich"),children:"Enrich"}),a.jsx("button",{className:`analyze-tab ${e==="calculate"?"active":""}`,onClick:()=>t("calculate"),children:"Calculate"})]}),a.jsxs("div",{className:"analyze-content",children:[e==="enrich"&&a.jsx(_0,{}),e==="calculate"&&a.jsx(x0,{})]})]})}function _0(){return a.jsx("div",{className:"analyze-subview",children:a.jsxs("div",{className:"placeholder-content",children:[a.jsx("h4",{children:"Data Enrichment"}),a.jsx("p",{children:"Enhance your data with external sources and intelligence"}),a.jsxs("ul",{className:"feature-list",children:[a.jsx("li",{children:"Company information lookup"}),a.jsx("li",{children:"LinkedIn profile enrichment"}),a.jsx("li",{children:"Funding data integration"}),a.jsx("li",{children:"Market intelligence"}),a.jsx("li",{children:"Contact verification"})]}),a.jsx("div",{className:"coming-soon-badge",children:"Coming Soon"})]})})}function x0(){return a.jsx("div",{className:"analyze-subview",children:a.jsxs("div",{className:"placeholder-content",children:[a.jsx("h4",{children:"Advanced Calculations"}),a.jsx("p",{children:"Run sophisticated analytics and derivations on your portfolio data"}),a.jsxs("ul",{className:"feature-list",children:[a.jsx("li",{children:"Health score computation"}),a.jsx("li",{children:"Risk assessment models"}),a.jsx("li",{children:"Trajectory predictions"}),a.jsx("li",{children:"Priority calculations"}),a.jsx("li",{children:"Portfolio-level aggregations"})]}),a.jsx("div",{className:"coming-soon-badge",children:"Coming Soon"})]})})}function _a({onClose:e,initialTab:t="import-export"}){const[n,r]=P.useState(t);return a.jsxs("div",{className:"admin-container",children:[a.jsxs("div",{className:"admin-header",children:[a.jsx("h2",{children:"Admin Panel"}),a.jsx("button",{className:"close-btn",onClick:e,children:""})]}),a.jsxs("div",{className:"admin-nav",children:[a.jsx("button",{className:`admin-nav-btn ${n==="import-export"?"active":""}`,onClick:()=>r("import-export"),children:"Import/Export"}),a.jsx("button",{className:`admin-nav-btn ${n==="generate"?"active":""}`,onClick:()=>r("generate"),children:"Generate"}),a.jsx("button",{className:`admin-nav-btn ${n==="qa"?"active":""}`,onClick:()=>r("qa"),children:"QA"}),a.jsx("button",{className:`admin-nav-btn ${n==="analyze"?"active":""}`,onClick:()=>r("analyze"),children:"Analyze"})]}),a.jsxs("div",{className:"admin-main",children:[n==="import-export"&&a.jsx(g0,{}),n==="generate"&&a.jsx(y0,{}),n==="qa"&&a.jsx(Yh,{}),n==="analyze"&&a.jsx(w0,{})]})]})}function N0(){var j,k,b;const[e,t]=P.useState("priorities"),[n,r]=P.useState(null),[s,i]=P.useState(null),[o,l]=P.useState([]),[c,d]=P.useState([]),[h,y]=P.useState(null),[v,x]=P.useState(!0);P.useEffect(()=>{_()},[]);const _=async()=>{x(!0);try{const[S,C]=await Promise.all([Ty(),su()]);y(S),d(C)}catch(S){console.error("Failed to load data:",S)}finally{x(!1)}},g=async()=>{try{const S=await su();d(S)}catch(S){console.error("Failed to load resolved priorities:",S)}},w=()=>{g()},m=async()=>{await _()},u=(S,C=null)=>{t(S),i(null),l([]),C!==null&&r(C)},f=(S,C)=>{l(R=>[...R,{view:e,entity:s}]),i({type:S,entity:C}),t(`${S}-detail`)},p=()=>{if(o.length>0){const S=o[o.length-1];l(C=>C.slice(0,-1)),t(S.view),i(S.entity)}else t({"priority-detail":"priorities","company-detail":n==="pipeline"?"pipeline-companies":"companies-list","round-detail":n==="pipeline"?"pipeline-rounds":n==="firms"?"all-firms-rounds":"portfolio-firm-rounds","goal-detail":"goals","deal-detail":n==="pipeline"?"pipeline-deals":n==="firms"?"all-firms-deals":"portfolio-firm-deals","firm-detail":n==="firms"?"all-firms":"portfolio-firms","person-detail":n==="firms"?"all-firms-partners":"portfolio-partners","relationship-detail":"relationships"}[e]||"priorities"),i(null)},N=()=>{switch(e){case"priorities":return a.jsx(ou,{rawData:h,resolvedPriorities:c,onSelectIssue:S=>f("priority",S),onSelectCompany:S=>f("company",S)});case"priority-detail":return a.jsx(e0,{issue:s==null?void 0:s.entity,rawData:h,onBack:p,onSelectCompany:S=>f("company",S),onSelectIssue:S=>f("priority",S),onSelectGoal:S=>f("goal",S),onResolved:w,onDataUpdate:m});case"portfolio-overview":return a.jsx(t0,{rawData:h,onSelectCompany:S=>f("company",S)});case"companies-list":return a.jsx(n0,{rawData:h,onSelectCompany:S=>f("company",S)});case"pipeline-companies":return a.jsx(r0,{rawData:h,onSelectCompany:S=>f("company",S)});case"company-detail":return a.jsx(s0,{company:s==null?void 0:s.entity,rawData:h,onBack:p,onSelectRound:S=>f("round",S),onSelectGoal:S=>f("goal",S)});case"goals":return a.jsx(i0,{rawData:h,onSelectGoal:S=>f("goal",S)});case"goal-detail":return a.jsx(a0,{goal:s==null?void 0:s.entity,rawData:h,onBack:p});case"portfolio-rounds":case"pipeline-rounds":return a.jsx(ya,{rawData:h,onSelectRound:S=>f("round",S),pipelineOnly:e==="pipeline-rounds"});case"round-detail":return a.jsx(o0,{round:s==null?void 0:s.entity,rawData:h,onBack:p,onSelectCompany:S=>f("company",S),onSelectDeal:S=>f("deal",S),onSelectFirm:S=>f("firm",S),onSelectPerson:S=>f("person",S)});case"portfolio-deals":case"pipeline-deals":case"all-firms-deals":return a.jsx(cu,{rawData:h,onSelectDeal:S=>f("deal",S),pipelineOnly:e==="pipeline-deals",showAllFirms:e==="all-firms-deals"});case"deal-detail":return a.jsx(l0,{deal:s==null?void 0:s.entity,rawData:h,onBack:p,onSelectCompany:S=>f("company",S),onSelectPerson:S=>f("person",S),onSelectFirm:S=>f("firm",S),onSelectRound:S=>f("round",S)});case"portfolio-firms":return a.jsx(hu,{rawData:h,onSelectFirm:S=>f("firm",S),portfolioInvestorsOnly:!0});case"all-firms":return a.jsx(hu,{rawData:h,onSelectFirm:S=>f("firm",S),portfolioInvestorsOnly:!1});case"firm-detail":return a.jsx(c0,{firm:s==null?void 0:s.entity,rawData:h,onBack:p,onSelectPerson:S=>f("person",S),onSelectDeal:S=>f("deal",S),onSelectCompany:S=>f("company",S)});case"portfolio-partners":return a.jsx(wa,{rawData:h,onSelectPerson:S=>f("person",S),filterToInvestors:!0,showAllFirms:!1});case"all-firms-partners":return a.jsx(wa,{rawData:h,onSelectPerson:S=>f("person",S),filterToInvestors:!0,showAllFirms:!0});case"portfolio-firm-deals":return a.jsx(cu,{rawData:h,onSelectDeal:S=>f("deal",S),pipelineOnly:!1,showAllFirms:!1});case"portfolio-firm-rounds":return a.jsx(ya,{rawData:h,onSelectRound:S=>f("round",S),showAllFirms:!1});case"all-firms-rounds":return a.jsx(ya,{rawData:h,onSelectRound:S=>f("round",S),showAllFirms:!0});case"person-detail":return a.jsx(d0,{person:s==null?void 0:s.entity,rawData:h,onBack:p,onSelectFirm:S=>f("firm",S),onSelectDeal:S=>f("deal",S),onSelectCompany:S=>f("company",S),onSelectRound:S=>f("round",S)});case"relationships":return a.jsx(h0,{rawData:h,onSelectRelationship:S=>f("relationship",S)});case"directory":return a.jsx(wa,{rawData:h,onSelectPerson:S=>f("person",S),simpleSearch:!0});case"relationship-detail":return a.jsx(f0,{relationship:s==null?void 0:s.entity,rawData:h,onBack:p});case"admin-data":return a.jsx(_a,{onClose:()=>u("priorities",null),initialTab:"import-export"});case"admin-qa":return a.jsx(_a,{onClose:()=>u("priorities",null),initialTab:"qa"});case"admin-analyze":return a.jsx(_a,{onClose:()=>u("priorities",null),initialTab:"analyze"});default:return a.jsx(ou,{rawData:h,onSelectIssue:S=>f("priority",S),onSelectCompany:S=>f("company",S)})}};return v?a.jsx("div",{className:"dashboard",children:a.jsxs("div",{className:"loading-state",children:[a.jsx("div",{className:"loading-spinner"}),a.jsx("p",{children:"Loading dashboard..."})]})}):h?a.jsxs("div",{className:"dashboard",children:[a.jsxs("nav",{className:"sidebar",children:[a.jsx("div",{className:"sidebar-header",children:a.jsx("img",{src:"/src/assets/backbone_white.svg",alt:"Backbone",className:"sidebar-logo"})}),a.jsxs("div",{className:"sidebar-nav",children:[a.jsx("button",{className:`nav-item ${e==="priorities"||e==="priority-detail"?"active":""}`,onClick:()=>u("priorities",null),children:a.jsx("span",{className:"nav-label",children:"Priorities"})}),a.jsxs("div",{className:"nav-section",children:[a.jsx("button",{className:`nav-section-label clickable ${e==="portfolio-overview"||e==="companies-list"||e==="company-detail"||e==="goals"||e==="goal-detail"||e==="portfolio-rounds"||e==="round-detail"||e==="portfolio-deals"||e==="deal-detail"?"active":""}`,onClick:()=>u("portfolio-overview",null),children:"Portfolio"}),a.jsx("button",{className:`nav-item sub ${e==="companies-list"||e==="company-detail"?"active":""}`,onClick:()=>u("companies-list",null),children:a.jsx("span",{className:"nav-label",children:"Companies"})}),a.jsx("button",{className:`nav-item sub ${e==="goals"||e==="goal-detail"?"active":""}`,onClick:()=>u("goals",null),children:a.jsx("span",{className:"nav-label",children:"Goals"})}),a.jsx("button",{className:`nav-item sub ${e==="portfolio-rounds"||e==="round-detail"?"active":""}`,onClick:()=>u("portfolio-rounds",null),children:a.jsx("span",{className:"nav-label",children:"Rounds"})}),a.jsx("button",{className:`nav-item sub-sub ${e==="portfolio-deals"||e==="deal-detail"?"active":""}`,onClick:()=>u("portfolio-deals",null),children:a.jsx("span",{className:"nav-label",children:"Deals"})})]}),a.jsxs("div",{className:"nav-section",children:[a.jsx("button",{className:`nav-section-label clickable ${e==="portfolio-firms"||e==="firm-detail"||e==="portfolio-partners"||e==="portfolio-firm-deals"||e==="portfolio-firm-rounds"?"active":""}`,onClick:()=>u("portfolio-firms",null),children:"Firms"}),a.jsx("button",{className:`nav-item sub ${e==="portfolio-partners"||e==="person-detail"?"active":""}`,onClick:()=>u("portfolio-partners",null),children:a.jsx("span",{className:"nav-label",children:"Partners"})}),a.jsx("button",{className:`nav-item sub ${e==="portfolio-firm-deals"?"active":""}`,onClick:()=>u("portfolio-firm-deals",null),children:a.jsx("span",{className:"nav-label",children:"Deals"})}),a.jsx("button",{className:`nav-item sub-sub ${e==="portfolio-firm-rounds"?"active":""}`,onClick:()=>u("portfolio-firm-rounds",null),children:a.jsx("span",{className:"nav-label",children:"Rounds"})})]}),a.jsxs("div",{className:"nav-section",children:[a.jsx("button",{className:`nav-section-label clickable ${e==="relationships"||e==="relationship-detail"||e==="directory"?"active":""}`,onClick:()=>u("relationships",null),children:"Network"}),a.jsx("button",{className:`nav-item sub ${e==="directory"?"active":""}`,onClick:()=>u("directory",null),children:a.jsx("span",{className:"nav-label",children:"Directory"})})]}),a.jsxs("div",{className:"nav-section admin-section",children:[a.jsx("div",{className:"nav-section-label",children:"Admin"}),a.jsx("button",{className:`nav-item sub ${e==="admin-data"?"active":""}`,onClick:()=>u("admin-data",null),children:a.jsx("span",{className:"nav-label",children:"Data"})}),a.jsx("button",{className:`nav-item sub ${e==="admin-qa"?"active":""}`,onClick:()=>u("admin-qa",null),children:a.jsx("span",{className:"nav-label",children:"QA"})}),a.jsx("button",{className:`nav-item sub ${e==="admin-analyze"?"active":""}`,onClick:()=>u("admin-analyze",null),children:a.jsx("span",{className:"nav-label",children:"Analyze"})})]})]})]}),a.jsxs("div",{className:"dashboard-main",children:[a.jsxs("div",{className:"horizontal-nav",children:[a.jsxs("div",{className:"horizontal-nav-section",children:[a.jsx("button",{className:`horizontal-nav-section-label clickable ${n==="pipeline"?"active":""}`,onClick:()=>{r("pipeline"),u("pipeline-companies","pipeline")},children:"PIPELINE"}),n==="pipeline"&&a.jsxs("div",{className:"horizontal-nav-submenu",children:[a.jsx("button",{className:`horizontal-nav-subitem ${e==="pipeline-companies"||e==="company-detail"?"active":""}`,onClick:()=>u("pipeline-companies","pipeline"),children:"Companies"}),a.jsx("button",{className:`horizontal-nav-subitem ${e==="pipeline-deals"||e==="deal-detail"?"active":""}`,onClick:()=>u("pipeline-deals","pipeline"),children:"Deals"}),a.jsx("button",{className:`horizontal-nav-subitem ${e==="pipeline-rounds"||e==="round-detail"?"active":""}`,onClick:()=>u("pipeline-rounds","pipeline"),children:"Rounds"})]})]}),a.jsxs("div",{className:"horizontal-nav-section",children:[a.jsx("button",{className:`horizontal-nav-section-label clickable ${n==="firms"?"active":""}`,onClick:()=>{r("firms"),u("all-firms","firms")},children:"FIRMS"}),n==="firms"&&a.jsxs("div",{className:"horizontal-nav-submenu",children:[a.jsx("button",{className:`horizontal-nav-subitem ${e==="all-firms"||e==="firm-detail"?"active":""}`,onClick:()=>u("all-firms","firms"),children:"Firms"}),a.jsx("button",{className:`horizontal-nav-subitem ${e==="all-firms-partners"||e==="person-detail"?"active":""}`,onClick:()=>u("all-firms-partners","firms"),children:"Partners"}),a.jsx("button",{className:`horizontal-nav-subitem ${e==="all-firms-deals"?"active":""}`,onClick:()=>u("all-firms-deals","firms"),children:"Deals"}),a.jsx("button",{className:`horizontal-nav-subitem ${e==="all-firms-rounds"?"active":""}`,onClick:()=>u("all-firms-rounds","firms"),children:"Rounds"})]})]}),a.jsxs("div",{className:"horizontal-nav-section",children:[a.jsx("button",{className:`horizontal-nav-section-label clickable ${n==="people"?"active":""}`,onClick:()=>{r("people"),u("directory","people")},children:"PEOPLE"}),n==="people"&&a.jsx("div",{className:"horizontal-nav-submenu",children:a.jsx("button",{className:`horizontal-nav-subitem ${e==="directory"?"active":""}`,onClick:()=>u("directory","people"),children:"Directory"})})]})]}),a.jsx("header",{className:"top-bar",children:a.jsxs("div",{className:"top-bar-content",children:[a.jsxs("h1",{className:"page-title",children:[e==="priorities"&&"Priority Queue",e==="priority-detail"&&"Priority Detail",e==="companies"&&"Portfolio Overview",e==="pipeline-companies"&&"Pipeline Companies",e==="company-detail"&&((j=s==null?void 0:s.entity)==null?void 0:j.name),e==="goals"&&"Goals",e==="goal-detail"&&"Goal Details",e==="portfolio-rounds"&&"Portfolio Rounds",e==="pipeline-rounds"&&"Pipeline Rounds",e==="round-detail"&&"Round Details",e==="portfolio-deals"&&"Portfolio Deals",e==="pipeline-deals"&&"Pipeline Deals",e==="deal-detail"&&"Deal Details",e==="portfolio-firms"&&"Portfolio Firms",e==="all-firms"&&"All Firms",e==="firm-detail"&&((k=s==null?void 0:s.entity)==null?void 0:k.name),e==="portfolio-partners"&&"Portfolio Partners",e==="all-firms-partners"&&"All Partners",e==="person-detail"&&((b=s==null?void 0:s.entity)==null?void 0:b.name),e==="portfolio-firm-deals"&&"Portfolio Firm Deals",e==="all-firms-deals"&&"All Firm Deals",e==="portfolio-firm-rounds"&&"Portfolio Firm Rounds",e==="all-firms-rounds"&&"All Firm Rounds",e==="relationships"&&"Network Overview",e==="directory"&&"Directory",e==="relationship-detail"&&"Relationship Details",e==="admin-data"&&"Data Management",e==="admin-qa"&&"Quality Assurance",e==="admin-analyze"&&"System Analysis"]}),n&&a.jsxs("div",{className:"breadcrumb-nav",children:[n==="pipeline"&&a.jsxs(a.Fragment,{children:[a.jsx("button",{className:`breadcrumb-item ${e==="pipeline-companies"||e==="company-detail"?"active":""}`,onClick:()=>u("pipeline-companies","pipeline"),children:"Companies"}),a.jsx("button",{className:`breadcrumb-item ${e==="pipeline-rounds"||e==="round-detail"?"active":""}`,onClick:()=>u("pipeline-rounds","pipeline"),children:"Rounds"}),a.jsx("button",{className:`breadcrumb-item ${e==="pipeline-deals"||e==="deal-detail"?"active":""}`,onClick:()=>u("pipeline-deals","pipeline"),children:"Deals"})]}),n==="firms"&&a.jsxs(a.Fragment,{children:[a.jsx("button",{className:`breadcrumb-item ${e==="all-firms"||e==="firm-detail"?"active":""}`,onClick:()=>u("all-firms","firms"),children:"Firms"}),a.jsx("button",{className:`breadcrumb-item ${e==="all-firms-partners"||e==="person-detail"?"active":""}`,onClick:()=>u("all-firms-partners","firms"),children:"Partners"}),a.jsx("button",{className:`breadcrumb-item ${e==="all-firms-deals"||e==="deal-detail"?"active":""}`,onClick:()=>u("all-firms-deals","firms"),children:"Deals"}),a.jsx("button",{className:`breadcrumb-item ${e==="all-firms-rounds"||e==="round-detail"?"active":""}`,onClick:()=>u("all-firms-rounds","firms"),children:"Rounds"})]})]})]})}),a.jsx("main",{className:"content-area",children:N()})]})]}):a.jsx("div",{className:"dashboard",children:a.jsxs("div",{className:"empty-state",children:[a.jsx("h2",{children:"No Data Available"}),a.jsx("p",{children:"Use Admin  Import/Export to load your data"}),a.jsx("button",{onClick:()=>u("admin-data",null),className:"primary-btn",children:"Open Import/Export"})]})})}function j0(){const[e,t]=P.useState("load-data");return e==="load-data"?a.jsx(Qy,{onComplete:()=>t("qa")}):e==="qa"?a.jsx("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #0f172a 0%, #1e293b 100%)",padding:"40px 20px"},children:a.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto",background:"#1e293b",border:"1px solid #334155",borderRadius:"16px",padding:"32px"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"32px"},children:[a.jsx("h2",{style:{margin:0,fontSize:"24px",fontWeight:"600",color:"#f8fafc"},children:"Quality Assurance"}),a.jsx("button",{onClick:()=>t("dashboard"),style:{padding:"12px 24px",background:"linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)",color:"#f8fafc",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s"},children:"Continue to Dashboard"})]}),a.jsx(Yh,{})]})}):a.jsx(N0,{})}xa.createRoot(document.getElementById("root")).render(a.jsx(pf.StrictMode,{children:a.jsx(j0,{})}));
