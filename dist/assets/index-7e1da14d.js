(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function Qh(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var vu={exports:{}},vi={},gu={exports:{}},z={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xr=Symbol.for("react.element"),Yh=Symbol.for("react.portal"),Xh=Symbol.for("react.fragment"),Zh=Symbol.for("react.strict_mode"),ef=Symbol.for("react.profiler"),tf=Symbol.for("react.provider"),nf=Symbol.for("react.context"),rf=Symbol.for("react.forward_ref"),sf=Symbol.for("react.suspense"),af=Symbol.for("react.memo"),of=Symbol.for("react.lazy"),Sl=Symbol.iterator;function lf(e){return e===null||typeof e!="object"?null:(e=Sl&&e[Sl]||e["@@iterator"],typeof e=="function"?e:null)}var yu={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},wu=Object.assign,_u={};function tr(e,t,n){this.props=e,this.context=t,this.refs=_u,this.updater=n||yu}tr.prototype.isReactComponent={};tr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};tr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function xu(){}xu.prototype=tr.prototype;function So(e,t,n){this.props=e,this.context=t,this.refs=_u,this.updater=n||yu}var bo=So.prototype=new xu;bo.constructor=So;wu(bo,tr.prototype);bo.isPureReactComponent=!0;var bl=Array.isArray,Nu=Object.prototype.hasOwnProperty,Eo={current:null},ju={key:!0,ref:!0,__self:!0,__source:!0};function ku(e,t,n){var r,s={},i=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)Nu.call(t,r)&&!ju.hasOwnProperty(r)&&(s[r]=t[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:Xr,type:e,key:i,ref:o,props:s,_owner:Eo.current}}function cf(e,t){return{$$typeof:Xr,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Co(e){return typeof e=="object"&&e!==null&&e.$$typeof===Xr}function uf(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var El=/\/+/g;function Di(e,t){return typeof e=="object"&&e!==null&&e.key!=null?uf(""+e.key):t.toString(36)}function Rs(e,t,n,r,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Xr:case Yh:o=!0}}if(o)return o=e,s=s(o),e=r===""?"."+Di(o,0):r,bl(s)?(n="",e!=null&&(n=e.replace(El,"$&/")+"/"),Rs(s,t,n,"",function(u){return u})):s!=null&&(Co(s)&&(s=cf(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(El,"$&/")+"/")+e)),t.push(s)),1;if(o=0,r=r===""?".":r+":",bl(e))for(var l=0;l<e.length;l++){i=e[l];var c=r+Di(i,l);o+=Rs(i,t,n,c,s)}else if(c=lf(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=r+Di(i,l++),o+=Rs(i,t,n,c,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function os(e,t,n){if(e==null)return e;var r=[],s=0;return Rs(e,r,"","",function(i){return t.call(n,i,s++)}),r}function df(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var be={current:null},Os={transition:null},hf={ReactCurrentDispatcher:be,ReactCurrentBatchConfig:Os,ReactCurrentOwner:Eo};function Su(){throw Error("act(...) is not supported in production builds of React.")}z.Children={map:os,forEach:function(e,t,n){os(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return os(e,function(){t++}),t},toArray:function(e){return os(e,function(t){return t})||[]},only:function(e){if(!Co(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};z.Component=tr;z.Fragment=Xh;z.Profiler=ef;z.PureComponent=So;z.StrictMode=Zh;z.Suspense=sf;z.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hf;z.act=Su;z.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=wu({},e.props),s=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=Eo.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)Nu.call(t,c)&&!ju.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:Xr,type:e.type,key:s,ref:i,props:r,_owner:o}};z.createContext=function(e){return e={$$typeof:nf,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:tf,_context:e},e.Consumer=e};z.createElement=ku;z.createFactory=function(e){var t=ku.bind(null,e);return t.type=e,t};z.createRef=function(){return{current:null}};z.forwardRef=function(e){return{$$typeof:rf,render:e}};z.isValidElement=Co;z.lazy=function(e){return{$$typeof:of,_payload:{_status:-1,_result:e},_init:df}};z.memo=function(e,t){return{$$typeof:af,type:e,compare:t===void 0?null:t}};z.startTransition=function(e){var t=Os.transition;Os.transition={};try{e()}finally{Os.transition=t}};z.unstable_act=Su;z.useCallback=function(e,t){return be.current.useCallback(e,t)};z.useContext=function(e){return be.current.useContext(e)};z.useDebugValue=function(){};z.useDeferredValue=function(e){return be.current.useDeferredValue(e)};z.useEffect=function(e,t){return be.current.useEffect(e,t)};z.useId=function(){return be.current.useId()};z.useImperativeHandle=function(e,t,n){return be.current.useImperativeHandle(e,t,n)};z.useInsertionEffect=function(e,t){return be.current.useInsertionEffect(e,t)};z.useLayoutEffect=function(e,t){return be.current.useLayoutEffect(e,t)};z.useMemo=function(e,t){return be.current.useMemo(e,t)};z.useReducer=function(e,t,n){return be.current.useReducer(e,t,n)};z.useRef=function(e){return be.current.useRef(e)};z.useState=function(e){return be.current.useState(e)};z.useSyncExternalStore=function(e,t,n){return be.current.useSyncExternalStore(e,t,n)};z.useTransition=function(){return be.current.useTransition()};z.version="18.3.1";gu.exports=z;var L=gu.exports;const ff=Qh(L);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mf=L,pf=Symbol.for("react.element"),vf=Symbol.for("react.fragment"),gf=Object.prototype.hasOwnProperty,yf=mf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,wf={key:!0,ref:!0,__self:!0,__source:!0};function bu(e,t,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)gf.call(t,r)&&!wf.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:pf,type:e,key:i,ref:o,props:s,_owner:yf.current}}vi.Fragment=vf;vi.jsx=bu;vi.jsxs=bu;vu.exports=vi;var a=vu.exports,_a={},Eu={exports:{}},ze={},Cu={exports:{}},Tu={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(O,M){var F=O.length;O.push(M);e:for(;0<F;){var re=F-1>>>1,de=O[re];if(0<s(de,M))O[re]=M,O[F]=de,F=re;else break e}}function n(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var M=O[0],F=O.pop();if(F!==M){O[0]=F;e:for(var re=0,de=O.length,is=de>>>1;re<is;){var Gt=2*(re+1)-1,$i=O[Gt],qt=Gt+1,as=O[qt];if(0>s($i,F))qt<de&&0>s(as,$i)?(O[re]=as,O[qt]=F,re=qt):(O[re]=$i,O[Gt]=F,re=Gt);else if(qt<de&&0>s(as,F))O[re]=as,O[qt]=F,re=qt;else break e}}return M}function s(O,M){var F=O.sortIndex-M.sortIndex;return F!==0?F:O.id-M.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,g=null,p=3,_=!1,x=!1,w=!1,y=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,h=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(O){for(var M=n(u);M!==null;){if(M.callback===null)r(u);else if(M.startTime<=O)r(u),M.sortIndex=M.expirationTime,t(c,M);else break;M=n(u)}}function f(O){if(w=!1,v(O),!x)if(n(c)!==null)x=!0,dt(N);else{var M=n(u);M!==null&&Je(f,M.startTime-O)}}function N(O,M){x=!1,w&&(w=!1,m(b),b=-1),_=!0;var F=p;try{for(v(M),g=n(c);g!==null&&(!(g.expirationTime>M)||O&&!$());){var re=g.callback;if(typeof re=="function"){g.callback=null,p=g.priorityLevel;var de=re(g.expirationTime<=M);M=e.unstable_now(),typeof de=="function"?g.callback=de:g===n(c)&&r(c),v(M)}else r(c);g=n(c)}if(g!==null)var is=!0;else{var Gt=n(u);Gt!==null&&Je(f,Gt.startTime-M),is=!1}return is}finally{g=null,p=F,_=!1}}var j=!1,S=null,b=-1,k=5,E=-1;function $(){return!(e.unstable_now()-E<k)}function T(){if(S!==null){var O=e.unstable_now();E=O;var M=!0;try{M=S(!0,O)}finally{M?D():(j=!1,S=null)}}else j=!1}var D;if(typeof h=="function")D=function(){h(T)};else if(typeof MessageChannel<"u"){var oe=new MessageChannel,Ce=oe.port2;oe.port1.onmessage=T,D=function(){Ce.postMessage(null)}}else D=function(){y(T,0)};function dt(O){S=O,j||(j=!0,D())}function Je(O,M){b=y(function(){O(e.unstable_now())},M)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(O){O.callback=null},e.unstable_continueExecution=function(){x||_||(x=!0,dt(N))},e.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<O?Math.floor(1e3/O):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(O){switch(p){case 1:case 2:case 3:var M=3;break;default:M=p}var F=p;p=M;try{return O()}finally{p=F}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(O,M){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var F=p;p=O;try{return M()}finally{p=F}},e.unstable_scheduleCallback=function(O,M,F){var re=e.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?re+F:re):F=re,O){case 1:var de=-1;break;case 2:de=250;break;case 5:de=1073741823;break;case 4:de=1e4;break;default:de=5e3}return de=F+de,O={id:d++,callback:M,priorityLevel:O,startTime:F,expirationTime:de,sortIndex:-1},F>re?(O.sortIndex=F,t(u,O),n(c)===null&&O===n(u)&&(w?(m(b),b=-1):w=!0,Je(f,F-re))):(O.sortIndex=de,t(c,O),x||_||(x=!0,dt(N))),O},e.unstable_shouldYield=$,e.unstable_wrapCallback=function(O){var M=p;return function(){var F=p;p=M;try{return O.apply(this,arguments)}finally{p=F}}}})(Tu);Cu.exports=Tu;var _f=Cu.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xf=L,Fe=_f;function C(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ru=new Set,Tr={};function fn(e,t){Kn(e,t),Kn(e+"Capture",t)}function Kn(e,t){for(Tr[e]=t,e=0;e<t.length;e++)Ru.add(t[e])}var yt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),xa=Object.prototype.hasOwnProperty,Nf=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Cl={},Tl={};function jf(e){return xa.call(Tl,e)?!0:xa.call(Cl,e)?!1:Nf.test(e)?Tl[e]=!0:(Cl[e]=!0,!1)}function kf(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Sf(e,t,n,r){if(t===null||typeof t>"u"||kf(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ee(e,t,n,r,s,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var we={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){we[e]=new Ee(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];we[t]=new Ee(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){we[e]=new Ee(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){we[e]=new Ee(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){we[e]=new Ee(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){we[e]=new Ee(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){we[e]=new Ee(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){we[e]=new Ee(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){we[e]=new Ee(e,5,!1,e.toLowerCase(),null,!1,!1)});var To=/[\-:]([a-z])/g;function Ro(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(To,Ro);we[t]=new Ee(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(To,Ro);we[t]=new Ee(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(To,Ro);we[t]=new Ee(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){we[e]=new Ee(e,1,!1,e.toLowerCase(),null,!1,!1)});we.xlinkHref=new Ee("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){we[e]=new Ee(e,1,!1,e.toLowerCase(),null,!0,!0)});function Oo(e,t,n,r){var s=we.hasOwnProperty(t)?we[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Sf(t,n,s,r)&&(n=null),r||s===null?jf(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Nt=xf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ls=Symbol.for("react.element"),Cn=Symbol.for("react.portal"),Tn=Symbol.for("react.fragment"),Io=Symbol.for("react.strict_mode"),Na=Symbol.for("react.profiler"),Ou=Symbol.for("react.provider"),Iu=Symbol.for("react.context"),Po=Symbol.for("react.forward_ref"),ja=Symbol.for("react.suspense"),ka=Symbol.for("react.suspense_list"),Ao=Symbol.for("react.memo"),St=Symbol.for("react.lazy"),Pu=Symbol.for("react.offscreen"),Rl=Symbol.iterator;function sr(e){return e===null||typeof e!="object"?null:(e=Rl&&e[Rl]||e["@@iterator"],typeof e=="function"?e:null)}var ee=Object.assign,Li;function fr(e){if(Li===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Li=t&&t[1]||""}return`
`+Li+e}var Ui=!1;function Mi(e,t){if(!e||Ui)return"";Ui=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var c=`
`+s[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{Ui=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?fr(e):""}function bf(e){switch(e.tag){case 5:return fr(e.type);case 16:return fr("Lazy");case 13:return fr("Suspense");case 19:return fr("SuspenseList");case 0:case 2:case 15:return e=Mi(e.type,!1),e;case 11:return e=Mi(e.type.render,!1),e;case 1:return e=Mi(e.type,!0),e;default:return""}}function Sa(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Tn:return"Fragment";case Cn:return"Portal";case Na:return"Profiler";case Io:return"StrictMode";case ja:return"Suspense";case ka:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Iu:return(e.displayName||"Context")+".Consumer";case Ou:return(e._context.displayName||"Context")+".Provider";case Po:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ao:return t=e.displayName||null,t!==null?t:Sa(e.type)||"Memo";case St:t=e._payload,e=e._init;try{return Sa(e(t))}catch{}}return null}function Ef(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Sa(t);case 8:return t===Io?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function zt(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Au(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Cf(e){var t=Au(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function cs(e){e._valueTracker||(e._valueTracker=Cf(e))}function $u(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Au(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Bs(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function ba(e,t){var n=t.checked;return ee({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Ol(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=zt(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Du(e,t){t=t.checked,t!=null&&Oo(e,"checked",t,!1)}function Ea(e,t){Du(e,t);var n=zt(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Ca(e,t.type,n):t.hasOwnProperty("defaultValue")&&Ca(e,t.type,zt(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Il(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Ca(e,t,n){(t!=="number"||Bs(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var mr=Array.isArray;function zn(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+zt(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Ta(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(C(91));return ee({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Pl(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(C(92));if(mr(n)){if(1<n.length)throw Error(C(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:zt(n)}}function Lu(e,t){var n=zt(t.value),r=zt(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Al(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Uu(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ra(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Uu(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var us,Mu=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(us=us||document.createElement("div"),us.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=us.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Rr(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var yr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Tf=["Webkit","ms","Moz","O"];Object.keys(yr).forEach(function(e){Tf.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),yr[t]=yr[e]})});function Fu(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||yr.hasOwnProperty(e)&&yr[e]?(""+t).trim():t+"px"}function zu(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Fu(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var Rf=ee({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Oa(e,t){if(t){if(Rf[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(C(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(C(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(C(61))}if(t.style!=null&&typeof t.style!="object")throw Error(C(62))}}function Ia(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Pa=null;function $o(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Aa=null,Bn=null,Vn=null;function $l(e){if(e=ts(e)){if(typeof Aa!="function")throw Error(C(280));var t=e.stateNode;t&&(t=xi(t),Aa(e.stateNode,e.type,t))}}function Bu(e){Bn?Vn?Vn.push(e):Vn=[e]:Bn=e}function Vu(){if(Bn){var e=Bn,t=Vn;if(Vn=Bn=null,$l(e),t)for(e=0;e<t.length;e++)$l(t[e])}}function Wu(e,t){return e(t)}function Hu(){}var Fi=!1;function Gu(e,t,n){if(Fi)return e(t,n);Fi=!0;try{return Wu(e,t,n)}finally{Fi=!1,(Bn!==null||Vn!==null)&&(Hu(),Vu())}}function Or(e,t){var n=e.stateNode;if(n===null)return null;var r=xi(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(C(231,t,typeof n));return n}var $a=!1;if(yt)try{var ir={};Object.defineProperty(ir,"passive",{get:function(){$a=!0}}),window.addEventListener("test",ir,ir),window.removeEventListener("test",ir,ir)}catch{$a=!1}function Of(e,t,n,r,s,i,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(d){this.onError(d)}}var wr=!1,Vs=null,Ws=!1,Da=null,If={onError:function(e){wr=!0,Vs=e}};function Pf(e,t,n,r,s,i,o,l,c){wr=!1,Vs=null,Of.apply(If,arguments)}function Af(e,t,n,r,s,i,o,l,c){if(Pf.apply(this,arguments),wr){if(wr){var u=Vs;wr=!1,Vs=null}else throw Error(C(198));Ws||(Ws=!0,Da=u)}}function mn(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function qu(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Dl(e){if(mn(e)!==e)throw Error(C(188))}function $f(e){var t=e.alternate;if(!t){if(t=mn(e),t===null)throw Error(C(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Dl(s),e;if(i===r)return Dl(s),t;i=i.sibling}throw Error(C(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(C(189))}}if(n.alternate!==r)throw Error(C(190))}if(n.tag!==3)throw Error(C(188));return n.stateNode.current===n?e:t}function Ku(e){return e=$f(e),e!==null?Ju(e):null}function Ju(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Ju(e);if(t!==null)return t;e=e.sibling}return null}var Qu=Fe.unstable_scheduleCallback,Ll=Fe.unstable_cancelCallback,Df=Fe.unstable_shouldYield,Lf=Fe.unstable_requestPaint,se=Fe.unstable_now,Uf=Fe.unstable_getCurrentPriorityLevel,Do=Fe.unstable_ImmediatePriority,Yu=Fe.unstable_UserBlockingPriority,Hs=Fe.unstable_NormalPriority,Mf=Fe.unstable_LowPriority,Xu=Fe.unstable_IdlePriority,gi=null,ct=null;function Ff(e){if(ct&&typeof ct.onCommitFiberRoot=="function")try{ct.onCommitFiberRoot(gi,e,void 0,(e.current.flags&128)===128)}catch{}}var rt=Math.clz32?Math.clz32:Vf,zf=Math.log,Bf=Math.LN2;function Vf(e){return e>>>=0,e===0?32:31-(zf(e)/Bf|0)|0}var ds=64,hs=4194304;function pr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Gs(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=pr(l):(i&=o,i!==0&&(r=pr(i)))}else o=n&~s,o!==0?r=pr(o):i!==0&&(r=pr(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-rt(t),s=1<<n,r|=e[n],t&=~s;return r}function Wf(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Hf(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-rt(i),l=1<<o,c=s[o];c===-1?(!(l&n)||l&r)&&(s[o]=Wf(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function La(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Zu(){var e=ds;return ds<<=1,!(ds&4194240)&&(ds=64),e}function zi(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Zr(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-rt(t),e[t]=n}function Gf(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-rt(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}function Lo(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-rt(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var V=0;function ed(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var td,Uo,nd,rd,sd,Ua=!1,fs=[],Pt=null,At=null,$t=null,Ir=new Map,Pr=new Map,Ct=[],qf="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ul(e,t){switch(e){case"focusin":case"focusout":Pt=null;break;case"dragenter":case"dragleave":At=null;break;case"mouseover":case"mouseout":$t=null;break;case"pointerover":case"pointerout":Ir.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pr.delete(t.pointerId)}}function ar(e,t,n,r,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},t!==null&&(t=ts(t),t!==null&&Uo(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function Kf(e,t,n,r,s){switch(t){case"focusin":return Pt=ar(Pt,e,t,n,r,s),!0;case"dragenter":return At=ar(At,e,t,n,r,s),!0;case"mouseover":return $t=ar($t,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return Ir.set(i,ar(Ir.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Pr.set(i,ar(Pr.get(i)||null,e,t,n,r,s)),!0}return!1}function id(e){var t=tn(e.target);if(t!==null){var n=mn(t);if(n!==null){if(t=n.tag,t===13){if(t=qu(n),t!==null){e.blockedOn=t,sd(e.priority,function(){nd(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Is(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Ma(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Pa=r,n.target.dispatchEvent(r),Pa=null}else return t=ts(n),t!==null&&Uo(t),e.blockedOn=n,!1;t.shift()}return!0}function Ml(e,t,n){Is(e)&&n.delete(t)}function Jf(){Ua=!1,Pt!==null&&Is(Pt)&&(Pt=null),At!==null&&Is(At)&&(At=null),$t!==null&&Is($t)&&($t=null),Ir.forEach(Ml),Pr.forEach(Ml)}function or(e,t){e.blockedOn===t&&(e.blockedOn=null,Ua||(Ua=!0,Fe.unstable_scheduleCallback(Fe.unstable_NormalPriority,Jf)))}function Ar(e){function t(s){return or(s,e)}if(0<fs.length){or(fs[0],e);for(var n=1;n<fs.length;n++){var r=fs[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Pt!==null&&or(Pt,e),At!==null&&or(At,e),$t!==null&&or($t,e),Ir.forEach(t),Pr.forEach(t),n=0;n<Ct.length;n++)r=Ct[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Ct.length&&(n=Ct[0],n.blockedOn===null);)id(n),n.blockedOn===null&&Ct.shift()}var Wn=Nt.ReactCurrentBatchConfig,qs=!0;function Qf(e,t,n,r){var s=V,i=Wn.transition;Wn.transition=null;try{V=1,Mo(e,t,n,r)}finally{V=s,Wn.transition=i}}function Yf(e,t,n,r){var s=V,i=Wn.transition;Wn.transition=null;try{V=4,Mo(e,t,n,r)}finally{V=s,Wn.transition=i}}function Mo(e,t,n,r){if(qs){var s=Ma(e,t,n,r);if(s===null)Yi(e,t,r,Ks,n),Ul(e,r);else if(Kf(s,e,t,n,r))r.stopPropagation();else if(Ul(e,r),t&4&&-1<qf.indexOf(e)){for(;s!==null;){var i=ts(s);if(i!==null&&td(i),i=Ma(e,t,n,r),i===null&&Yi(e,t,r,Ks,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Yi(e,t,r,null,n)}}var Ks=null;function Ma(e,t,n,r){if(Ks=null,e=$o(r),e=tn(e),e!==null)if(t=mn(e),t===null)e=null;else if(n=t.tag,n===13){if(e=qu(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ks=e,null}function ad(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Uf()){case Do:return 1;case Yu:return 4;case Hs:case Mf:return 16;case Xu:return 536870912;default:return 16}default:return 16}}var Ot=null,Fo=null,Ps=null;function od(){if(Ps)return Ps;var e,t=Fo,n=t.length,r,s="value"in Ot?Ot.value:Ot.textContent,i=s.length;for(e=0;e<n&&t[e]===s[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===s[i-r];r++);return Ps=s.slice(e,1<r?1-r:void 0)}function As(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ms(){return!0}function Fl(){return!1}function Be(e){function t(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ms:Fl,this.isPropagationStopped=Fl,this}return ee(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ms)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ms)},persist:function(){},isPersistent:ms}),t}var nr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},zo=Be(nr),es=ee({},nr,{view:0,detail:0}),Xf=Be(es),Bi,Vi,lr,yi=ee({},es,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Bo,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==lr&&(lr&&e.type==="mousemove"?(Bi=e.screenX-lr.screenX,Vi=e.screenY-lr.screenY):Vi=Bi=0,lr=e),Bi)},movementY:function(e){return"movementY"in e?e.movementY:Vi}}),zl=Be(yi),Zf=ee({},yi,{dataTransfer:0}),em=Be(Zf),tm=ee({},es,{relatedTarget:0}),Wi=Be(tm),nm=ee({},nr,{animationName:0,elapsedTime:0,pseudoElement:0}),rm=Be(nm),sm=ee({},nr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),im=Be(sm),am=ee({},nr,{data:0}),Bl=Be(am),om={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},lm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},cm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function um(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=cm[e])?!!t[e]:!1}function Bo(){return um}var dm=ee({},es,{key:function(e){if(e.key){var t=om[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=As(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?lm[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Bo,charCode:function(e){return e.type==="keypress"?As(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?As(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),hm=Be(dm),fm=ee({},yi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Vl=Be(fm),mm=ee({},es,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Bo}),pm=Be(mm),vm=ee({},nr,{propertyName:0,elapsedTime:0,pseudoElement:0}),gm=Be(vm),ym=ee({},yi,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),wm=Be(ym),_m=[9,13,27,32],Vo=yt&&"CompositionEvent"in window,_r=null;yt&&"documentMode"in document&&(_r=document.documentMode);var xm=yt&&"TextEvent"in window&&!_r,ld=yt&&(!Vo||_r&&8<_r&&11>=_r),Wl=String.fromCharCode(32),Hl=!1;function cd(e,t){switch(e){case"keyup":return _m.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ud(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Rn=!1;function Nm(e,t){switch(e){case"compositionend":return ud(t);case"keypress":return t.which!==32?null:(Hl=!0,Wl);case"textInput":return e=t.data,e===Wl&&Hl?null:e;default:return null}}function jm(e,t){if(Rn)return e==="compositionend"||!Vo&&cd(e,t)?(e=od(),Ps=Fo=Ot=null,Rn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return ld&&t.locale!=="ko"?null:t.data;default:return null}}var km={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gl(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!km[e.type]:t==="textarea"}function dd(e,t,n,r){Bu(r),t=Js(t,"onChange"),0<t.length&&(n=new zo("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var xr=null,$r=null;function Sm(e){Nd(e,0)}function wi(e){var t=Pn(e);if($u(t))return e}function bm(e,t){if(e==="change")return t}var hd=!1;if(yt){var Hi;if(yt){var Gi="oninput"in document;if(!Gi){var ql=document.createElement("div");ql.setAttribute("oninput","return;"),Gi=typeof ql.oninput=="function"}Hi=Gi}else Hi=!1;hd=Hi&&(!document.documentMode||9<document.documentMode)}function Kl(){xr&&(xr.detachEvent("onpropertychange",fd),$r=xr=null)}function fd(e){if(e.propertyName==="value"&&wi($r)){var t=[];dd(t,$r,e,$o(e)),Gu(Sm,t)}}function Em(e,t,n){e==="focusin"?(Kl(),xr=t,$r=n,xr.attachEvent("onpropertychange",fd)):e==="focusout"&&Kl()}function Cm(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return wi($r)}function Tm(e,t){if(e==="click")return wi(t)}function Rm(e,t){if(e==="input"||e==="change")return wi(t)}function Om(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var it=typeof Object.is=="function"?Object.is:Om;function Dr(e,t){if(it(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!xa.call(t,s)||!it(e[s],t[s]))return!1}return!0}function Jl(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ql(e,t){var n=Jl(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Jl(n)}}function md(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?md(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function pd(){for(var e=window,t=Bs();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Bs(e.document)}return t}function Wo(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Im(e){var t=pd(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&md(n.ownerDocument.documentElement,n)){if(r!==null&&Wo(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=Ql(n,i);var o=Ql(n,r);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Pm=yt&&"documentMode"in document&&11>=document.documentMode,On=null,Fa=null,Nr=null,za=!1;function Yl(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;za||On==null||On!==Bs(r)||(r=On,"selectionStart"in r&&Wo(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Nr&&Dr(Nr,r)||(Nr=r,r=Js(Fa,"onSelect"),0<r.length&&(t=new zo("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=On)))}function ps(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var In={animationend:ps("Animation","AnimationEnd"),animationiteration:ps("Animation","AnimationIteration"),animationstart:ps("Animation","AnimationStart"),transitionend:ps("Transition","TransitionEnd")},qi={},vd={};yt&&(vd=document.createElement("div").style,"AnimationEvent"in window||(delete In.animationend.animation,delete In.animationiteration.animation,delete In.animationstart.animation),"TransitionEvent"in window||delete In.transitionend.transition);function _i(e){if(qi[e])return qi[e];if(!In[e])return e;var t=In[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in vd)return qi[e]=t[n];return e}var gd=_i("animationend"),yd=_i("animationiteration"),wd=_i("animationstart"),_d=_i("transitionend"),xd=new Map,Xl="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Vt(e,t){xd.set(e,t),fn(t,[e])}for(var Ki=0;Ki<Xl.length;Ki++){var Ji=Xl[Ki],Am=Ji.toLowerCase(),$m=Ji[0].toUpperCase()+Ji.slice(1);Vt(Am,"on"+$m)}Vt(gd,"onAnimationEnd");Vt(yd,"onAnimationIteration");Vt(wd,"onAnimationStart");Vt("dblclick","onDoubleClick");Vt("focusin","onFocus");Vt("focusout","onBlur");Vt(_d,"onTransitionEnd");Kn("onMouseEnter",["mouseout","mouseover"]);Kn("onMouseLeave",["mouseout","mouseover"]);Kn("onPointerEnter",["pointerout","pointerover"]);Kn("onPointerLeave",["pointerout","pointerover"]);fn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fn("onBeforeInput",["compositionend","keypress","textInput","paste"]);fn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Dm=new Set("cancel close invalid load scroll toggle".split(" ").concat(vr));function Zl(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Af(r,t,void 0,e),e.currentTarget=null}function Nd(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;Zl(s,l,u),i=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;Zl(s,l,u),i=c}}}if(Ws)throw e=Da,Ws=!1,Da=null,e}function K(e,t){var n=t[Ga];n===void 0&&(n=t[Ga]=new Set);var r=e+"__bubble";n.has(r)||(jd(t,e,2,!1),n.add(r))}function Qi(e,t,n){var r=0;t&&(r|=4),jd(n,e,r,t)}var vs="_reactListening"+Math.random().toString(36).slice(2);function Lr(e){if(!e[vs]){e[vs]=!0,Ru.forEach(function(n){n!=="selectionchange"&&(Dm.has(n)||Qi(n,!1,e),Qi(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[vs]||(t[vs]=!0,Qi("selectionchange",!1,t))}}function jd(e,t,n,r){switch(ad(t)){case 1:var s=Qf;break;case 4:s=Yf;break;default:s=Mo}n=s.bind(null,t,n,e),s=void 0,!$a||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Yi(e,t,n,r,s){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=tn(l),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}l=l.parentNode}}r=r.return}Gu(function(){var u=i,d=$o(n),g=[];e:{var p=xd.get(e);if(p!==void 0){var _=zo,x=e;switch(e){case"keypress":if(As(n)===0)break e;case"keydown":case"keyup":_=hm;break;case"focusin":x="focus",_=Wi;break;case"focusout":x="blur",_=Wi;break;case"beforeblur":case"afterblur":_=Wi;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=zl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=em;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=pm;break;case gd:case yd:case wd:_=rm;break;case _d:_=gm;break;case"scroll":_=Xf;break;case"wheel":_=wm;break;case"copy":case"cut":case"paste":_=im;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=Vl}var w=(t&4)!==0,y=!w&&e==="scroll",m=w?p!==null?p+"Capture":null:p;w=[];for(var h=u,v;h!==null;){v=h;var f=v.stateNode;if(v.tag===5&&f!==null&&(v=f,m!==null&&(f=Or(h,m),f!=null&&w.push(Ur(h,f,v)))),y)break;h=h.return}0<w.length&&(p=new _(p,x,null,n,d),g.push({event:p,listeners:w}))}}if(!(t&7)){e:{if(p=e==="mouseover"||e==="pointerover",_=e==="mouseout"||e==="pointerout",p&&n!==Pa&&(x=n.relatedTarget||n.fromElement)&&(tn(x)||x[wt]))break e;if((_||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,_?(x=n.relatedTarget||n.toElement,_=u,x=x?tn(x):null,x!==null&&(y=mn(x),x!==y||x.tag!==5&&x.tag!==6)&&(x=null)):(_=null,x=u),_!==x)){if(w=zl,f="onMouseLeave",m="onMouseEnter",h="mouse",(e==="pointerout"||e==="pointerover")&&(w=Vl,f="onPointerLeave",m="onPointerEnter",h="pointer"),y=_==null?p:Pn(_),v=x==null?p:Pn(x),p=new w(f,h+"leave",_,n,d),p.target=y,p.relatedTarget=v,f=null,tn(d)===u&&(w=new w(m,h+"enter",x,n,d),w.target=v,w.relatedTarget=y,f=w),y=f,_&&x)t:{for(w=_,m=x,h=0,v=w;v;v=pn(v))h++;for(v=0,f=m;f;f=pn(f))v++;for(;0<h-v;)w=pn(w),h--;for(;0<v-h;)m=pn(m),v--;for(;h--;){if(w===m||m!==null&&w===m.alternate)break t;w=pn(w),m=pn(m)}w=null}else w=null;_!==null&&ec(g,p,_,w,!1),x!==null&&y!==null&&ec(g,y,x,w,!0)}}e:{if(p=u?Pn(u):window,_=p.nodeName&&p.nodeName.toLowerCase(),_==="select"||_==="input"&&p.type==="file")var N=bm;else if(Gl(p))if(hd)N=Rm;else{N=Cm;var j=Em}else(_=p.nodeName)&&_.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(N=Tm);if(N&&(N=N(e,u))){dd(g,N,n,d);break e}j&&j(e,p,u),e==="focusout"&&(j=p._wrapperState)&&j.controlled&&p.type==="number"&&Ca(p,"number",p.value)}switch(j=u?Pn(u):window,e){case"focusin":(Gl(j)||j.contentEditable==="true")&&(On=j,Fa=u,Nr=null);break;case"focusout":Nr=Fa=On=null;break;case"mousedown":za=!0;break;case"contextmenu":case"mouseup":case"dragend":za=!1,Yl(g,n,d);break;case"selectionchange":if(Pm)break;case"keydown":case"keyup":Yl(g,n,d)}var S;if(Vo)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Rn?cd(e,n)&&(b="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(b="onCompositionStart");b&&(ld&&n.locale!=="ko"&&(Rn||b!=="onCompositionStart"?b==="onCompositionEnd"&&Rn&&(S=od()):(Ot=d,Fo="value"in Ot?Ot.value:Ot.textContent,Rn=!0)),j=Js(u,b),0<j.length&&(b=new Bl(b,e,null,n,d),g.push({event:b,listeners:j}),S?b.data=S:(S=ud(n),S!==null&&(b.data=S)))),(S=xm?Nm(e,n):jm(e,n))&&(u=Js(u,"onBeforeInput"),0<u.length&&(d=new Bl("onBeforeInput","beforeinput",null,n,d),g.push({event:d,listeners:u}),d.data=S))}Nd(g,t)})}function Ur(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Js(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Or(e,n),i!=null&&r.unshift(Ur(e,i,s)),i=Or(e,t),i!=null&&r.push(Ur(e,i,s))),e=e.return}return r}function pn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function ec(e,t,n,r,s){for(var i=t._reactName,o=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,s?(c=Or(n,i),c!=null&&o.unshift(Ur(n,c,l))):s||(c=Or(n,i),c!=null&&o.push(Ur(n,c,l)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var Lm=/\r\n?/g,Um=/\u0000|\uFFFD/g;function tc(e){return(typeof e=="string"?e:""+e).replace(Lm,`
`).replace(Um,"")}function gs(e,t,n){if(t=tc(t),tc(e)!==t&&n)throw Error(C(425))}function Qs(){}var Ba=null,Va=null;function Wa(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Ha=typeof setTimeout=="function"?setTimeout:void 0,Mm=typeof clearTimeout=="function"?clearTimeout:void 0,nc=typeof Promise=="function"?Promise:void 0,Fm=typeof queueMicrotask=="function"?queueMicrotask:typeof nc<"u"?function(e){return nc.resolve(null).then(e).catch(zm)}:Ha;function zm(e){setTimeout(function(){throw e})}function Xi(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),Ar(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Ar(t)}function Dt(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function rc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var rr=Math.random().toString(36).slice(2),lt="__reactFiber$"+rr,Mr="__reactProps$"+rr,wt="__reactContainer$"+rr,Ga="__reactEvents$"+rr,Bm="__reactListeners$"+rr,Vm="__reactHandles$"+rr;function tn(e){var t=e[lt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[wt]||n[lt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=rc(e);e!==null;){if(n=e[lt])return n;e=rc(e)}return t}e=n,n=e.parentNode}return null}function ts(e){return e=e[lt]||e[wt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Pn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(C(33))}function xi(e){return e[Mr]||null}var qa=[],An=-1;function Wt(e){return{current:e}}function J(e){0>An||(e.current=qa[An],qa[An]=null,An--)}function q(e,t){An++,qa[An]=e.current,e.current=t}var Bt={},je=Wt(Bt),Oe=Wt(!1),ln=Bt;function Jn(e,t){var n=e.type.contextTypes;if(!n)return Bt;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Ie(e){return e=e.childContextTypes,e!=null}function Ys(){J(Oe),J(je)}function sc(e,t,n){if(je.current!==Bt)throw Error(C(168));q(je,t),q(Oe,n)}function kd(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(C(108,Ef(e)||"Unknown",s));return ee({},n,r)}function Xs(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Bt,ln=je.current,q(je,e),q(Oe,Oe.current),!0}function ic(e,t,n){var r=e.stateNode;if(!r)throw Error(C(169));n?(e=kd(e,t,ln),r.__reactInternalMemoizedMergedChildContext=e,J(Oe),J(je),q(je,e)):J(Oe),q(Oe,n)}var mt=null,Ni=!1,Zi=!1;function Sd(e){mt===null?mt=[e]:mt.push(e)}function Wm(e){Ni=!0,Sd(e)}function Ht(){if(!Zi&&mt!==null){Zi=!0;var e=0,t=V;try{var n=mt;for(V=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}mt=null,Ni=!1}catch(s){throw mt!==null&&(mt=mt.slice(e+1)),Qu(Do,Ht),s}finally{V=t,Zi=!1}}return null}var $n=[],Dn=0,Zs=null,ei=0,Ve=[],We=0,cn=null,pt=1,vt="";function Qt(e,t){$n[Dn++]=ei,$n[Dn++]=Zs,Zs=e,ei=t}function bd(e,t,n){Ve[We++]=pt,Ve[We++]=vt,Ve[We++]=cn,cn=e;var r=pt;e=vt;var s=32-rt(r)-1;r&=~(1<<s),n+=1;var i=32-rt(t)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,pt=1<<32-rt(t)+s|n<<s|r,vt=i+e}else pt=1<<i|n<<s|r,vt=e}function Ho(e){e.return!==null&&(Qt(e,1),bd(e,1,0))}function Go(e){for(;e===Zs;)Zs=$n[--Dn],$n[Dn]=null,ei=$n[--Dn],$n[Dn]=null;for(;e===cn;)cn=Ve[--We],Ve[We]=null,vt=Ve[--We],Ve[We]=null,pt=Ve[--We],Ve[We]=null}var Me=null,Ue=null,Q=!1,nt=null;function Ed(e,t){var n=He(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function ac(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Me=e,Ue=Dt(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Me=e,Ue=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=cn!==null?{id:pt,overflow:vt}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=He(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Me=e,Ue=null,!0):!1;default:return!1}}function Ka(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Ja(e){if(Q){var t=Ue;if(t){var n=t;if(!ac(e,t)){if(Ka(e))throw Error(C(418));t=Dt(n.nextSibling);var r=Me;t&&ac(e,t)?Ed(r,n):(e.flags=e.flags&-4097|2,Q=!1,Me=e)}}else{if(Ka(e))throw Error(C(418));e.flags=e.flags&-4097|2,Q=!1,Me=e}}}function oc(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Me=e}function ys(e){if(e!==Me)return!1;if(!Q)return oc(e),Q=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Wa(e.type,e.memoizedProps)),t&&(t=Ue)){if(Ka(e))throw Cd(),Error(C(418));for(;t;)Ed(e,t),t=Dt(t.nextSibling)}if(oc(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(C(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Ue=Dt(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Ue=null}}else Ue=Me?Dt(e.stateNode.nextSibling):null;return!0}function Cd(){for(var e=Ue;e;)e=Dt(e.nextSibling)}function Qn(){Ue=Me=null,Q=!1}function qo(e){nt===null?nt=[e]:nt.push(e)}var Hm=Nt.ReactCurrentBatchConfig;function cr(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(C(309));var r=n.stateNode}if(!r)throw Error(C(147,e));var s=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(C(284));if(!n._owner)throw Error(C(290,e))}return e}function ws(e,t){throw e=Object.prototype.toString.call(t),Error(C(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function lc(e){var t=e._init;return t(e._payload)}function Td(e){function t(m,h){if(e){var v=m.deletions;v===null?(m.deletions=[h],m.flags|=16):v.push(h)}}function n(m,h){if(!e)return null;for(;h!==null;)t(m,h),h=h.sibling;return null}function r(m,h){for(m=new Map;h!==null;)h.key!==null?m.set(h.key,h):m.set(h.index,h),h=h.sibling;return m}function s(m,h){return m=Ft(m,h),m.index=0,m.sibling=null,m}function i(m,h,v){return m.index=v,e?(v=m.alternate,v!==null?(v=v.index,v<h?(m.flags|=2,h):v):(m.flags|=2,h)):(m.flags|=1048576,h)}function o(m){return e&&m.alternate===null&&(m.flags|=2),m}function l(m,h,v,f){return h===null||h.tag!==6?(h=aa(v,m.mode,f),h.return=m,h):(h=s(h,v),h.return=m,h)}function c(m,h,v,f){var N=v.type;return N===Tn?d(m,h,v.props.children,f,v.key):h!==null&&(h.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===St&&lc(N)===h.type)?(f=s(h,v.props),f.ref=cr(m,h,v),f.return=m,f):(f=zs(v.type,v.key,v.props,null,m.mode,f),f.ref=cr(m,h,v),f.return=m,f)}function u(m,h,v,f){return h===null||h.tag!==4||h.stateNode.containerInfo!==v.containerInfo||h.stateNode.implementation!==v.implementation?(h=oa(v,m.mode,f),h.return=m,h):(h=s(h,v.children||[]),h.return=m,h)}function d(m,h,v,f,N){return h===null||h.tag!==7?(h=on(v,m.mode,f,N),h.return=m,h):(h=s(h,v),h.return=m,h)}function g(m,h,v){if(typeof h=="string"&&h!==""||typeof h=="number")return h=aa(""+h,m.mode,v),h.return=m,h;if(typeof h=="object"&&h!==null){switch(h.$$typeof){case ls:return v=zs(h.type,h.key,h.props,null,m.mode,v),v.ref=cr(m,null,h),v.return=m,v;case Cn:return h=oa(h,m.mode,v),h.return=m,h;case St:var f=h._init;return g(m,f(h._payload),v)}if(mr(h)||sr(h))return h=on(h,m.mode,v,null),h.return=m,h;ws(m,h)}return null}function p(m,h,v,f){var N=h!==null?h.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return N!==null?null:l(m,h,""+v,f);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case ls:return v.key===N?c(m,h,v,f):null;case Cn:return v.key===N?u(m,h,v,f):null;case St:return N=v._init,p(m,h,N(v._payload),f)}if(mr(v)||sr(v))return N!==null?null:d(m,h,v,f,null);ws(m,v)}return null}function _(m,h,v,f,N){if(typeof f=="string"&&f!==""||typeof f=="number")return m=m.get(v)||null,l(h,m,""+f,N);if(typeof f=="object"&&f!==null){switch(f.$$typeof){case ls:return m=m.get(f.key===null?v:f.key)||null,c(h,m,f,N);case Cn:return m=m.get(f.key===null?v:f.key)||null,u(h,m,f,N);case St:var j=f._init;return _(m,h,v,j(f._payload),N)}if(mr(f)||sr(f))return m=m.get(v)||null,d(h,m,f,N,null);ws(h,f)}return null}function x(m,h,v,f){for(var N=null,j=null,S=h,b=h=0,k=null;S!==null&&b<v.length;b++){S.index>b?(k=S,S=null):k=S.sibling;var E=p(m,S,v[b],f);if(E===null){S===null&&(S=k);break}e&&S&&E.alternate===null&&t(m,S),h=i(E,h,b),j===null?N=E:j.sibling=E,j=E,S=k}if(b===v.length)return n(m,S),Q&&Qt(m,b),N;if(S===null){for(;b<v.length;b++)S=g(m,v[b],f),S!==null&&(h=i(S,h,b),j===null?N=S:j.sibling=S,j=S);return Q&&Qt(m,b),N}for(S=r(m,S);b<v.length;b++)k=_(S,m,b,v[b],f),k!==null&&(e&&k.alternate!==null&&S.delete(k.key===null?b:k.key),h=i(k,h,b),j===null?N=k:j.sibling=k,j=k);return e&&S.forEach(function($){return t(m,$)}),Q&&Qt(m,b),N}function w(m,h,v,f){var N=sr(v);if(typeof N!="function")throw Error(C(150));if(v=N.call(v),v==null)throw Error(C(151));for(var j=N=null,S=h,b=h=0,k=null,E=v.next();S!==null&&!E.done;b++,E=v.next()){S.index>b?(k=S,S=null):k=S.sibling;var $=p(m,S,E.value,f);if($===null){S===null&&(S=k);break}e&&S&&$.alternate===null&&t(m,S),h=i($,h,b),j===null?N=$:j.sibling=$,j=$,S=k}if(E.done)return n(m,S),Q&&Qt(m,b),N;if(S===null){for(;!E.done;b++,E=v.next())E=g(m,E.value,f),E!==null&&(h=i(E,h,b),j===null?N=E:j.sibling=E,j=E);return Q&&Qt(m,b),N}for(S=r(m,S);!E.done;b++,E=v.next())E=_(S,m,b,E.value,f),E!==null&&(e&&E.alternate!==null&&S.delete(E.key===null?b:E.key),h=i(E,h,b),j===null?N=E:j.sibling=E,j=E);return e&&S.forEach(function(T){return t(m,T)}),Q&&Qt(m,b),N}function y(m,h,v,f){if(typeof v=="object"&&v!==null&&v.type===Tn&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case ls:e:{for(var N=v.key,j=h;j!==null;){if(j.key===N){if(N=v.type,N===Tn){if(j.tag===7){n(m,j.sibling),h=s(j,v.props.children),h.return=m,m=h;break e}}else if(j.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===St&&lc(N)===j.type){n(m,j.sibling),h=s(j,v.props),h.ref=cr(m,j,v),h.return=m,m=h;break e}n(m,j);break}else t(m,j);j=j.sibling}v.type===Tn?(h=on(v.props.children,m.mode,f,v.key),h.return=m,m=h):(f=zs(v.type,v.key,v.props,null,m.mode,f),f.ref=cr(m,h,v),f.return=m,m=f)}return o(m);case Cn:e:{for(j=v.key;h!==null;){if(h.key===j)if(h.tag===4&&h.stateNode.containerInfo===v.containerInfo&&h.stateNode.implementation===v.implementation){n(m,h.sibling),h=s(h,v.children||[]),h.return=m,m=h;break e}else{n(m,h);break}else t(m,h);h=h.sibling}h=oa(v,m.mode,f),h.return=m,m=h}return o(m);case St:return j=v._init,y(m,h,j(v._payload),f)}if(mr(v))return x(m,h,v,f);if(sr(v))return w(m,h,v,f);ws(m,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,h!==null&&h.tag===6?(n(m,h.sibling),h=s(h,v),h.return=m,m=h):(n(m,h),h=aa(v,m.mode,f),h.return=m,m=h),o(m)):n(m,h)}return y}var Yn=Td(!0),Rd=Td(!1),ti=Wt(null),ni=null,Ln=null,Ko=null;function Jo(){Ko=Ln=ni=null}function Qo(e){var t=ti.current;J(ti),e._currentValue=t}function Qa(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Hn(e,t){ni=e,Ko=Ln=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Re=!0),e.firstContext=null)}function qe(e){var t=e._currentValue;if(Ko!==e)if(e={context:e,memoizedValue:t,next:null},Ln===null){if(ni===null)throw Error(C(308));Ln=e,ni.dependencies={lanes:0,firstContext:e}}else Ln=Ln.next=e;return t}var nn=null;function Yo(e){nn===null?nn=[e]:nn.push(e)}function Od(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,Yo(t)):(n.next=s.next,s.next=n),t.interleaved=n,_t(e,r)}function _t(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var bt=!1;function Xo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Id(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function gt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Lt(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,B&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,_t(e,n)}return s=r.interleaved,s===null?(t.next=t,Yo(r)):(t.next=s.next,s.next=t),r.interleaved=t,_t(e,n)}function $s(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Lo(e,n)}}function cc(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=t:i=i.next=t}else s=i=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function ri(e,t,n,r){var s=e.updateQueue;bt=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(i!==null){var g=s.baseState;o=0,d=u=c=null,l=i;do{var p=l.lane,_=l.eventTime;if((r&p)===p){d!==null&&(d=d.next={eventTime:_,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var x=e,w=l;switch(p=t,_=n,w.tag){case 1:if(x=w.payload,typeof x=="function"){g=x.call(_,g,p);break e}g=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=w.payload,p=typeof x=="function"?x.call(_,g,p):x,p==null)break e;g=ee({},g,p);break e;case 2:bt=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,p=s.effects,p===null?s.effects=[l]:p.push(l))}else _={eventTime:_,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=_,c=g):d=d.next=_,o|=p;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;p=l,l=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(1);if(d===null&&(c=g),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);dn|=o,e.lanes=o,e.memoizedState=g}}function uc(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(C(191,s));s.call(r)}}}var ns={},ut=Wt(ns),Fr=Wt(ns),zr=Wt(ns);function rn(e){if(e===ns)throw Error(C(174));return e}function Zo(e,t){switch(q(zr,t),q(Fr,e),q(ut,ns),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ra(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Ra(t,e)}J(ut),q(ut,t)}function Xn(){J(ut),J(Fr),J(zr)}function Pd(e){rn(zr.current);var t=rn(ut.current),n=Ra(t,e.type);t!==n&&(q(Fr,e),q(ut,n))}function el(e){Fr.current===e&&(J(ut),J(Fr))}var X=Wt(0);function si(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ea=[];function tl(){for(var e=0;e<ea.length;e++)ea[e]._workInProgressVersionPrimary=null;ea.length=0}var Ds=Nt.ReactCurrentDispatcher,ta=Nt.ReactCurrentBatchConfig,un=0,Z=null,ce=null,he=null,ii=!1,jr=!1,Br=0,Gm=0;function _e(){throw Error(C(321))}function nl(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!it(e[n],t[n]))return!1;return!0}function rl(e,t,n,r,s,i){if(un=i,Z=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ds.current=e===null||e.memoizedState===null?Qm:Ym,e=n(r,s),jr){i=0;do{if(jr=!1,Br=0,25<=i)throw Error(C(301));i+=1,he=ce=null,t.updateQueue=null,Ds.current=Xm,e=n(r,s)}while(jr)}if(Ds.current=ai,t=ce!==null&&ce.next!==null,un=0,he=ce=Z=null,ii=!1,t)throw Error(C(300));return e}function sl(){var e=Br!==0;return Br=0,e}function ot(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return he===null?Z.memoizedState=he=e:he=he.next=e,he}function Ke(){if(ce===null){var e=Z.alternate;e=e!==null?e.memoizedState:null}else e=ce.next;var t=he===null?Z.memoizedState:he.next;if(t!==null)he=t,ce=e;else{if(e===null)throw Error(C(310));ce=e,e={memoizedState:ce.memoizedState,baseState:ce.baseState,baseQueue:ce.baseQueue,queue:ce.queue,next:null},he===null?Z.memoizedState=he=e:he=he.next=e}return he}function Vr(e,t){return typeof t=="function"?t(e):t}function na(e){var t=Ke(),n=t.queue;if(n===null)throw Error(C(311));n.lastRenderedReducer=e;var r=ce,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,c=null,u=i;do{var d=u.lane;if((un&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var g={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=g,o=r):c=c.next=g,Z.lanes|=d,dn|=d}u=u.next}while(u!==null&&u!==i);c===null?o=r:c.next=l,it(r,t.memoizedState)||(Re=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do i=s.lane,Z.lanes|=i,dn|=i,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ra(e){var t=Ke(),n=t.queue;if(n===null)throw Error(C(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,i=t.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=e(i,o.action),o=o.next;while(o!==s);it(i,t.memoizedState)||(Re=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function Ad(){}function $d(e,t){var n=Z,r=Ke(),s=t(),i=!it(r.memoizedState,s);if(i&&(r.memoizedState=s,Re=!0),r=r.queue,il(Ud.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||he!==null&&he.memoizedState.tag&1){if(n.flags|=2048,Wr(9,Ld.bind(null,n,r,s,t),void 0,null),fe===null)throw Error(C(349));un&30||Dd(n,t,s)}return s}function Dd(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Z.updateQueue,t===null?(t={lastEffect:null,stores:null},Z.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Ld(e,t,n,r){t.value=n,t.getSnapshot=r,Md(t)&&Fd(e)}function Ud(e,t,n){return n(function(){Md(t)&&Fd(e)})}function Md(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!it(e,n)}catch{return!0}}function Fd(e){var t=_t(e,1);t!==null&&st(t,e,1,-1)}function dc(e){var t=ot();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vr,lastRenderedState:e},t.queue=e,e=e.dispatch=Jm.bind(null,Z,e),[t.memoizedState,e]}function Wr(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Z.updateQueue,t===null?(t={lastEffect:null,stores:null},Z.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function zd(){return Ke().memoizedState}function Ls(e,t,n,r){var s=ot();Z.flags|=e,s.memoizedState=Wr(1|t,n,void 0,r===void 0?null:r)}function ji(e,t,n,r){var s=Ke();r=r===void 0?null:r;var i=void 0;if(ce!==null){var o=ce.memoizedState;if(i=o.destroy,r!==null&&nl(r,o.deps)){s.memoizedState=Wr(t,n,i,r);return}}Z.flags|=e,s.memoizedState=Wr(1|t,n,i,r)}function hc(e,t){return Ls(8390656,8,e,t)}function il(e,t){return ji(2048,8,e,t)}function Bd(e,t){return ji(4,2,e,t)}function Vd(e,t){return ji(4,4,e,t)}function Wd(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Hd(e,t,n){return n=n!=null?n.concat([e]):null,ji(4,4,Wd.bind(null,t,e),n)}function al(){}function Gd(e,t){var n=Ke();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&nl(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function qd(e,t){var n=Ke();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&nl(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Kd(e,t,n){return un&21?(it(n,t)||(n=Zu(),Z.lanes|=n,dn|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Re=!0),e.memoizedState=n)}function qm(e,t){var n=V;V=n!==0&&4>n?n:4,e(!0);var r=ta.transition;ta.transition={};try{e(!1),t()}finally{V=n,ta.transition=r}}function Jd(){return Ke().memoizedState}function Km(e,t,n){var r=Mt(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Qd(e))Yd(t,n);else if(n=Od(e,t,n,r),n!==null){var s=Se();st(n,e,r,s),Xd(n,t,r)}}function Jm(e,t,n){var r=Mt(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Qd(e))Yd(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,it(l,o)){var c=t.interleaved;c===null?(s.next=s,Yo(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}n=Od(e,t,s,r),n!==null&&(s=Se(),st(n,e,r,s),Xd(n,t,r))}}function Qd(e){var t=e.alternate;return e===Z||t!==null&&t===Z}function Yd(e,t){jr=ii=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Xd(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Lo(e,n)}}var ai={readContext:qe,useCallback:_e,useContext:_e,useEffect:_e,useImperativeHandle:_e,useInsertionEffect:_e,useLayoutEffect:_e,useMemo:_e,useReducer:_e,useRef:_e,useState:_e,useDebugValue:_e,useDeferredValue:_e,useTransition:_e,useMutableSource:_e,useSyncExternalStore:_e,useId:_e,unstable_isNewReconciler:!1},Qm={readContext:qe,useCallback:function(e,t){return ot().memoizedState=[e,t===void 0?null:t],e},useContext:qe,useEffect:hc,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Ls(4194308,4,Wd.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ls(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ls(4,2,e,t)},useMemo:function(e,t){var n=ot();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ot();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Km.bind(null,Z,e),[r.memoizedState,e]},useRef:function(e){var t=ot();return e={current:e},t.memoizedState=e},useState:dc,useDebugValue:al,useDeferredValue:function(e){return ot().memoizedState=e},useTransition:function(){var e=dc(!1),t=e[0];return e=qm.bind(null,e[1]),ot().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Z,s=ot();if(Q){if(n===void 0)throw Error(C(407));n=n()}else{if(n=t(),fe===null)throw Error(C(349));un&30||Dd(r,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,hc(Ud.bind(null,r,i,e),[e]),r.flags|=2048,Wr(9,Ld.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=ot(),t=fe.identifierPrefix;if(Q){var n=vt,r=pt;n=(r&~(1<<32-rt(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Br++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Gm++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Ym={readContext:qe,useCallback:Gd,useContext:qe,useEffect:il,useImperativeHandle:Hd,useInsertionEffect:Bd,useLayoutEffect:Vd,useMemo:qd,useReducer:na,useRef:zd,useState:function(){return na(Vr)},useDebugValue:al,useDeferredValue:function(e){var t=Ke();return Kd(t,ce.memoizedState,e)},useTransition:function(){var e=na(Vr)[0],t=Ke().memoizedState;return[e,t]},useMutableSource:Ad,useSyncExternalStore:$d,useId:Jd,unstable_isNewReconciler:!1},Xm={readContext:qe,useCallback:Gd,useContext:qe,useEffect:il,useImperativeHandle:Hd,useInsertionEffect:Bd,useLayoutEffect:Vd,useMemo:qd,useReducer:ra,useRef:zd,useState:function(){return ra(Vr)},useDebugValue:al,useDeferredValue:function(e){var t=Ke();return ce===null?t.memoizedState=e:Kd(t,ce.memoizedState,e)},useTransition:function(){var e=ra(Vr)[0],t=Ke().memoizedState;return[e,t]},useMutableSource:Ad,useSyncExternalStore:$d,useId:Jd,unstable_isNewReconciler:!1};function Xe(e,t){if(e&&e.defaultProps){t=ee({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Ya(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:ee({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var ki={isMounted:function(e){return(e=e._reactInternals)?mn(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Se(),s=Mt(e),i=gt(r,s);i.payload=t,n!=null&&(i.callback=n),t=Lt(e,i,s),t!==null&&(st(t,e,s,r),$s(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Se(),s=Mt(e),i=gt(r,s);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=Lt(e,i,s),t!==null&&(st(t,e,s,r),$s(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Se(),r=Mt(e),s=gt(n,r);s.tag=2,t!=null&&(s.callback=t),t=Lt(e,s,r),t!==null&&(st(t,e,r,n),$s(t,e,r))}};function fc(e,t,n,r,s,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,o):t.prototype&&t.prototype.isPureReactComponent?!Dr(n,r)||!Dr(s,i):!0}function Zd(e,t,n){var r=!1,s=Bt,i=t.contextType;return typeof i=="object"&&i!==null?i=qe(i):(s=Ie(t)?ln:je.current,r=t.contextTypes,i=(r=r!=null)?Jn(e,s):Bt),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ki,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function mc(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ki.enqueueReplaceState(t,t.state,null)}function Xa(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Xo(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=qe(i):(i=Ie(t)?ln:je.current,s.context=Jn(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Ya(e,t,i,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&ki.enqueueReplaceState(s,s.state,null),ri(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Zn(e,t){try{var n="",r=t;do n+=bf(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function sa(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Za(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Zm=typeof WeakMap=="function"?WeakMap:Map;function eh(e,t,n){n=gt(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){li||(li=!0,co=r),Za(e,t)},n}function th(e,t,n){n=gt(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){Za(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Za(e,t),typeof r!="function"&&(Ut===null?Ut=new Set([this]):Ut.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function pc(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Zm;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=fp.bind(null,e,t,n),t.then(e,e))}function vc(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function gc(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=gt(-1,1),t.tag=2,Lt(n,t,1))),n.lanes|=1),e)}var ep=Nt.ReactCurrentOwner,Re=!1;function ke(e,t,n,r){t.child=e===null?Rd(t,null,n,r):Yn(t,e.child,n,r)}function yc(e,t,n,r,s){n=n.render;var i=t.ref;return Hn(t,s),r=rl(e,t,n,r,i,s),n=sl(),e!==null&&!Re?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,xt(e,t,s)):(Q&&n&&Ho(t),t.flags|=1,ke(e,t,r,s),t.child)}function wc(e,t,n,r,s){if(e===null){var i=n.type;return typeof i=="function"&&!ml(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,nh(e,t,i,r,s)):(e=zs(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Dr,n(o,r)&&e.ref===t.ref)return xt(e,t,s)}return t.flags|=1,e=Ft(i,r),e.ref=t.ref,e.return=t,t.child=e}function nh(e,t,n,r,s){if(e!==null){var i=e.memoizedProps;if(Dr(i,r)&&e.ref===t.ref)if(Re=!1,t.pendingProps=r=i,(e.lanes&s)!==0)e.flags&131072&&(Re=!0);else return t.lanes=e.lanes,xt(e,t,s)}return eo(e,t,n,r,s)}function rh(e,t,n){var r=t.pendingProps,s=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},q(Mn,$e),$e|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,q(Mn,$e),$e|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,q(Mn,$e),$e|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,q(Mn,$e),$e|=r;return ke(e,t,s,n),t.child}function sh(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function eo(e,t,n,r,s){var i=Ie(n)?ln:je.current;return i=Jn(t,i),Hn(t,s),n=rl(e,t,n,r,i,s),r=sl(),e!==null&&!Re?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,xt(e,t,s)):(Q&&r&&Ho(t),t.flags|=1,ke(e,t,n,s),t.child)}function _c(e,t,n,r,s){if(Ie(n)){var i=!0;Xs(t)}else i=!1;if(Hn(t,s),t.stateNode===null)Us(e,t),Zd(t,n,r),Xa(t,n,r,s),r=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=qe(u):(u=Ie(n)?ln:je.current,u=Jn(t,u));var d=n.getDerivedStateFromProps,g=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";g||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==u)&&mc(t,o,r,u),bt=!1;var p=t.memoizedState;o.state=p,ri(t,r,o,s),c=t.memoizedState,l!==r||p!==c||Oe.current||bt?(typeof d=="function"&&(Ya(t,n,d,r),c=t.memoizedState),(l=bt||fc(t,n,l,r,p,c,u))?(g||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),o.props=r,o.state=c,o.context=u,r=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Id(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:Xe(t.type,l),o.props=u,g=t.pendingProps,p=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=qe(c):(c=Ie(n)?ln:je.current,c=Jn(t,c));var _=n.getDerivedStateFromProps;(d=typeof _=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==g||p!==c)&&mc(t,o,r,c),bt=!1,p=t.memoizedState,o.state=p,ri(t,r,o,s);var x=t.memoizedState;l!==g||p!==x||Oe.current||bt?(typeof _=="function"&&(Ya(t,n,_,r),x=t.memoizedState),(u=bt||fc(t,n,u,r,p,x,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,x,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,x,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=x),o.props=r,o.state=x,o.context=c,r=u):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),r=!1)}return to(e,t,n,r,i,s)}function to(e,t,n,r,s,i){sh(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return s&&ic(t,n,!1),xt(e,t,i);r=t.stateNode,ep.current=t;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=Yn(t,e.child,null,i),t.child=Yn(t,null,l,i)):ke(e,t,l,i),t.memoizedState=r.state,s&&ic(t,n,!0),t.child}function ih(e){var t=e.stateNode;t.pendingContext?sc(e,t.pendingContext,t.pendingContext!==t.context):t.context&&sc(e,t.context,!1),Zo(e,t.containerInfo)}function xc(e,t,n,r,s){return Qn(),qo(s),t.flags|=256,ke(e,t,n,r),t.child}var no={dehydrated:null,treeContext:null,retryLane:0};function ro(e){return{baseLanes:e,cachePool:null,transitions:null}}function ah(e,t,n){var r=t.pendingProps,s=X.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),q(X,s&1),e===null)return Ja(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,i?(r=t.mode,i=t.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Ei(o,r,0,null),e=on(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=ro(n),t.memoizedState=no,e):ol(t,o));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return tp(e,t,o,r,l,s,n);if(i){i=r.fallback,o=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=Ft(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Ft(l,i):(i=on(i,o,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,o=e.child.memoizedState,o=o===null?ro(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~n,t.memoizedState=no,r}return i=e.child,e=i.sibling,r=Ft(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function ol(e,t){return t=Ei({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function _s(e,t,n,r){return r!==null&&qo(r),Yn(t,e.child,null,n),e=ol(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function tp(e,t,n,r,s,i,o){if(n)return t.flags&256?(t.flags&=-257,r=sa(Error(C(422))),_s(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,s=t.mode,r=Ei({mode:"visible",children:r.children},s,0,null),i=on(i,s,o,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&Yn(t,e.child,null,o),t.child.memoizedState=ro(o),t.memoizedState=no,i);if(!(t.mode&1))return _s(e,t,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(C(419)),r=sa(i,r,void 0),_s(e,t,o,r)}if(l=(o&e.childLanes)!==0,Re||l){if(r=fe,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,_t(e,s),st(r,e,s,-1))}return fl(),r=sa(Error(C(421))),_s(e,t,o,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=mp.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,Ue=Dt(s.nextSibling),Me=t,Q=!0,nt=null,e!==null&&(Ve[We++]=pt,Ve[We++]=vt,Ve[We++]=cn,pt=e.id,vt=e.overflow,cn=t),t=ol(t,r.children),t.flags|=4096,t)}function Nc(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Qa(e.return,t,n)}function ia(e,t,n,r,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function oh(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(ke(e,t,r.children,n),r=X.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Nc(e,n,t);else if(e.tag===19)Nc(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(q(X,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&si(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),ia(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&si(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}ia(t,!0,n,null,i);break;case"together":ia(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Us(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function xt(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),dn|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(C(153));if(t.child!==null){for(e=t.child,n=Ft(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Ft(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function np(e,t,n){switch(t.tag){case 3:ih(t),Qn();break;case 5:Pd(t);break;case 1:Ie(t.type)&&Xs(t);break;case 4:Zo(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;q(ti,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(q(X,X.current&1),t.flags|=128,null):n&t.child.childLanes?ah(e,t,n):(q(X,X.current&1),e=xt(e,t,n),e!==null?e.sibling:null);q(X,X.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return oh(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),q(X,X.current),r)break;return null;case 22:case 23:return t.lanes=0,rh(e,t,n)}return xt(e,t,n)}var lh,so,ch,uh;lh=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};so=function(){};ch=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,rn(ut.current);var i=null;switch(n){case"input":s=ba(e,s),r=ba(e,r),i=[];break;case"select":s=ee({},s,{value:void 0}),r=ee({},r,{value:void 0}),i=[];break;case"textarea":s=Ta(e,s),r=Ta(e,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Qs)}Oa(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Tr.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(l=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Tr.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&K("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};uh=function(e,t,n,r){n!==r&&(t.flags|=4)};function ur(e,t){if(!Q)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function xe(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function rp(e,t,n){var r=t.pendingProps;switch(Go(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xe(t),null;case 1:return Ie(t.type)&&Ys(),xe(t),null;case 3:return r=t.stateNode,Xn(),J(Oe),J(je),tl(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(ys(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,nt!==null&&(fo(nt),nt=null))),so(e,t),xe(t),null;case 5:el(t);var s=rn(zr.current);if(n=t.type,e!==null&&t.stateNode!=null)ch(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(C(166));return xe(t),null}if(e=rn(ut.current),ys(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[lt]=t,r[Mr]=i,e=(t.mode&1)!==0,n){case"dialog":K("cancel",r),K("close",r);break;case"iframe":case"object":case"embed":K("load",r);break;case"video":case"audio":for(s=0;s<vr.length;s++)K(vr[s],r);break;case"source":K("error",r);break;case"img":case"image":case"link":K("error",r),K("load",r);break;case"details":K("toggle",r);break;case"input":Ol(r,i),K("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},K("invalid",r);break;case"textarea":Pl(r,i),K("invalid",r)}Oa(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&gs(r.textContent,l,e),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&gs(r.textContent,l,e),s=["children",""+l]):Tr.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&K("scroll",r)}switch(n){case"input":cs(r),Il(r,i,!0);break;case"textarea":cs(r),Al(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Qs)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Uu(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[lt]=t,e[Mr]=r,lh(e,t,!1,!1),t.stateNode=e;e:{switch(o=Ia(n,r),n){case"dialog":K("cancel",e),K("close",e),s=r;break;case"iframe":case"object":case"embed":K("load",e),s=r;break;case"video":case"audio":for(s=0;s<vr.length;s++)K(vr[s],e);s=r;break;case"source":K("error",e),s=r;break;case"img":case"image":case"link":K("error",e),K("load",e),s=r;break;case"details":K("toggle",e),s=r;break;case"input":Ol(e,r),s=ba(e,r),K("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=ee({},r,{value:void 0}),K("invalid",e);break;case"textarea":Pl(e,r),s=Ta(e,r),K("invalid",e);break;default:s=r}Oa(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?zu(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Mu(e,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Rr(e,c):typeof c=="number"&&Rr(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Tr.hasOwnProperty(i)?c!=null&&i==="onScroll"&&K("scroll",e):c!=null&&Oo(e,i,c,o))}switch(n){case"input":cs(e),Il(e,r,!1);break;case"textarea":cs(e),Al(e);break;case"option":r.value!=null&&e.setAttribute("value",""+zt(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?zn(e,!!r.multiple,i,!1):r.defaultValue!=null&&zn(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Qs)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return xe(t),null;case 6:if(e&&t.stateNode!=null)uh(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(C(166));if(n=rn(zr.current),rn(ut.current),ys(t)){if(r=t.stateNode,n=t.memoizedProps,r[lt]=t,(i=r.nodeValue!==n)&&(e=Me,e!==null))switch(e.tag){case 3:gs(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&gs(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[lt]=t,t.stateNode=r}return xe(t),null;case 13:if(J(X),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Q&&Ue!==null&&t.mode&1&&!(t.flags&128))Cd(),Qn(),t.flags|=98560,i=!1;else if(i=ys(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(C(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(C(317));i[lt]=t}else Qn(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;xe(t),i=!1}else nt!==null&&(fo(nt),nt=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||X.current&1?ue===0&&(ue=3):fl())),t.updateQueue!==null&&(t.flags|=4),xe(t),null);case 4:return Xn(),so(e,t),e===null&&Lr(t.stateNode.containerInfo),xe(t),null;case 10:return Qo(t.type._context),xe(t),null;case 17:return Ie(t.type)&&Ys(),xe(t),null;case 19:if(J(X),i=t.memoizedState,i===null)return xe(t),null;if(r=(t.flags&128)!==0,o=i.rendering,o===null)if(r)ur(i,!1);else{if(ue!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=si(e),o!==null){for(t.flags|=128,ur(i,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return q(X,X.current&1|2),t.child}e=e.sibling}i.tail!==null&&se()>er&&(t.flags|=128,r=!0,ur(i,!1),t.lanes=4194304)}else{if(!r)if(e=si(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),ur(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Q)return xe(t),null}else 2*se()-i.renderingStartTime>er&&n!==1073741824&&(t.flags|=128,r=!0,ur(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(n=i.last,n!==null?n.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=se(),t.sibling=null,n=X.current,q(X,r?n&1|2:n&1),t):(xe(t),null);case 22:case 23:return hl(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?$e&1073741824&&(xe(t),t.subtreeFlags&6&&(t.flags|=8192)):xe(t),null;case 24:return null;case 25:return null}throw Error(C(156,t.tag))}function sp(e,t){switch(Go(t),t.tag){case 1:return Ie(t.type)&&Ys(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Xn(),J(Oe),J(je),tl(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return el(t),null;case 13:if(J(X),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(C(340));Qn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return J(X),null;case 4:return Xn(),null;case 10:return Qo(t.type._context),null;case 22:case 23:return hl(),null;case 24:return null;default:return null}}var xs=!1,Ne=!1,ip=typeof WeakSet=="function"?WeakSet:Set,R=null;function Un(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ne(e,t,r)}else n.current=null}function io(e,t,n){try{n()}catch(r){ne(e,t,r)}}var jc=!1;function ap(e,t){if(Ba=qs,e=pd(),Wo(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,g=e,p=null;t:for(;;){for(var _;g!==n||s!==0&&g.nodeType!==3||(l=o+s),g!==i||r!==0&&g.nodeType!==3||(c=o+r),g.nodeType===3&&(o+=g.nodeValue.length),(_=g.firstChild)!==null;)p=g,g=_;for(;;){if(g===e)break t;if(p===n&&++u===s&&(l=o),p===i&&++d===r&&(c=o),(_=g.nextSibling)!==null)break;g=p,p=g.parentNode}g=_}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Va={focusedElem:e,selectionRange:n},qs=!1,R=t;R!==null;)if(t=R,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,R=e;else for(;R!==null;){t=R;try{var x=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var w=x.memoizedProps,y=x.memoizedState,m=t.stateNode,h=m.getSnapshotBeforeUpdate(t.elementType===t.type?w:Xe(t.type,w),y);m.__reactInternalSnapshotBeforeUpdate=h}break;case 3:var v=t.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(C(163))}}catch(f){ne(t,t.return,f)}if(e=t.sibling,e!==null){e.return=t.return,R=e;break}R=t.return}return x=jc,jc=!1,x}function kr(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&io(t,n,i)}s=s.next}while(s!==r)}}function Si(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ao(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function dh(e){var t=e.alternate;t!==null&&(e.alternate=null,dh(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[lt],delete t[Mr],delete t[Ga],delete t[Bm],delete t[Vm])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function hh(e){return e.tag===5||e.tag===3||e.tag===4}function kc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||hh(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function oo(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Qs));else if(r!==4&&(e=e.child,e!==null))for(oo(e,t,n),e=e.sibling;e!==null;)oo(e,t,n),e=e.sibling}function lo(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(lo(e,t,n),e=e.sibling;e!==null;)lo(e,t,n),e=e.sibling}var ge=null,et=!1;function kt(e,t,n){for(n=n.child;n!==null;)fh(e,t,n),n=n.sibling}function fh(e,t,n){if(ct&&typeof ct.onCommitFiberUnmount=="function")try{ct.onCommitFiberUnmount(gi,n)}catch{}switch(n.tag){case 5:Ne||Un(n,t);case 6:var r=ge,s=et;ge=null,kt(e,t,n),ge=r,et=s,ge!==null&&(et?(e=ge,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):ge.removeChild(n.stateNode));break;case 18:ge!==null&&(et?(e=ge,n=n.stateNode,e.nodeType===8?Xi(e.parentNode,n):e.nodeType===1&&Xi(e,n),Ar(e)):Xi(ge,n.stateNode));break;case 4:r=ge,s=et,ge=n.stateNode.containerInfo,et=!0,kt(e,t,n),ge=r,et=s;break;case 0:case 11:case 14:case 15:if(!Ne&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&io(n,t,o),s=s.next}while(s!==r)}kt(e,t,n);break;case 1:if(!Ne&&(Un(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){ne(n,t,l)}kt(e,t,n);break;case 21:kt(e,t,n);break;case 22:n.mode&1?(Ne=(r=Ne)||n.memoizedState!==null,kt(e,t,n),Ne=r):kt(e,t,n);break;default:kt(e,t,n)}}function Sc(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new ip),t.forEach(function(r){var s=pp.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Qe(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:ge=l.stateNode,et=!1;break e;case 3:ge=l.stateNode.containerInfo,et=!0;break e;case 4:ge=l.stateNode.containerInfo,et=!0;break e}l=l.return}if(ge===null)throw Error(C(160));fh(i,o,s),ge=null,et=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){ne(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)mh(t,e),t=t.sibling}function mh(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Qe(t,e),at(e),r&4){try{kr(3,e,e.return),Si(3,e)}catch(w){ne(e,e.return,w)}try{kr(5,e,e.return)}catch(w){ne(e,e.return,w)}}break;case 1:Qe(t,e),at(e),r&512&&n!==null&&Un(n,n.return);break;case 5:if(Qe(t,e),at(e),r&512&&n!==null&&Un(n,n.return),e.flags&32){var s=e.stateNode;try{Rr(s,"")}catch(w){ne(e,e.return,w)}}if(r&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,o=n!==null?n.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Du(s,i),Ia(l,o);var u=Ia(l,i);for(o=0;o<c.length;o+=2){var d=c[o],g=c[o+1];d==="style"?zu(s,g):d==="dangerouslySetInnerHTML"?Mu(s,g):d==="children"?Rr(s,g):Oo(s,d,g,u)}switch(l){case"input":Ea(s,i);break;case"textarea":Lu(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var _=i.value;_!=null?zn(s,!!i.multiple,_,!1):p!==!!i.multiple&&(i.defaultValue!=null?zn(s,!!i.multiple,i.defaultValue,!0):zn(s,!!i.multiple,i.multiple?[]:"",!1))}s[Mr]=i}catch(w){ne(e,e.return,w)}}break;case 6:if(Qe(t,e),at(e),r&4){if(e.stateNode===null)throw Error(C(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(w){ne(e,e.return,w)}}break;case 3:if(Qe(t,e),at(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ar(t.containerInfo)}catch(w){ne(e,e.return,w)}break;case 4:Qe(t,e),at(e);break;case 13:Qe(t,e),at(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(ul=se())),r&4&&Sc(e);break;case 22:if(d=n!==null&&n.memoizedState!==null,e.mode&1?(Ne=(u=Ne)||d,Qe(t,e),Ne=u):Qe(t,e),at(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(R=e,d=e.child;d!==null;){for(g=R=d;R!==null;){switch(p=R,_=p.child,p.tag){case 0:case 11:case 14:case 15:kr(4,p,p.return);break;case 1:Un(p,p.return);var x=p.stateNode;if(typeof x.componentWillUnmount=="function"){r=p,n=p.return;try{t=r,x.props=t.memoizedProps,x.state=t.memoizedState,x.componentWillUnmount()}catch(w){ne(r,n,w)}}break;case 5:Un(p,p.return);break;case 22:if(p.memoizedState!==null){Ec(g);continue}}_!==null?(_.return=p,R=_):Ec(g)}d=d.sibling}e:for(d=null,g=e;;){if(g.tag===5){if(d===null){d=g;try{s=g.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=g.stateNode,c=g.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Fu("display",o))}catch(w){ne(e,e.return,w)}}}else if(g.tag===6){if(d===null)try{g.stateNode.nodeValue=u?"":g.memoizedProps}catch(w){ne(e,e.return,w)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===e)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===e)break e;for(;g.sibling===null;){if(g.return===null||g.return===e)break e;d===g&&(d=null),g=g.return}d===g&&(d=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:Qe(t,e),at(e),r&4&&Sc(e);break;case 21:break;default:Qe(t,e),at(e)}}function at(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(hh(n)){var r=n;break e}n=n.return}throw Error(C(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Rr(s,""),r.flags&=-33);var i=kc(e);lo(e,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=kc(e);oo(e,l,o);break;default:throw Error(C(161))}}catch(c){ne(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function op(e,t,n){R=e,ph(e)}function ph(e,t,n){for(var r=(e.mode&1)!==0;R!==null;){var s=R,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||xs;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||Ne;l=xs;var u=Ne;if(xs=o,(Ne=c)&&!u)for(R=s;R!==null;)o=R,c=o.child,o.tag===22&&o.memoizedState!==null?Cc(s):c!==null?(c.return=o,R=c):Cc(s);for(;i!==null;)R=i,ph(i),i=i.sibling;R=s,xs=l,Ne=u}bc(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,R=i):bc(e)}}function bc(e){for(;R!==null;){var t=R;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ne||Si(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Ne)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:Xe(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&uc(t,i,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}uc(t,o,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var g=d.dehydrated;g!==null&&Ar(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(C(163))}Ne||t.flags&512&&ao(t)}catch(p){ne(t,t.return,p)}}if(t===e){R=null;break}if(n=t.sibling,n!==null){n.return=t.return,R=n;break}R=t.return}}function Ec(e){for(;R!==null;){var t=R;if(t===e){R=null;break}var n=t.sibling;if(n!==null){n.return=t.return,R=n;break}R=t.return}}function Cc(e){for(;R!==null;){var t=R;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Si(4,t)}catch(c){ne(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(c){ne(t,s,c)}}var i=t.return;try{ao(t)}catch(c){ne(t,i,c)}break;case 5:var o=t.return;try{ao(t)}catch(c){ne(t,o,c)}}}catch(c){ne(t,t.return,c)}if(t===e){R=null;break}var l=t.sibling;if(l!==null){l.return=t.return,R=l;break}R=t.return}}var lp=Math.ceil,oi=Nt.ReactCurrentDispatcher,ll=Nt.ReactCurrentOwner,Ge=Nt.ReactCurrentBatchConfig,B=0,fe=null,ae=null,ye=0,$e=0,Mn=Wt(0),ue=0,Hr=null,dn=0,bi=0,cl=0,Sr=null,Te=null,ul=0,er=1/0,ht=null,li=!1,co=null,Ut=null,Ns=!1,It=null,ci=0,br=0,uo=null,Ms=-1,Fs=0;function Se(){return B&6?se():Ms!==-1?Ms:Ms=se()}function Mt(e){return e.mode&1?B&2&&ye!==0?ye&-ye:Hm.transition!==null?(Fs===0&&(Fs=Zu()),Fs):(e=V,e!==0||(e=window.event,e=e===void 0?16:ad(e.type)),e):1}function st(e,t,n,r){if(50<br)throw br=0,uo=null,Error(C(185));Zr(e,n,r),(!(B&2)||e!==fe)&&(e===fe&&(!(B&2)&&(bi|=n),ue===4&&Tt(e,ye)),Pe(e,r),n===1&&B===0&&!(t.mode&1)&&(er=se()+500,Ni&&Ht()))}function Pe(e,t){var n=e.callbackNode;Hf(e,t);var r=Gs(e,e===fe?ye:0);if(r===0)n!==null&&Ll(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Ll(n),t===1)e.tag===0?Wm(Tc.bind(null,e)):Sd(Tc.bind(null,e)),Fm(function(){!(B&6)&&Ht()}),n=null;else{switch(ed(r)){case 1:n=Do;break;case 4:n=Yu;break;case 16:n=Hs;break;case 536870912:n=Xu;break;default:n=Hs}n=jh(n,vh.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function vh(e,t){if(Ms=-1,Fs=0,B&6)throw Error(C(327));var n=e.callbackNode;if(Gn()&&e.callbackNode!==n)return null;var r=Gs(e,e===fe?ye:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=ui(e,r);else{t=r;var s=B;B|=2;var i=yh();(fe!==e||ye!==t)&&(ht=null,er=se()+500,an(e,t));do try{dp();break}catch(l){gh(e,l)}while(1);Jo(),oi.current=i,B=s,ae!==null?t=0:(fe=null,ye=0,t=ue)}if(t!==0){if(t===2&&(s=La(e),s!==0&&(r=s,t=ho(e,s))),t===1)throw n=Hr,an(e,0),Tt(e,r),Pe(e,se()),n;if(t===6)Tt(e,r);else{if(s=e.current.alternate,!(r&30)&&!cp(s)&&(t=ui(e,r),t===2&&(i=La(e),i!==0&&(r=i,t=ho(e,i))),t===1))throw n=Hr,an(e,0),Tt(e,r),Pe(e,se()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(C(345));case 2:Yt(e,Te,ht);break;case 3:if(Tt(e,r),(r&130023424)===r&&(t=ul+500-se(),10<t)){if(Gs(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){Se(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Ha(Yt.bind(null,e,Te,ht),t);break}Yt(e,Te,ht);break;case 4:if(Tt(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var o=31-rt(r);i=1<<o,o=t[o],o>s&&(s=o),r&=~i}if(r=s,r=se()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*lp(r/1960))-r,10<r){e.timeoutHandle=Ha(Yt.bind(null,e,Te,ht),r);break}Yt(e,Te,ht);break;case 5:Yt(e,Te,ht);break;default:throw Error(C(329))}}}return Pe(e,se()),e.callbackNode===n?vh.bind(null,e):null}function ho(e,t){var n=Sr;return e.current.memoizedState.isDehydrated&&(an(e,t).flags|=256),e=ui(e,t),e!==2&&(t=Te,Te=n,t!==null&&fo(t)),e}function fo(e){Te===null?Te=e:Te.push.apply(Te,e)}function cp(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!it(i(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Tt(e,t){for(t&=~cl,t&=~bi,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-rt(t),r=1<<n;e[n]=-1,t&=~r}}function Tc(e){if(B&6)throw Error(C(327));Gn();var t=Gs(e,0);if(!(t&1))return Pe(e,se()),null;var n=ui(e,t);if(e.tag!==0&&n===2){var r=La(e);r!==0&&(t=r,n=ho(e,r))}if(n===1)throw n=Hr,an(e,0),Tt(e,t),Pe(e,se()),n;if(n===6)throw Error(C(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Yt(e,Te,ht),Pe(e,se()),null}function dl(e,t){var n=B;B|=1;try{return e(t)}finally{B=n,B===0&&(er=se()+500,Ni&&Ht())}}function hn(e){It!==null&&It.tag===0&&!(B&6)&&Gn();var t=B;B|=1;var n=Ge.transition,r=V;try{if(Ge.transition=null,V=1,e)return e()}finally{V=r,Ge.transition=n,B=t,!(B&6)&&Ht()}}function hl(){$e=Mn.current,J(Mn)}function an(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Mm(n)),ae!==null)for(n=ae.return;n!==null;){var r=n;switch(Go(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ys();break;case 3:Xn(),J(Oe),J(je),tl();break;case 5:el(r);break;case 4:Xn();break;case 13:J(X);break;case 19:J(X);break;case 10:Qo(r.type._context);break;case 22:case 23:hl()}n=n.return}if(fe=e,ae=e=Ft(e.current,null),ye=$e=t,ue=0,Hr=null,cl=bi=dn=0,Te=Sr=null,nn!==null){for(t=0;t<nn.length;t++)if(n=nn[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}nn=null}return e}function gh(e,t){do{var n=ae;try{if(Jo(),Ds.current=ai,ii){for(var r=Z.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}ii=!1}if(un=0,he=ce=Z=null,jr=!1,Br=0,ll.current=null,n===null||n.return===null){ue=1,Hr=t,ae=null;break}e:{var i=e,o=n.return,l=n,c=t;if(t=ye,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,g=d.tag;if(!(d.mode&1)&&(g===0||g===11||g===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var _=vc(o);if(_!==null){_.flags&=-257,gc(_,o,l,i,t),_.mode&1&&pc(i,u,t),t=_,c=u;var x=t.updateQueue;if(x===null){var w=new Set;w.add(c),t.updateQueue=w}else x.add(c);break e}else{if(!(t&1)){pc(i,u,t),fl();break e}c=Error(C(426))}}else if(Q&&l.mode&1){var y=vc(o);if(y!==null){!(y.flags&65536)&&(y.flags|=256),gc(y,o,l,i,t),qo(Zn(c,l));break e}}i=c=Zn(c,l),ue!==4&&(ue=2),Sr===null?Sr=[i]:Sr.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var m=eh(i,c,t);cc(i,m);break e;case 1:l=c;var h=i.type,v=i.stateNode;if(!(i.flags&128)&&(typeof h.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Ut===null||!Ut.has(v)))){i.flags|=65536,t&=-t,i.lanes|=t;var f=th(i,l,t);cc(i,f);break e}}i=i.return}while(i!==null)}_h(n)}catch(N){t=N,ae===n&&n!==null&&(ae=n=n.return);continue}break}while(1)}function yh(){var e=oi.current;return oi.current=ai,e===null?ai:e}function fl(){(ue===0||ue===3||ue===2)&&(ue=4),fe===null||!(dn&268435455)&&!(bi&268435455)||Tt(fe,ye)}function ui(e,t){var n=B;B|=2;var r=yh();(fe!==e||ye!==t)&&(ht=null,an(e,t));do try{up();break}catch(s){gh(e,s)}while(1);if(Jo(),B=n,oi.current=r,ae!==null)throw Error(C(261));return fe=null,ye=0,ue}function up(){for(;ae!==null;)wh(ae)}function dp(){for(;ae!==null&&!Df();)wh(ae)}function wh(e){var t=Nh(e.alternate,e,$e);e.memoizedProps=e.pendingProps,t===null?_h(e):ae=t,ll.current=null}function _h(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=sp(n,t),n!==null){n.flags&=32767,ae=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ue=6,ae=null;return}}else if(n=rp(n,t,$e),n!==null){ae=n;return}if(t=t.sibling,t!==null){ae=t;return}ae=t=e}while(t!==null);ue===0&&(ue=5)}function Yt(e,t,n){var r=V,s=Ge.transition;try{Ge.transition=null,V=1,hp(e,t,n,r)}finally{Ge.transition=s,V=r}return null}function hp(e,t,n,r){do Gn();while(It!==null);if(B&6)throw Error(C(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(C(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(Gf(e,i),e===fe&&(ae=fe=null,ye=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ns||(Ns=!0,jh(Hs,function(){return Gn(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Ge.transition,Ge.transition=null;var o=V;V=1;var l=B;B|=4,ll.current=null,ap(e,n),mh(n,e),Im(Va),qs=!!Ba,Va=Ba=null,e.current=n,op(n),Lf(),B=l,V=o,Ge.transition=i}else e.current=n;if(Ns&&(Ns=!1,It=e,ci=s),i=e.pendingLanes,i===0&&(Ut=null),Ff(n.stateNode),Pe(e,se()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(li)throw li=!1,e=co,co=null,e;return ci&1&&e.tag!==0&&Gn(),i=e.pendingLanes,i&1?e===uo?br++:(br=0,uo=e):br=0,Ht(),null}function Gn(){if(It!==null){var e=ed(ci),t=Ge.transition,n=V;try{if(Ge.transition=null,V=16>e?16:e,It===null)var r=!1;else{if(e=It,It=null,ci=0,B&6)throw Error(C(331));var s=B;for(B|=4,R=e.current;R!==null;){var i=R,o=i.child;if(R.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(R=u;R!==null;){var d=R;switch(d.tag){case 0:case 11:case 15:kr(8,d,i)}var g=d.child;if(g!==null)g.return=d,R=g;else for(;R!==null;){d=R;var p=d.sibling,_=d.return;if(dh(d),d===u){R=null;break}if(p!==null){p.return=_,R=p;break}R=_}}}var x=i.alternate;if(x!==null){var w=x.child;if(w!==null){x.child=null;do{var y=w.sibling;w.sibling=null,w=y}while(w!==null)}}R=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,R=o;else e:for(;R!==null;){if(i=R,i.flags&2048)switch(i.tag){case 0:case 11:case 15:kr(9,i,i.return)}var m=i.sibling;if(m!==null){m.return=i.return,R=m;break e}R=i.return}}var h=e.current;for(R=h;R!==null;){o=R;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,R=v;else e:for(o=h;R!==null;){if(l=R,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Si(9,l)}}catch(N){ne(l,l.return,N)}if(l===o){R=null;break e}var f=l.sibling;if(f!==null){f.return=l.return,R=f;break e}R=l.return}}if(B=s,Ht(),ct&&typeof ct.onPostCommitFiberRoot=="function")try{ct.onPostCommitFiberRoot(gi,e)}catch{}r=!0}return r}finally{V=n,Ge.transition=t}}return!1}function Rc(e,t,n){t=Zn(n,t),t=eh(e,t,1),e=Lt(e,t,1),t=Se(),e!==null&&(Zr(e,1,t),Pe(e,t))}function ne(e,t,n){if(e.tag===3)Rc(e,e,n);else for(;t!==null;){if(t.tag===3){Rc(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ut===null||!Ut.has(r))){e=Zn(n,e),e=th(t,e,1),t=Lt(t,e,1),e=Se(),t!==null&&(Zr(t,1,e),Pe(t,e));break}}t=t.return}}function fp(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Se(),e.pingedLanes|=e.suspendedLanes&n,fe===e&&(ye&n)===n&&(ue===4||ue===3&&(ye&130023424)===ye&&500>se()-ul?an(e,0):cl|=n),Pe(e,t)}function xh(e,t){t===0&&(e.mode&1?(t=hs,hs<<=1,!(hs&130023424)&&(hs=4194304)):t=1);var n=Se();e=_t(e,t),e!==null&&(Zr(e,t,n),Pe(e,n))}function mp(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),xh(e,n)}function pp(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(C(314))}r!==null&&r.delete(t),xh(e,n)}var Nh;Nh=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Oe.current)Re=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Re=!1,np(e,t,n);Re=!!(e.flags&131072)}else Re=!1,Q&&t.flags&1048576&&bd(t,ei,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Us(e,t),e=t.pendingProps;var s=Jn(t,je.current);Hn(t,n),s=rl(null,t,r,e,s,n);var i=sl();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ie(r)?(i=!0,Xs(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Xo(t),s.updater=ki,t.stateNode=s,s._reactInternals=t,Xa(t,r,e,n),t=to(null,t,r,!0,i,n)):(t.tag=0,Q&&i&&Ho(t),ke(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Us(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=gp(r),e=Xe(r,e),s){case 0:t=eo(null,t,r,e,n);break e;case 1:t=_c(null,t,r,e,n);break e;case 11:t=yc(null,t,r,e,n);break e;case 14:t=wc(null,t,r,Xe(r.type,e),n);break e}throw Error(C(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Xe(r,s),eo(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Xe(r,s),_c(e,t,r,s,n);case 3:e:{if(ih(t),e===null)throw Error(C(387));r=t.pendingProps,i=t.memoizedState,s=i.element,Id(e,t),ri(t,r,null,n);var o=t.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=Zn(Error(C(423)),t),t=xc(e,t,r,n,s);break e}else if(r!==s){s=Zn(Error(C(424)),t),t=xc(e,t,r,n,s);break e}else for(Ue=Dt(t.stateNode.containerInfo.firstChild),Me=t,Q=!0,nt=null,n=Rd(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Qn(),r===s){t=xt(e,t,n);break e}ke(e,t,r,n)}t=t.child}return t;case 5:return Pd(t),e===null&&Ja(t),r=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,o=s.children,Wa(r,s)?o=null:i!==null&&Wa(r,i)&&(t.flags|=32),sh(e,t),ke(e,t,o,n),t.child;case 6:return e===null&&Ja(t),null;case 13:return ah(e,t,n);case 4:return Zo(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Yn(t,null,r,n):ke(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Xe(r,s),yc(e,t,r,s,n);case 7:return ke(e,t,t.pendingProps,n),t.child;case 8:return ke(e,t,t.pendingProps.children,n),t.child;case 12:return ke(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,i=t.memoizedProps,o=s.value,q(ti,r._currentValue),r._currentValue=o,i!==null)if(it(i.value,o)){if(i.children===s.children&&!Oe.current){t=xt(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=gt(-1,n&-n),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Qa(i.return,n,t),l.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(C(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Qa(o,n,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}ke(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,Hn(t,n),s=qe(s),r=r(s),t.flags|=1,ke(e,t,r,n),t.child;case 14:return r=t.type,s=Xe(r,t.pendingProps),s=Xe(r.type,s),wc(e,t,r,s,n);case 15:return nh(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Xe(r,s),Us(e,t),t.tag=1,Ie(r)?(e=!0,Xs(t)):e=!1,Hn(t,n),Zd(t,r,s),Xa(t,r,s,n),to(null,t,r,!0,e,n);case 19:return oh(e,t,n);case 22:return rh(e,t,n)}throw Error(C(156,t.tag))};function jh(e,t){return Qu(e,t)}function vp(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function He(e,t,n,r){return new vp(e,t,n,r)}function ml(e){return e=e.prototype,!(!e||!e.isReactComponent)}function gp(e){if(typeof e=="function")return ml(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Po)return 11;if(e===Ao)return 14}return 2}function Ft(e,t){var n=e.alternate;return n===null?(n=He(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function zs(e,t,n,r,s,i){var o=2;if(r=e,typeof e=="function")ml(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Tn:return on(n.children,s,i,t);case Io:o=8,s|=8;break;case Na:return e=He(12,n,t,s|2),e.elementType=Na,e.lanes=i,e;case ja:return e=He(13,n,t,s),e.elementType=ja,e.lanes=i,e;case ka:return e=He(19,n,t,s),e.elementType=ka,e.lanes=i,e;case Pu:return Ei(n,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Ou:o=10;break e;case Iu:o=9;break e;case Po:o=11;break e;case Ao:o=14;break e;case St:o=16,r=null;break e}throw Error(C(130,e==null?e:typeof e,""))}return t=He(o,n,t,s),t.elementType=e,t.type=r,t.lanes=i,t}function on(e,t,n,r){return e=He(7,e,r,t),e.lanes=n,e}function Ei(e,t,n,r){return e=He(22,e,r,t),e.elementType=Pu,e.lanes=n,e.stateNode={isHidden:!1},e}function aa(e,t,n){return e=He(6,e,null,t),e.lanes=n,e}function oa(e,t,n){return t=He(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function yp(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zi(0),this.expirationTimes=zi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zi(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function pl(e,t,n,r,s,i,o,l,c){return e=new yp(e,t,n,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=He(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Xo(i),e}function wp(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Cn,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function kh(e){if(!e)return Bt;e=e._reactInternals;e:{if(mn(e)!==e||e.tag!==1)throw Error(C(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ie(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(C(171))}if(e.tag===1){var n=e.type;if(Ie(n))return kd(e,n,t)}return t}function Sh(e,t,n,r,s,i,o,l,c){return e=pl(n,r,!0,e,s,i,o,l,c),e.context=kh(null),n=e.current,r=Se(),s=Mt(n),i=gt(r,s),i.callback=t??null,Lt(n,i,s),e.current.lanes=s,Zr(e,s,r),Pe(e,r),e}function Ci(e,t,n,r){var s=t.current,i=Se(),o=Mt(s);return n=kh(n),t.context===null?t.context=n:t.pendingContext=n,t=gt(i,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Lt(s,t,o),e!==null&&(st(e,s,o,i),$s(e,s,o)),o}function di(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Oc(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function vl(e,t){Oc(e,t),(e=e.alternate)&&Oc(e,t)}function _p(){return null}var bh=typeof reportError=="function"?reportError:function(e){console.error(e)};function gl(e){this._internalRoot=e}Ti.prototype.render=gl.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(C(409));Ci(e,t,null,null)};Ti.prototype.unmount=gl.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;hn(function(){Ci(null,e,null,null)}),t[wt]=null}};function Ti(e){this._internalRoot=e}Ti.prototype.unstable_scheduleHydration=function(e){if(e){var t=rd();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ct.length&&t!==0&&t<Ct[n].priority;n++);Ct.splice(n,0,e),n===0&&id(e)}};function yl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Ri(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Ic(){}function xp(e,t,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=di(o);i.call(u)}}var o=Sh(t,r,e,0,null,!1,!1,"",Ic);return e._reactRootContainer=o,e[wt]=o.current,Lr(e.nodeType===8?e.parentNode:e),hn(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var u=di(c);l.call(u)}}var c=pl(e,0,!1,null,null,!1,!1,"",Ic);return e._reactRootContainer=c,e[wt]=c.current,Lr(e.nodeType===8?e.parentNode:e),hn(function(){Ci(t,c,n,r)}),c}function Oi(e,t,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var c=di(o);l.call(c)}}Ci(t,o,e,s)}else o=xp(n,t,e,s,r);return di(o)}td=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=pr(t.pendingLanes);n!==0&&(Lo(t,n|1),Pe(t,se()),!(B&6)&&(er=se()+500,Ht()))}break;case 13:hn(function(){var r=_t(e,1);if(r!==null){var s=Se();st(r,e,1,s)}}),vl(e,1)}};Uo=function(e){if(e.tag===13){var t=_t(e,134217728);if(t!==null){var n=Se();st(t,e,134217728,n)}vl(e,134217728)}};nd=function(e){if(e.tag===13){var t=Mt(e),n=_t(e,t);if(n!==null){var r=Se();st(n,e,t,r)}vl(e,t)}};rd=function(){return V};sd=function(e,t){var n=V;try{return V=e,t()}finally{V=n}};Aa=function(e,t,n){switch(t){case"input":if(Ea(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=xi(r);if(!s)throw Error(C(90));$u(r),Ea(r,s)}}}break;case"textarea":Lu(e,n);break;case"select":t=n.value,t!=null&&zn(e,!!n.multiple,t,!1)}};Wu=dl;Hu=hn;var Np={usingClientEntryPoint:!1,Events:[ts,Pn,xi,Bu,Vu,dl]},dr={findFiberByHostInstance:tn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},jp={bundleType:dr.bundleType,version:dr.version,rendererPackageName:dr.rendererPackageName,rendererConfig:dr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Nt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Ku(e),e===null?null:e.stateNode},findFiberByHostInstance:dr.findFiberByHostInstance||_p,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var js=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!js.isDisabled&&js.supportsFiber)try{gi=js.inject(jp),ct=js}catch{}}ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Np;ze.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!yl(t))throw Error(C(200));return wp(e,t,null,n)};ze.createRoot=function(e,t){if(!yl(e))throw Error(C(299));var n=!1,r="",s=bh;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=pl(e,1,!1,null,null,n,!1,r,s),e[wt]=t.current,Lr(e.nodeType===8?e.parentNode:e),new gl(t)};ze.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(C(188)):(e=Object.keys(e).join(","),Error(C(268,e)));return e=Ku(t),e=e===null?null:e.stateNode,e};ze.flushSync=function(e){return hn(e)};ze.hydrate=function(e,t,n){if(!Ri(t))throw Error(C(200));return Oi(null,e,t,!0,n)};ze.hydrateRoot=function(e,t,n){if(!yl(e))throw Error(C(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=bh;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=Sh(t,null,e,1,n??null,s,!1,i,o),e[wt]=t.current,Lr(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Ti(t)};ze.render=function(e,t,n){if(!Ri(t))throw Error(C(200));return Oi(null,e,t,!1,n)};ze.unmountComponentAtNode=function(e){if(!Ri(e))throw Error(C(40));return e._reactRootContainer?(hn(function(){Oi(null,null,e,!1,function(){e._reactRootContainer=null,e[wt]=null})}),!0):!1};ze.unstable_batchedUpdates=dl;ze.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Ri(n))throw Error(C(200));if(e==null||e._reactInternals===void 0)throw Error(C(38));return Oi(e,t,n,!1,r)};ze.version="18.3.1-next-f1338f8080-20240426";function Eh(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Eh)}catch(e){console.error(e)}}Eh(),Eu.exports=ze;var kp=Eu.exports,Pc=kp;_a.createRoot=Pc.createRoot,_a.hydrateRoot=Pc.hydrateRoot;function Ii(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n}function Sp(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(d){try{u(r.next(d))}catch(g){o(g)}}function c(d){try{u(r.throw(d))}catch(g){o(g)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})}const bp=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class wl extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class Ep extends wl{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Ac extends wl{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class $c extends wl{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var mo;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(mo||(mo={}));class Cp{constructor(t,{headers:n={},customFetch:r,region:s=mo.Any}={}){this.url=t,this.headers=n,this.region=s,this.fetch=bp(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return Sp(this,arguments,void 0,function*(n,r={}){var s;let i,o;try{const{headers:l,method:c,body:u,signal:d,timeout:g}=r;let p={},{region:_}=r;_||(_=this.region);const x=new URL(`${this.url}/${n}`);_&&_!=="any"&&(p["x-region"]=_,x.searchParams.set("forceFunctionRegion",_));let w;u&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(p["Content-Type"]="application/octet-stream",w=u):typeof u=="string"?(p["Content-Type"]="text/plain",w=u):typeof FormData<"u"&&u instanceof FormData?w=u:(p["Content-Type"]="application/json",w=JSON.stringify(u)):w=u;let y=d;g&&(o=new AbortController,i=setTimeout(()=>o.abort(),g),d?(y=o.signal,d.addEventListener("abort",()=>o.abort())):y=o.signal);const m=yield this.fetch(x.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},p),this.headers),l),body:w,signal:y}).catch(N=>{throw new Ep(N)}),h=m.headers.get("x-relay-error");if(h&&h==="true")throw new Ac(m);if(!m.ok)throw new $c(m);let v=((s=m.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),f;return v==="application/json"?f=yield m.json():v==="application/octet-stream"||v==="application/pdf"?f=yield m.blob():v==="text/event-stream"?f=m:v==="multipart/form-data"?f=yield m.formData():f=yield m.text(),{data:f,error:null,response:m}}catch(l){return{data:null,error:l,response:l instanceof $c||l instanceof Ac?l.context:void 0}}finally{i&&clearTimeout(i)}})}}var Tp=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},Rp=class{constructor(e){var t,n;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(n=e.isMaybeSingle)!==null&&n!==void 0?n:!1,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{let o=null,l=null,c=null,u=i.status,d=i.statusText;if(i.ok){var g,p;if(n.method!=="HEAD"){var _;const m=await i.text();m===""||(n.headers.get("Accept")==="text/csv"||n.headers.get("Accept")&&(!((_=n.headers.get("Accept"))===null||_===void 0)&&_.includes("application/vnd.pgrst.plan+text"))?l=m:l=JSON.parse(m))}const w=(g=n.headers.get("Prefer"))===null||g===void 0?void 0:g.match(/count=(exact|planned|estimated)/),y=(p=i.headers.get("content-range"))===null||p===void 0?void 0:p.split("/");w&&y&&y.length>1&&(c=parseInt(y[1])),n.isMaybeSingle&&n.method==="GET"&&Array.isArray(l)&&(l.length>1?(o={code:"PGRST116",details:`Results contain ${l.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},l=null,c=null,u=406,d="Not Acceptable"):l.length===1?l=l[0]:l=null)}else{var x;const w=await i.text();try{o=JSON.parse(w),Array.isArray(o)&&i.status===404&&(l=[],o=null,u=200,d="OK")}catch{i.status===404&&w===""?(u=204,d="No Content"):o={message:w}}if(o&&n.isMaybeSingle&&(!(o==null||(x=o.details)===null||x===void 0)&&x.includes("0 rows"))&&(o=null,u=200,d="OK"),o&&n.shouldThrowOnError)throw new Tp(o)}return{error:o,data:l,count:c,status:u,statusText:d}});return this.shouldThrowOnError||(s=s.catch(i=>{var o;let l="";const c=i==null?void 0:i.cause;if(c){var u,d,g,p;const x=(u=c==null?void 0:c.message)!==null&&u!==void 0?u:"",w=(d=c==null?void 0:c.code)!==null&&d!==void 0?d:"";l=`${(g=i==null?void 0:i.name)!==null&&g!==void 0?g:"FetchError"}: ${i==null?void 0:i.message}`,l+=`

Caused by: ${(p=c==null?void 0:c.name)!==null&&p!==void 0?p:"Error"}: ${x}`,w&&(l+=` (${w})`),c!=null&&c.stack&&(l+=`
${c.stack}`)}else{var _;l=(_=i==null?void 0:i.stack)!==null&&_!==void 0?_:""}return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:l,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),s.then(e,t)}returns(){return this}overrideTypes(){return this}},Op=class extends Rp{select(e){let t=!1;const n=(e??"*").split("").map(r=>/\s/.test(r)&&!t?"":(r==='"'&&(t=!t),r)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:n,foreignTable:r,referencedTable:s=r}={}){const i=s?`${s}.order`:"order",o=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${o?`${o},`:""}${e}.${t?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:n=t}={}){const r=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"offset":`${r}.offset`,i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(i,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:r=!1,wal:s=!1,format:i="text"}={}){var o;const l=[e?"analyze":null,t?"verbose":null,n?"settings":null,r?"buffers":null,s?"wal":null].filter(Boolean).join("|"),c=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${i}; for="${c}"; options=${l};`),i==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};const Dc=new RegExp("[,()]");var Sn=class extends Op{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){const n=Array.from(new Set(t)).map(r=>typeof r=="string"&&Dc.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}notIn(e,t){const n=Array.from(new Set(t)).map(r=>typeof r=="string"&&Dc.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`not.in.(${n})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:n,type:r}={}){let s="";r==="plain"?s="pl":r==="phrase"?s="ph":r==="websearch"&&(s="w");const i=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${s}fts${i}.${t}`),this}match(e){return Object.entries(e).forEach(([t,n])=>{this.url.searchParams.append(t,`eq.${n}`)}),this}not(e,t,n){return this.url.searchParams.append(e,`not.${t}.${n}`),this}or(e,{foreignTable:t,referencedTable:n=t}={}){const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,t,n){return this.url.searchParams.append(e,`${t}.${n}`),this}},Ip=class{constructor(e,{headers:t={},schema:n,fetch:r}){this.url=e,this.headers=new Headers(t),this.schema=n,this.fetch=r}select(e,t){const{head:n=!1,count:r}=t??{},s=n?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),r&&this.headers.append("Prefer",`count=${r}`),new Sn({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:n=!0}={}){var r;const s="POST";if(t&&this.headers.append("Prefer",`count=${t}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const i=e.reduce((o,l)=>o.concat(Object.keys(l)),[]);if(i.length>0){const o=[...new Set(i)].map(l=>`"${l}"`);this.url.searchParams.set("columns",o.join(","))}}return new Sn({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:n=!1,count:r,defaultToNull:s=!0}={}){var i;const o="POST";if(this.headers.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),t!==void 0&&this.url.searchParams.set("on_conflict",t),r&&this.headers.append("Prefer",`count=${r}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const l=e.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(l.length>0){const c=[...new Set(l)].map(u=>`"${u}"`);this.url.searchParams.set("columns",c.join(","))}}return new Sn({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}update(e,{count:t}={}){var n;const r="PATCH";return t&&this.headers.append("Prefer",`count=${t}`),new Sn({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:e}={}){var t;const n="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new Sn({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}},Pp=class Ch{constructor(t,{headers:n={},schema:r,fetch:s}={}){this.url=t,this.headers=new Headers(n),this.schemaName=r,this.fetch=s}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new Ip(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new Ch(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,n={},{head:r=!1,get:s=!1,count:i}={}){var o;let l;const c=new URL(`${this.url}/rpc/${t}`);let u;r||s?(l=r?"HEAD":"GET",Object.entries(n).filter(([g,p])=>p!==void 0).map(([g,p])=>[g,Array.isArray(p)?`{${p.join(",")}}`:`${p}`]).forEach(([g,p])=>{c.searchParams.append(g,p)})):(l="POST",u=n);const d=new Headers(this.headers);return i&&d.set("Prefer",`count=${i}`),new Sn({method:l,url:c,headers:d,schema:this.schemaName,body:u,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};class Ap{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,s=parseInt(r.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const r=this.getWebSocketConstructor();return new r(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const $p="2.89.0",Dp=`realtime-js/${$p}`,Th="1.0.0",Lp="2.0.0",Lc=Th,po=1e4,Up=1e3,Mp=100;var Et;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Et||(Et={}));var le;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(le||(le={}));var tt;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(tt||(tt={}));var vo;(function(e){e.websocket="websocket"})(vo||(vo={}));var Zt;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Zt||(Zt={}));class Fp{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,n){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(t));let r=[t.join_ref,t.ref,t.topic,t.event,t.payload];return n(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(t){var n;return this._isArrayBuffer((n=t.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var n,r;const s=(r=(n=t.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,s)}_encodeJsonUserBroadcastPush(t){var n,r;const s=(r=(n=t.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:{},o=new TextEncoder().encode(JSON.stringify(s)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(t,n,r){var s,i;const o=t.topic,l=(s=t.ref)!==null&&s!==void 0?s:"",c=(i=t.join_ref)!==null&&i!==void 0?i:"",u=t.payload.event,d=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},g=Object.keys(d).length===0?"":JSON.stringify(d);if(c.length>255)throw new Error(`joinRef length ${c.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`ref length ${l.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`userEvent length ${u.length} exceeds maximum of 255`);if(g.length>255)throw new Error(`metadata length ${g.length} exceeds maximum of 255`);const p=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+l.length+o.length+u.length+g.length,_=new ArrayBuffer(this.HEADER_LENGTH+p);let x=new DataView(_),w=0;x.setUint8(w++,this.KINDS.userBroadcastPush),x.setUint8(w++,c.length),x.setUint8(w++,l.length),x.setUint8(w++,o.length),x.setUint8(w++,u.length),x.setUint8(w++,g.length),x.setUint8(w++,n),Array.from(c,m=>x.setUint8(w++,m.charCodeAt(0))),Array.from(l,m=>x.setUint8(w++,m.charCodeAt(0))),Array.from(o,m=>x.setUint8(w++,m.charCodeAt(0))),Array.from(u,m=>x.setUint8(w++,m.charCodeAt(0))),Array.from(g,m=>x.setUint8(w++,m.charCodeAt(0)));var y=new Uint8Array(_.byteLength+r.byteLength);return y.set(new Uint8Array(_),0),y.set(new Uint8Array(r),_.byteLength),y.buffer}decode(t,n){if(this._isArrayBuffer(t)){let r=this._binaryDecode(t);return n(r)}if(typeof t=="string"){const r=JSON.parse(t),[s,i,o,l,c]=r;return n({join_ref:s,ref:i,topic:o,event:l,payload:c})}return n({})}_binaryDecode(t){const n=new DataView(t),r=n.getUint8(0),s=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,n,s)}}_decodeUserBroadcast(t,n,r){const s=n.getUint8(1),i=n.getUint8(2),o=n.getUint8(3),l=n.getUint8(4);let c=this.HEADER_LENGTH+4;const u=r.decode(t.slice(c,c+s));c=c+s;const d=r.decode(t.slice(c,c+i));c=c+i;const g=r.decode(t.slice(c,c+o));c=c+o;const p=t.slice(c,t.byteLength),_=l===this.JSON_ENCODING?JSON.parse(r.decode(p)):p,x={type:this.BROADCAST_EVENT,event:d,payload:_};return o>0&&(x.meta=JSON.parse(g)),{join_ref:null,ref:null,topic:u,event:this.BROADCAST_EVENT,payload:x}}_isArrayBuffer(t){var n;return t instanceof ArrayBuffer||((n=t==null?void 0:t.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(t,n){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([r])=>n.includes(r)))}}class Rh{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var H;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(H||(H={}));const Uc=(e,t,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return t?Object.keys(t).reduce((i,o)=>(i[o]=zp(o,e,t,s),i),{}):{}},zp=(e,t,n,r)=>{const s=t.find(l=>l.name===e),i=s==null?void 0:s.type,o=n[e];return i&&!r.includes(i)?Oh(i,o):go(o)},Oh=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return Hp(t,n)}switch(e){case H.bool:return Bp(t);case H.float4:case H.float8:case H.int2:case H.int4:case H.int8:case H.numeric:case H.oid:return Vp(t);case H.json:case H.jsonb:return Wp(t);case H.timestamp:return Gp(t);case H.abstime:case H.date:case H.daterange:case H.int4range:case H.int8range:case H.money:case H.reltime:case H.text:case H.time:case H.timestamptz:case H.timetz:case H.tsrange:case H.tstzrange:return go(t);default:return go(t)}},go=e=>e,Bp=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},Vp=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},Wp=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e},Hp=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let i;const o=e.slice(1,n);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>Oh(t,l))}return e},Gp=e=>typeof e=="string"?e.replace(" ","T"):e,Ih=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class la{constructor(t,n,r={},s=po){this.channel=t,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Mc;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Mc||(Mc={}));class Er{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Er.syncState(this.state,s,i,o),this.pendingDiffs.forEach(c=>{this.state=Er.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Er.syncDiff(this.state,s,i,o),l())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,s){const i=this.cloneDeep(t),o=this.transformState(n),l={},c={};return this.map(i,(u,d)=>{o[u]||(c[u]=d)}),this.map(o,(u,d)=>{const g=i[u];if(g){const p=d.map(y=>y.presence_ref),_=g.map(y=>y.presence_ref),x=d.filter(y=>_.indexOf(y.presence_ref)<0),w=g.filter(y=>p.indexOf(y.presence_ref)<0);x.length>0&&(l[u]=x),w.length>0&&(c[u]=w)}else l[u]=d}),this.syncDiff(i,{joins:l,leaves:c},r,s)}static syncDiff(t,n,r,s){const{joins:i,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(l,c)=>{var u;const d=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(c),d.length>0){const g=t[l].map(_=>_.presence_ref),p=d.filter(_=>g.indexOf(_.presence_ref)<0);t[l].unshift(...p)}r(l,d,c)}),this.map(o,(l,c)=>{let u=t[l];if(!u)return;const d=c.map(g=>g.presence_ref);u=u.filter(g=>d.indexOf(g.presence_ref)<0),t[l]=u,s(l,u,c),u.length===0&&delete t[l]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const s=t[r];return"metas"in s?n[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=s,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Fc;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Fc||(Fc={}));var Cr;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Cr||(Cr={}));var ft;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(ft||(ft={}));class Fn{constructor(t,n={config:{}},r){var s,i;if(this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=le.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new la(this,tt.join,this.params,this.timeout),this.rejoinTimer=new Rh(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=le.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=le.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=le.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=le.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=le.errored,this.rejoinTimer.scheduleTimeout())}),this._on(tt.reply,{},(o,l)=>{this._trigger(this._replyEventName(l),o)}),this.presence=new Er(this),this.broadcastEndpointURL=Ih(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,n=this.timeout){var r,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==le.closed){const{config:{broadcast:o,presence:l,private:c}}=this.params,u=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(_=>_.filter))!==null&&s!==void 0?s:[],d=!!this.bindings[Cr.PRESENCE]&&this.bindings[Cr.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,g={},p={broadcast:o,presence:Object.assign(Object.assign({},l),{enabled:d}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(g.access_token=this.socket.accessTokenValue),this._onError(_=>t==null?void 0:t(ft.CHANNEL_ERROR,_)),this._onClose(()=>t==null?void 0:t(ft.CLOSED)),this.updateJoinPayload(Object.assign({config:p},g)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:_})=>{var x;if(this.socket._isManualToken()||this.socket.setAuth(),_===void 0){t==null||t(ft.SUBSCRIBED);return}else{const w=this.bindings.postgres_changes,y=(x=w==null?void 0:w.length)!==null&&x!==void 0?x:0,m=[];for(let h=0;h<y;h++){const v=w[h],{filter:{event:f,schema:N,table:j,filter:S}}=v,b=_&&_[h];if(b&&b.event===f&&Fn.isFilterValueEqual(b.schema,N)&&Fn.isFilterValueEqual(b.table,j)&&Fn.isFilterValueEqual(b.filter,S))m.push(Object.assign(Object.assign({},v),{id:b.id}));else{this.unsubscribe(),this.state=le.errored,t==null||t(ft.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=m,t&&t(ft.SUBSCRIBED);return}}).receive("error",_=>{this.state=le.errored,t==null||t(ft.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(_).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(ft.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this.state===le.joined&&t===Cr.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,n,r)}async httpSend(t,n,r={}){var s;if(n==null)return Promise.reject("Payload is required for httpSend()");const i={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(i.Authorization=`Bearer ${this.socket.accessTokenValue}`);const o={method:"POST",headers:i,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:n,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);if(l.status===202)return{success:!0};let c=l.statusText;try{const u=await l.json();c=u.error||u.message||c}catch{}return Promise.reject(new Error(c))}async send(t,n={}){var r,s;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:o}=t,l={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(l.Authorization=`Bearer ${this.socket.accessTokenValue}`);const c={method:"POST",headers:l,body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,c;const u=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=le.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(tt.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new la(this,tt.leave,{},t),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=le.closed,this.bindings={}}async _fetchWithTimeout(t,n,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),o=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(i),o}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new la(this,t,n,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>Mp){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var s,i;const o=t.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=tt;if(r&&[l,c,u,d].indexOf(o)>=0&&r!==this._joinRef())return;let p=this._onMessage(o,n,r);if(n&&!p)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(_=>{var x,w,y;return((x=_.filter)===null||x===void 0?void 0:x.event)==="*"||((y=(w=_.filter)===null||w===void 0?void 0:w.event)===null||y===void 0?void 0:y.toLocaleLowerCase())===o}).map(_=>_.callback(p,r)):(i=this.bindings[o])===null||i===void 0||i.filter(_=>{var x,w,y,m,h,v;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in _){const f=_.id,N=(x=_.filter)===null||x===void 0?void 0:x.event;return f&&((w=n.ids)===null||w===void 0?void 0:w.includes(f))&&(N==="*"||(N==null?void 0:N.toLocaleLowerCase())===((y=n.data)===null||y===void 0?void 0:y.type.toLocaleLowerCase()))}else{const f=(h=(m=_==null?void 0:_.filter)===null||m===void 0?void 0:m.event)===null||h===void 0?void 0:h.toLocaleLowerCase();return f==="*"||f===((v=n==null?void 0:n.event)===null||v===void 0?void 0:v.toLocaleLowerCase())}else return _.type.toLocaleLowerCase()===o}).map(_=>{if(typeof p=="object"&&"ids"in p){const x=p.data,{schema:w,table:y,commit_timestamp:m,type:h,errors:v}=x;p=Object.assign(Object.assign({},{schema:w,table:y,commit_timestamp:m,eventType:h,new:{},old:{},errors:v}),this._getPayloadRecords(x))}_.callback(p,r)})}_isClosed(){return this.state===le.closed}_isJoined(){return this.state===le.joined}_isJoining(){return this.state===le.joining}_isLeaving(){return this.state===le.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const s=t.toLocaleLowerCase(),i={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&Fn.isEqual(s.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}static isFilterValueEqual(t,n){return(t??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(tt.close,{},t)}_onError(t){this._on(tt.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=le.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=Uc(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=Uc(t.columns,t.old_record)),n}}const ca=()=>{},ks={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},qp=[1e3,2e3,5e3,1e4],Kp=1e4,Jp=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Qp{constructor(t,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=po,this.transport=null,this.heartbeatIntervalMs=ks.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=ca,this.ref=0,this.reconnectTimer=null,this.vsn=Lc,this.logger=ca,this.conn=null,this.sendBuffer=[],this.serializer=new Fp,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>s?(...i)=>s(...i):(...i)=>fetch(...i),!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${vo.websocket}`,this.httpEndpoint=Ih(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Ap.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Et.connecting:return Zt.Connecting;case Et.open:return Zt.Open;case Et.closing:return Zt.Closing;default:return Zt.Closed}}isConnected(){return this.connectionState()===Zt.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const r=`realtime:${t}`,s=this.getChannels().find(i=>i.topic===r);if(s)return s;{const i=new Fn(`realtime:${t}`,n,this);return this.channels.push(i),i}}push(t){const{topic:n,event:r,payload:s,ref:i}=t,o=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${n} ${r} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(Up,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},ks.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:s,payload:i,ref:o}=n,l=o?`(${o})`:"",c=i.status||"";this.log("receive",`${c} ${r} ${s} ${l}`.trim(),i),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(s,i,o)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===Et.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Et.open||this.conn.readyState===Et.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(tt.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${t}${r}${s}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([Jp],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n,r=!1;if(t)n=t,r=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(s){this.log("error","Error fetching access token from callback",s),n=this.accessTokenValue}else n=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(s=>{const i={access_token:n,version:Dp};n&&s.updateJoinPayload(i),s.joinedOnce&&s._isJoined()&&s._push(tt.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(n)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new Rh(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},ks.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,r,s,i,o,l,c,u,d,g,p,_;switch(this.transport=(n=t==null?void 0:t.transport)!==null&&n!==void 0?n:null,this.timeout=(r=t==null?void 0:t.timeout)!==null&&r!==void 0?r:po,this.heartbeatIntervalMs=(s=t==null?void 0:t.heartbeatIntervalMs)!==null&&s!==void 0?s:ks.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(l=t==null?void 0:t.heartbeatCallback)!==null&&l!==void 0?l:ca,this.vsn=(c=t==null?void 0:t.vsn)!==null&&c!==void 0?c:Lc,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=t==null?void 0:t.reconnectAfterMs)!==null&&u!==void 0?u:x=>qp[x-1]||Kp,this.vsn){case Th:this.encode=(d=t==null?void 0:t.encode)!==null&&d!==void 0?d:(x,w)=>w(JSON.stringify(x)),this.decode=(g=t==null?void 0:t.decode)!==null&&g!==void 0?g:(x,w)=>w(JSON.parse(x));break;case Lp:this.encode=(p=t==null?void 0:t.encode)!==null&&p!==void 0?p:this.serializer.encode.bind(this.serializer),this.decode=(_=t==null?void 0:t.decode)!==null&&_!==void 0?_:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}var Gr=class extends Error{constructor(e,t){var n;super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&((n=t.icebergType)==null?void 0:n.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function Yp(e,t,n){const r=new URL(t,e);if(n)for(const[s,i]of Object.entries(n))i!==void 0&&r.searchParams.set(s,i);return r.toString()}async function Xp(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function Zp(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:n,path:r,query:s,body:i,headers:o}){const l=Yp(e.baseUrl,r,s),c=await Xp(e.auth),u=await t(l,{method:n,headers:{...i?{"Content-Type":"application/json"}:{},...c,...o},body:i?JSON.stringify(i):void 0}),d=await u.text(),g=(u.headers.get("content-type")||"").includes("application/json"),p=g&&d?JSON.parse(d):d;if(!u.ok){const _=g?p:void 0,x=_==null?void 0:_.error;throw new Gr((x==null?void 0:x.message)??`Request failed with status ${u.status}`,{status:u.status,icebergType:x==null?void 0:x.type,icebergCode:x==null?void 0:x.code,details:_})}return{status:u.status,headers:u.headers,data:p}}}}function Ss(e){return e.join("")}var ev=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:Ss(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(e,t){const n={namespace:e.namespace,properties:t==null?void 0:t.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Ss(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ss(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Ss(e.namespace)}`}),!0}catch(t){if(t instanceof Gr&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(n){if(n instanceof Gr&&n.status===409)return;throw n}}};function vn(e){return e.join("")}var tv=class{constructor(e,t="",n){this.client=e,this.prefix=t,this.accessDelegation=n}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${vn(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${vn(e.namespace)}/tables`,body:t,headers:n})).data.metadata}async updateTable(e,t){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${vn(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${vn(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String((t==null?void 0:t.purge)??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${vn(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${vn(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(n){if(n instanceof Gr&&n.status===404)return!1;throw n}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(n){if(n instanceof Gr&&n.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw n}}},nv=class{constructor(e){var r;let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const n=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=Zp({baseUrl:n,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=(r=e.accessDelegation)==null?void 0:r.join(","),this.namespaceOps=new ev(this.client,t),this.tableOps=new tv(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}},Pi=class extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}};function Y(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}var rv=class extends Pi{constructor(e,t,n){super(e),this.name="StorageApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},yo=class extends Pi{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}};const _l=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),sv=()=>Response,wo=e=>{if(Array.isArray(e))return e.map(n=>wo(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=wo(r)}),t},iv=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},av=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e);function qr(e){"@babel/helpers - typeof";return qr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qr(e)}function ov(e,t){if(qr(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(qr(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function lv(e){var t=ov(e,"string");return qr(t)=="symbol"?t:t+""}function cv(e,t,n){return(t=lv(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?zc(Object(n),!0).forEach(function(r){cv(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zc(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}const ua=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},uv=async(e,t,n)=>{e instanceof await sv()&&!(n!=null&&n.noResolveJson)?e.json().then(r=>{const s=e.status||500,i=(r==null?void 0:r.statusCode)||s+"";t(new rv(ua(r),s,i))}).catch(r=>{t(new yo(ua(r),r))}):t(new yo(ua(e),e))},dv=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!r?s:(iv(r)?(s.headers=A({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(r)):s.body=r,t!=null&&t.duplex&&(s.duplex=t.duplex),A(A({},s),n))};async function rs(e,t,n,r,s,i){return new Promise((o,l)=>{e(n,dv(t,r,s,i)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>uv(c,l,r))})}async function Kr(e,t,n,r){return rs(e,"GET",t,n,r)}async function Ze(e,t,n,r,s){return rs(e,"POST",t,r,s,n)}async function _o(e,t,n,r,s){return rs(e,"PUT",t,r,s,n)}async function hv(e,t,n,r){return rs(e,"HEAD",t,A(A({},n),{},{noResolveJson:!0}),r)}async function xl(e,t,n,r,s){return rs(e,"DELETE",t,r,s,n)}var fv=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}async execute(){var e=this;try{return{data:(await e.downloadFn()).body,error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Y(t))return{data:null,error:t};throw t}}};let Ph;Ph=Symbol.toStringTag;var mv=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[Ph]="BlobDownloadBuilder",this.promise=null}asStream(){return new fv(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var e=this;try{return{data:await(await e.downloadFn()).blob(),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Y(t))return{data:null,error:t};throw t}}};const pv={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Bc={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var vv=class{constructor(e,t={},n,r){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=n,this.fetch=_l(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(e,t,n,r){var s=this;try{let i;const o=A(A({},Bc),r);let l=A(A({},s.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",s.encodeMetadata(c)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.has("cacheControl")||i.append("cacheControl",o.cacheControl),c&&!i.has("metadata")&&i.append("metadata",s.encodeMetadata(c))):(i=n,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=s.toBase64(s.encodeMetadata(c))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!o.duplex&&(o.duplex="half")),r!=null&&r.headers&&(l=A(A({},l),r.headers));const u=s._removeEmptyFolders(t),d=s._getFinalPath(u),g=await(e=="PUT"?_o:Ze)(s.fetch,`${s.url}/object/${d}`,i,A({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:g.Id,fullPath:g.Key},error:null}}catch(i){if(s.shouldThrowOnError)throw i;if(Y(i))return{data:null,error:i};throw i}}async upload(e,t,n){return this.uploadOrUpdate("POST",e,t,n)}async uploadToSignedUrl(e,t,n,r){var s=this;const i=s._removeEmptyFolders(e),o=s._getFinalPath(i),l=new URL(s.url+`/object/upload/sign/${o}`);l.searchParams.set("token",t);try{let c;const u=A({upsert:Bc.upsert},r),d=A(A({},s.headers),{"x-upsert":String(u.upsert)});return typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",u.cacheControl)):(c=n,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType),{data:{path:i,fullPath:(await _o(s.fetch,l.toString(),c,{headers:d})).Key},error:null}}catch(c){if(s.shouldThrowOnError)throw c;if(Y(c))return{data:null,error:c};throw c}}async createSignedUploadUrl(e,t){var n=this;try{let r=n._getFinalPath(e);const s=A({},n.headers);t!=null&&t.upsert&&(s["x-upsert"]="true");const i=await Ze(n.fetch,`${n.url}/object/upload/sign/${r}`,{},{headers:s}),o=new URL(n.url+i.url),l=o.searchParams.get("token");if(!l)throw new Pi("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:l},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Y(r))return{data:null,error:r};throw r}}async update(e,t,n){return this.uploadOrUpdate("PUT",e,t,n)}async move(e,t,n){var r=this;try{return{data:await Ze(r.fetch,`${r.url}/object/move`,{bucketId:r.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(Y(s))return{data:null,error:s};throw s}}async copy(e,t,n){var r=this;try{return{data:{path:(await Ze(r.fetch,`${r.url}/object/copy`,{bucketId:r.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers})).Key},error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(Y(s))return{data:null,error:s};throw s}}async createSignedUrl(e,t,n){var r=this;try{let s=r._getFinalPath(e),i=await Ze(r.fetch,`${r.url}/object/sign/${s}`,A({expiresIn:t},n!=null&&n.transform?{transform:n.transform}:{}),{headers:r.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${r.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(Y(s))return{data:null,error:s};throw s}}async createSignedUrls(e,t,n){var r=this;try{const s=await Ze(r.fetch,`${r.url}/object/sign/${r.bucketId}`,{expiresIn:t,paths:e},{headers:r.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(o=>A(A({},o),{},{signedUrl:o.signedURL?encodeURI(`${r.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(Y(s))return{data:null,error:s};throw s}}download(e,t){const n=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",r=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),s=r?`?${r}`:"",i=this._getFinalPath(e),o=()=>Kr(this.fetch,`${this.url}/${n}/${i}${s}`,{headers:this.headers,noResolveJson:!0});return new mv(o,this.shouldThrowOnError)}async info(e){var t=this;const n=t._getFinalPath(e);try{return{data:wo(await Kr(t.fetch,`${t.url}/object/info/${n}`,{headers:t.headers})),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Y(r))return{data:null,error:r};throw r}}async exists(e){var t=this;const n=t._getFinalPath(e);try{return await hv(t.fetch,`${t.url}/object/${n}`,{headers:t.headers}),{data:!0,error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Y(r)&&r instanceof yo){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}}getPublicUrl(e,t){const n=this._getFinalPath(e),r=[],s=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";s!==""&&r.push(s);const i=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",o=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});o!==""&&r.push(o);let l=r.join("&");return l!==""&&(l=`?${l}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${n}${l}`)}}}async remove(e){var t=this;try{return{data:await xl(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:e},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Y(n))return{data:null,error:n};throw n}}async list(e,t,n){var r=this;try{const s=A(A(A({},pv),t),{},{prefix:e||""});return{data:await Ze(r.fetch,`${r.url}/object/list/${r.bucketId}`,s,{headers:r.headers},n),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(Y(s))return{data:null,error:s};throw s}}async listV2(e,t){var n=this;try{const r=A({},e);return{data:await Ze(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,r,{headers:n.headers},t),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Y(r))return{data:null,error:r};throw r}}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};const Ah="2.89.0",$h={"X-Client-Info":`storage-js/${Ah}`};var gv=class{constructor(e,t={},n,r){this.shouldThrowOnError=!1;const s=new URL(e);r!=null&&r.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href.replace(/\/$/,""),this.headers=A(A({},$h),t),this.fetch=_l(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(e){var t=this;try{const n=t.listBucketOptionsToQueryString(e);return{data:await Kr(t.fetch,`${t.url}/bucket${n}`,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Y(n))return{data:null,error:n};throw n}}async getBucket(e){var t=this;try{return{data:await Kr(t.fetch,`${t.url}/bucket/${e}`,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Y(n))return{data:null,error:n};throw n}}async createBucket(e,t={public:!1}){var n=this;try{return{data:await Ze(n.fetch,`${n.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Y(r))return{data:null,error:r};throw r}}async updateBucket(e,t){var n=this;try{return{data:await _o(n.fetch,`${n.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Y(r))return{data:null,error:r};throw r}}async emptyBucket(e){var t=this;try{return{data:await Ze(t.fetch,`${t.url}/bucket/${e}/empty`,{},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Y(n))return{data:null,error:n};throw n}}async deleteBucket(e){var t=this;try{return{data:await xl(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Y(n))return{data:null,error:n};throw n}}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},yv=class{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=A(A({},$h),t),this.fetch=_l(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var t=this;try{return{data:await Ze(t.fetch,`${t.url}/bucket`,{name:e},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Y(n))return{data:null,error:n};throw n}}async listBuckets(e){var t=this;try{const n=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&n.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&n.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&n.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&n.set("sortOrder",e.sortOrder),e!=null&&e.search&&n.set("search",e.search);const r=n.toString(),s=r?`${t.url}/bucket?${r}`:`${t.url}/bucket`;return{data:await Kr(t.fetch,s,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Y(n))return{data:null,error:n};throw n}}async deleteBucket(e){var t=this;try{return{data:await xl(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Y(n))return{data:null,error:n};throw n}}from(e){var t=this;if(!av(e))throw new Pi("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new nv({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(n,{get(s,i){const o=s[i];return typeof o!="function"?o:async(...l)=>{try{return{data:await o.apply(s,l),error:null}}catch(c){if(r)throw c;return{data:null,error:c}}}}})}};const Nl={"X-Client-Info":`storage-js/${Ah}`,"Content-Type":"application/json"};var Dh=class extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function De(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}var da=class extends Dh{constructor(e,t,n){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},wv=class extends Dh{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}};const jl=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),_v=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Vc=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),xv=async(e,t,n)=>{if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(n!=null&&n.noResolveJson)){const r=e.status||500,s=e;if(typeof s.json=="function")s.json().then(i=>{const o=(i==null?void 0:i.statusCode)||(i==null?void 0:i.code)||r+"";t(new da(Vc(i),r,o))}).catch(()=>{const i=r+"";t(new da(s.statusText||`HTTP ${r} error`,r,i))});else{const i=r+"";t(new da(s.statusText||`HTTP ${r} error`,r,i))}}else t(new wv(Vc(e),e))},Nv=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!r?s:(_v(r)?(s.headers=A({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(r)):s.body=r,A(A({},s),n))};async function jv(e,t,n,r,s,i){return new Promise((o,l)=>{e(n,Nv(t,r,s,i)).then(c=>{if(!c.ok)throw c;if(r!=null&&r.noResolveJson)return c;const u=c.headers.get("content-type");return!u||!u.includes("application/json")?{}:c.json()}).then(c=>o(c)).catch(c=>xv(c,l,r))})}async function Le(e,t,n,r,s){return jv(e,"POST",t,r,s,n)}var kv=class{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=A(A({},Nl),t),this.fetch=jl(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(e){var t=this;try{return{data:await Le(t.fetch,`${t.url}/CreateIndex`,e,{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(De(n))return{data:null,error:n};throw n}}async getIndex(e,t){var n=this;try{return{data:await Le(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(De(r))return{data:null,error:r};throw r}}async listIndexes(e){var t=this;try{return{data:await Le(t.fetch,`${t.url}/ListIndexes`,e,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(De(n))return{data:null,error:n};throw n}}async deleteIndex(e,t){var n=this;try{return{data:await Le(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:n.headers})||{},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(De(r))return{data:null,error:r};throw r}}},Sv=class{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=A(A({},Nl),t),this.fetch=jl(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(e){var t=this;try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await Le(t.fetch,`${t.url}/PutVectors`,e,{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(De(n))return{data:null,error:n};throw n}}async getVectors(e){var t=this;try{return{data:await Le(t.fetch,`${t.url}/GetVectors`,e,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(De(n))return{data:null,error:n};throw n}}async listVectors(e){var t=this;try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:await Le(t.fetch,`${t.url}/ListVectors`,e,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(De(n))return{data:null,error:n};throw n}}async queryVectors(e){var t=this;try{return{data:await Le(t.fetch,`${t.url}/QueryVectors`,e,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(De(n))return{data:null,error:n};throw n}}async deleteVectors(e){var t=this;try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await Le(t.fetch,`${t.url}/DeleteVectors`,e,{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(De(n))return{data:null,error:n};throw n}}},bv=class{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=A(A({},Nl),t),this.fetch=jl(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var t=this;try{return{data:await Le(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(De(n))return{data:null,error:n};throw n}}async getBucket(e){var t=this;try{return{data:await Le(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:e},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(De(n))return{data:null,error:n};throw n}}async listBuckets(e={}){var t=this;try{return{data:await Le(t.fetch,`${t.url}/ListVectorBuckets`,e,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(De(n))return{data:null,error:n};throw n}}async deleteBucket(e){var t=this;try{return{data:await Le(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(De(n))return{data:null,error:n};throw n}}},Ev=class extends bv{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new Cv(this.url,this.headers,e,this.fetch)}async createBucket(e){var t=()=>super.createBucket,n=this;return t().call(n,e)}async getBucket(e){var t=()=>super.getBucket,n=this;return t().call(n,e)}async listBuckets(e={}){var t=()=>super.listBuckets,n=this;return t().call(n,e)}async deleteBucket(e){var t=()=>super.deleteBucket,n=this;return t().call(n,e)}},Cv=class extends kv{constructor(e,t,n,r){super(e,t,r),this.vectorBucketName=n}async createIndex(e){var t=()=>super.createIndex,n=this;return t().call(n,A(A({},e),{},{vectorBucketName:n.vectorBucketName}))}async listIndexes(e={}){var t=()=>super.listIndexes,n=this;return t().call(n,A(A({},e),{},{vectorBucketName:n.vectorBucketName}))}async getIndex(e){var t=()=>super.getIndex,n=this;return t().call(n,n.vectorBucketName,e)}async deleteIndex(e){var t=()=>super.deleteIndex,n=this;return t().call(n,n.vectorBucketName,e)}index(e){return new Tv(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},Tv=class extends Sv{constructor(e,t,n,r,s){super(e,t,s),this.vectorBucketName=n,this.indexName=r}async putVectors(e){var t=()=>super.putVectors,n=this;return t().call(n,A(A({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async getVectors(e){var t=()=>super.getVectors,n=this;return t().call(n,A(A({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async listVectors(e={}){var t=()=>super.listVectors,n=this;return t().call(n,A(A({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async queryVectors(e){var t=()=>super.queryVectors,n=this;return t().call(n,A(A({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async deleteVectors(e){var t=()=>super.deleteVectors,n=this;return t().call(n,A(A({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}},Rv=class extends gv{constructor(e,t={},n,r){super(e,t,n,r)}from(e){return new vv(this.url,this.headers,e,this.fetch)}get vectors(){return new Ev(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new yv(this.url+"/iceberg",this.headers,this.fetch)}};const Lh="2.89.0",bn=30*1e3,xo=3,ha=xo*bn,Ov="http://localhost:9999",Iv="supabase.auth.token",Pv={"X-Client-Info":`gotrue-js/${Lh}`},No="X-Supabase-Api-Version",Uh={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Av=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,$v=10*60*1e3;class Jr extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function I(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class Dv extends Jr{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function Lv(e){return I(e)&&e.name==="AuthApiError"}class en extends Jr{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class jt extends Jr{constructor(t,n,r,s){super(t,r,s),this.name=n,this.status=r}}class Ae extends jt{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Uv(e){return I(e)&&e.name==="AuthSessionMissingError"}class gn extends jt{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class bs extends jt{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Es extends jt{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Mv(e){return I(e)&&e.name==="AuthImplicitGrantRedirectError"}class Wc extends jt{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Fv extends jt{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class jo extends jt{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function fa(e){return I(e)&&e.name==="AuthRetryableFetchError"}class Hc extends jt{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class ko extends jt{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const hi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Gc=` 	
\r=`.split(""),zv=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Gc.length;t+=1)e[Gc[t].charCodeAt(0)]=-2;for(let t=0;t<hi.length;t+=1)e[hi[t].charCodeAt(0)]=t;return e})();function qc(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(hi[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(hi[r]),t.queuedBits-=6}}function Mh(e,t,n){const r=zv[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Kc(e){const t=[],n=o=>{t.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{Wv(o,r,n)};for(let o=0;o<e.length;o+=1)Mh(e.charCodeAt(o),s,i);return t.join("")}function Bv(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function Vv(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}Bv(r,t)}}function Wv(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if(!(e>>7-r&1)){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function qn(e){const t=[],n={queue:0,queuedBits:0},r=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)Mh(e.charCodeAt(s),n,r);return new Uint8Array(t)}function Hv(e){const t=[];return Vv(e,n=>t.push(n)),new Uint8Array(t)}function sn(e){const t=[],n={queue:0,queuedBits:0},r=s=>{t.push(s)};return e.forEach(s=>qc(s,n,r)),qc(null,n,r),t.join("")}function Gv(e){return Math.round(Date.now()/1e3)+e}function qv(){return Symbol("auth-callback")}const ve=()=>typeof window<"u"&&typeof document<"u",Kt={tested:!1,writable:!1},Fh=()=>{if(!ve())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Kt.tested)return Kt.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Kt.tested=!0,Kt.writable=!0}catch{Kt.tested=!0,Kt.writable=!1}return Kt.writable};function Kv(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return n.searchParams.forEach((r,s)=>{t[s]=r}),t}const zh=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),Jv=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",En=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},Jt=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},me=async(e,t)=>{await e.removeItem(t)};class Ai{constructor(){this.promise=new Ai.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}Ai.promiseConstructor=Promise;function ma(e){const t=e.split(".");if(t.length!==3)throw new ko("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!Av.test(t[r]))throw new ko("JWT not in base64url format");return{header:JSON.parse(Kc(t[0])),payload:JSON.parse(Kc(t[1])),signature:qn(t[2]),raw:{header:t[0],payload:t[1]}}}async function Qv(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function Yv(e,t){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){r(o);return}}catch(o){if(!t(i,o)){s(o);return}}})()})}function Xv(e){return("0"+e.toString(16)).substr(-2)}function Zv(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let i=0;i<56;i++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(t),Array.from(t,Xv).join("")}async function eg(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function tg(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await eg(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function yn(e,t,n=!1){const r=Zv();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await En(e,`${t}-code-verifier`,s);const i=await tg(r);return[i,r===i?"plain":"s256"]}const ng=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function rg(e){const t=e.headers.get(No);if(!t||!t.match(ng))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function sg(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function ig(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const ag=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function wn(e){if(!ag.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function pa(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function og(e,t){return new Proxy(e,{get:(n,r,s)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const i=r.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,s)}return!t.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(n,r,s)}})}function Jc(e){return JSON.parse(JSON.stringify(e))}const Xt=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),lg=[502,503,504];async function Qc(e){var t;if(!Jv(e))throw new jo(Xt(e),0);if(lg.includes(e.status))throw new jo(Xt(e),e.status);let n;try{n=await e.json()}catch(i){throw new en(Xt(i),i)}let r;const s=rg(e);if(s&&s.getTime()>=Uh["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Hc(Xt(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new Ae}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new Hc(Xt(n),e.status,n.weak_password.reasons);throw new Dv(Xt(n),e.status||500,r)}const cg=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function P(e,t,n,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[No]||(i[No]=Uh["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await ug(e,t,n+l,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function ug(e,t,n,r,s,i){const o=cg(t,r,s,i);let l;try{l=await e(n,Object.assign({},o))}catch(c){throw console.error(c),new jo(Xt(c),0)}if(l.ok||await Qc(l),r!=null&&r.noResolveJson)return l;try{return await l.json()}catch(c){await Qc(c)}}function Ye(e){var t;let n=null;fg(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=Gv(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function Yc(e){const t=Ye(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Rt(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function dg(e){return{data:e,error:null}}function hg(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i}=e,o=Ii(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function Xc(e){return e}function fg(e){return e.access_token&&e.refresh_token&&e.expires_in}const va=["global","local","others"];class mg{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=zh(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,n=va[0]){if(va.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${va.join(", ")}`);try{return await P(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(I(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await P(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Rt})}catch(r){if(I(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=Ii(t,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await P(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:hg,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(I(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await P(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Rt})}catch(n){if(I(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,s,i,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await P(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:Xc});if(d.error)throw d.error;const g=await d.json(),p=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,_=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return _.length>0&&(_.forEach(x=>{const w=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(x.split(";")[1].split("=")[1]);u[`${y}Page`]=w}),u.total=parseInt(p)),{data:Object.assign(Object.assign({},g),u),error:null}}catch(u){if(I(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){wn(t);try{return await P(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Rt})}catch(n){if(I(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){wn(t);try{return await P(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:Rt})}catch(r){if(I(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){wn(t);try{return await P(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:Rt})}catch(r){if(I(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){wn(t.userId);try{const{data:n,error:r}=await P(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(I(n))return{data:null,error:n};throw n}}async _deleteFactor(t){wn(t.userId),wn(t.id);try{return{data:await P(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(I(n))return{data:null,error:n};throw n}}async _listOAuthClients(t){var n,r,s,i,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await P(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:Xc});if(d.error)throw d.error;const g=await d.json(),p=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,_=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return _.length>0&&(_.forEach(x=>{const w=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(x.split(";")[1].split("=")[1]);u[`${y}Page`]=w}),u.total=parseInt(p)),{data:Object.assign(Object.assign({},g),u),error:null}}catch(u){if(I(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(t){try{return await P(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(I(n))return{data:null,error:n};throw n}}async _getOAuthClient(t){try{return await P(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(I(n))return{data:null,error:n};throw n}}async _updateOAuthClient(t,n){try{return await P(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(I(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(t){try{return await P(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(I(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(t){try{return await P(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(I(n))return{data:null,error:n};throw n}}}function Zc(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const _n={debug:!!(globalThis&&Fh()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Bh extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class pg extends Bh{}async function vg(e,t,n){_n.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),_n.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){_n.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await n()}finally{_n.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw _n.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new pg(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(_n.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function gg(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Vh(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function yg(e){return parseInt(e,16)}function wg(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,r=>r.toString(16).padStart(2,"0")).join("")}function _g(e){var t;const{chainId:n,domain:r,expirationTime:s,issuedAt:i=new Date,nonce:o,notBefore:l,requestId:c,resources:u,scheme:d,uri:g,version:p}=e;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!g)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(p!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${p}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const _=Vh(e.address),x=d?`${d}://${r}`:r,w=e.statement?`${e.statement}
`:"",y=`${x} wants you to sign in with your Ethereum account:
${_}

${w}`;let m=`URI: ${g}
Version: ${p}
Chain ID: ${n}${o?`
Nonce: ${o}`:""}
Issued At: ${i.toISOString()}`;if(s&&(m+=`
Expiration Time: ${s.toISOString()}`),l&&(m+=`
Not Before: ${l.toISOString()}`),c&&(m+=`
Request ID: ${c}`),u){let h=`
Resources:`;for(const v of u){if(!v||typeof v!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${v}`);h+=`
- ${v}`}m+=h}return`${y}
${m}`}class ie extends Error{constructor({message:t,code:n,cause:r,name:s}){var i;super(t,{cause:r}),this.__isWebAuthnError=!0,this.name=(i=s??(r instanceof Error?r.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=n}}class fi extends ie{constructor(t,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:t}),this.name="WebAuthnUnknownError",this.originalError=n}}function xg({error:e,options:t}){var n,r,s;const{publicKey:i}=t;if(!i)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new ie({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((n=i.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new ie({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((r=i.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new ie({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new ie({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new ie({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new ie({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return i.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new ie({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new ie({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const o=window.location.hostname;if(Wh(o)){if(i.rp.id!==o)return new ie({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new ie({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new ie({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new ie({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new ie({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function Ng({error:e,options:t}){const{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new ie({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new ie({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const r=window.location.hostname;if(Wh(r)){if(n.rpId!==r)return new ie({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new ie({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new ie({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new ie({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class jg{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const kg=new jg;function Sg(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:n,excludeCredentials:r}=e,s=Ii(e,["challenge","user","excludeCredentials"]),i=qn(t).buffer,o=Object.assign(Object.assign({},n),{id:qn(n.id).buffer}),l=Object.assign(Object.assign({},s),{challenge:i,user:o});if(r&&r.length>0){l.excludeCredentials=new Array(r.length);for(let c=0;c<r.length;c++){const u=r[c];l.excludeCredentials[c]=Object.assign(Object.assign({},u),{id:qn(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return l}function bg(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:n}=e,r=Ii(e,["challenge","allowCredentials"]),s=qn(t).buffer,i=Object.assign(Object.assign({},r),{challenge:s});if(n&&n.length>0){i.allowCredentials=new Array(n.length);for(let o=0;o<n.length;o++){const l=n[o];i.allowCredentials[o]=Object.assign(Object.assign({},l),{id:qn(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return i}function Eg(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e;return{id:e.id,rawId:e.id,response:{attestationObject:sn(new Uint8Array(e.response.attestationObject)),clientDataJSON:sn(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function Cg(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e,r=e.getClientExtensionResults(),s=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:sn(new Uint8Array(s.authenticatorData)),clientDataJSON:sn(new Uint8Array(s.clientDataJSON)),signature:sn(new Uint8Array(s.signature)),userHandle:s.userHandle?sn(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function Wh(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function eu(){var e,t;return!!(ve()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function Tg(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new fi("Browser returned unexpected credential type",t)}:{data:null,error:new fi("Empty credential response",t)}}catch(t){return{data:null,error:xg({error:t,options:e})}}}async function Rg(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new fi("Browser returned unexpected credential type",t)}:{data:null,error:new fi("Empty credential response",t)}}catch(t){return{data:null,error:Ng({error:t,options:e})}}}const Og={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},Ig={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function mi(...e){const t=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),n=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),r={};for(const s of e)if(s)for(const i in s){const o=s[i];if(o!==void 0)if(Array.isArray(o))r[i]=o;else if(n(o))r[i]=o;else if(t(o)){const l=r[i];t(l)?r[i]=mi(l,o):r[i]=mi(o)}else r[i]=o}return r}function Pg(e,t){return mi(Og,e,t||{})}function Ag(e,t){return mi(Ig,e,t||{})}class $g{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:n,friendlyName:r,signal:s},i){try{const{data:o,error:l}=await this.client.mfa.challenge({factorId:t,webauthn:n});if(!o)return{data:null,error:l};const c=s??kg.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:u}=o.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${r}`),u.displayName||(u.displayName=u.name)}switch(o.webauthn.type){case"create":{const u=Pg(o.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:d,error:g}=await Tg({publicKey:u,signal:c});return d?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:d}},error:null}:{data:null,error:g}}case"request":{const u=Ag(o.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:d,error:g}=await Rg(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:u,signal:c}));return d?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:d}},error:null}:{data:null,error:g}}}}catch(o){return I(o)?{data:null,error:o}:{data:null,error:new en("Unexpected error in challenge",o)}}}async _verify({challengeId:t,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:t,webauthn:r})}async _authenticate({factorId:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!n)return{data:null,error:new Jr("rpId is required for WebAuthn authentication")};try{if(!eu())return{data:null,error:new en("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this.challenge({factorId:t,webauthn:{rpId:n,rpOrigins:r},signal:s},{request:i});if(!o)return{data:null,error:l};const{webauthn:c}=o;return this._verify({factorId:t,challengeId:o.challengeId,webauthn:{type:c.type,rpId:n,rpOrigins:r,credential_response:c.credential_response}})}catch(o){return I(o)?{data:null,error:o}:{data:null,error:new en("Unexpected error in authenticate",o)}}}async _register({friendlyName:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!n)return{data:null,error:new Jr("rpId is required for WebAuthn registration")};try{if(!eu())return{data:null,error:new en("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this._enroll({friendlyName:t});if(!o)return await this.client.mfa.listFactors().then(d=>{var g;return(g=d.data)===null||g===void 0?void 0:g.all.find(p=>p.factor_type==="webauthn"&&p.friendly_name===t&&p.status!=="unverified")}).then(d=>d?this.client.mfa.unenroll({factorId:d==null?void 0:d.id}):void 0),{data:null,error:l};const{data:c,error:u}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:s},{create:i});return c?this._verify({factorId:o.id,challengeId:c.challengeId,webauthn:{rpId:n,rpOrigins:r,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:u}}catch(o){return I(o)?{data:null,error:o}:{data:null,error:new en("Unexpected error in register",o)}}}}gg();const Dg={url:Ov,storageKey:Iv,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Pv,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function tu(e,t,n){return await n()}const xn={};class Qr{get jwks(){var t,n;return(n=(t=xn[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){xn[this.storageKey]=Object.assign(Object.assign({},xn[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=xn[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){xn[this.storageKey]=Object.assign(Object.assign({},xn[this.storageKey]),{cachedAt:t})}constructor(t){var n,r,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},Dg),t);if(this.storageKey=i.storageKey,this.instanceID=(n=Qr.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,Qr.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&ve()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new mg({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=zh(i.fetch),this.lock=i.lock||tu,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,i.lock?this.lock=i.lock:this.persistSession&&ve()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=vg:this.lock=tu,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new $g(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:Fh()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Zc(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=Zc(this.memoryStorage)),ve()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Lh}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let n={},r="none";if(ve()&&(n=Kv(window.location.href),this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce")),ve()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),Mv(i)){const c=(t=i.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return I(n)?this._returnResult({error:n}):this._returnResult({error:new en("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,s;try{const i=await P(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:Ye}),{data:o,error:l}=i;if(l||!o)return this._returnResult({data:{user:null,session:null},error:l});const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(i){if(I(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(t){var n,r,s;try{let i;if("email"in t){const{email:d,password:g,options:p}=t;let _=null,x=null;this.flowType==="pkce"&&([_,x]=await yn(this.storage,this.storageKey)),i=await P(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:p==null?void 0:p.emailRedirectTo,body:{email:d,password:g,data:(n=p==null?void 0:p.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:_,code_challenge_method:x},xform:Ye})}else if("phone"in t){const{phone:d,password:g,options:p}=t;i=await P(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:g,data:(r=p==null?void 0:p.data)!==null&&r!==void 0?r:{},channel:(s=p==null?void 0:p.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:Ye})}else throw new bs("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return await me(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:l});const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(i){if(await me(this.storage,`${this.storageKey}-code-verifier`),I(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(t){try{let n;if("email"in t){const{email:i,password:o,options:l}=t;n=await P(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Yc})}else if("phone"in t){const{phone:i,password:o,options:l}=t;n=await P(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Yc})}else throw new bs("You must provide either an email or phone number and a password");const{data:r,error:s}=n;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!r||!r.session||!r.user){const i=new gn;return this._returnResult({data:{user:null,session:null},error:i})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(I(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(t){var n,r,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;switch(n){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(t){var n,r,s,i,o,l,c,u,d,g,p;let _,x;if("message"in t)_=t.message,x=t.signature;else{const{chain:w,wallet:y,statement:m,options:h}=t;let v;if(ve())if(typeof y=="object")v=y;else{const k=window;if("ethereum"in k&&typeof k.ethereum=="object"&&"request"in k.ethereum&&typeof k.ethereum.request=="function")v=k.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(h!=null&&h.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");v=y}const f=new URL((n=h==null?void 0:h.url)!==null&&n!==void 0?n:window.location.href),N=await v.request({method:"eth_requestAccounts"}).then(k=>k).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!N||N.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const j=Vh(N[0]);let S=(r=h==null?void 0:h.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!S){const k=await v.request({method:"eth_chainId"});S=yg(k)}const b={domain:f.host,address:j,statement:m,uri:f.href,version:"1",chainId:S,nonce:(s=h==null?void 0:h.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(o=(i=h==null?void 0:h.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(l=h==null?void 0:h.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(c=h==null?void 0:h.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(u=h==null?void 0:h.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(d=h==null?void 0:h.signInWithEthereum)===null||d===void 0?void 0:d.resources};_=_g(b),x=await v.request({method:"personal_sign",params:[wg(_),j]})}try{const{data:w,error:y}=await P(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:_,signature:x},!((g=t.options)===null||g===void 0)&&g.captchaToken?{gotrue_meta_security:{captcha_token:(p=t.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:Ye});if(y)throw y;if(!w||!w.session||!w.user){const m=new gn;return this._returnResult({data:{user:null,session:null},error:m})}return w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),this._returnResult({data:Object.assign({},w),error:y})}catch(w){if(I(w))return this._returnResult({data:{user:null,session:null},error:w});throw w}}async signInWithSolana(t){var n,r,s,i,o,l,c,u,d,g,p,_;let x,w;if("message"in t)x=t.message,w=t.signature;else{const{chain:y,wallet:m,statement:h,options:v}=t;let f;if(ve())if(typeof m=="object")f=m;else{const j=window;if("solana"in j&&typeof j.solana=="object"&&("signIn"in j.solana&&typeof j.solana.signIn=="function"||"signMessage"in j.solana&&typeof j.solana.signMessage=="function"))f=j.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof m!="object"||!(v!=null&&v.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");f=m}const N=new URL((n=v==null?void 0:v.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in f&&f.signIn){const j=await f.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},v==null?void 0:v.signInWithSolana),{version:"1",domain:N.host,uri:N.href}),h?{statement:h}:null));let S;if(Array.isArray(j)&&j[0]&&typeof j[0]=="object")S=j[0];else if(j&&typeof j=="object"&&"signedMessage"in j&&"signature"in j)S=j;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in S&&"signature"in S&&(typeof S.signedMessage=="string"||S.signedMessage instanceof Uint8Array)&&S.signature instanceof Uint8Array)x=typeof S.signedMessage=="string"?S.signedMessage:new TextDecoder().decode(S.signedMessage),w=S.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in f)||typeof f.signMessage!="function"||!("publicKey"in f)||typeof f!="object"||!f.publicKey||!("toBase58"in f.publicKey)||typeof f.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");x=[`${N.host} wants you to sign in with your Solana account:`,f.publicKey.toBase58(),...h?["",h,""]:[""],"Version: 1",`URI: ${N.href}`,`Issued At: ${(s=(r=v==null?void 0:v.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=v==null?void 0:v.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${v.signInWithSolana.notBefore}`]:[],...!((o=v==null?void 0:v.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${v.signInWithSolana.expirationTime}`]:[],...!((l=v==null?void 0:v.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${v.signInWithSolana.chainId}`]:[],...!((c=v==null?void 0:v.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${v.signInWithSolana.nonce}`]:[],...!((u=v==null?void 0:v.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${v.signInWithSolana.requestId}`]:[],...!((g=(d=v==null?void 0:v.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||g===void 0)&&g.length?["Resources",...v.signInWithSolana.resources.map(S=>`- ${S}`)]:[]].join(`
`);const j=await f.signMessage(new TextEncoder().encode(x),"utf8");if(!j||!(j instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");w=j}}try{const{data:y,error:m}=await P(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:x,signature:sn(w)},!((p=t.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(_=t.options)===null||_===void 0?void 0:_.captchaToken}}:null),xform:Ye});if(m)throw m;if(!y||!y.session||!y.user){const h=new gn;return this._returnResult({data:{user:null,session:null},error:h})}return y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),this._returnResult({data:Object.assign({},y),error:m})}catch(y){if(I(y))return this._returnResult({data:{user:null,session:null},error:y});throw y}}async _exchangeCodeForSession(t){const n=await Jt(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{if(!r&&this.flowType==="pkce")throw new Fv;const{data:i,error:o}=await P(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:Ye});if(await me(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!i||!i.session||!i.user){const l=new gn;return this._returnResult({data:{user:null,session:null,redirectType:null},error:l})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(await me(this.storage,`${this.storageKey}-code-verifier`),I(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(t){try{const{options:n,provider:r,token:s,access_token:i,nonce:o}=t,l=await P(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Ye}),{data:c,error:u}=l;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!c||!c.session||!c.user){const d=new gn;return this._returnResult({data:{user:null,session:null},error:d})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:c,error:u})}catch(n){if(I(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(t){var n,r,s,i,o;try{if("email"in t){const{email:l,options:c}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await yn(this.storage,this.storageKey));const{error:g}=await P(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:g})}if("phone"in t){const{phone:l,options:c}=t,{data:u,error:d}=await P(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d})}throw new bs("You must provide either an email or phone number.")}catch(l){if(await me(this.storage,`${this.storageKey}-code-verifier`),I(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async verifyOtp(t){var n,r;try{let s,i;"options"in t&&(s=(n=t.options)===null||n===void 0?void 0:n.redirectTo,i=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:l}=await P(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:Ye});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,u=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(s){if(I(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithSSO(t){var n,r,s,i,o;try{let l=null,c=null;this.flowType==="pkce"&&([l,c]=await yn(this.storage,this.storageKey));const u=await P(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:c}),headers:this.headers,xform:dg});return!((i=u.data)===null||i===void 0)&&i.url&&ve()&&!(!((o=t.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(l){if(await me(this.storage,`${this.storageKey}-code-verifier`),I(l))return this._returnResult({data:null,error:l});throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new Ae;const{error:s}=await P(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(t){if(I(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:s,options:i}=t,{error:o}=await P(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in t){const{phone:r,type:s,options:i}=t,{data:o,error:l}=await P(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l})}throw new bs("You must provide either an email or phone number and a type")}catch(n){if(I(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await Jt(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<ha:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const o=await Jt(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=pa()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};t.user=og(t.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const n=await this._acquireLock(-1,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(t){try{return t?await P(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Rt}):await this._useSession(async n=>{var r,s,i;const{data:o,error:l}=n;if(l)throw l;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ae}:await P(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Rt})})}catch(n){if(I(n))return Uv(n)&&(await this._removeSession(),await me(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new Ae;const o=s.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await yn(this.storage,this.storageKey));const{data:u,error:d}=await P(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:Rt});if(d)throw d;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(r){if(await me(this.storage,`${this.storageKey}-code-verifier`),I(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Ae;const n=Date.now()/1e3;let r=n,s=!0,i=null;const{payload:o}=ma(t.access_token);if(o.exp&&(r=o.exp,s=r<=n),s){const{data:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(n){if(I(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:o,error:l}=n;if(l)throw l;t=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new Ae;const{data:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(I(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(t,n){try{if(!ve())throw new Es("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Es(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Wc("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Es("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Wc("No code detected.");const{data:h,error:v}=await this._exchangeCodeForSession(t.code);if(v)throw v;const f=new URL(window.location.href);return f.searchParams.delete("code"),window.history.replaceState(window.history.state,"",f.toString()),{data:{session:h.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:l,expires_at:c,token_type:u}=t;if(!i||!l||!o||!u)throw new Es("No session defined in URL");const d=Math.round(Date.now()/1e3),g=parseInt(l);let p=d+g;c&&(p=parseInt(c));const _=p-d;_*1e3<=bn&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${_}s, should have been closer to ${g}s`);const x=p-g;d-x>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",x,p,d):d-x<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",x,p,d);const{data:w,error:y}=await this._getUser(i);if(y)throw y;const m={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:g,expires_at:p,refresh_token:o,token_type:u,user:w.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:m,redirectType:t.type},error:null})}catch(r){if(I(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await Jt(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return this._returnResult({error:i});const o=(r=s.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(Lv(l)&&(l.status===404||l.status===401||l.status===403)))return this._returnResult({error:l})}return t!=="others"&&(await this._removeSession(),await me(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const n=qv(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,s;try{const{data:{session:i},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await yn(this.storage,this.storageKey,!0));try{return await P(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(await me(this.storage,`${this.storageKey}-code-verifier`),I(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(n){if(I(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var n;try{const{data:r,error:s}=await this._useSession(async i=>{var o,l,c,u,d;const{data:g,error:p}=i;if(p)throw p;const _=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await P(this.fetch,"GET",_,{headers:this.headers,jwt:(d=(u=g.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return ve()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),this._returnResult({data:{provider:t.provider,url:r==null?void 0:r.url},error:null})}catch(r){if(I(r))return this._returnResult({data:{provider:t.provider,url:null},error:r});throw r}}async linkIdentityIdToken(t){return await this._useSession(async n=>{var r;try{const{error:s,data:{session:i}}=n;if(s)throw s;const{options:o,provider:l,token:c,access_token:u,nonce:d}=t,g=await P(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=i==null?void 0:i.access_token)!==null&&r!==void 0?r:void 0,body:{provider:l,id_token:c,access_token:u,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Ye}),{data:p,error:_}=g;return _?this._returnResult({data:{user:null,session:null},error:_}):!p||!p.session||!p.user?this._returnResult({data:{user:null,session:null},error:new gn}):(p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("USER_UPDATED",p.session)),this._returnResult({data:p,error:_}))}catch(s){if(await me(this.storage,`${this.storageKey}-code-verifier`),I(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)throw o;return await P(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(I(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await Yv(async s=>(s>0&&await Qv(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await P(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Ye})),(s,i)=>{const o=200*Math.pow(2,s);return i&&fa(i)&&Date.now()+o-r<bn})}catch(r){if(this._debug(n,"error",r),I(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),ve()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await Jt(this.storage,this.storageKey);if(s&&this.userStorage){let o=await Jt(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await En(this.userStorage,this.storageKey+"-user",o)),s.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:pa()}else if(s&&!s.user&&!s.user){const o=await Jt(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(s.user=o.user,await me(this.storage,this.storageKey+"-user"),await En(this.storage,this.storageKey,s)):s.user=pa()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const i=((n=s.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<ha;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${ha}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),fa(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(s.access_token);!l&&(o!=null&&o.user)?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new Ae;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Ai;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new Ae;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={data:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(s,"error",i),I(i)){const o={data:null,error:i};return fa(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,n,r=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,n)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await me(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},t),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await En(this.userStorage,this.storageKey+"-user",{user:n.user});const s=Object.assign({},n);delete s.user;const i=Jc(s);await En(this.storage,this.storageKey,i)}else{const s=Jc(n);await En(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await me(this.storage,this.storageKey),await me(this.storage,this.storageKey+"-code-verifier"),await me(this.storage,this.storageKey+"-user"),this.userStorage&&await me(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&ve()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),bn);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-t)/bn);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${bn}ms, refresh threshold is ${xo} ticks`),s<=xo&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Bh)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ve()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=await yn(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(l.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?this._returnResult({data:null,error:i}):await P(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(I(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)return this._returnResult({data:null,error:o});const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:c,error:u}=await P(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return u?this._returnResult({data:null,error:u}):(t.factorType==="totp"&&c.type==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),this._returnResult({data:c,error:null}))})}catch(n){if(I(n))return this._returnResult({data:null,error:n});throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return this._returnResult({data:null,error:i});const o=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?Eg(t.webauthn.credential_response):Cg(t.webauthn.credential_response)})}:{code:t.code}),{data:l,error:c}=await P(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:o,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return c?this._returnResult({data:null,error:c}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),this._returnResult({data:l,error:c}))})}catch(n){if(I(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return this._returnResult({data:null,error:i});const o=await P(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});if(o.error)return o;const{data:l}=o;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:Sg(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:bg(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(I(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){var t;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const s={all:[],phone:[],totp:[],webauthn:[]};for(const i of(t=n==null?void 0:n.factors)!==null&&t!==void 0?t:[])s.all.push(i),i.status==="verified"&&s[i.factor_type].push(i);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){var t,n;const{data:{session:r},error:s}=await this.getSession();if(s)return this._returnResult({data:null,error:s});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=ma(r.access_token);let o=null;i.aal&&(o=i.aal);let l=o;((n=(t=r.user.factors)===null||t===void 0?void 0:t.filter(d=>d.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(l="aal2");const u=i.amr||[];return{data:{currentLevel:o,nextLevel:l,currentAuthenticationMethods:u},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async n=>{const{data:{session:r},error:s}=n;return s?this._returnResult({data:null,error:s}):r?await P(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:r.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new Ae})})}catch(n){if(I(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(t,n){try{return await this._useSession(async r=>{const{data:{session:s},error:i}=r;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new Ae});const o=await P(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&ve()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(r){if(I(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(t,n){try{return await this._useSession(async r=>{const{data:{session:s},error:i}=r;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new Ae});const o=await P(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&ve()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(r){if(I(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;return r?this._returnResult({data:null,error:r}):n?await P(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new Ae})})}catch(t){if(I(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async n=>{const{data:{session:r},error:s}=n;return s?this._returnResult({data:null,error:s}):r?(await P(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Ae})})}catch(n){if(I(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(l=>l.kid===t);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(l=>l.kid===t),r&&this.jwks_cached_at+$v>s)return r;const{data:i,error:o}=await P(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,r=i.keys.find(l=>l.kid===t),!r)?null:r}async getClaims(t,n={}){try{let r=t;if(!r){const{data:_,error:x}=await this.getSession();if(x||!_.session)return this._returnResult({data:null,error:x});r=_.session.access_token}const{header:s,payload:i,signature:o,raw:{header:l,payload:c}}=ma(r);n!=null&&n.allowExpired||sg(i.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!u){const{error:_}=await this.getUser(r);if(_)throw _;return{data:{claims:i,header:s,signature:o},error:null}}const d=ig(s.alg),g=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,g,o,Hv(`${l}.${c}`)))throw new ko("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(r){if(I(r))return this._returnResult({data:null,error:r});throw r}}}Qr.nextInstanceID={};const Lg=Qr,Ug="2.89.0";let gr="";typeof Deno<"u"?gr="deno":typeof document<"u"?gr="web":typeof navigator<"u"&&navigator.product==="ReactNative"?gr="react-native":gr="node";const Mg={"X-Client-Info":`supabase-js-${gr}/${Ug}`},Fg={headers:Mg},zg={schema:"public"},Bg={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Vg={};function Yr(e){"@babel/helpers - typeof";return Yr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yr(e)}function Wg(e,t){if(Yr(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Yr(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Hg(e){var t=Wg(e,"string");return Yr(t)=="symbol"?t:t+""}function Gg(e,t,n){return(t=Hg(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function te(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?nu(Object(n),!0).forEach(function(r){Gg(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nu(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}const qg=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),Kg=()=>Headers,Jg=(e,t,n)=>{const r=qg(n),s=Kg();return async(i,o)=>{var l;const c=(l=await t())!==null&&l!==void 0?l:e;let u=new s(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),r(i,te(te({},o),{},{headers:u}))}};function Qg(e){return e.endsWith("/")?e:e+"/"}function Yg(e,t){var n,r;const{db:s,auth:i,realtime:o,global:l}=e,{db:c,auth:u,realtime:d,global:g}=t,p={db:te(te({},c),s),auth:te(te({},u),i),realtime:te(te({},d),o),storage:{},global:te(te(te({},g),l),{},{headers:te(te({},(n=g==null?void 0:g.headers)!==null&&n!==void 0?n:{}),(r=l==null?void 0:l.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return e.accessToken?p.accessToken=e.accessToken:delete p.accessToken,p}function Xg(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Qg(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var Zg=class extends Lg{constructor(e){super(e)}},ey=class{constructor(e,t,n){var r,s;this.supabaseUrl=e,this.supabaseKey=t;const i=Xg(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",i),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",i),this.storageUrl=new URL("storage/v1",i),this.functionsUrl=new URL("functions/v1",i);const o=`sb-${i.hostname.split(".")[0]}-auth-token`,l={db:zg,realtime:Vg,auth:te(te({},Bg),{},{storageKey:o}),global:Fg},c=Yg(n??{},l);if(this.storageKey=(r=c.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(s=c.global.headers)!==null&&s!==void 0?s:{},c.accessToken)this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(d,g)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(g)} is not possible`)}});else{var u;this.auth=this._initSupabaseAuthClient((u=c.auth)!==null&&u!==void 0?u:{},this.headers,c.global.fetch)}this.fetch=Jg(t,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(te({headers:this.headers,accessToken:this._getAccessToken.bind(this)},c.realtime)),this.accessToken&&this.accessToken().then(d=>this.realtime.setAuth(d)).catch(d=>console.warn("Failed to set initial Realtime auth token:",d)),this.rest=new Pp(new URL("rest/v1",i).href,{headers:this.headers,schema:c.db.schema,fetch:this.fetch}),this.storage=new Rv(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),c.accessToken||this._listenForAuthEvents()}get functions(){return new Cp(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,n)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e=this,t,n;if(e.accessToken)return await e.accessToken();const{data:r}=await e.auth.getSession();return(t=(n=r.session)===null||n===void 0?void 0:n.access_token)!==null&&t!==void 0?t:e.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,userStorage:s,storageKey:i,flowType:o,lock:l,debug:c,throwOnError:u},d,g){const p={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Zg({url:this.authUrl.href,headers:te(te({},p),d),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,userStorage:s,flowType:o,lock:l,debug:c,throwOnError:u,fetch:g,hasCustomAuthorizationHeader:Object.keys(this.headers).some(_=>_.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new Qp(this.realtimeUrl.href,te(te({},e),{},{params:te(te({},{apikey:this.supabaseKey}),e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",t==null?void 0:t.access_token)})}_handleTokenChanged(e,t,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const ty=(e,t,n)=>new ey(e,t,n);function ny(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}ny()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");function Hh(e){const t=e.mrr*12,n=e.monthlyBurn>0?e.cashOnHand/e.monthlyBurn:null,r=e.mrr>0?e.monthlyBurn/e.mrr:null,s=e.lastMaterialUpdateAt?Math.floor((Date.now()-new Date(e.lastMaterialUpdateAt))/864e5):null;return{...e,arr:t,runway:n,burnMultiple:r,daysSinceUpdate:s}}function Gh(e){const t=e.targetAmount>0?e.raisedAmount/e.targetAmount:0,n=e.startedAt?Math.floor((Date.now()-new Date(e.startedAt))/864e5):0,r=e.targetCloseDate?Math.floor((new Date(e.targetCloseDate)-Date.now())/864e5):null;return{...e,coverage:t,daysOpen:n,daysToClose:r}}function ry(e){const t=e.targetValue>0?e.currentValue/e.targetValue:0,n=e.targetDate?Math.floor((new Date(e.targetDate)-Date.now())/864e5):null,r=t>=.8||t>=.5&&n>60;return{...e,progress:t,daysToDeadline:n,isOnTrack:r}}function ss(e,t,n,r=[]){const s=[];let i=1;const o=e.map(Hh),l=t.map(Gh),c=(u,d,g)=>r.some(p=>p.company_id===u&&p.issue_category===d&&p.issue_title===g);for(const u of o)if(u.isPortfolio){if(u.runway!==null&&u.runway<6){const d=u.runway<3?"critical":"high",g=`Runway at ${u.runway.toFixed(1)} months`,p="capital_sufficiency";c(u.id,p,g)||s.push({id:`issue-${i++}`,companyId:u.id,type:p,category:p,severity:d,urgencyScore:Math.round(100-u.runway*10),title:g,suggestedAction:u.runway<3?"Emergency bridge or accelerate close":"Review fundraising timeline",triggerCondition:`runway=${u.runway.toFixed(1)} < 6`})}if(u.burnMultiple!==null&&u.burnMultiple>3){const d=`Burn multiple at ${u.burnMultiple.toFixed(1)}x`,g="revenue_viability";c(u.id,g,d)||s.push({id:`issue-${i++}`,companyId:u.id,type:g,category:g,severity:u.burnMultiple>5?"high":"medium",urgencyScore:Math.round(Math.min(u.burnMultiple*15,90)),title:d,suggestedAction:"Review unit economics and path to efficiency",triggerCondition:`burnMultiple=${u.burnMultiple.toFixed(1)} > 3`})}if(u.daysSinceUpdate!==null&&u.daysSinceUpdate>14){const d=`No update in ${u.daysSinceUpdate} days`,g="attention_misallocation";c(u.id,g,d)||s.push({id:`issue-${i++}`,companyId:u.id,type:g,category:g,severity:u.daysSinceUpdate>30?"high":"medium",urgencyScore:Math.round(Math.min(u.daysSinceUpdate*2,80)),title:d,suggestedAction:"Schedule check-in",triggerCondition:`daysSinceUpdate=${u.daysSinceUpdate} > 14`})}}for(const u of l){if(u.status!=="active"&&u.status!=="closing")continue;const d=o.find(g=>g.id===u.companyId);if(d!=null&&d.isPortfolio){if(u.daysOpen>45&&u.coverage<.3){const g=`${u.roundType} open ${u.daysOpen}d, ${(u.coverage*100).toFixed(0)}% covered`,p="capital_sufficiency";c(d.id,p,g)||s.push({id:`issue-${i++}`,companyId:d.id,type:p,category:p,severity:"high",urgencyScore:Math.round(60+u.daysOpen*.5),title:g,suggestedAction:"Assess pipeline, consider repositioning",triggerCondition:`daysOpen=${u.daysOpen} > 45 && coverage < 0.3`})}if(!u.leadInvestorId&&u.daysOpen>30){const g=`${u.roundType} needs lead, ${u.daysOpen}d open`,p="market_access";c(d.id,p,g)||s.push({id:`issue-${i++}`,companyId:d.id,type:p,category:p,severity:"medium",urgencyScore:Math.round(40+u.daysOpen*.3),title:g,suggestedAction:"Focus on lead-capable firms",triggerCondition:`leadInvestorId=null && daysOpen=${u.daysOpen} > 30`})}}}for(const u of n){const d=o.find(m=>m.id===u.companyId);if(!(d!=null&&d.isPortfolio))continue;const g=u.targetValue>0?u.currentValue/u.targetValue:0,p=u.targetDate?Math.floor((new Date(u.targetDate)-Date.now())/864e5):null,_=u.lastUpdatedAt?Math.floor((Date.now()-new Date(u.lastUpdatedAt))/864e5):999,x=g>=1,w=!x&&(p!==null&&p<0||p<30&&g<.3),y=!x&&_>21;if(!x){if(w||p!==null&&p<30&&g<.7){const m=p<0||g<.3?"high":"medium",h=`${u.title}: ${(g*100).toFixed(0)}% complete, ${p}d left`,v="goal_risk";c(d.id,v,h)||s.push({id:`issue-${i++}`,companyId:d.id,type:v,category:v,severity:m,urgencyScore:Math.round(50+(1-g)*30+Math.max(0,30-p)),title:h,suggestedAction:"Review blockers and acceleration options",triggerCondition:`progress=${g.toFixed(2)} < 0.7 && daysToDeadline=${p} < 30`})}if(y){const m=`${u.title}: No update in ${_} days`,h="goal_risk";c(d.id,h,m)||s.push({id:`issue-${i++}`,companyId:d.id,type:h,category:h,severity:"medium",urgencyScore:Math.round(40+_),title:m,suggestedAction:"Check in on progress and blockers",triggerCondition:`daysSinceUpdate=${_} > 21`})}}}return s.sort((u,d)=>{const g={critical:0,high:1,medium:2,low:3};return g[u.severity]!==g[d.severity]?g[u.severity]-g[d.severity]:d.urgencyScore-u.urgencyScore})}function kl(e,t){const n=t.filter(s=>s.companyId===e.id);let r=100;for(const s of n){const i=s.severity==="critical"?25:s.severity==="high"?15:s.severity==="medium"?8:3;r-=i}return Math.max(0,Math.min(100,r))}const sy="https://ztlwymnknqeapyrihcmd.supabase.co",iy="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inp0bHd5bW5rbnFlYXB5cmloY21kIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjczODg0ODIsImV4cCI6MjA4Mjk2NDQ4Mn0.5tg9Ct-MXyTPP_kTmxA_eLkj4TTltiZiVcvByEzu3Z4",W=ty(sy,iy);async function ay(e,t,n,r=null){const{data:s,error:i}=await W.from("priority_resolutions").insert([{company_id:e,issue_category:t,issue_title:n,resolution_notes:r}]).select().maybeSingle();if(i)throw console.error("Error marking priority as resolved:",i),i;return s}async function ru(){const{data:e,error:t}=await W.from("priority_resolutions").select("*").order("resolved_at",{ascending:!1});if(t)throw console.error("Error fetching resolved priorities:",t),t;return e||[]}function Nn(e){if(!e)return e;const t={};for(const n in e){const r=n.replace(/_([a-z])/g,(s,i)=>i.toUpperCase());t[r]=e[n]}return t}async function oy(){const[{data:e,error:t},{data:n,error:r},{data:s,error:i},{data:o,error:l},{data:c,error:u},{data:d,error:g}]=await Promise.all([W.from("companies").select("*"),W.from("people").select("*"),W.from("firms").select("*"),W.from("rounds").select("*"),W.from("goals").select("*"),W.from("deals").select("*")]);return t&&console.error("Error loading companies:",t),r&&console.error("Error loading people:",r),i&&console.error("Error loading firms:",i),l&&console.error("Error loading rounds:",l),u&&console.error("Error loading goals:",u),g&&console.error("Error loading deals:",g),{companies:(e||[]).map(p=>Hh(Nn(p))),people:(n||[]).map(Nn),firms:(s||[]).map(Nn),rounds:(o||[]).map(p=>Gh(Nn(p))),goals:(c||[]).map(p=>ry(Nn(p))),deals:(d||[]).map(Nn)}}const ly=["James","Sarah","Michael","Emma","David","Olivia","Robert","Sophia","William","Isabella","John","Mia","Richard","Charlotte","Thomas","Amelia","Christopher","Harper","Daniel","Evelyn","Matthew","Abigail","Anthony","Emily","Mark","Elizabeth","Andrew","Sofia","Joshua","Avery","Steven","Ella","Kevin","Scarlett","Brian","Grace","George","Chloe","Edward","Victoria","Alexander","Riley","Benjamin","Aria","Samuel","Lily","Henry","Aurora","Patrick","Zoey"],cy=["Smith","Johnson","Williams","Brown","Jones","Garcia","Miller","Davis","Rodriguez","Martinez","Anderson","Taylor","Thomas","Moore","Jackson","Martin","Lee","Thompson","White","Harris","Sanchez","Clark","Lewis","Robinson","Walker","Young","Allen","King","Wright","Scott","Torres","Hill","Flores","Green","Adams","Nelson","Baker","Hall","Rivera","Campbell","Mitchell","Carter","Roberts","Gomez","Phillips","Evans","Turner","Diaz","Parker"],uy=["Nova","Quantum","Vertex","Apex","Nexus","Flux","Pulse","Forge","Cipher","Vector","Prism","Atlas","Aero","Helix","Orbit","Tensor","Axiom","Stratos","Kinetic","Photon","Radiant","Stellar","Vantage","Zenith","Lumen","Optic","Arcus","Nimbus","Solace","Vivid"],dy=["Labs","AI","Tech","Systems","Analytics","Software","Solutions","Dynamics","Networks","Platforms","Ventures","Digital","Data","Logic","Cloud","Intelligence","Automation","Robotics","Bio","Finance","Pay","Health","Security","Science","Works"],hy=["Sequoia","Andreessen","Benchmark","Accel","Greylock","Lightspeed","Index","Founders","General","Battery","Bessemer","Insight","NEA","Khosla","Union","First","Social","Tiger","Coatue","Thrive","Ribbit","QED","Felicis","Craft","Abstract","Matrix","Emergence","Scale","Point","Foundation"],fy=["Capital","Ventures","Partners","Fund","Growth","Equity","Catalyst","Investments","Holdings","Management"],my=["fintech","healthtech","edtech","enterprise_saas","consumer","marketplace","infrastructure","ai_ml","climate","other"],py=["pre_seed","seed","series_a","series_b","series_c","growth"],vy=["US","GB","DE","FR","CA","AU","SG","NL","SE","IL"],gy=["vc","angel_syndicate","family_office","corporate_vc","accelerator"],yy=["identified","contacted","meeting_scheduled","meeting_held","diligence","term_sheet","committed","closed","dropped"],wy=["pre_seed","seed","seed_extension","series_a","series_b","bridge"],_y=["fundraise","revenue","hiring","product","partnership","operational"],G=e=>e[Math.floor(Math.random()*e.length)],xy=(e,t)=>[...e].sort(()=>.5-Math.random()).slice(0,t),jn=()=>crypto.randomUUID(),U=(e,t)=>Math.floor(Math.random()*(t-e+1))+e,kn=(e,t)=>Math.random()*(t-e)+e,pe=e=>new Date(Date.now()-e*864e5).toISOString(),Cs=e=>new Date(Date.now()+e*864e5).toISOString(),Ny=()=>`${G(uy)}${G(dy)}`,jy=()=>`${G(hy)} ${G(fy)}`,ky=()=>({firstName:G(ly),lastName:G(cy)}),pi={default:{critical:{runwayRange:[0,3],burnMultiple:[4,8],activityDays:[45,90],weight:.1},struggling:{runwayRange:[3,6],burnMultiple:[2.5,4],activityDays:[20,45],weight:.15},concerning:{runwayRange:[6,9],burnMultiple:[1.5,2.5],activityDays:[10,20],weight:.25},stable:{runwayRange:[9,15],burnMultiple:[1,2],activityDays:[3,10],weight:.3},healthy:{runwayRange:[15,24],burnMultiple:[.5,1.5],activityDays:[0,5],weight:.2}},moderate:{critical:{runwayRange:[0,3],burnMultiple:[4,8],activityDays:[45,90],weight:.2},struggling:{runwayRange:[3,6],burnMultiple:[2.5,4],activityDays:[20,45],weight:.25},concerning:{runwayRange:[6,9],burnMultiple:[1.5,2.5],activityDays:[10,20],weight:.25},stable:{runwayRange:[9,15],burnMultiple:[1,2],activityDays:[3,10],weight:.2},healthy:{runwayRange:[15,24],burnMultiple:[.5,1.5],activityDays:[0,5],weight:.1}},high:{critical:{runwayRange:[0,2],burnMultiple:[5,10],activityDays:[60,120],weight:.3},struggling:{runwayRange:[2,5],burnMultiple:[3,5],activityDays:[30,60],weight:.3},concerning:{runwayRange:[5,8],burnMultiple:[2,3],activityDays:[15,30],weight:.25},stable:{runwayRange:[8,12],burnMultiple:[1.5,2.5],activityDays:[5,15],weight:.1},healthy:{runwayRange:[12,18],burnMultiple:[1,2],activityDays:[0,7],weight:.05}}},Sy=(e,t)=>{if(!e)return G(["stable","healthy","concerning"]);const n=pi[t]||pi.default,r=Math.random();let s=0;for(const[i,o]of Object.entries(n))if(s+=o.weight,r<s)return i;return"stable"},by={pre_seed:{cash:[5e4,5e5],burn:[1e4,5e4],mrr:[0,5e3],employees:[1,5]},seed:{cash:[2e5,3e6],burn:[3e4,15e4],mrr:[0,5e4],employees:[3,15]},series_a:{cash:[2e6,15e6],burn:[1e5,5e5],mrr:[2e4,3e5],employees:[10,50]},series_b:{cash:[1e7,5e7],burn:[3e5,15e5],mrr:[1e5,1e6],employees:[30,150]},series_c:{cash:[3e7,15e7],burn:[8e5,4e6],mrr:[5e5,5e6],employees:[80,400]},growth:{cash:[5e7,3e8],burn:[2e6,1e7],mrr:[2e6,2e7],employees:[200,1e3]}},su={pre_seed:[1e5,1e6],seed:[5e5,4e6],seed_extension:[5e5,2e6],series_a:[5e6,2e7],series_b:[15e6,5e7],bridge:[2e6,1e7]};function Ey(e=12,t="default"){const n=Math.round(e/.2),r=Math.round(n*3),s=Math.round(n*2.5),i=Math.round(s*11),o=Math.round(n*4),l=pi[t]||pi.default,c=[];for(let f=0;f<r;f++){const N=G(gy),j=N==="vc"?U(1e5,5e6):U(25e3,5e5);c.push({id:jn(),name:jy(),firmType:N,typicalCheckMin:j,typicalCheckMax:j*U(2,10)})}const u=[],d=new Set;for(let f=0;f<o;f++){const N=ky(),j=f<n*1.5?"founder":f<n*2.5?"investor":G(["operator","advisor","employee"]),S=j==="investor"?G(c):null;let b,k=0;do{const E=k>0?k:"",$=j==="investor"&&S?S.name.toLowerCase().replace(/\s/g,""):"gmail";b=`${N.firstName.toLowerCase()}.${N.lastName.toLowerCase()}${E}@${$}.com`,k++}while(d.has(b));d.add(b),u.push({id:jn(),firstName:N.firstName,lastName:N.lastName,email:b,role:j,firm_id:(S==null?void 0:S.id)||null,title:G(j==="founder"?["CEO","CTO","COO"]:j==="investor"?["Partner","Principal","Associate"]:["VP Engineering","Head of Product"]),lastContactedAt:pe(U(1,90))})}const g=u.filter(f=>f.role==="founder"),p=u.filter(f=>f.role==="investor"),_=[],x=[];for(let f=0;f<e;f++)x.push(G(["seed","series_a","series_b"]));for(let f=e;f<n;f++)x.push(G(py));for(let f=0;f<n;f++){const N=f<e,j=x[f],S=Sy(N,t),b=l[S]||l.stable,k=by[j],E=U(k.burn[0],k.burn[1]),$=kn(b.runwayRange[0],b.runwayRange[1]),T=Math.round(E*$),D=G(g),oe=U(k.mrr[0],k.mrr[1]),Ce=U(b.activityDays[0],b.activityDays[1]);_.push({id:jn(),name:Ny(),isPortfolio:N,founder_id:D.id,foundedAt:pe(U(365,2e3)),country:G(vy),cashOnHand:T,monthlyBurn:E,mrr:oe,revenueGrowthRate:kn(.05,.5),grossMargin:kn(.4,.85),cacPayback:U(6,36),stage:j,sector:G(my),employeeCount:U(k.employees[0],k.employees[1]),lastMaterialUpdate_at:pe(Ce),cashOnHandUpdated_at:pe(U(0,Ce+10)),monthlyBurnUpdated_at:pe(U(0,Ce+10)),mrrUpdated_at:pe(U(0,Ce+5))})}const w=_.filter(f=>f.isPortfolio),y=[],m=[...w,...xy(_.filter(f=>!f.isPortfolio),Math.round(s-w.length*1.5))];for(const f of m){const N=f.isPortfolio?U(1,3):U(0,2);for(let j=0;j<N&&y.length<s;j++){const S=G(wy),b=su[S]||su.seed,k=U(b[0],b[1]),E=j===N-1&&Math.random()>.3,$=E?kn(.1,.9):Math.random()>.2?1:kn(.5,1),T=$>.3||Math.random()>.5,D=T?G(p):null;y.push({id:jn(),companyId:f.id,stage:S,amount:k,closeDate:E?$>=1?pe(U(10,90)):Cs(U(30,120)):pe(U(30,365)),leadInvestor:T?`${D.firstName} ${D.lastName}`:"TBD",company_id:f.id,roundType:S,targetAmount:k,raisedAmount:Math.round(k*$),status:E?G(["active","closing"]):$>=1?"closed":"abandoned",startedAt:pe(U(60,300)),targetCloseDate:E?Cs(U(30,120)):pe(U(30,365)),leadInvestor_id:(D==null?void 0:D.id)||null})}}const h=[];for(const f of w){const N=U(2,5);for(let j=0;j<N;j++){const S=G(_y),b=S==="fundraise"?U(1e6,2e7):S==="revenue"?U(1e4,5e5):S==="hiring"?U(2,20):100,k=kn(.1,1.2),E=U(-30,180),$=pe(U(30,180)),T=U(0,14);h.push({id:jn(),companyId:f.id,metric:S==="fundraise"?"Close Series A":S==="revenue"?`Hit $${(b/1e3).toFixed(0)}k MRR`:S==="hiring"?`Hire ${b} engineers`:"Launch v2",targetValue:b.toString(),currentValue:Math.round(b*Math.min(k,1)).toString(),deadline:E>0?Cs(E):pe(Math.abs(E)),company_id:f.id,goalType:S,title:S==="fundraise"?"Close Series A":S==="revenue"?`Hit $${(b/1e3).toFixed(0)}k MRR`:S==="hiring"?`Hire ${b} engineers`:"Launch v2",startDate:$,targetDate:E>0?Cs(E):pe(Math.abs(E)),lastUpdatedAt:pe(T),currentValueUpdated_at:pe(T)})}}const v=[];for(const f of y){const N=f.status==="active"?U(8,15):f.status==="closing"?U(5,12):U(3,8);for(let j=0;j<N&&v.length<i;j++){const S=G(p),b=f.status==="closed"?G(["closed","committed"]):G(yy),k=b==="closed"||b==="committed"?U(30,180):b==="dropped"?U(45,120):b==="diligence"||b==="term_sheet"?U(0,7):b==="meeting_held"?U(3,21):b==="meeting_scheduled"?U(0,7):b==="contacted"?U(7,30):U(14,60),E=b==="closed"||b==="committed"?k:b==="term_sheet"?U(0,14):b==="diligence"?U(7,30):U(14,45);v.push({id:jn(),round_id:f.id,firm_id:S.firm_id,person_id:S.id,dealStage:b,lastContactDate:pe(k),introducedBy_id:Math.random()>.3?G(u).id:null,expectedAmount:b==="term_sheet"||b==="committed"||b==="closed"?U(5e4,Math.round(f.targetAmount*.4)):null,stageEntry_date:pe(E)})}}return{companies:_,firms:c,people:u,rounds:y,goals:h,deals:v}}async function qh(){const{error:e}=await W.from("deals").delete().gte("id","00000000-0000-0000-0000-000000000000");if(e)throw new Error(`Failed to clear deals: ${e.message}`);const{error:t}=await W.from("goals").delete().gte("id","00000000-0000-0000-0000-000000000000");if(t)throw new Error(`Failed to clear goals: ${t.message}`);const{error:n}=await W.from("rounds").delete().gte("id","00000000-0000-0000-0000-000000000000");if(n)throw new Error(`Failed to clear rounds: ${n.message}`);const{error:r}=await W.from("companies").delete().gte("id","00000000-0000-0000-0000-000000000000");if(r)throw new Error(`Failed to clear companies: ${r.message}`);const{error:s}=await W.from("people").delete().gte("id","00000000-0000-0000-0000-000000000000");if(s)throw new Error(`Failed to clear people: ${s.message}`);const{error:i}=await W.from("firms").delete().gte("id","00000000-0000-0000-0000-000000000000");if(i)throw new Error(`Failed to clear firms: ${i.message}`)}async function Kh(e=12,t="default"){const n=Ey(e,t),r=n.firms.map(w=>({id:w.id,name:w.name,firm_type:w.firmType,typical_check_min:w.typicalCheckMin,typical_check_max:w.typicalCheckMax})),{error:s}=await W.from("firms").insert(r);if(s)throw new Error(`Failed to insert firms: ${s.message}`);const i=n.people.map(w=>({id:w.id,first_name:w.firstName,last_name:w.lastName,email:w.email,role:w.role,firm_id:w.firm_id,title:w.title,last_contacted_at:w.lastContactedAt})),{error:o}=await W.from("people").insert(i);if(o)throw new Error(`Failed to insert people: ${o.message}`);const l=n.companies.map(w=>({id:w.id,name:w.name,is_portfolio:w.isPortfolio,founder_id:w.founder_id,founded_at:w.foundedAt,country:w.country,cash_on_hand:w.cashOnHand,monthly_burn:w.monthlyBurn,mrr:w.mrr,revenue_growth_rate:w.revenueGrowthRate,gross_margin:w.grossMargin,cac_payback:w.cacPayback,stage:w.stage,sector:w.sector,employee_count:w.employeeCount,last_material_update_at:w.lastMaterialUpdate_at,cash_on_hand_updated_at:w.cashOnHandUpdated_at,monthly_burn_updated_at:w.monthlyBurnUpdated_at,mrr_updated_at:w.mrrUpdated_at})),{error:c}=await W.from("companies").insert(l);if(c)throw new Error(`Failed to insert companies: ${c.message}`);const u=n.rounds.map(w=>({id:w.id,company_id:w.company_id,round_type:w.roundType,target_amount:w.targetAmount,raised_amount:w.raisedAmount,status:w.status,started_at:w.startedAt,target_close_date:w.targetCloseDate,actual_close_date:w.status==="closed"?w.closeDate:null,lead_investor_id:w.leadInvestor_id})),{error:d}=await W.from("rounds").insert(u);if(d)throw new Error(`Failed to insert rounds: ${d.message}`);const g=n.goals.map(w=>({id:w.id,company_id:w.company_id,goal_type:w.goalType,title:w.title,target_value:w.targetValue,current_value:w.currentValue,start_date:w.startDate,target_date:w.targetDate,last_updated_at:w.lastUpdatedAt,current_value_updated_at:w.currentValueUpdated_at})),{error:p}=await W.from("goals").insert(g);if(p)throw new Error(`Failed to insert goals: ${p.message}`);const _=n.deals.map(w=>({id:w.id,round_id:w.round_id,firm_id:w.firm_id,person_id:w.person_id,deal_stage:w.dealStage,expected_amount:w.expectedAmount,last_contact_date:w.lastContactDate,introduced_by_id:w.introducedBy_id,stage_entry_date:w.stageEntry_date})),{error:x}=await W.from("deals").insert(_);if(x)throw new Error(`Failed to insert deals: ${x.message}`);return{firms:n.firms.length,people:n.people.length,companies:n.companies.length,rounds:n.rounds.length,goals:n.goals.length,deals:n.deals.length}}function Cy({onComplete:e}){const[t,n]=L.useState(12),[r,s]=L.useState("default"),[i,o]=L.useState(!1),[l,c]=L.useState(""),[u,d]=L.useState("");async function g(){o(!0),c(""),d("");try{d("Clearing existing data..."),await qh(),d("Generating portfolio data...");const p=await Kh(t,r);d(`Generated ${p.companies} companies, ${p.rounds} rounds, ${p.deals} deals`),setTimeout(()=>{e()},1500)}catch(p){c("Data generation failed: "+p.message),o(!1)}}return a.jsx("div",{className:"load-data-container",children:a.jsxs("div",{className:"load-data-card",children:[a.jsxs("div",{className:"load-data-header",children:[a.jsx("h1",{children:"Load Sample Data"}),a.jsx("p",{children:"Generate realistic portfolio data to explore Backbone"})]}),a.jsxs("div",{className:"load-data-controls",children:[a.jsxs("div",{className:"control-row",children:[a.jsx("label",{children:"Portfolio Companies"}),a.jsx("input",{type:"number",min:"1",max:"50",value:t,onChange:p=>n(parseInt(p.target.value)||12),disabled:i})]}),a.jsxs("div",{className:"control-row",children:[a.jsx("label",{children:"Stress Level"}),a.jsxs("select",{value:r,onChange:p=>s(p.target.value),disabled:i,children:[a.jsx("option",{value:"default",children:"Default (Balanced)"}),a.jsx("option",{value:"moderate",children:"Moderate (Some Issues)"}),a.jsx("option",{value:"high",children:"High (Critical Portfolio)"})]})]})]}),u&&!l&&a.jsx("div",{className:"status-message",children:u}),l&&a.jsx("div",{className:"error-message",children:l}),a.jsx("button",{className:"generate-button",onClick:g,disabled:i,children:i?"Generating...":"Generate Sample Data"}),a.jsx("div",{className:"load-data-info",children:a.jsx("p",{children:"This will create sample companies, investors, deals, and goals to demonstrate Backbone's capabilities."})})]})})}function Ty({violation:e,onBack:t}){if(!e)return null;const{type:n,title:r,description:s,severity:i,violations:o,remedy:l,northStar:c}=e,u=d=>({critical:"#ef4444",high:"#f97316",medium:"#eab308",low:"#3b82f6"})[d]||"#64748b";return a.jsxs("div",{className:"qa-violation-detail",children:[a.jsx("button",{className:"back-btn",onClick:t,children:" Back to QA"}),a.jsxs("div",{className:"violation-header",children:[a.jsxs("div",{className:"violation-title-row",children:[a.jsx("h2",{children:r}),a.jsx("span",{className:"severity-badge",style:{backgroundColor:`${u(i)}15`,color:u(i)},children:i==null?void 0:i.toUpperCase()})]}),c&&a.jsxs("div",{className:"north-star-badge",children:["North Star Violation: ",c]}),a.jsx("p",{className:"violation-description",children:s})]}),a.jsxs("div",{className:"violation-content",children:[a.jsxs("div",{className:"violations-section",children:[a.jsxs("div",{className:"section-header",children:[a.jsx("h3",{children:"Affected Records"}),a.jsxs("span",{className:"count-badge",children:[(o==null?void 0:o.length)||0," violations"]})]}),o&&o.length>0?a.jsx("div",{className:"violations-list",children:o.map((d,g)=>a.jsxs("div",{className:"violation-item",children:[a.jsxs("div",{className:"violation-item-header",children:[a.jsxs("span",{className:"violation-index",children:["#",g+1]}),a.jsx("span",{className:"entity-type",children:d.entityType}),d.entityName&&a.jsx("span",{className:"entity-name",children:d.entityName})]}),a.jsxs("div",{className:"violation-item-details",children:[d.field&&a.jsxs("div",{className:"detail-row",children:[a.jsx("span",{className:"detail-label",children:"Field:"}),a.jsx("code",{className:"detail-value",children:d.field})]}),d.value!==void 0&&a.jsxs("div",{className:"detail-row",children:[a.jsx("span",{className:"detail-label",children:"Value:"}),a.jsx("code",{className:"detail-value",children:JSON.stringify(d.value)})]}),d.reason&&a.jsxs("div",{className:"detail-row",children:[a.jsx("span",{className:"detail-label",children:"Reason:"}),a.jsx("span",{className:"detail-value",children:d.reason})]}),d.context&&a.jsxs("div",{className:"detail-row",children:[a.jsx("span",{className:"detail-label",children:"Context:"}),a.jsx("span",{className:"detail-value",children:d.context})]}),d.recordId&&a.jsxs("div",{className:"detail-row",children:[a.jsx("span",{className:"detail-label",children:"Record ID:"}),a.jsx("code",{className:"detail-value record-id",children:d.recordId})]})]})]},g))}):a.jsx("div",{className:"empty-state",children:"No violations found"})]}),a.jsxs("div",{className:"remedy-section",children:[a.jsx("h3",{children:"How to Fix"}),a.jsx("div",{className:"remedy-content",children:l?Array.isArray(l)?a.jsx("ol",{className:"remedy-steps",children:l.map((d,g)=>a.jsx("li",{children:d},g))}):a.jsx("p",{children:l}):a.jsx("p",{children:"No remedy information available."})})]}),a.jsxs("div",{className:"impact-section",children:[a.jsx("h3",{children:"Why This Matters"}),a.jsxs("div",{className:"impact-content",children:[n==="storedDerivations"&&a.jsx("p",{children:"Stored derivations violate the NoStoredDerivs North Star. When computed values are persisted to the database, they can become stale and create inconsistencies. All derived values must be computed on-the-fly from raw inputs to ensure accuracy."}),n==="missingTTL"&&a.jsx("p",{children:"Missing TTL (time-to-live) timestamps prevent the system from knowing when data was last updated. This breaks trajectory calculations and makes it impossible to detect stale data that should trigger priority alerts."}),n==="portfolioMixedState"&&a.jsx("p",{children:"Portfolio entities are mixing stored state with computed views. This violates the Portfolio=VIEW North Star, which requires portfolio aggregations to be pure presentation layers, not stored state."}),n==="goalOrphans"&&a.jsx("p",{children:"Goals without proper risk context cannot contribute to priority calculations. All goals must map to specific risks (RiskGoal North Star) to enable gap-based urgency scoring."})]})]})]})]})}function Jh(){var w;const[e,t]=L.useState({}),[n,r]=L.useState(!1),[s,i]=L.useState(null),[o,l]=L.useState({});L.useEffect(()=>{c()},[]);async function c(){r(!0);const y={};try{const{data:m}=await W.from("companies").select("*"),{data:h}=await W.from("people").select("*"),{data:v}=await W.from("rounds").select("*"),{data:f}=await W.from("goals").select("*"),{data:N}=await W.from("deals").select("*"),j=p(m,f,N,v),S=d(m,f,N),b=x(f,m),k=_(m);y.invariants={derivedValuesStored:u(m,f,N),missingTTL:S.count,storedDerivationsFound:j.count,portfolioNotView:k.count,goalOrphans:b.count,silentOverwrites:0},l({storedDerivationsFound:{type:"storedDerivations",title:"Stored Derivations Found",description:"Computed values are being persisted to the database, violating the NoStoredDerivs North Star.",severity:"critical",northStar:"NoStoredDerivs",violations:j.violations,remedy:["Remove derived columns from database schema (arr, runway, is_on_track)","Move all computation logic to derivations.js","Update queries to compute values on-the-fly","Verify no application code writes to derived columns"]},missingTTL:{type:"missingTTL",title:"Missing TTL Timestamps",description:"Critical fields lack time-to-live timestamps, preventing stale data detection.",severity:"high",northStar:"NoStoredDerivs",violations:S.violations,remedy:["Add *_updated_at timestamp fields for all critical value fields","Populate timestamps when values are created or updated","Use timestamps in trajectory calculations"]},goalOrphans:{type:"goalOrphans",title:"Goals Without Risk Context",description:"Goals lack proper risk mapping, preventing priority calculation.",severity:"medium",northStar:"RiskGoal",violations:b.violations,remedy:["Ensure all goals have target_value, current_value, and target_date","Link goals to specific company risks","Remove or complete orphaned goals"]},portfolioNotView:{type:"portfolioMixedState",title:"Portfolio Mixed State",description:"Portfolio entities are storing state instead of being pure views.",severity:"medium",northStar:"Portfolio=VIEW",violations:k.violations,remedy:["Remove stored state from portfolio aggregations","Compute portfolio metrics on-the-fly from company data","Ensure portfolio views are read-only presentation layers"]}}),y.companies={total:(m==null?void 0:m.length)||0,portfolio:(m==null?void 0:m.filter(E=>E.is_portfolio).length)||0,missingFounder:(m==null?void 0:m.filter(E=>!E.founder_id).length)||0,negativeCash:(m==null?void 0:m.filter(E=>E.cash_on_hand<0).length)||0},y.people={total:(h==null?void 0:h.length)||0,duplicateEmails:g(h||[]),missingRole:(h==null?void 0:h.filter(E=>!E.role).length)||0},y.goals={total:(f==null?void 0:f.length)||0,overdue:(f==null?void 0:f.filter(E=>new Date(E.target_date)<new Date).length)||0,orphaned:(f==null?void 0:f.filter(E=>!(m!=null&&m.find($=>$.id===E.company_id))).length)||0},y.deals={total:(N==null?void 0:N.length)||0,missingRound:(N==null?void 0:N.filter(E=>!(v!=null&&v.find($=>$.id===E.round_id))).length)||0},t(y)}catch(m){console.error("QA check failed:",m)}finally{r(!1)}}function u(y,m,h){let v=0;return y==null||y.forEach(f=>{(f.health_score!=null||f.priority_score!=null||f.failure_risk!=null)&&v++}),m==null||m.forEach(f=>{(f.risk_score!=null||f.priority_score!=null)&&v++}),h==null||h.forEach(f=>{f.priority_score!=null&&v++}),v}function d(y,m,h){const v=[],f=[{value:"cash_on_hand",timestamp:"cash_on_hand_updated_at"},{value:"monthly_burn",timestamp:"monthly_burn_updated_at"},{value:"mrr",timestamp:"mrr_updated_at"}];y==null||y.forEach(j=>{f.forEach(S=>{j[S.value]!=null&&!j[S.timestamp]&&v.push({entityType:"Company",entityName:j.name,recordId:j.id,field:S.timestamp,value:null,reason:`Field ${S.value} has value but missing TTL timestamp`,context:`${S.value}: ${j[S.value]}`})})});const N=[{value:"current_value",timestamp:"current_value_updated_at"}];return m==null||m.forEach(j=>{N.forEach(S=>{j[S.value]!=null&&!j[S.timestamp]&&v.push({entityType:"Goal",entityName:j.title||"Untitled Goal",recordId:j.id,field:S.timestamp,value:null,reason:`Field ${S.value} has value but missing TTL timestamp`,context:`${S.value}: ${j[S.value]}`})})}),h==null||h.forEach(j=>{j.deal_stage!=null&&!j.stage_entry_date&&v.push({entityType:"Deal",entityName:`Deal in ${j.deal_stage}`,recordId:j.id,field:"stage_entry_date",value:null,reason:"Deal has stage but missing stage entry timestamp",context:`Stage: ${j.deal_stage}`})}),{count:v.length,violations:v}}function g(y){const m=y.map(v=>{var f;return(f=v.email)==null?void 0:f.toLowerCase()}),h=m.filter((v,f)=>v&&m.indexOf(v)!==f);return new Set(h).size}function p(y,m,h,v){const f=[];return y==null||y.forEach(N=>{N.arr!=null&&f.push({entityType:"Company",entityName:N.name,recordId:N.id,field:"arr",value:N.arr,reason:"Stored derived value - should be computed from MRR * 12"}),N.runway!=null&&f.push({entityType:"Company",entityName:N.name,recordId:N.id,field:"runway",value:N.runway,reason:"Stored derived value - should be computed from cash_on_hand / monthly_burn"}),N.burn_multiple!=null&&f.push({entityType:"Company",entityName:N.name,recordId:N.id,field:"burn_multiple",value:N.burn_multiple,reason:"Stored derived value - should be computed from monthly_burn / mrr"})}),m==null||m.forEach(N=>{N.is_on_track!=null&&f.push({entityType:"Goal",entityName:N.title||"Untitled Goal",recordId:N.id,field:"is_on_track",value:N.is_on_track,reason:"Stored derived value - should be computed from progress and deadline"})}),{count:f.length,violations:f}}function _(y){const m=[];return y==null||y.forEach(h=>{if(!h.is_portfolio)return;h.cash_on_hand!=null&&h.monthly_burn!=null&&h.last_material_update_at!=null&&!1&&m.push({entityType:"Company",entityName:h.name,recordId:h.id,reason:"Portfolio entity mixing stored state with computed views",context:"Should be pure presentation layer"})}),{count:m.length,violations:m}}function x(y,m){const h=[];return y==null||y.forEach(v=>{if(!(m==null?void 0:m.find(N=>N.id===v.company_id))){h.push({entityType:"Goal",entityName:v.title||"Untitled Goal",recordId:v.id,reason:"Goal has no associated company",context:`Company ID: ${v.company_id}`});return}if(!v.target_value||!v.current_value||!v.target_date){const N=[];v.target_value||N.push("target_value"),v.current_value||N.push("current_value"),v.target_date||N.push("target_date"),h.push({entityType:"Goal",entityName:v.title||"Untitled Goal",recordId:v.id,field:N.join(", "),reason:"Goal missing critical fields for risk calculation",context:`Missing: ${N.join(", ")}`})}}),{count:h.length,violations:h}}return n?a.jsx("div",{className:"admin-qa",children:a.jsx("div",{className:"loading",children:"Running QA checks..."})}):s?a.jsx(Ty,{violation:s,onBack:()=>i(null)}):a.jsxs("div",{className:"admin-qa",children:[a.jsxs("div",{className:"qa-header",children:[a.jsx("h3",{children:"Data Quality Assurance"}),a.jsx("button",{className:"refresh-btn",onClick:c,children:"Refresh"})]}),a.jsxs("div",{className:"qa-grid",children:[a.jsx(hr,{title:"System Invariants",data:e.invariants,critical:!0,onClickViolation:y=>{o[y]&&i(o[y])}}),a.jsx(hr,{title:"Companies",data:e.companies}),a.jsx(hr,{title:"People",data:e.people}),a.jsx(hr,{title:"Goals",data:e.goals}),a.jsx(hr,{title:"Deals",data:e.deals})]}),((w=e.invariants)==null?void 0:w.storedDerivationsFound)>0&&a.jsxs("div",{className:"qa-recommendations",children:[a.jsx("h4",{children:"North Stars Violations Detected"}),a.jsxs("div",{className:"violation-detail",children:[a.jsx("strong",{children:"NoStoredDerivs Violation:"})," ",e.invariants.storedDerivationsFound," records contain derived values in database.",a.jsx("br",{}),a.jsx("span",{className:"remedy",children:"Remedy: Remove arr, runway, is_on_track columns from schema. Compute on-the-fly in derivations.js"})]})]})]})}function hr({title:e,data:t,critical:n,onClickViolation:r}){if(!t)return null;const i=Object.entries(t).filter(([o,l])=>o!=="total"&&typeof l=="number"&&l>0).length>0;return a.jsxs("div",{className:`qa-section ${i?n?"critical":"has-issues":"clean"}`,children:[a.jsxs("div",{className:"qa-section-header",children:[a.jsx("h4",{children:e}),a.jsx("span",{className:`status-badge ${i?n?"critical":"warning":"success"}`,children:i?n?"VIOLATION":"Issues Found":"Clean"})]}),a.jsxs("div",{className:"qa-stats",children:[t.total!==void 0&&a.jsxs("div",{className:"qa-stat",children:[a.jsx("span",{className:"qa-label",children:"Total:"}),a.jsx("span",{className:"qa-value",children:t.total})]}),Object.entries(t).map(([o,l])=>{if(o==="total")return null;const c=r&&l>0;return a.jsxs("div",{className:`qa-stat ${l>0?"issue":""} ${c?"clickable":""}`,onClick:()=>c&&r(o),children:[a.jsxs("span",{className:"qa-label",children:[Ry(o),":"]}),a.jsx("span",{className:"qa-value",children:l}),c&&a.jsx("span",{className:"click-hint",children:""})]},o)})]})]})}function Ry(e){return e.replace(/([A-Z])/g," $1").replace(/^./,t=>t.toUpperCase())}const iu={critical:{label:"CRITICAL",color:"#ef4444",bg:"rgba(239, 68, 68, 0.1)"},high:{label:"HIGH",color:"#f97316",bg:"rgba(249, 115, 22, 0.1)"},medium:{label:"MEDIUM",color:"#eab308",bg:"rgba(234, 179, 8, 0.1)"},low:{label:"LOW",color:"#22c55e",bg:"rgba(34, 197, 94, 0.1)"}};function au({rawData:e,resolvedPriorities:t=[],onSelectIssue:n,onSelectCompany:r}){const s=ss(e.companies||[],e.rounds||[],e.goals||[],t),i=e.companies||[],o=c=>{var u;return((u=i.find(d=>d.id===c))==null?void 0:u.name)||"Unknown"},l=c=>i.find(u=>u.id===c);return s.length===0?a.jsxs("div",{className:"priority-queue",children:[a.jsx("h2",{children:"Priority Queue"}),a.jsx("div",{className:"empty-state",children:"No issues detected. All clear."})]}):a.jsxs("div",{className:"priority-queue",children:[a.jsx("div",{className:"queue-header",children:a.jsxs("span",{className:"queue-meta",children:[s.length," issues  ",s.filter(c=>c.severity==="critical").length," critical"]})}),a.jsx("div",{className:"queue-list",children:s.map((c,u)=>{const d=iu[c.severity]||iu.medium,g=l(c.companyId);return a.jsxs("div",{onClick:()=>n?n(c):g&&r&&r(g),className:"queue-item",style:{borderLeftColor:d.color},children:[a.jsx("div",{className:"item-rank",children:u+1}),a.jsxs("div",{className:"item-content",children:[a.jsxs("div",{className:"item-header",children:[a.jsx("span",{className:"severity-badge",style:{color:d.color,backgroundColor:d.bg},children:d.label}),a.jsx("span",{className:"company-name",children:o(c.companyId)})]}),a.jsx("div",{className:"item-title",children:c.title}),a.jsxs("div",{className:"item-action",children:[a.jsx("span",{className:"action-arrow",children:""}),a.jsx("span",{className:"action-text",children:c.suggestedAction})]})]})]},c.id)})})]})}function Oy(e,t){const n={...t,companies:[...t.companies],rounds:[...t.rounds],goals:[...t.goals]},{companyId:r,category:s,title:i}=e,o=n.companies.findIndex(c=>c.id===r);if(o===-1)return t;const l={...n.companies[o]};switch(s){case"capital_sufficiency":if(i.includes("Runway")){const d=l.runway+6;l.cashOnHand=Math.round(l.monthlyBurn*d),l.lastMaterialUpdate_at=new Date().toISOString()}break;case"revenue_viability":if(i.includes("Burn multiple")){const g=Math.round(l.monthlyBurn/2);l.mrr=g,l.lastMaterialUpdate_at=new Date().toISOString()}break;case"attention_misallocation":i.includes("No update")&&(l.lastMaterialUpdate_at=new Date().toISOString());break;case"market_access":if(i.includes("needs lead")){const d=n.rounds.find(g=>g.company_id===r&&(g.status==="active"||g.status==="closing"));if(d){const g=n.rounds.findIndex(_=>_.id===d.id),p=n.people.filter(_=>_.role==="investor");if(p.length>0){const _=p[0];n.rounds[g]={...d,leadInvestor_id:_.id,leadInvestor:`${_.firstName} ${_.lastName}`}}}}break;case"goal_risk":const c=i.split(":")[0],u=n.goals.find(d=>d.company_id===r&&d.title===c);if(u){const d=n.goals.findIndex(_=>_.id===u.id),g=u.currentValue/u.targetValue,p=Math.min(g+.3,1);n.goals[d]={...u,currentValue:Math.round(u.targetValue*p),lastUpdatedAt:new Date().toISOString()}}break}return n.companies[o]=l,n}function ou(e){const{category:t,title:n}=e;switch(t){case"capital_sufficiency":return n.includes("Runway")?"Extended runway by 6 months (bridge round secured or cost optimization)":"Capital sufficiency improved";case"revenue_viability":return n.includes("Burn multiple")?"Improved burn multiple to 2.0x (revenue acceleration or cost reduction)":"Revenue viability improved";case"attention_misallocation":return n.includes("No update")?"Material update received and logged":"Attention restored";case"market_access":return n.includes("needs lead")?"Lead investor secured for round":"Market access improved";case"goal_risk":return"Goal progress updated (+30% advancement)";default:return"Issue resolved"}}function Iy(e,t,n,r){const s=t.find(g=>g.id===e.companyId);if(!s)return{score:0,unlocks:[]};const i=[];let o=0;const c=n.filter(g=>g.company_id===s.id).find(g=>g.status==="active"||g.status==="closing"),d=r.filter(g=>g.company_id===s.id).filter(g=>(g.targetValue>0?g.currentValue/g.targetValue:0)<1);return e.type==="capital_sufficiency"&&(o+=90,i.push({type:"survival",description:"Prevents company shutdown",impact:"critical"}),c&&(o+=40,i.push({type:"fundraise",description:`Unblocks ${c.roundType} completion`,impact:"high"})),d.forEach(g=>{o+=20,i.push({type:"goal",description:`Enables "${g.title}"`,impact:"medium"})})),e.type==="revenue_viability"&&(o+=60,i.push({type:"economics",description:"Improves unit economics",impact:"high"}),c&&(o+=30,i.push({type:"fundraise",description:"Strengthens investor narrative",impact:"medium"})),o+=25,i.push({type:"growth",description:"Enables sustainable scaling",impact:"medium"})),e.type==="attention_misallocation"&&(o+=40,i.push({type:"visibility",description:"Restores information flow",impact:"medium"}),o+=20,i.push({type:"relationship",description:"Prevents relationship decay",impact:"low"})),e.type==="market_access"&&(o+=70,i.push({type:"fundraise",description:"Accelerates round closure",impact:"high"}),o+=30,i.push({type:"network",description:"Opens follow-on opportunities",impact:"medium"})),e.type==="goal_risk"&&(o+=50,d.slice(0,2).forEach(g=>{i.push({type:"goal",description:`Unblocks "${g.title}"`,impact:"high"})}),o+=20,i.push({type:"momentum",description:"Restores execution velocity",impact:"medium"})),{score:Math.min(o,100),unlocks:i}}function Py({issue:e,rawData:t,onBack:n,onSelectCompany:r,onSelectIssue:s,onSelectGoal:i,onResolved:o,onDataUpdate:l}){var k;const[c,u]=L.useState(!1),[d,g]=L.useState(!1),p=(t.companies||[]).find(E=>E.id===e.companyId),_=ss(t.companies||[],t.rounds||[],t.goals||[],[]).filter(E=>E.companyId===e.companyId),x=()=>{g(!0)},w=async()=>{u(!0);const E=ou(e);try{await ay(e.companyId,e.category,e.title,E);const $=Oy(e,t);l&&l($),o&&o(),n()}catch($){console.error("Failed to resolve priority:",$),u(!1),g(!1)}},y=()=>{g(!1)},{score:m,unlocks:h}=Iy(e,t.companies||[],t.rounds||[],t.goals||[]),f=(t.goals||[]).filter(E=>E.company_id===(p==null?void 0:p.id)),N=E=>E==="critical"?"severity-critical":E==="high"?"severity-high":E==="medium"?"severity-medium":"severity-low",j=E=>E>=80?"impact-critical":E>=60?"impact-high":E>=40?"impact-medium":"impact-low",S=E=>E==="critical"?"unlock-critical":E==="high"?"unlock-high":E==="medium"?"unlock-medium":"unlock-low",b=ou(e);return d?a.jsx("div",{className:"priority-detail",children:a.jsx("div",{className:"resolve-interstitial",children:a.jsxs("div",{className:"interstitial-card",children:[a.jsx("div",{className:"interstitial-icon",children:""}),a.jsx("h2",{className:"interstitial-title",children:"Confirm Resolution"}),a.jsx("p",{className:"interstitial-subtitle",children:"This action will modify underlying data and recalculate all priorities"}),a.jsxs("div",{className:"resolution-summary-box",children:[a.jsx("div",{className:"resolution-label",children:"Changes to be applied:"}),a.jsx("div",{className:"resolution-text",children:b})]}),a.jsxs("div",{className:"interstitial-actions",children:[a.jsx("button",{className:"interstitial-btn cancel",onClick:y,disabled:c,children:"Cancel"}),a.jsx("button",{className:"interstitial-btn confirm",onClick:w,disabled:c,children:c?"Resolving...":"Confirm Resolution"})]})]})})}):a.jsxs("div",{className:"priority-detail",children:[a.jsx("button",{className:"back-btn",onClick:n,children:" Back to Priorities"}),a.jsxs("div",{className:`priority-hero ${N(e.severity)}`,children:[a.jsxs("div",{className:"hero-top",children:[a.jsx("div",{className:"hero-company",onClick:()=>p&&r&&r(p),children:(p==null?void 0:p.name)||"Unknown Company"}),a.jsxs("button",{className:"hero-resolve-btn",onClick:x,disabled:c,children:[a.jsx("span",{className:"resolve-icon",children:""}),"Resolve"]})]}),a.jsx("h1",{className:"hero-title",children:e.title}),a.jsx("div",{className:"hero-description",children:e.description||e.title}),a.jsxs("div",{className:"hero-action",children:[a.jsx("div",{className:"action-label",children:"Recommended Action"}),a.jsx("div",{className:"action-text",children:e.suggestedAction})]})]}),a.jsxs("div",{className:"priority-body",children:[a.jsxs("div",{className:`entity-card company-card ${j(m)}`,children:[a.jsx("div",{className:"card-shine"}),a.jsxs("div",{className:"card-header",children:[a.jsx("div",{className:"card-title",children:"Company Profile"}),a.jsx("div",{className:"card-badge",children:e.type.replace(/_/g," ")})]}),a.jsxs("div",{className:"card-body",children:[a.jsx("div",{className:"card-name",children:(p==null?void 0:p.name)||"Unknown"}),a.jsxs("div",{className:"card-stats",children:[a.jsxs("div",{className:"stat-item",children:[a.jsx("div",{className:"stat-label",children:"ARR"}),a.jsxs("div",{className:"stat-value",children:["$",((p==null?void 0:p.arr)/1e6||0).toFixed(2),"M"]})]}),a.jsxs("div",{className:"stat-item",children:[a.jsx("div",{className:"stat-label",children:"Runway"}),a.jsxs("div",{className:"stat-value",children:[((k=p==null?void 0:p.runway)==null?void 0:k.toFixed(1))||0,"mo"]})]}),a.jsxs("div",{className:"stat-item",children:[a.jsx("div",{className:"stat-label",children:"Burn"}),a.jsxs("div",{className:"stat-value",children:["$",((p==null?void 0:p.monthlyBurn)/1e3||0).toFixed(0),"K"]})]}),a.jsxs("div",{className:"stat-item",children:[a.jsx("div",{className:"stat-label",children:"Growth"}),a.jsxs("div",{className:"stat-value",children:[(((p==null?void 0:p.revenueGrowthRate)||0)*100).toFixed(0),"%"]})]})]})]})]}),h.length>0&&a.jsxs("div",{className:"ripple-section",children:[a.jsxs("div",{className:"section-header",children:[a.jsx("span",{className:"section-icon",children:""}),a.jsx("h3",{className:"section-title",children:"Ripple Effect"}),a.jsx("span",{className:"section-count",children:h.length})]}),a.jsx("div",{className:"ripple-grid",children:h.map((E,$)=>{const T=E.type==="goal"&&f.find(oe=>E.description.toLowerCase().includes(oe.title.toLowerCase())),D=T&&i;return a.jsxs("div",{className:`ripple-card ${S(E.impact)} ${D?"clickable":""}`,onClick:()=>D&&i(T),children:[a.jsx("div",{className:"ripple-card-shine"}),a.jsx("div",{className:"ripple-type",children:E.type}),a.jsx("div",{className:"ripple-description",children:E.description})]},$)})})]}),_.length>1&&a.jsxs("div",{className:"related-section",children:[a.jsxs("div",{className:"section-header",children:[a.jsx("span",{className:"section-icon",children:""}),a.jsx("h3",{className:"section-title",children:"Related Issues"}),a.jsx("span",{className:"section-count",children:_.length-1})]}),a.jsx("div",{className:"related-grid",children:_.filter(E=>E.id!==e.id).map((E,$)=>a.jsxs("div",{className:`related-card ${N(E.severity)} clickable`,onClick:()=>s&&s(E),children:[a.jsx("div",{className:"related-card-shine"}),a.jsx("div",{className:"related-title",children:E.title}),a.jsx("div",{className:"related-type",children:E.type.replace(/_/g," ")})]},$))})]})]})]})}function Ay(e,t,n,r){const s=t.find(d=>d.id===e.companyId);if(!s)return 0;let i=0;const l=n.filter(d=>d.companyId===s.id).find(d=>d.status==="active"||d.status==="closing"),u=r.filter(d=>d.companyId===s.id).filter(d=>(d.targetValue>0?d.currentValue/d.targetValue:0)<1);return e.type==="capital_sufficiency"&&(i+=90,l&&(i+=40),i+=u.length*20),e.type==="revenue_viability"&&(i+=60,l&&(i+=30),i+=25),e.type==="attention_misallocation"&&(i+=40,i+=20),i}function $y({rawData:e,resolvedPriorities:t=[],onSelectCompany:n}){const r=ss(e.companies||[],e.rounds||[],e.goals||[],t),s=(e.companies||[]).map(f=>({...f,healthScore:kl(f,r)})),i=s.filter(f=>f.isPortfolio),o=i.length>0?Math.round(i.reduce((f,N)=>f+N.healthScore,0)/i.length):0,l=i.reduce((f,N)=>f+N.arr,0),c=i.length>0?i.reduce((f,N)=>f+N.revenueGrowthRate,0)/i.length:0,u=r.filter(f=>f.severity==="critical"),d=r.filter(f=>f.severity==="high"),p=[...r.map(f=>({...f,impactScore:Ay(f,s,e.rounds||[],e.goals||[])}))].sort((f,N)=>N.impactScore-f.impactScore).slice(0,5),_=i.filter(f=>f.runway<6).length,x=i.filter(f=>f.healthScore>=80).length,w=i.filter(f=>f.healthScore<60).length,y=f=>f>=80?"#10b981":f>=60?"#3b82f6":f>=40?"#f59e0b":"#ef4444",m=f=>f==="critical"?"#ef4444":f==="high"?"#f59e0b":f==="medium"?"#3b82f6":"#64748b",h=f=>{var N;return((N=s.find(j=>j.id===f))==null?void 0:N.name)||"Unknown"},v=f=>s.find(N=>N.id===f);return a.jsxs("div",{className:"snapshot",children:[a.jsxs("div",{className:"snapshot-hero",children:[a.jsxs("div",{className:"hero-stat",children:[a.jsx("div",{className:"hero-stat-value",style:{color:y(o)},children:o}),a.jsx("div",{className:"hero-stat-label",children:"Portfolio Health"})]}),a.jsxs("div",{className:"hero-stats-grid",children:[a.jsxs("div",{className:"hero-mini-stat",children:[a.jsx("div",{className:"mini-stat-value",children:i.length}),a.jsx("div",{className:"mini-stat-label",children:"Companies"})]}),a.jsxs("div",{className:"hero-mini-stat",children:[a.jsxs("div",{className:"mini-stat-value",children:["$",(l/1e6).toFixed(1),"M"]}),a.jsx("div",{className:"mini-stat-label",children:"Total ARR"})]}),a.jsxs("div",{className:"hero-mini-stat",children:[a.jsxs("div",{className:"mini-stat-value",children:[(c*100).toFixed(0),"%"]}),a.jsx("div",{className:"mini-stat-label",children:"Avg Growth"})]})]})]}),a.jsxs("div",{className:"snapshot-grid",children:[a.jsxs("div",{className:"snapshot-section",children:[a.jsx("h2",{className:"snapshot-section-title",children:"Key Alerts"}),a.jsxs("div",{className:"alerts-grid",children:[a.jsxs("div",{className:"alert-box critical",children:[a.jsx("div",{className:"alert-value",children:u.length}),a.jsx("div",{className:"alert-label",children:"Critical Issues"})]}),a.jsxs("div",{className:"alert-box high",children:[a.jsx("div",{className:"alert-value",children:d.length}),a.jsx("div",{className:"alert-label",children:"High Priority"})]}),a.jsxs("div",{className:"alert-box warning",children:[a.jsx("div",{className:"alert-value",children:_}),a.jsx("div",{className:"alert-label",children:"Low Runway"})]})]})]}),a.jsxs("div",{className:"snapshot-section",children:[a.jsx("h2",{className:"snapshot-section-title",children:"Company Health Distribution"}),a.jsxs("div",{className:"health-distribution-grid",children:[a.jsxs("div",{className:"health-dist-item",children:[a.jsx("div",{className:"health-dist-value healthy",children:x}),a.jsx("div",{className:"health-dist-label",children:"Healthy (80+)"})]}),a.jsxs("div",{className:"health-dist-item",children:[a.jsx("div",{className:"health-dist-value good",children:i.filter(f=>f.healthScore>=60&&f.healthScore<80).length}),a.jsx("div",{className:"health-dist-label",children:"Good (60-79)"})]}),a.jsxs("div",{className:"health-dist-item",children:[a.jsx("div",{className:"health-dist-value warning",children:i.filter(f=>f.healthScore>=40&&f.healthScore<60).length}),a.jsx("div",{className:"health-dist-label",children:"Warning (40-59)"})]}),a.jsxs("div",{className:"health-dist-item",children:[a.jsx("div",{className:"health-dist-value critical",children:w}),a.jsx("div",{className:"health-dist-label",children:"Critical (<40)"})]})]})]}),a.jsxs("div",{className:"snapshot-section full-width",children:[a.jsx("h2",{className:"snapshot-section-title",children:"Highest Impact Issues"}),a.jsx("div",{className:"impact-issues-list",children:p.map((f,N)=>{const j=v(f.companyId);return a.jsxs("div",{className:"impact-issue-item",onClick:()=>j&&n&&n(j),children:[a.jsx("div",{className:"impact-rank",children:N+1}),a.jsxs("div",{className:"impact-issue-content",children:[a.jsxs("div",{className:"impact-issue-header",children:[a.jsx("span",{className:"impact-severity-badge",style:{background:`${m(f.severity)}15`,color:m(f.severity)},children:f.severity.toUpperCase()}),a.jsx("span",{className:"impact-company-name",children:h(f.companyId)}),a.jsxs("span",{className:"impact-score",children:["Impact: ",f.impactScore]})]}),a.jsx("div",{className:"impact-issue-title",children:f.title}),a.jsx("div",{className:"impact-issue-action",children:f.suggestedAction})]})]},f.id)})})]}),a.jsxs("div",{className:"snapshot-section full-width",children:[a.jsx("h2",{className:"snapshot-section-title",children:"Portfolio Companies"}),a.jsx("div",{className:"companies-quick-grid",children:i.map(f=>a.jsxs("div",{className:"company-quick-card",onClick:()=>n&&n(f),children:[a.jsxs("div",{className:"company-quick-header",children:[a.jsx("h3",{className:"company-quick-name",children:f.name}),a.jsx("div",{className:"company-quick-health",style:{color:y(f.healthScore)},children:f.healthScore})]}),a.jsxs("div",{className:"company-quick-metrics",children:[a.jsxs("div",{className:"company-quick-metric",children:[a.jsx("span",{className:"metric-label",children:"ARR:"}),a.jsxs("span",{className:"metric-value",children:["$",(f.arr/1e6).toFixed(2),"M"]})]}),a.jsxs("div",{className:"company-quick-metric",children:[a.jsx("span",{className:"metric-label",children:"Runway:"}),a.jsxs("span",{className:"metric-value",children:[f.runway.toFixed(1),"mo"]})]}),a.jsxs("div",{className:"company-quick-metric",children:[a.jsx("span",{className:"metric-label",children:"Growth:"}),a.jsxs("span",{className:"metric-value",children:[(f.revenueGrowthRate*100).toFixed(0),"%"]})]})]})]},f.id))})]})]})]})}function Dy({rawData:e,onSelectCompany:t}){const[n,r]=L.useState(""),s=ss(e.companies||[],e.rounds||[],e.goals||[],[]),o=(e.companies||[]).map(d=>({...d,healthScore:kl(d,s)})).filter(d=>!d.isPortfolio),l=o.filter(d=>{var g;return n===""||d.name.toLowerCase().includes(n.toLowerCase())||((g=d.sector)==null?void 0:g.toLowerCase().includes(n.toLowerCase()))}),c=d=>d>=80?"#10b981":d>=60?"#3b82f6":d>=40?"#f59e0b":"#ef4444",u=d=>a.jsx("span",{className:"status-badge prospect",children:"Pipeline"});return a.jsxs("div",{className:"companies-list",children:[a.jsx("div",{className:"list-header",children:a.jsx("div",{className:"list-stats",children:a.jsxs("div",{className:"stat-item",children:[a.jsx("span",{className:"stat-value",children:o.length}),a.jsx("span",{className:"stat-label",children:"Pipeline Companies"})]})})}),a.jsx("div",{className:"companies-controls",children:a.jsx("input",{type:"text",placeholder:"Search companies...",className:"search-input",value:n,onChange:d=>r(d.target.value)})}),a.jsx("div",{className:"companies-grid",children:l.map(d=>a.jsxs("div",{className:"company-card",onClick:()=>t(d),children:[a.jsxs("div",{className:"company-card-header",children:[a.jsxs("div",{className:"company-info",children:[a.jsx("h3",{className:"company-name",children:d.name}),a.jsxs("div",{className:"company-meta",children:[a.jsx("span",{className:"company-sector",children:d.sector}),u()]})]}),a.jsx("div",{className:"health-indicator",children:a.jsx("div",{className:"health-circle",style:{borderColor:c(d.healthScore)},children:a.jsx("span",{style:{color:c(d.healthScore)},children:d.healthScore})})})]}),a.jsxs("div",{className:"company-metrics",children:[a.jsxs("div",{className:"metric",children:[a.jsx("div",{className:"metric-label",children:"ARR"}),a.jsxs("div",{className:"metric-value",children:["$",(d.arr/1e6).toFixed(1),"M"]})]}),a.jsxs("div",{className:"metric",children:[a.jsx("div",{className:"metric-label",children:"Burn"}),a.jsxs("div",{className:"metric-value",children:["$",(d.monthlyBurn/1e3).toFixed(0),"K/mo"]})]}),a.jsxs("div",{className:"metric",children:[a.jsx("div",{className:"metric-label",children:"Runway"}),a.jsxs("div",{className:"metric-value",children:[d.runway," mo"]})]}),a.jsxs("div",{className:"metric",children:[a.jsx("div",{className:"metric-label",children:"Growth"}),a.jsxs("div",{className:"metric-value",children:[(d.revenueGrowthRate*100).toFixed(0),"%"]})]})]})]},d.id))}),l.length===0&&a.jsx("div",{className:"empty-state",children:"No pipeline companies found"})]})}function Ly({company:e,rawData:t,onBack:n,onSelectRound:r,onSelectGoal:s}){const i=ss(t.companies||[],t.rounds||[],t.goals||[],[]),o=kl(e,i),l=i.filter(p=>p.companyId===e.id),c=(t.rounds||[]).filter(p=>(p.companyId||p.company_id)===e.id),u=(t.goals||[]).filter(p=>(p.companyId||p.company_id)===e.id),d=p=>p>=80?"#10b981":p>=60?"#3b82f6":p>=40?"#f59e0b":"#ef4444",g=p=>p==="critical"?"#ef4444":p==="high"?"#f59e0b":p==="medium"?"#3b82f6":"#64748b";return a.jsxs("div",{className:"company-detail",children:[a.jsx("button",{className:"back-btn",onClick:n,children:" Back to Companies"}),a.jsxs("div",{className:"detail-header",children:[a.jsxs("div",{className:"detail-title-section",children:[a.jsx("h1",{className:"detail-title",children:e.name}),a.jsxs("div",{className:"detail-badges",children:[a.jsxs("span",{className:"entity-id",children:["ID: ",e.id]}),a.jsx("span",{className:"detail-badge",children:e.sector}),e.isPortfolio&&a.jsx("span",{className:"detail-badge portfolio",children:"Portfolio"})]})]}),a.jsxs("div",{className:"detail-health",children:[a.jsx("div",{className:"detail-health-circle",style:{borderColor:d(o)},children:a.jsx("span",{style:{color:d(o)},children:o})}),a.jsx("div",{className:"detail-health-label",children:"Health Score"})]})]}),a.jsxs("div",{className:"detail-grid",children:[a.jsxs("div",{className:"detail-section",children:[a.jsx("h2",{className:"section-title",children:"Key Metrics"}),a.jsxs("div",{className:"metrics-grid",children:[a.jsxs("div",{className:"metric-box",children:[a.jsx("div",{className:"metric-box-label",children:"Annual Recurring Revenue"}),a.jsxs("div",{className:"metric-box-value",children:["$",(e.arr/1e6).toFixed(2),"M"]})]}),a.jsxs("div",{className:"metric-box",children:[a.jsx("div",{className:"metric-box-label",children:"Monthly Burn"}),a.jsxs("div",{className:"metric-box-value",children:["$",(e.monthlyBurn/1e3).toFixed(0),"K"]})]}),a.jsxs("div",{className:"metric-box",children:[a.jsx("div",{className:"metric-box-label",children:"Runway"}),a.jsxs("div",{className:"metric-box-value",children:[e.runway.toFixed(1)," months"]})]}),a.jsxs("div",{className:"metric-box",children:[a.jsx("div",{className:"metric-box-label",children:"Revenue Growth"}),a.jsxs("div",{className:"metric-box-value",children:[(e.revenueGrowthRate*100).toFixed(1),"%"]})]}),a.jsxs("div",{className:"metric-box",children:[a.jsx("div",{className:"metric-box-label",children:"Gross Margin"}),a.jsxs("div",{className:"metric-box-value",children:[(e.grossMargin*100).toFixed(1),"%"]})]}),a.jsxs("div",{className:"metric-box",children:[a.jsx("div",{className:"metric-box-label",children:"CAC Payback"}),a.jsxs("div",{className:"metric-box-value",children:[e.cacPayback," months"]})]})]})]}),l.length>0&&a.jsxs("div",{className:"detail-section",children:[a.jsxs("h2",{className:"section-title",children:["Active Issues (",l.length,")"]}),a.jsx("div",{className:"issues-list",children:l.map((p,_)=>a.jsxs("div",{className:"issue-item",children:[a.jsxs("div",{className:"issue-header",children:[a.jsx("span",{className:"issue-severity",style:{background:g(p.severity)},children:p.severity}),a.jsx("span",{className:"issue-type",children:p.type})]}),a.jsx("div",{className:"issue-description",children:p.title||p.description}),a.jsx("div",{className:"issue-action",children:p.suggestedAction})]},_))})]}),a.jsxs("div",{className:"detail-section",children:[a.jsxs("h2",{className:"section-title",children:["Funding Rounds (",c.length,")"]}),c.length>0?a.jsx("div",{className:"rounds-list",children:c.map(p=>a.jsxs("div",{className:"round-item clickable",onClick:()=>r&&r(p),children:[a.jsxs("div",{className:"round-info",children:[a.jsx("div",{className:"round-stage",children:p.stage||p.roundType}),a.jsx("div",{className:"round-date",children:new Date(p.closeDate||p.targetCloseDate).toLocaleDateString()})]}),a.jsxs("div",{className:"round-amount",children:["$",((p.amount||p.targetAmount)/1e6).toFixed(2),"M"]})]},p.id))}):a.jsx("div",{className:"empty-state",children:"No funding rounds recorded"})]}),a.jsxs("div",{className:"detail-section",children:[a.jsxs("h2",{className:"section-title",children:["Goals (",u.length,")"]}),u.length>0?a.jsx("div",{className:"goals-list",children:u.map(p=>a.jsxs("div",{className:"goal-item clickable",onClick:()=>s&&s(p),children:[a.jsxs("div",{className:"goal-header",children:[a.jsx("span",{className:"goal-metric",children:p.metric||p.title}),a.jsx("span",{className:`goal-status ${p.isOnTrack?"on-track":"off-track"}`,children:p.isOnTrack?"On Track":"Off Track"})]}),a.jsxs("div",{className:"goal-details",children:[a.jsxs("div",{className:"goal-progress",children:["Current: ",a.jsx("strong",{children:p.currentValue})]}),a.jsxs("div",{className:"goal-target",children:["Target: ",a.jsx("strong",{children:p.targetValue})]}),a.jsxs("div",{className:"goal-deadline",children:["Due: ",new Date(p.deadline||p.targetDate).toLocaleDateString()]})]})]},p.id))}):a.jsx("div",{className:"empty-state",children:"No goals set"})]})]})]})}function Uy({rawData:e,onSelectGoal:t}){const[n,r]=L.useState(""),s=e.goals||[],i=e.companies||[],o=i.filter(y=>y.isPortfolio),l=s.filter(y=>{const m=y.companyId||y.company_id;return o.some(h=>h.id===m)}),c=y=>{const m=y.companyId||y.company_id,h=i.find(v=>v.id===m);return h?h.name:"Unknown"},u=l.filter(y=>{const m=c(y),h=y.metric||y.title||"";return n===""||m.toLowerCase().includes(n.toLowerCase())||h.toLowerCase().includes(n.toLowerCase())}),d=u.filter(y=>y.isOnTrack).length,g=u.filter(y=>!y.isOnTrack).length,p=u.filter(y=>{const v=(new Date(y.deadline||y.targetDate)-new Date)/(1e3*60*60*24);return v<=30&&v>0}).length,_=[...u].sort((y,m)=>y.isOnTrack!==m.isOnTrack?y.isOnTrack?1:-1:new Date(y.deadline||y.targetDate)-new Date(m.deadline||m.targetDate)),x=y=>{const m=parseFloat(y.currentValue),h=parseFloat(y.targetValue);return isNaN(m)||isNaN(h)||h===0?0:Math.min(100,Math.max(0,m/h*100))},w=y=>{const m=y.deadline||y.targetDate,h=new Date,v=new Date(m);return Math.ceil((v-h)/(1e3*60*60*24))};return a.jsxs("div",{className:"goals-list",children:[a.jsx("div",{className:"list-header",children:a.jsxs("div",{className:"list-stats",children:[a.jsxs("div",{className:"stat-item",children:[a.jsx("span",{className:"stat-value",children:u.length}),a.jsx("span",{className:"stat-label",children:"Total Goals"})]}),a.jsxs("div",{className:"stat-item",children:[a.jsx("span",{className:"stat-value on-track",children:d}),a.jsx("span",{className:"stat-label",children:"On Track"})]}),a.jsxs("div",{className:"stat-item",children:[a.jsx("span",{className:"stat-value off-track",children:g}),a.jsx("span",{className:"stat-label",children:"Off Track"})]}),a.jsxs("div",{className:"stat-item",children:[a.jsx("span",{className:"stat-value",children:p}),a.jsx("span",{className:"stat-label",children:"Due Soon"})]})]})}),a.jsx("div",{className:"goals-controls",children:a.jsx("input",{type:"text",placeholder:"Search goals...",className:"search-input",value:n,onChange:y=>r(y.target.value)})}),a.jsx("div",{className:"goals-grid",children:_.map(y=>{var v,f;const m=w(y),h=x(y);return a.jsxs("div",{className:`goal-card ${y.isOnTrack?"":"off-track-card"}`,onClick:()=>t(y),children:[a.jsxs("div",{className:"goal-card-header",children:[a.jsx("div",{className:"goal-company",children:c(y)}),a.jsx("span",{className:`goal-status-badge ${y.isOnTrack?"on-track":"off-track"}`,children:y.isOnTrack?"On Track":"Off Track"})]}),a.jsx("h3",{className:"goal-metric-name",children:y.metric||y.title}),a.jsxs("div",{className:"goal-progress-section",children:[a.jsxs("div",{className:"goal-values",children:[a.jsxs("div",{className:"goal-current",children:[a.jsx("span",{className:"value-label",children:"Current"}),a.jsx("span",{className:"value-number",children:y.metric==="MRR"||(v=y.title)!=null&&v.toLowerCase().includes("mrr")?`$${(parseFloat(y.currentValue)/1e3).toFixed(1)}K`:y.currentValue})]}),a.jsx("div",{className:"goal-arrow",children:""}),a.jsxs("div",{className:"goal-target",children:[a.jsx("span",{className:"value-label",children:"Target"}),a.jsx("span",{className:"value-number",children:y.metric==="MRR"||(f=y.title)!=null&&f.toLowerCase().includes("mrr")?`$${(parseFloat(y.targetValue)/1e3).toFixed(1)}K`:y.targetValue})]})]}),a.jsx("div",{className:"progress-bar",children:a.jsx("div",{className:"progress-fill",style:{width:`${h}%`,background:y.isOnTrack?"#10b981":"#ef4444"}})})]}),a.jsxs("div",{className:"goal-deadline",children:[a.jsx("span",{className:`deadline-text ${m<=30?"urgent":""}`,children:m>0?`${m} days remaining`:`${Math.abs(m)} days overdue`}),a.jsx("span",{className:"deadline-date",children:new Date(y.deadline||y.targetDate).toLocaleDateString()})]})]},y.id)})}),_.length===0&&a.jsx("div",{className:"empty-state",children:"No goals found"})]})}function My({goal:e,rawData:t,onBack:n}){const r=(t.companies||[]).find(u=>u.id===(e.companyId||e.company_id)),s=u=>{const d=(e.metric||e.title||"").toLowerCase(),g=parseFloat(u);return isNaN(g)?u:d.includes("arr")||d.includes("revenue")||d.includes("mrr")?g>=1e6?`$${(g/1e6).toFixed(2)}M`:g>=1e3?`$${(g/1e3).toFixed(0)}K`:`$${g.toLocaleString()}`:d.includes("burn")||d.includes("cost")?g>=1e3?`$${(g/1e3).toFixed(0)}K`:`$${g.toLocaleString()}`:d.includes("customer")||d.includes("user")||d.includes("count")?g.toLocaleString():d.includes("rate")||d.includes("growth")||d.includes("%")?`${g}%`:g.toLocaleString()},i=()=>{const u=parseFloat(e.currentValue),d=parseFloat(e.targetValue);return isNaN(u)||isNaN(d)||d===0?0:Math.min(100,Math.max(0,u/d*100))},o=()=>{const u=e.deadline||e.targetDate,d=new Date,g=new Date(u);return Math.ceil((g-d)/(1e3*60*60*24))},l=i(),c=o();return a.jsxs("div",{className:"goal-detail",children:[a.jsx("button",{className:"back-btn",onClick:n,children:" Back to Goals"}),a.jsx("div",{className:"detail-header",children:a.jsxs("div",{className:"detail-title-section",children:[a.jsx("div",{className:"goal-company-link",children:(r==null?void 0:r.name)||"Unknown Company"}),a.jsx("h1",{className:"detail-title",children:e.metric||e.title}),a.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[a.jsxs("span",{className:"entity-id",children:["ID: ",e.id]}),a.jsx("span",{className:`goal-status-badge-large ${e.isOnTrack?"on-track":"off-track"}`,children:e.isOnTrack?"On Track":"Off Track"})]})]})}),a.jsxs("div",{className:"detail-grid",children:[a.jsxs("div",{className:"detail-section",children:[a.jsx("h2",{className:"section-title",children:"Progress"}),a.jsxs("div",{className:"progress-visualization",children:[a.jsxs("div",{className:"progress-stats",children:[a.jsxs("div",{className:"progress-stat",children:[a.jsx("div",{className:"progress-stat-label",children:"Current Value"}),a.jsx("div",{className:"progress-stat-value current",children:s(e.currentValue)})]}),a.jsxs("div",{className:"progress-stat",children:[a.jsx("div",{className:"progress-stat-label",children:"Target Value"}),a.jsx("div",{className:"progress-stat-value target",children:s(e.targetValue)})]}),a.jsxs("div",{className:"progress-stat",children:[a.jsx("div",{className:"progress-stat-label",children:"Progress"}),a.jsxs("div",{className:"progress-stat-value progress",children:[l.toFixed(1),"%"]})]})]}),a.jsx("div",{className:"progress-bar-large",children:a.jsx("div",{className:"progress-fill-large",style:{width:`${l}%`,background:e.isOnTrack?"#10b981":"#ef4444"}})})]})]}),a.jsxs("div",{className:"detail-section",children:[a.jsx("h2",{className:"section-title",children:"Timeline"}),a.jsxs("div",{className:"timeline-info",children:[a.jsxs("div",{className:"timeline-item",children:[a.jsx("div",{className:"timeline-label",children:"Deadline"}),a.jsx("div",{className:"timeline-value",children:new Date(e.deadline||e.targetDate).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]}),a.jsxs("div",{className:"timeline-item",children:[a.jsx("div",{className:"timeline-label",children:"Days Remaining"}),a.jsx("div",{className:`timeline-value ${c<=30?"urgent":""}`,children:c>0?`${c} days`:`${Math.abs(c)} days overdue`})]}),a.jsxs("div",{className:"timeline-item",children:[a.jsx("div",{className:"timeline-label",children:"Status"}),a.jsx("div",{className:"timeline-value",children:e.isOnTrack?"Trending toward target":"Needs attention"})]})]})]}),r&&a.jsxs("div",{className:"detail-section",children:[a.jsx("h2",{className:"section-title",children:"Company Context"}),a.jsxs("div",{className:"company-context",children:[a.jsxs("div",{className:"context-item",children:[a.jsx("div",{className:"context-label",children:"Company"}),a.jsx("div",{className:"context-value",children:r.name})]}),a.jsxs("div",{className:"context-item",children:[a.jsx("div",{className:"context-label",children:"Sector"}),a.jsx("div",{className:"context-value",children:r.sector})]}),a.jsxs("div",{className:"context-item",children:[a.jsx("div",{className:"context-label",children:"ARR"}),a.jsxs("div",{className:"context-value",children:["$",(r.arr/1e6).toFixed(2),"M"]})]}),a.jsxs("div",{className:"context-item",children:[a.jsx("div",{className:"context-label",children:"Growth Rate"}),a.jsxs("div",{className:"context-value",children:[(r.revenueGrowthRate*100).toFixed(0),"%"]})]}),a.jsxs("div",{className:"context-item",children:[a.jsx("div",{className:"context-label",children:"Runway"}),a.jsxs("div",{className:"context-value",children:[r.runway.toFixed(1)," months"]})]})]})]})]})]})}function ga({rawData:e,onSelectRound:t,pipelineOnly:n=!1,firmPerspective:r=!1,showAllFirms:s=!1}){const[i,o]=L.useState(""),l=e.rounds||[],c=e.companies||[],u=s?c:n?c.filter(m=>!m.isPortfolio):c.filter(m=>m.isPortfolio),d=l.filter(m=>{const h=m.companyId||m.company_id;return u.some(v=>v.id===h)}),g=m=>{const h=m.companyId||m.company_id,v=c.find(f=>f.id===h);return v?v.name:"Unknown"},p=d.filter(m=>{const h=g(m),v=m.stage||m.roundType||"",f=m.leadInvestor||"";return i===""||h.toLowerCase().includes(i.toLowerCase())||v.toLowerCase().includes(i.toLowerCase())||f.toLowerCase().includes(i.toLowerCase())}),_=[...p].sort((m,h)=>new Date(h.closeDate||h.targetCloseDate)-new Date(m.closeDate||m.targetCloseDate)),x=p.reduce((m,h)=>m+(h.amount||h.targetAmount||0),0),w=p.length>0?x/p.length:0,y=m=>{const h=(m||"").toLowerCase().replace(/_/g," ");return{seed:"#10b981","pre seed":"#10b981","series a":"#3b82f6","series b":"#8b5cf6","series c":"#ec4899","series d+":"#f59e0b",bridge:"#f59e0b"}[h]||"#64748b"};return a.jsxs("div",{className:"rounds-list",children:[a.jsx("div",{className:"list-header",children:a.jsxs("div",{className:"list-stats",children:[a.jsxs("div",{className:"stat-item",children:[a.jsx("span",{className:"stat-value",children:p.length}),a.jsx("span",{className:"stat-label",children:"Total Rounds"})]}),a.jsxs("div",{className:"stat-item",children:[a.jsxs("span",{className:"stat-value",children:["$",(x/1e6).toFixed(1),"M"]}),a.jsx("span",{className:"stat-label",children:"Total Raised"})]}),a.jsxs("div",{className:"stat-item",children:[a.jsxs("span",{className:"stat-value",children:["$",(w/1e6).toFixed(1),"M"]}),a.jsx("span",{className:"stat-label",children:"Avg Round"})]})]})}),a.jsx("div",{className:"rounds-controls",children:a.jsx("input",{type:"text",placeholder:"Search rounds...",className:"search-input",value:i,onChange:m=>o(m.target.value)})}),a.jsxs("div",{className:"rounds-table",children:[a.jsxs("div",{className:"rounds-table-header",children:[a.jsx("div",{className:"col-company",children:"Company"}),a.jsx("div",{className:"col-stage",children:"Stage"}),a.jsx("div",{className:"col-amount",children:"Amount"}),a.jsx("div",{className:"col-date",children:"Close Date"}),a.jsx("div",{className:"col-lead",children:"Lead Investor"})]}),a.jsx("div",{className:"rounds-table-body",children:_.map(m=>{const h=m.stage||m.roundType||"Unknown";return a.jsxs("div",{className:"round-row",onClick:()=>t(m),children:[a.jsx("div",{className:"col-company",children:a.jsx("span",{className:"company-name-link",children:g(m)})}),a.jsx("div",{className:"col-stage",children:a.jsx("span",{className:"stage-badge",style:{background:y(h)},children:h})}),a.jsxs("div",{className:"col-amount amount-value",children:["$",((m.amount||m.targetAmount)/1e6).toFixed(2),"M"]}),a.jsx("div",{className:"col-date",children:new Date(m.closeDate||m.targetCloseDate).toLocaleDateString()}),a.jsx("div",{className:"col-lead",children:m.leadInvestor||"TBD"})]},m.id)})})]}),_.length===0&&a.jsx("div",{className:"empty-state",children:"No rounds found"})]})}function Fy({round:e,rawData:t,onBack:n,onSelectCompany:r,onSelectDeal:s,onSelectFirm:i,onSelectPerson:o}){const l=(t.companies||[]).find(x=>x.id===(e.companyId||e.company_id)),c=(t.deals||[]).filter(x=>x.roundId===e.id),u=t.firms||[],d=t.people||[],g=x=>({Seed:"#10b981","Series A":"#3b82f6","Series B":"#8b5cf6","Series C":"#ec4899","Series D+":"#f59e0b"})[x]||"#64748b",p=x=>({initial_contact:"Initial Contact",meeting_scheduled:"Meeting Scheduled",meeting_held:"Meeting Held",diligence:"Due Diligence",term_sheet:"Term Sheet",committed:"Committed",closed:"Closed",passed:"Passed"})[x]||x,_=x=>({initial_contact:"#94a3b8",meeting_scheduled:"#60a5fa",meeting_held:"#3b82f6",diligence:"#8b5cf6",term_sheet:"#a855f7",committed:"#10b981",closed:"#059669",passed:"#64748b"})[x]||"#64748b";return a.jsxs("div",{className:"round-detail",children:[a.jsx("button",{className:"back-btn",onClick:n,children:" Back to Rounds"}),a.jsxs("div",{className:"detail-header",children:[a.jsxs("div",{className:"detail-title-section",children:[a.jsx("h1",{className:"detail-title clickable",onClick:()=>l&&r&&r(l),children:(l==null?void 0:l.name)||"Unknown Company"}),a.jsxs("div",{className:"detail-subtitle",children:[a.jsxs("span",{className:"entity-id",style:{marginRight:"0.5rem"},children:["ID: ",e.id]}),a.jsx("span",{className:"stage-badge-large",style:{background:g(e.stage||e.roundType)},children:e.stage||e.roundType}),a.jsxs("span",{className:"round-date-large",children:["Closed ",new Date(e.closeDate||e.targetCloseDate).toLocaleDateString()]})]})]}),a.jsxs("div",{className:"detail-amount-box",children:[a.jsx("div",{className:"amount-label",children:"Round Size"}),a.jsxs("div",{className:"amount-value-large",children:["$",((e.amount||e.targetAmount)/1e6).toFixed(2),"M"]})]})]}),a.jsxs("div",{className:"detail-grid",children:[a.jsxs("div",{className:"detail-section",children:[a.jsx("h2",{className:"section-title",children:"Round Details"}),a.jsxs("div",{className:"details-grid",children:[a.jsxs("div",{className:"detail-item",children:[a.jsx("div",{className:"detail-item-label",children:"Lead Investor"}),a.jsx("div",{className:"detail-item-value",children:e.leadInvestor||"TBD"})]}),a.jsxs("div",{className:"detail-item",children:[a.jsx("div",{className:"detail-item-label",children:"Stage"}),a.jsx("div",{className:"detail-item-value",children:e.stage||e.roundType})]}),a.jsxs("div",{className:"detail-item",children:[a.jsx("div",{className:"detail-item-label",children:"Amount Raised"}),a.jsxs("div",{className:"detail-item-value",children:["$",((e.amount||e.targetAmount)/1e6).toFixed(2),"M"]})]}),a.jsxs("div",{className:"detail-item",children:[a.jsx("div",{className:"detail-item-label",children:"Close Date"}),a.jsx("div",{className:"detail-item-value",children:new Date(e.closeDate||e.targetCloseDate).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]})]})]}),l&&a.jsxs("div",{className:"detail-section",children:[a.jsx("h2",{className:"section-title",children:"Company Snapshot"}),a.jsxs("div",{className:"company-snapshot",children:[a.jsxs("div",{className:"snapshot-item",children:[a.jsx("div",{className:"snapshot-label",children:"Sector"}),a.jsx("div",{className:"snapshot-value",children:l.sector})]}),a.jsxs("div",{className:"snapshot-item",children:[a.jsx("div",{className:"snapshot-label",children:"ARR at Close"}),a.jsxs("div",{className:"snapshot-value",children:["$",(l.arr/1e6).toFixed(2),"M"]})]}),a.jsxs("div",{className:"snapshot-item",children:[a.jsx("div",{className:"snapshot-label",children:"Growth Rate"}),a.jsxs("div",{className:"snapshot-value",children:[(l.revenueGrowthRate*100).toFixed(0),"%"]})]}),a.jsxs("div",{className:"snapshot-item",children:[a.jsx("div",{className:"snapshot-label",children:"Gross Margin"}),a.jsxs("div",{className:"snapshot-value",children:[(l.grossMargin*100).toFixed(0),"%"]})]}),a.jsxs("div",{className:"snapshot-item",children:[a.jsx("div",{className:"snapshot-label",children:"Monthly Burn"}),a.jsxs("div",{className:"snapshot-value",children:["$",(l.monthlyBurn/1e3).toFixed(0),"K"]})]}),a.jsxs("div",{className:"snapshot-item",children:[a.jsx("div",{className:"snapshot-label",children:"Runway"}),a.jsxs("div",{className:"snapshot-value",children:[l.runway," months"]})]})]})]}),c.length>0&&a.jsxs("div",{className:"detail-section",children:[a.jsxs("h2",{className:"section-title",children:["Associated Deals (",c.length,")"]}),a.jsx("div",{className:"deals-list",children:c.map(x=>{const w=u.find(m=>m.id===x.firmId),y=d.find(m=>m.id===x.personId);return a.jsxs("div",{className:"deal-item clickable",onClick:()=>s&&s(x),children:[a.jsxs("div",{className:"deal-main",children:[a.jsxs("div",{className:"deal-investor",children:[a.jsx("div",{className:"deal-firm-name clickable-text",onClick:m=>{m.stopPropagation(),w&&i&&i(w)},children:(w==null?void 0:w.name)||"Unknown Firm"}),a.jsx("div",{className:"deal-person-name clickable-text",onClick:m=>{m.stopPropagation(),y&&o&&o(y)},children:(y==null?void 0:y.name)||"No contact"})]}),a.jsx("div",{className:"deal-stage-badge",style:{background:_(x.dealStage)},children:p(x.dealStage)})]}),x.amount&&a.jsxs("div",{className:"deal-amount",children:["$",(x.amount/1e6).toFixed(2),"M"]})]},x.id)})})]})]})]})}const Ts=[{key:"identified",label:"Identified",color:"#9ca3af"},{key:"contacted",label:"Contacted",color:"#6b7280"},{key:"meeting_scheduled",label:"Meeting Scheduled",color:"#3b82f6"},{key:"meeting_held",label:"Meeting Held",color:"#3b82f6"},{key:"diligence",label:"Diligence",color:"#8b5cf6"},{key:"term_sheet",label:"Term Sheet",color:"#10b981"},{key:"committed",label:"Committed",color:"#059669"},{key:"closed",label:"Closed",color:"#047857"},{key:"dropped",label:"Dropped",color:"#ef4444"}];function lu({rawData:e,onSelectDeal:t,pipelineOnly:n=!1,showAllFirms:r=!1}){var E,$;const[s,i]=L.useState("list"),[o,l]=L.useState(""),c=e.deals||[],u=e.rounds||[],d=e.companies||[],g=e.people||[],p=e.firms||[],_=c.map(T=>{const D=u.find(Je=>Je.id===T.roundId),oe=d.find(Je=>Je.id===(D==null?void 0:D.companyId)),Ce=g.find(Je=>Je.id===T.personId),dt=p.find(Je=>Je.id===T.firmId);return{...T,companyName:(oe==null?void 0:oe.name)||"Unknown",roundType:(D==null?void 0:D.roundType)||"unknown",investorName:Ce?`${Ce.firstName} ${Ce.lastName}`:"Unknown",firmName:(dt==null?void 0:dt.name)||"Unknown",company:oe,round:D}}),w=(r?_:n?_.filter(T=>{var D;return!((D=T.company)!=null&&D.isPortfolio)}):_.filter(T=>{var D;return(D=T.company)==null?void 0:D.isPortfolio})).filter(T=>o===""||T.companyName.toLowerCase().includes(o.toLowerCase())||T.investorName.toLowerCase().includes(o.toLowerCase())||T.firmName.toLowerCase().includes(o.toLowerCase())||T.roundType.toLowerCase().includes(o.toLowerCase())),y=Ts.map(T=>({...T,count:w.filter(D=>D.dealStage===T.key).length})),m=w.length,v=y.filter(T=>!["closed","dropped"].includes(T.key)).reduce((T,D)=>T+D.count,0),f=((E=y.find(T=>T.key==="closed"))==null?void 0:E.count)||0,N=(($=y.find(T=>T.key==="dropped"))==null?void 0:$.count)||0,j=m>0?(f/m*100).toFixed(1):0,b=[...w.filter(T=>["contacted","meeting_scheduled","meeting_held","diligence","term_sheet","committed"].includes(T.dealStage))].sort((T,D)=>{const oe=Ts.map(Ce=>Ce.key);return oe.indexOf(D.dealStage)-oe.indexOf(T.dealStage)}),k=T=>Ts.find(D=>D.key===T)||Ts[0];return a.jsxs("div",{className:"deals-pipeline",children:[a.jsxs("div",{className:"pipeline-header",children:[a.jsxs("div",{className:"pipeline-stats",children:[a.jsxs("div",{className:"pipeline-stat",children:[a.jsx("span",{className:"stat-value",children:v}),a.jsx("span",{className:"stat-label",children:"Active Deals"})]}),a.jsxs("div",{className:"pipeline-stat",children:[a.jsx("span",{className:"stat-value",style:{color:"#10b981"},children:f}),a.jsx("span",{className:"stat-label",children:"Closed"})]}),a.jsxs("div",{className:"pipeline-stat",children:[a.jsx("span",{className:"stat-value",style:{color:"#ef4444"},children:N}),a.jsx("span",{className:"stat-label",children:"Dropped"})]}),a.jsxs("div",{className:"pipeline-stat",children:[a.jsxs("span",{className:"stat-value",children:[j,"%"]}),a.jsx("span",{className:"stat-label",children:"Conversion"})]})]}),a.jsxs("div",{className:"view-toggle",children:[a.jsx("button",{className:`toggle-btn ${s==="funnel"?"active":""}`,onClick:()=>i("funnel"),children:"Funnel"}),a.jsx("button",{className:`toggle-btn ${s==="list"?"active":""}`,onClick:()=>i("list"),children:"List"})]})]}),a.jsx("div",{className:"deals-controls",children:a.jsx("input",{type:"text",placeholder:"Search deals...",className:"search-input",value:o,onChange:T=>l(T.target.value)})}),s==="funnel"?a.jsx("div",{className:"funnel-view",children:y.map((T,D)=>{const oe=Math.max(...y.map(dt=>dt.count),1),Ce=T.count/oe*100;return a.jsxs("div",{className:"funnel-stage",children:[a.jsxs("div",{className:"stage-label",children:[a.jsx("span",{className:"stage-name",children:T.label}),a.jsx("span",{className:"stage-count",children:T.count})]}),a.jsx("div",{className:"stage-bar-container",children:a.jsx("div",{className:"stage-bar",style:{width:`${Ce}%`,background:T.color}})})]},T.key)})}):a.jsx("div",{className:"deals-list-view",children:b.map(T=>{const D=k(T.dealStage),oe=T.lastContactDate?Math.floor((Date.now()-new Date(T.lastContactDate))/864e5):null;return a.jsxs("div",{className:"deal-card",onClick:()=>t&&t(T),children:[a.jsxs("div",{className:"deal-header",children:[a.jsxs("div",{className:"deal-company",children:[a.jsx("h3",{className:"deal-company-name",children:T.companyName}),a.jsx("span",{className:"deal-round-type",children:T.roundType.replace("_"," ")})]}),a.jsx("span",{className:"deal-stage-badge",style:{background:`${D.color}15`,color:D.color},children:D.label})]}),a.jsxs("div",{className:"deal-details",children:[a.jsxs("div",{className:"deal-investor",children:[a.jsx("span",{className:"detail-label",children:"Investor:"}),a.jsx("span",{className:"detail-value",children:T.investorName})]}),a.jsxs("div",{className:"deal-firm",children:[a.jsx("span",{className:"detail-label",children:"Firm:"}),a.jsx("span",{className:"detail-value",children:T.firmName})]}),T.expectedAmount&&a.jsxs("div",{className:"deal-amount",children:[a.jsx("span",{className:"detail-label",children:"Expected:"}),a.jsxs("span",{className:"detail-value",children:["$",(T.expectedAmount/1e6).toFixed(1),"M"]})]}),oe!==null&&a.jsxs("div",{className:"deal-contact",children:[a.jsx("span",{className:"detail-label",children:"Last Contact:"}),a.jsxs("span",{className:"detail-value",children:[oe,"d ago"]})]})]})]},T.id)})}),w.length===0&&a.jsx("div",{className:"empty-state",children:"No deals found"})]})}const cu=[{key:"identified",label:"Identified",color:"#9ca3af"},{key:"contacted",label:"Contacted",color:"#6b7280"},{key:"meeting_scheduled",label:"Meeting Scheduled",color:"#3b82f6"},{key:"meeting_held",label:"Meeting Held",color:"#3b82f6"},{key:"diligence",label:"Diligence",color:"#8b5cf6"},{key:"term_sheet",label:"Term Sheet",color:"#10b981"},{key:"committed",label:"Committed",color:"#059669"},{key:"closed",label:"Closed",color:"#047857"},{key:"dropped",label:"Dropped",color:"#ef4444"}];function zy({deal:e,rawData:t,onBack:n,onSelectCompany:r,onSelectPerson:s,onSelectFirm:i,onSelectRound:o}){var x,w;const l=(t.rounds||[]).find(y=>y.id===e.roundId),c=(t.companies||[]).find(y=>y.id===(l==null?void 0:l.companyId)),u=(t.people||[]).find(y=>y.id===e.personId),d=(t.firms||[]).find(y=>y.id===e.firmId),g=e.introducedById?(t.people||[]).find(y=>y.id===e.introducedById):null,p=cu.find(y=>y.key===e.dealStage)||cu[0],_=e.lastContactDate?Math.floor((Date.now()-new Date(e.lastContactDate))/864e5):null;return a.jsxs("div",{className:"deal-detail",children:[a.jsx("button",{className:"back-btn",onClick:n,children:" Back to Deals"}),a.jsxs("div",{className:"detail-header",children:[a.jsxs("div",{className:"detail-title-section",children:[a.jsx("h1",{className:"detail-title clickable",onClick:()=>c&&r&&r(c),children:(c==null?void 0:c.name)||"Unknown Company"}),a.jsxs("div",{className:"detail-subtitle",children:[a.jsxs("span",{className:"entity-id",style:{marginRight:"0.5rem"},children:["ID: ",e.id]}),a.jsx("span",{className:"round-type-badge clickable",onClick:y=>{y.stopPropagation(),l&&o&&o(l)},children:((x=l==null?void 0:l.roundType)==null?void 0:x.replace("_"," "))||"Unknown Round"}),a.jsx("span",{className:"deal-stage-badge-large",style:{background:`${p.color}15`,color:p.color},children:p.label})]})]}),e.expectedAmount&&a.jsxs("div",{className:"detail-amount-box",children:[a.jsx("div",{className:"amount-label",children:"Expected Investment"}),a.jsxs("div",{className:"amount-value-large",children:["$",(e.expectedAmount/1e6).toFixed(2),"M"]})]})]}),a.jsxs("div",{className:"detail-grid",children:[a.jsxs("div",{className:"detail-section",children:[a.jsx("h2",{className:"section-title",children:"Investor Details"}),u&&a.jsxs("div",{className:"investor-details-box",children:[a.jsxs("div",{className:"detail-row",children:[a.jsx("div",{className:"detail-row-label",children:"Name"}),a.jsxs("div",{className:"detail-row-value clickable",onClick:()=>s&&s(u),children:[u.firstName," ",u.lastName]})]}),a.jsxs("div",{className:"detail-row",children:[a.jsx("div",{className:"detail-row-label",children:"Title"}),a.jsx("div",{className:"detail-row-value",children:u.title})]}),a.jsxs("div",{className:"detail-row",children:[a.jsx("div",{className:"detail-row-label",children:"Email"}),a.jsx("div",{className:"detail-row-value",children:u.email})]}),d&&a.jsxs("div",{className:"detail-row",children:[a.jsx("div",{className:"detail-row-label",children:"Firm"}),a.jsx("div",{className:"detail-row-value clickable",onClick:()=>i&&i(d),children:d.name})]})]})]}),a.jsxs("div",{className:"detail-section",children:[a.jsx("h2",{className:"section-title",children:"Deal Status"}),a.jsxs("div",{className:"status-details-box",children:[a.jsxs("div",{className:"detail-row",children:[a.jsx("div",{className:"detail-row-label",children:"Current Stage"}),a.jsx("div",{className:"detail-row-value",children:a.jsx("span",{style:{color:p.color},children:p.label})})]}),_!==null&&a.jsxs("div",{className:"detail-row",children:[a.jsx("div",{className:"detail-row-label",children:"Last Contact"}),a.jsxs("div",{className:"detail-row-value",children:[_," days ago"]})]}),e.isLead!==void 0&&a.jsxs("div",{className:"detail-row",children:[a.jsx("div",{className:"detail-row-label",children:"Lead Investor"}),a.jsx("div",{className:"detail-row-value",children:e.isLead?"Yes":"No"})]}),g&&a.jsxs("div",{className:"detail-row",children:[a.jsx("div",{className:"detail-row-label",children:"Introduced By"}),a.jsxs("div",{className:"detail-row-value clickable",onClick:()=>s&&s(g),children:[g.firstName," ",g.lastName]})]})]})]}),c&&a.jsxs("div",{className:"detail-section",children:[a.jsx("h2",{className:"section-title",children:"Company Snapshot"}),a.jsxs("div",{className:"company-snapshot-grid",children:[a.jsxs("div",{className:"snapshot-stat",children:[a.jsx("div",{className:"snapshot-stat-label",children:"Sector"}),a.jsx("div",{className:"snapshot-stat-value",children:c.sector})]}),a.jsxs("div",{className:"snapshot-stat",children:[a.jsx("div",{className:"snapshot-stat-label",children:"ARR"}),a.jsxs("div",{className:"snapshot-stat-value",children:["$",(c.arr/1e6).toFixed(2),"M"]})]}),a.jsxs("div",{className:"snapshot-stat",children:[a.jsx("div",{className:"snapshot-stat-label",children:"Growth Rate"}),a.jsxs("div",{className:"snapshot-stat-value",children:[(c.revenueGrowthRate*100).toFixed(0),"%"]})]}),a.jsxs("div",{className:"snapshot-stat",children:[a.jsx("div",{className:"snapshot-stat-label",children:"Runway"}),a.jsxs("div",{className:"snapshot-stat-value",children:[c.runway.toFixed(1)," months"]})]})]})]}),l&&a.jsxs("div",{className:"detail-section",children:[a.jsx("h2",{className:"section-title",children:"Round Information"}),a.jsxs("div",{className:"round-info-box",children:[a.jsxs("div",{className:"detail-row",children:[a.jsx("div",{className:"detail-row-label",children:"Round Type"}),a.jsx("div",{className:"detail-row-value",children:(w=l.roundType)==null?void 0:w.replace("_"," ")})]}),a.jsxs("div",{className:"detail-row",children:[a.jsx("div",{className:"detail-row-label",children:"Target Amount"}),a.jsxs("div",{className:"detail-row-value",children:["$",((l.targetAmount||l.amount)/1e6).toFixed(2),"M"]})]}),a.jsxs("div",{className:"detail-row",children:[a.jsx("div",{className:"detail-row-label",children:"Target Close Date"}),a.jsx("div",{className:"detail-row-value",children:new Date(l.targetCloseDate||l.closeDate).toLocaleDateString()})]}),l.leadInvestor&&a.jsxs("div",{className:"detail-row",children:[a.jsx("div",{className:"detail-row-label",children:"Lead Investor"}),a.jsx("div",{className:"detail-row-value",children:l.leadInvestor})]})]})]})]})]})}const uu={vc:"Venture Capital",angel_syndicate:"Angel Syndicate",family_office:"Family Office",corporate_vc:"Corporate VC",accelerator:"Accelerator"};function du({rawData:e,onSelectFirm:t,portfolioInvestorsOnly:n=!1}){const[r,s]=L.useState(""),i=e.firms||[],o=e.people||[],l=e.deals||[],c=e.companies||[],u=e.rounds||[],d=c.filter(h=>h.isPortfolio),g=u.filter(h=>{const v=h.companyId||h.company_id;return d.some(f=>f.id===v)}),p=l.filter(h=>g.some(v=>v.id===h.roundId)),_=i.map(h=>{const v=o.filter($=>$.firmId===h.id),f=p.filter($=>$.firmId===h.id),N=f.filter($=>["meeting_scheduled","meeting_held","diligence","term_sheet","committed"].includes($.dealStage)),j=new Set(f.map($=>{const T=g.find(D=>D.id===$.roundId);return T?T.companyId||T.company_id:null}).filter(Boolean)),S=f.reduce(($,T)=>$+(T.committedAmount||0),0),b=j.size>0,k=N.length>0,E=b||k;return{...h,investorCount:v.length,portfolioCompanies:j.size,totalInvestedAmount:S,activeDeals:N.length,isExistingInvestor:b,isPortfolioRelevant:E}}),y=[...(n?_.filter(h=>h.isPortfolioRelevant):_).filter(h=>{var v;return r===""||h.name.toLowerCase().includes(r.toLowerCase())||((v=uu[h.firmType])==null?void 0:v.toLowerCase().includes(r.toLowerCase()))})].sort((h,v)=>v.activeDeals-h.activeDeals),m=h=>h>=1e6?`$${(h/1e6).toFixed(1)}M`:h>=1e3?`$${(h/1e3).toFixed(0)}k`:`$${h}`;return a.jsxs("div",{className:"firms-list",children:[a.jsx("div",{className:"firms-controls",children:a.jsx("input",{type:"text",placeholder:"Search firms...",className:"search-input",value:r,onChange:h=>s(h.target.value)})}),a.jsx("div",{className:"firms-grid",children:y.map(h=>a.jsxs("div",{className:`firm-card ${h.isExistingInvestor?"existing-investor":""}`,onClick:()=>t&&t(h),children:[a.jsxs("div",{className:"firm-header",children:[a.jsxs("div",{className:"firm-name-section",children:[a.jsx("h3",{className:"firm-name",children:h.name}),h.isExistingInvestor&&a.jsx("span",{className:"existing-badge",children:"Portfolio Investor"})]}),a.jsx("span",{className:"firm-type-badge",children:uu[h.firmType]||h.firmType})]}),a.jsxs("div",{className:"firm-metrics",children:[a.jsxs("div",{className:"firm-metric",children:[a.jsx("span",{className:"metric-label",children:"Check Size"}),a.jsxs("span",{className:"metric-value",children:[m(h.typicalCheckMin)," - ",m(h.typicalCheckMax)]})]}),a.jsxs("div",{className:"firm-metric",children:[a.jsx("span",{className:"metric-label",children:"Partners"}),a.jsx("span",{className:"metric-value",children:h.investorCount})]})]}),a.jsxs("div",{className:"firm-portfolio-summary",children:[a.jsx("div",{className:"portfolio-stat-label",children:"Portfolio Investments"}),a.jsxs("div",{className:"firm-activity",children:[a.jsxs("div",{className:"activity-stat",children:[a.jsx("span",{className:"activity-value companies",children:h.portfolioCompanies}),a.jsx("span",{className:"activity-label",children:"Companies"})]}),a.jsxs("div",{className:"activity-stat",children:[a.jsx("span",{className:"activity-value amount",children:m(h.totalInvestedAmount)}),a.jsx("span",{className:"activity-label",children:"Invested"})]}),a.jsxs("div",{className:"activity-stat",children:[a.jsx("span",{className:"activity-value active",children:h.activeDeals}),a.jsx("span",{className:"activity-label",children:"Active Deals"})]})]})]})]},h.id))}),y.length===0&&a.jsx("div",{className:"empty-state",children:"No firms found"})]})}const hu={vc:"Venture Capital",angel_syndicate:"Angel Syndicate",family_office:"Family Office",corporate_vc:"Corporate VC",accelerator:"Accelerator"};function By({firm:e,rawData:t,onBack:n,onSelectPerson:r,onSelectDeal:s,onSelectCompany:i}){const[o,l]=L.useState(""),c=(t.people||[]).filter(f=>f.firmId===e.id),u=(t.deals||[]).filter(f=>f.firmId===e.id),d=t.rounds||[],g=t.companies||[],p=u.map(f=>{const N=d.find(b=>b.id===f.roundId),j=g.find(b=>b.id===(N==null?void 0:N.companyId)),S=c.find(b=>b.id===f.personId);return{...f,round:N,company:j,person:S}}),_=p.filter(f=>["meeting_scheduled","meeting_held","diligence","term_sheet","committed"].includes(f.dealStage)),x=p.filter(f=>f.dealStage==="closed"),w=p.filter(f=>f.dealStage==="passed"),y=x.reduce((f,N)=>f+(N.amount||0),0),m=f=>f?f>=1e6?`$${(f/1e6).toFixed(1)}M`:`$${(f/1e3).toFixed(0)}K`:"N/A",h=f=>({initial_contact:"Initial Contact",meeting_scheduled:"Meeting Scheduled",meeting_held:"Meeting Held",diligence:"Due Diligence",term_sheet:"Term Sheet",committed:"Committed",closed:"Closed",passed:"Passed"})[f]||f,v=f=>({initial_contact:"#94a3b8",meeting_scheduled:"#60a5fa",meeting_held:"#3b82f6",diligence:"#8b5cf6",term_sheet:"#a855f7",committed:"#10b981",closed:"#059669",passed:"#64748b"})[f]||"#64748b";return a.jsxs("div",{className:"firm-detail",children:[a.jsx("button",{className:"back-btn",onClick:n,children:" Back to Firms"}),a.jsxs("div",{className:"detail-header",children:[a.jsxs("div",{className:"detail-title-section",children:[a.jsx("h1",{className:"detail-title",children:e.name}),a.jsxs("div",{className:"firm-badges",children:[a.jsxs("span",{className:"entity-id",style:{marginRight:"0.5rem"},children:["ID: ",e.id]}),a.jsx("span",{className:"firm-type-badge-large",children:hu[e.firmType]||e.firmType})]})]}),a.jsxs("div",{className:"detail-amount-box",children:[a.jsx("div",{className:"amount-label",children:"Total Invested"}),a.jsx("div",{className:"amount-value-large",children:m(y)})]})]}),a.jsxs("div",{className:"detail-grid",children:[a.jsxs("div",{className:"detail-section",children:[a.jsx("h2",{className:"section-title",children:"Firm Details"}),a.jsxs("div",{className:"details-grid",children:[a.jsxs("div",{className:"detail-item",children:[a.jsx("div",{className:"detail-item-label",children:"Type"}),a.jsx("div",{className:"detail-item-value",children:hu[e.firmType]||e.firmType})]}),a.jsxs("div",{className:"detail-item",children:[a.jsx("div",{className:"detail-item-label",children:"Typical Check Size"}),a.jsxs("div",{className:"detail-item-value",children:[m(e.typicalCheckMin)," - ",m(e.typicalCheckMax)]})]}),a.jsxs("div",{className:"detail-item",children:[a.jsx("div",{className:"detail-item-label",children:"Stage Focus"}),a.jsx("div",{className:"detail-item-value",children:e.stageFocus||"N/A"})]}),a.jsxs("div",{className:"detail-item",children:[a.jsx("div",{className:"detail-item-label",children:"People"}),a.jsx("div",{className:"detail-item-value",children:c.length})]})]})]}),a.jsxs("div",{className:"detail-section",children:[a.jsx("h2",{className:"section-title",children:"Deal Activity"}),a.jsxs("div",{className:"activity-stats",children:[a.jsxs("div",{className:"activity-stat-box",children:[a.jsx("div",{className:"activity-stat-value",children:_.length}),a.jsx("div",{className:"activity-stat-label",children:"Active Deals"})]}),a.jsxs("div",{className:"activity-stat-box",children:[a.jsx("div",{className:"activity-stat-value",children:x.length}),a.jsx("div",{className:"activity-stat-label",children:"Closed Deals"})]}),a.jsxs("div",{className:"activity-stat-box",children:[a.jsx("div",{className:"activity-stat-value",children:w.length}),a.jsx("div",{className:"activity-stat-label",children:"Passed"})]})]})]}),c.length>0&&a.jsxs("div",{className:"detail-section",children:[a.jsxs("h2",{className:"section-title",children:["People (",c.length,")"]}),a.jsx("input",{type:"text",placeholder:"",className:"search-input",value:o,onChange:f=>l(f.target.value),style:{marginBottom:"1rem",width:"100%"}}),a.jsx("div",{className:"people-list",children:c.filter(f=>{if(!o)return!0;const N=`${f.firstName} ${f.lastName}`.toLowerCase(),j=(f.title||"").toLowerCase(),S=o.toLowerCase();return N.includes(S)||j.includes(S)}).map(f=>a.jsxs("div",{className:"person-item clickable",onClick:()=>r&&r(f),children:[a.jsxs("div",{className:"person-name",children:[f.firstName," ",f.lastName]}),a.jsx("div",{className:"person-title",children:f.title})]},f.id))})]}),p.length>0&&a.jsxs("div",{className:"detail-section",children:[a.jsxs("h2",{className:"section-title",children:["Deals (",p.length,")"]}),a.jsx("div",{className:"deals-list",children:p.map(f=>{var N,j,S;return a.jsxs("div",{className:"deal-item clickable",onClick:()=>s&&s(f),children:[a.jsxs("div",{className:"deal-main",children:[a.jsxs("div",{className:"deal-info",children:[a.jsx("div",{className:"deal-company-name clickable-text",onClick:b=>{b.stopPropagation(),f.company&&i&&i(f.company)},children:((N=f.company)==null?void 0:N.name)||"Unknown"}),a.jsxs("div",{className:"deal-person-name clickable-text",onClick:b=>{b.stopPropagation(),f.person&&r&&r(f.person)},children:[(j=f.person)==null?void 0:j.firstName," ",(S=f.person)==null?void 0:S.lastName]})]}),a.jsx("div",{className:"deal-stage-badge",style:{background:v(f.dealStage)},children:h(f.dealStage)})]}),f.amount&&a.jsx("div",{className:"deal-amount",children:m(f.amount)})]},f.id)})})]})]})]})}const fu={founder:"Founder",investor:"Investor",operator:"Operator",advisor:"Advisor",employee:"Employee"};function ya({rawData:e,onSelectPerson:t,filterToInvestors:n=!1,showAllFirms:r=!1}){const[s,i]=L.useState(""),o=n?(e.people||[]).filter(f=>f.role==="investor"):e.people||[],l=e.firms||[],c=e.deals||[],u=e.companies||[],d=e.rounds||[],g=u.filter(f=>f.isPortfolio),p=d.filter(f=>{const N=f.companyId||f.company_id;return g.some(j=>j.id===N)}),_=c.filter(f=>p.some(N=>N.id===f.roundId)),x=new Set(_.map(f=>f.firmId).filter(Boolean)),h=[...(r?o:o.filter(f=>!f.firmId||x.has(f.firmId))).map(f=>{const N=l.find(k=>k.id===f.firmId),j=_.filter(k=>k.personId===f.id),S=j.filter(k=>["meeting_scheduled","meeting_held","diligence","term_sheet","committed"].includes(k.dealStage)),b=f.lastContactedAt?Math.floor((Date.now()-new Date(f.lastContactedAt))/864e5):null;return{...f,firmName:(N==null?void 0:N.name)||null,totalDeals:j.length,activeDeals:S.length,daysSinceContact:b}}).filter(f=>{var N;return s===""||`${f.firstName} ${f.lastName}`.toLowerCase().includes(s.toLowerCase())||f.email.toLowerCase().includes(s.toLowerCase())||f.firmName&&f.firmName.toLowerCase().includes(s.toLowerCase())||((N=fu[f.role])==null?void 0:N.toLowerCase().includes(s.toLowerCase()))})].sort((f,N)=>f.role==="investor"&&N.role==="investor"?N.activeDeals-f.activeDeals:(f.daysSinceContact||999)-(N.daysSinceContact||999)),v=f=>f===null?{label:"Never",color:"#9ca3af"}:f<7?{label:`${f}d ago`,color:"#10b981"}:f<30?{label:`${f}d ago`,color:"#3b82f6"}:f<90?{label:`${f}d ago`,color:"#f59e0b"}:{label:`${f}d ago`,color:"#ef4444"};return a.jsxs("div",{className:"people-list",children:[a.jsx("div",{className:"people-controls",children:a.jsx("input",{type:"text",placeholder:"Search people...",className:"search-input",value:s,onChange:f=>i(f.target.value)})}),a.jsx("div",{className:"people-grid",children:h.map(f=>{const N=v(f.daysSinceContact);return a.jsxs("div",{className:"person-card",onClick:()=>t&&t(f),children:[a.jsx("div",{className:"person-header",children:a.jsxs("div",{className:"person-info",children:[a.jsxs("h3",{className:"person-name",children:[f.firstName," ",f.lastName]}),a.jsx("p",{className:"person-title",children:f.title})]})}),a.jsxs("div",{className:"person-meta",children:[a.jsx("span",{className:"role-badge",children:fu[f.role]}),f.firmName&&a.jsx("span",{className:"firm-badge",children:f.firmName})]}),a.jsx("div",{className:"person-contact",children:a.jsx("span",{className:"contact-email",children:f.email})}),a.jsxs("div",{className:"person-stats",children:[f.role==="investor"&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"stat",children:[a.jsx("span",{className:"stat-value",children:f.activeDeals}),a.jsx("span",{className:"stat-label",children:"Active"})]}),a.jsxs("div",{className:"stat",children:[a.jsx("span",{className:"stat-value",children:f.totalDeals}),a.jsx("span",{className:"stat-label",children:"Total"})]})]}),a.jsxs("div",{className:"stat",children:[a.jsx("span",{className:"stat-value",style:{color:N.color},children:N.label}),a.jsx("span",{className:"stat-label",children:"Last Contact"})]})]})]},f.id)})}),h.length===0&&a.jsx("div",{className:"empty-state",children:"No people found"})]})}const mu={founder:"Founder",investor:"Investor",operator:"Operator",advisor:"Advisor",employee:"Employee"},Vy=[{key:"identified",label:"Identified"},{key:"contacted",label:"Contacted"},{key:"meeting_scheduled",label:"Meeting Scheduled"},{key:"meeting_held",label:"Meeting Held"},{key:"diligence",label:"Diligence"},{key:"term_sheet",label:"Term Sheet"},{key:"committed",label:"Committed"},{key:"closed",label:"Closed"},{key:"dropped",label:"Dropped"}];function Wy({person:e,rawData:t,onBack:n,onSelectFirm:r,onSelectDeal:s,onSelectCompany:i,onSelectRound:o}){const l=(t.firms||[]).find(v=>v.id===e.firmId),c=(t.deals||[]).filter(v=>v.personId===e.id),u=t.rounds||[],d=t.companies||[],g=c.map(v=>{const f=u.find(S=>S.id===v.roundId),N=d.find(S=>S.id===(f==null?void 0:f.companyId)),j=Vy.find(S=>S.key===v.dealStage);return{...v,round:f,company:N,stageLabel:(j==null?void 0:j.label)||"Unknown"}}),p=g.filter(v=>["meeting_scheduled","meeting_held","diligence","term_sheet","committed"].includes(v.dealStage)),_=g.filter(v=>v.dealStage==="closed"),x=g.filter(v=>v.dealStage==="dropped"),w=(t.deals||[]).filter(v=>v.introducedById===e.id),y=e.lastContactedAt?Math.floor((Date.now()-new Date(e.lastContactedAt))/864e5):null,h=(v=>v===null?{label:"Never",color:"#9ca3af"}:v<7?{color:"#10b981"}:v<30?{color:"#3b82f6"}:v<90?{color:"#f59e0b"}:{color:"#ef4444"})(y);return a.jsxs("div",{className:"person-detail",children:[a.jsx("button",{className:"back-btn",onClick:n,children:" Back to People"}),a.jsx("div",{className:"detail-header",children:a.jsxs("div",{className:"detail-title-section",children:[a.jsxs("h1",{className:"detail-title",children:[e.firstName," ",e.lastName]}),a.jsxs("div",{className:"detail-subtitle",children:[a.jsxs("span",{className:"entity-id",style:{marginRight:"0.5rem"},children:["ID: ",e.id]}),a.jsx("span",{className:"person-title-text",children:e.title}),l&&a.jsx("span",{className:"person-firm-link clickable",onClick:v=>{v.stopPropagation(),r&&r(l)},children:l.name})]}),a.jsxs("div",{className:"person-badges",children:[a.jsx("span",{className:"role-badge-large",children:mu[e.role]}),y!==null&&a.jsxs("span",{className:"contact-badge",style:{color:h.color},children:["Last contact: ",y,"d ago"]})]})]})}),a.jsxs("div",{className:"detail-grid",children:[a.jsxs("div",{className:"detail-section",children:[a.jsx("h2",{className:"section-title",children:"Contact Information"}),a.jsxs("div",{className:"contact-info-box",children:[a.jsxs("div",{className:"detail-row",children:[a.jsx("div",{className:"detail-row-label",children:"Email"}),a.jsx("div",{className:"detail-row-value",children:e.email})]}),a.jsxs("div",{className:"detail-row",children:[a.jsx("div",{className:"detail-row-label",children:"Role"}),a.jsx("div",{className:"detail-row-value",children:mu[e.role]})]}),l&&a.jsxs("div",{className:"detail-row",children:[a.jsx("div",{className:"detail-row-label",children:"Firm"}),a.jsx("div",{className:"detail-row-value",children:l.name})]}),e.linkedinUrl&&a.jsxs("div",{className:"detail-row",children:[a.jsx("div",{className:"detail-row-label",children:"LinkedIn"}),a.jsx("div",{className:"detail-row-value",children:a.jsx("a",{href:e.linkedinUrl,target:"_blank",rel:"noopener noreferrer",className:"external-link",children:"View Profile"})})]})]})]}),a.jsxs("div",{className:"detail-section",children:[a.jsx("h2",{className:"section-title",children:"Activity Summary"}),a.jsxs("div",{className:"activity-stats-grid",children:[a.jsxs("div",{className:"activity-stat-box",children:[a.jsx("div",{className:"activity-stat-value",children:p.length}),a.jsx("div",{className:"activity-stat-label",children:"Active Deals"})]}),a.jsxs("div",{className:"activity-stat-box",children:[a.jsx("div",{className:"activity-stat-value",children:_.length}),a.jsx("div",{className:"activity-stat-label",children:"Closed"})]}),a.jsxs("div",{className:"activity-stat-box",children:[a.jsx("div",{className:"activity-stat-value",children:x.length}),a.jsx("div",{className:"activity-stat-label",children:"Dropped"})]}),a.jsxs("div",{className:"activity-stat-box",children:[a.jsx("div",{className:"activity-stat-value",children:w.length}),a.jsx("div",{className:"activity-stat-label",children:"Intros Made"})]})]})]}),g.length>0&&a.jsxs("div",{className:"detail-section full-width",children:[a.jsxs("h2",{className:"section-title",children:["Deal History (",g.length,")"]}),a.jsx("div",{className:"deals-history-list",children:g.map(v=>{var f,N,j;return a.jsxs("div",{className:"deal-history-item clickable",onClick:()=>s&&s(v),children:[a.jsxs("div",{className:"deal-history-header",children:[a.jsx("div",{className:"deal-history-company clickable-text",onClick:S=>{S.stopPropagation(),v.company&&i&&i(v.company)},children:((f=v.company)==null?void 0:f.name)||"Unknown"}),a.jsx("span",{className:"deal-history-stage",children:v.stageLabel})]}),a.jsxs("div",{className:"deal-history-meta",children:[a.jsx("span",{className:"clickable-text",onClick:S=>{S.stopPropagation(),v.round&&o&&o(v.round)},children:((j=(N=v.round)==null?void 0:N.roundType)==null?void 0:j.replace("_"," "))||"Unknown Round"}),v.expectedAmount&&a.jsxs("span",{children:["$",(v.expectedAmount/1e6).toFixed(1),"M"]})]})]},v.id)})})]}),w.length>0&&a.jsxs("div",{className:"detail-section full-width",children:[a.jsxs("h2",{className:"section-title",children:["Introductions Made (",w.length,")"]}),a.jsx("div",{className:"intros-list",children:w.map(v=>{const f=u.find(S=>S.id===v.round_id),N=d.find(S=>S.id===(f==null?void 0:f.company_id)),j=(t.people||[]).find(S=>S.id===v.person_id);return a.jsxs("div",{className:"intro-item",children:[a.jsx("div",{className:"intro-company",children:(N==null?void 0:N.name)||"Unknown"}),a.jsx("div",{className:"intro-arrow",children:""}),a.jsx("div",{className:"intro-investor",children:j?`${j.firstName} ${j.lastName}`:"Unknown"})]},v.id)})})]})]})]})}function Hy({rawData:e,onSelectRelationship:t}){L.useState(null);const n=e.companies||[],r=e.people||[],s=e.firms||[],i=e.deals||[],o=e.rounds||[],u=(()=>{const y=[];return i.forEach(m=>{const h=o.find(j=>j.id===m.roundId),v=n.find(j=>j.id===(h==null?void 0:h.companyId)),f=r.find(j=>j.id===m.personId),N=s.find(j=>j.id===m.firmId);v&&f&&N&&y.push({id:m.id,type:"deal",company:v,person:f,firm:N,dealStage:m.dealStage,introducedBy:m.introducedById?r.find(j=>j.id===m.introducedById):null})}),y})().filter(y=>y.company.isPortfolio),d={};u.forEach(y=>{d[y.company.id]||(d[y.company.id]={company:y.company,firms:new Set,investors:new Set,introSources:new Set}),d[y.company.id].firms.add(y.firm.name),d[y.company.id].investors.add(`${y.person.firstName} ${y.person.lastName}`),y.introducedBy&&d[y.company.id].introSources.add(`${y.introducedBy.firstName} ${y.introducedBy.lastName}`)});const g=Object.values(d).map(y=>({company:y.company,firmCount:y.firms.size,investorCount:y.investors.size,introSourceCount:y.introSources.size})).sort((y,m)=>m.investorCount-y.investorCount),p={};u.forEach(y=>{const m=`${y.person.firstName} ${y.person.lastName}`;p[m]||(p[m]={person:y.person,firm:y.firm,companies:new Set,activeDeals:0}),p[m].companies.add(y.company.name),["meeting_scheduled","meeting_held","diligence","term_sheet","committed"].includes(y.dealStage)&&p[m].activeDeals++});const _=Object.values(p).map(y=>({...y,companyCount:y.companies.size})).sort((y,m)=>m.activeDeals-y.activeDeals).slice(0,15),x={};u.forEach(y=>{if(y.introducedBy){const m=`${y.introducedBy.firstName} ${y.introducedBy.lastName}`;x[m]||(x[m]={person:y.introducedBy,introCount:0,companies:new Set,firms:new Set}),x[m].introCount++,x[m].companies.add(y.company.name),x[m].firms.add(y.firm.name)}});const w=Object.values(x).sort((y,m)=>m.introCount-y.introCount).slice(0,10);return a.jsxs("div",{className:"relationships-view",children:[a.jsxs("div",{className:"relationships-header",children:[a.jsxs("div",{className:"header-stat",children:[a.jsx("span",{className:"stat-value",children:u.length}),a.jsx("span",{className:"stat-label",children:"Total Relationships"})]}),a.jsxs("div",{className:"header-stat",children:[a.jsx("span",{className:"stat-value",children:g.length}),a.jsx("span",{className:"stat-label",children:"Connected Companies"})]}),a.jsxs("div",{className:"header-stat",children:[a.jsx("span",{className:"stat-value",children:_.length}),a.jsx("span",{className:"stat-label",children:"Active Investors"})]}),a.jsxs("div",{className:"header-stat",children:[a.jsx("span",{className:"stat-value",children:w.length}),a.jsx("span",{className:"stat-label",children:"Intro Sources"})]})]}),a.jsxs("div",{className:"relationships-sections",children:[a.jsxs("section",{className:"relationships-section",children:[a.jsx("h2",{className:"section-title",children:"Company Network Strength"}),a.jsx("div",{className:"network-grid",children:g.map(y=>{const m=u.find(h=>h.company.id===y.company.id);return a.jsxs("div",{className:"network-card",onClick:()=>m&&t&&t(m),children:[a.jsx("h3",{className:"network-company-name",children:y.company.name}),a.jsxs("div",{className:"network-stats",children:[a.jsxs("div",{className:"network-stat",children:[a.jsx("span",{className:"network-stat-value",children:y.investorCount}),a.jsx("span",{className:"network-stat-label",children:"Investors"})]}),a.jsxs("div",{className:"network-stat",children:[a.jsx("span",{className:"network-stat-value",children:y.firmCount}),a.jsx("span",{className:"network-stat-label",children:"Firms"})]}),a.jsxs("div",{className:"network-stat",children:[a.jsx("span",{className:"network-stat-value",children:y.introSourceCount}),a.jsx("span",{className:"network-stat-label",children:"Intros"})]})]})]},y.company.id)})})]}),a.jsxs("section",{className:"relationships-section",children:[a.jsx("h2",{className:"section-title",children:"Most Active Investors"}),a.jsx("div",{className:"investors-list",children:_.map((y,m)=>a.jsxs("div",{className:"investor-row",children:[a.jsx("div",{className:"investor-rank",children:m+1}),a.jsxs("div",{className:"investor-info",children:[a.jsxs("div",{className:"investor-name",children:[y.person.firstName," ",y.person.lastName]}),a.jsx("div",{className:"investor-firm",children:y.firm.name})]}),a.jsxs("div",{className:"investor-stats",children:[a.jsxs("div",{className:"investor-stat",children:[a.jsx("span",{className:"investor-stat-value active",children:y.activeDeals}),a.jsx("span",{className:"investor-stat-label",children:"Active"})]}),a.jsxs("div",{className:"investor-stat",children:[a.jsx("span",{className:"investor-stat-value",children:y.companyCount}),a.jsx("span",{className:"investor-stat-label",children:"Companies"})]})]})]},m))})]}),a.jsxs("section",{className:"relationships-section",children:[a.jsx("h2",{className:"section-title",children:"Top Intro Sources"}),a.jsx("div",{className:"intro-sources-list",children:w.map((y,m)=>a.jsxs("div",{className:"intro-source-card",children:[a.jsxs("div",{className:"intro-source-header",children:[a.jsx("div",{className:"intro-source-rank",children:m+1}),a.jsxs("div",{className:"intro-source-info",children:[a.jsxs("div",{className:"intro-source-name",children:[y.person.firstName," ",y.person.lastName]}),a.jsxs("div",{className:"intro-source-meta",children:[y.person.title,"  ",y.person.role]})]})]}),a.jsxs("div",{className:"intro-source-stats",children:[a.jsxs("div",{className:"intro-stat",children:[a.jsx("span",{className:"intro-stat-value",children:y.introCount}),a.jsx("span",{className:"intro-stat-label",children:"Introductions"})]}),a.jsxs("div",{className:"intro-stat",children:[a.jsx("span",{className:"intro-stat-value",children:y.companies.size}),a.jsx("span",{className:"intro-stat-label",children:"Companies"})]}),a.jsxs("div",{className:"intro-stat",children:[a.jsx("span",{className:"intro-stat-value",children:y.firms.size}),a.jsx("span",{className:"intro-stat-label",children:"Firms"})]})]})]},m))})]})]})]})}function Gy({relationship:e,rawData:t,onBack:n}){const{company:r,person:s,firm:i,dealStage:o,introducedBy:l}=e,c=(t.deals||[]).filter(_=>_.personId===s.id&&(t.rounds||[]).find(x=>x.id===_.roundId&&x.companyId===r.id)),u=_=>({meeting_scheduled:"#3b82f6",meeting_held:"#3b82f6",diligence:"#8b5cf6",term_sheet:"#10b981",committed:"#059669",closed:"#047857",dropped:"#ef4444"})[_]||"#9ca3af",d=_=>_.split("_").map(x=>x.charAt(0).toUpperCase()+x.slice(1)).join(" "),g=c.length>0?Math.min(...c.map(_=>_.lastContactDate?new Date(_.lastContactDate).getTime():Date.now())):null,p=g?Math.floor((Date.now()-g)/864e5):null;return a.jsxs("div",{className:"relationship-detail",children:[a.jsx("button",{className:"back-btn",onClick:n,children:" Back to Network"}),a.jsx("div",{className:"detail-header",children:a.jsxs("div",{className:"detail-title-section",children:[a.jsxs("h1",{className:"detail-title",children:[r.name,"  ",i.name]}),a.jsxs("div",{className:"detail-subtitle",children:[a.jsxs("span",{className:"entity-id",style:{marginRight:"0.5rem"},children:["ID: ",e.id]}),a.jsxs("span",{className:"investor-name-text",children:[s.firstName," ",s.lastName]}),a.jsx("span",{className:"investor-title-text",children:s.title})]})]})}),a.jsxs("div",{className:"detail-grid",children:[a.jsxs("div",{className:"detail-section",children:[a.jsx("h2",{className:"section-title",children:"Company"}),a.jsxs("div",{className:"entity-info-box",children:[a.jsx("div",{className:"entity-name",children:r.name}),a.jsxs("div",{className:"entity-details",children:[a.jsxs("div",{className:"entity-detail-item",children:[a.jsx("span",{className:"entity-detail-label",children:"Sector:"}),a.jsx("span",{className:"entity-detail-value",children:r.sector})]}),a.jsxs("div",{className:"entity-detail-item",children:[a.jsx("span",{className:"entity-detail-label",children:"ARR:"}),a.jsxs("span",{className:"entity-detail-value",children:["$",(r.arr/1e6).toFixed(2),"M"]})]}),a.jsxs("div",{className:"entity-detail-item",children:[a.jsx("span",{className:"entity-detail-label",children:"Growth:"}),a.jsxs("span",{className:"entity-detail-value",children:[(r.revenueGrowthRate*100).toFixed(0),"%"]})]})]})]})]}),a.jsxs("div",{className:"detail-section",children:[a.jsx("h2",{className:"section-title",children:"Investor"}),a.jsxs("div",{className:"entity-info-box",children:[a.jsxs("div",{className:"entity-name",children:[s.firstName," ",s.lastName]}),a.jsxs("div",{className:"entity-details",children:[a.jsxs("div",{className:"entity-detail-item",children:[a.jsx("span",{className:"entity-detail-label",children:"Firm:"}),a.jsx("span",{className:"entity-detail-value",children:i.name})]}),a.jsxs("div",{className:"entity-detail-item",children:[a.jsx("span",{className:"entity-detail-label",children:"Title:"}),a.jsx("span",{className:"entity-detail-value",children:s.title})]}),a.jsxs("div",{className:"entity-detail-item",children:[a.jsx("span",{className:"entity-detail-label",children:"Email:"}),a.jsx("span",{className:"entity-detail-value",children:s.email})]})]})]})]}),a.jsxs("div",{className:"detail-section",children:[a.jsx("h2",{className:"section-title",children:"Relationship Status"}),a.jsxs("div",{className:"status-info-box",children:[a.jsxs("div",{className:"detail-row",children:[a.jsx("div",{className:"detail-row-label",children:"Current Stage"}),a.jsx("div",{className:"detail-row-value",children:a.jsx("span",{className:"stage-badge",style:{background:`${u(o)}15`,color:u(o)},children:d(o)})})]}),l&&a.jsxs("div",{className:"detail-row",children:[a.jsx("div",{className:"detail-row-label",children:"Introduced By"}),a.jsxs("div",{className:"detail-row-value",children:[l.firstName," ",l.lastName]})]}),p!==null&&a.jsxs("div",{className:"detail-row",children:[a.jsx("div",{className:"detail-row-label",children:"Relationship Age"}),a.jsxs("div",{className:"detail-row-value",children:[p," days"]})]}),a.jsxs("div",{className:"detail-row",children:[a.jsx("div",{className:"detail-row-label",children:"Active Interactions"}),a.jsx("div",{className:"detail-row-value",children:c.length})]})]})]}),l&&a.jsxs("div",{className:"detail-section",children:[a.jsx("h2",{className:"section-title",children:"Introduction Source"}),a.jsxs("div",{className:"intro-source-box",children:[a.jsxs("div",{className:"intro-source-name",children:[l.firstName," ",l.lastName]}),a.jsxs("div",{className:"intro-source-details",children:[a.jsxs("div",{className:"intro-source-item",children:[a.jsx("span",{className:"intro-source-label",children:"Role:"}),a.jsx("span",{className:"intro-source-value",children:l.role})]}),a.jsxs("div",{className:"intro-source-item",children:[a.jsx("span",{className:"intro-source-label",children:"Title:"}),a.jsx("span",{className:"intro-source-value",children:l.title})]})]})]})]}),c.length>0&&a.jsxs("div",{className:"detail-section full-width",children:[a.jsxs("h2",{className:"section-title",children:["Interaction History (",c.length,")"]}),a.jsx("div",{className:"interactions-timeline",children:c.map(_=>{var y;const x=(t.rounds||[]).find(m=>m.id===_.roundId),w=_.lastContactDate?Math.floor((Date.now()-new Date(_.lastContactDate))/864e5):null;return a.jsxs("div",{className:"interaction-item",children:[a.jsxs("div",{className:"interaction-header",children:[a.jsx("span",{className:"interaction-stage",style:{background:`${u(_.dealStage)}15`,color:u(_.dealStage)},children:d(_.dealStage)}),a.jsx("span",{className:"interaction-round",children:((y=x==null?void 0:x.roundType)==null?void 0:y.replace("_"," "))||"Unknown Round"})]}),a.jsxs("div",{className:"interaction-meta",children:[_.expectedAmount&&a.jsxs("span",{children:["Expected: $",(_.expectedAmount/1e6).toFixed(1),"M"]}),w!==null&&a.jsxs("span",{children:["Last contact: ",w,"d ago"]})]})]},_.id)})})]})]})]})}function pu(e){const t=e.trim().split(`
`);if(t.length<2)return[];const n=t[0].split(",").map(r=>r.trim());return t.slice(1).map(r=>{const s=[];let i="",o=!1;for(const c of r)c==='"'?o=!o:c===","&&!o?(s.push(i.trim()),i=""):i+=c;s.push(i.trim());const l={};return n.forEach((c,u)=>{let d=s[u]||"";d==="true"?d=!0:d==="false"?d=!1:!isNaN(d)&&d!==""&&(d=Number(d)),l[c]=d}),l})}function qy(e,t){if(!e||e.length===0)return"";const n=t||Object.keys(e[0]),r=n.join(","),s=e.map(i=>n.map(o=>{const l=i[o];return l==null?"":typeof l=="string"&&(l.includes(",")||l.includes('"'))?`"${l.replace(/"/g,'""')}"`:l}).join(","));return[r,...s].join(`
`)}async function Ky(e){let t=e;if(e.includes("/edit")){const s=e.match(/\/d\/([a-zA-Z0-9-_]+)/);if(s){const i=s[1];let o="0";const l=e.match(/gid=([0-9]+)/);l&&(o=l[1]),t=`https://docs.google.com/spreadsheets/d/${i}/export?format=csv&gid=${o}`}}const n=await fetch(t);if(!n.ok)throw new Error("Failed to fetch Google Sheet");return await n.text()}const Jy={companies:{headers:"name,is_portfolio,stage,sector,country,cash_on_hand,monthly_burn,mrr,employee_count,founded_at",example:"Acme Corp,true,seed,fintech,US,500000,50000,10000,12,2023-01-15"},firms:{headers:"name,firm_type,typical_check_min,typical_check_max",example:"Sequoia Capital,vc,1000000,10000000"},people:{headers:"first_name,last_name,email,role,title",example:"John,Doe,john@example.com,founder,CEO"},rounds:{headers:"round_type,target_amount,raised_amount,status,target_close_date",example:"seed,2000000,1500000,active,2024-06-30"},goals:{headers:"title,goal_type,target_value,current_value,target_date",example:"Hit $50k MRR,revenue,50000,35000,2024-12-31"},deals:{headers:"deal_stage,expected_amount,last_contact_date",example:"diligence,250000,2024-01-15"}};function Qy(){const[e,t]=L.useState({}),[n,r]=L.useState({}),[s,i]=L.useState({}),[o,l]=L.useState({}),[c,u]=L.useState({}),d=["companies","people","firms","rounds","goals","deals"];async function g(w){const y=n[w];if(!(y!=null&&y.trim())){l({...o,[w]:"Please paste CSV data"});return}u({...c,[w]:!0}),l({...o,[w]:""}),i({...s,[w]:""});try{const m=pu(y);if(m.length===0){l({...o,[w]:"No data found in CSV"});return}const{error:h}=await W.from(w).insert(m);if(h)throw h;i({...s,[w]:`Imported ${m.length} rows`}),r({...n,[w]:""})}catch(m){l({...o,[w]:"Import failed: "+m.message})}finally{u({...c,[w]:!1})}}async function p(w){const y=e[w];if(!(y!=null&&y.trim())){l({...o,[w]:"Please enter a Google Sheets URL"});return}u({...c,[w]:!0}),l({...o,[w]:""}),i({...s,[w]:""});try{const m=await Ky(y),h=pu(m);if(h.length===0){l({...o,[w]:"No data found in Google Sheet"});return}const{error:v}=await W.from(w).insert(h);if(v)throw v;i({...s,[w]:`Imported ${h.length} rows from Sheets`}),t({...e,[w]:""})}catch(m){l({...o,[w]:"Sheets import failed: "+m.message})}finally{u({...c,[w]:!1})}}async function _(w){u({...c,[w]:!0}),l({...o,[w]:""}),i({...s,[w]:""});try{const{data:y,error:m}=await W.from(w).select("*");if(m)throw m;if(!y||y.length===0){l({...o,[w]:"No data to export"});return}const h=qy(y),v=new Blob([h],{type:"text/csv"}),f=URL.createObjectURL(v),N=document.createElement("a");N.href=f,N.download=`${w}_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(N),N.click(),document.body.removeChild(N),URL.revokeObjectURL(f),i({...s,[w]:`Exported ${y.length} rows`})}catch(y){l({...o,[w]:"Export failed: "+y.message})}finally{u({...c,[w]:!1})}}function x(w,y){const m=y.target.files[0];if(!m)return;const h=new FileReader;h.onload=v=>{r({...n,[w]:v.target.result}),i({...s,[w]:"File loaded"})},h.readAsText(m)}return a.jsxs("div",{className:"admin-import-export",children:[a.jsxs("div",{className:"import-export-header",children:[a.jsx("h3",{children:"Import/Export Data"}),a.jsx("p",{children:"Manage data for all entity types"})]}),a.jsx("div",{className:"entities-table",children:d.map(w=>{var f;const y=Jy[w],m=c[w],h=s[w],v=o[w];return a.jsxs("div",{className:"entity-row",children:[a.jsxs("div",{className:"entity-name-col",children:[a.jsx("h4",{children:w}),a.jsxs("div",{className:"template-hint",children:[y.headers.split(",").slice(0,3).join(", "),"..."]})]}),a.jsxs("div",{className:"entity-actions-col",children:[a.jsxs("div",{className:"action-group",children:[a.jsx("input",{type:"text",placeholder:"",className:"sheets-url-compact",value:e[w]||"",onChange:N=>t({...e,[w]:N.target.value})}),a.jsx("button",{className:"action-btn sheets-btn",onClick:()=>p(w),disabled:m||!((f=e[w])!=null&&f.trim()),children:"Sheets"})]}),a.jsxs("div",{className:"action-group",children:[a.jsxs("label",{className:"file-upload-compact",children:["CSV",a.jsx("input",{type:"file",accept:".csv",onChange:N=>x(w,N)})]}),n[w]&&a.jsx("button",{className:"action-btn import-btn-compact",onClick:()=>g(w),disabled:m,children:"Import"})]}),a.jsx("div",{className:"action-group",children:a.jsx("button",{className:"action-btn export-btn-compact",onClick:()=>_(w),disabled:m,children:"Export"})})]}),(h||v)&&a.jsxs("div",{className:"entity-status",children:[h&&a.jsx("span",{className:"status-text success",children:h}),v&&a.jsx("span",{className:"status-text error",children:v})]})]},w)})})]})}function Yy(){const[e,t]=L.useState(12),[n,r]=L.useState("default"),[s,i]=L.useState(!1),[o,l]=L.useState(""),[c,u]=L.useState("");async function d(){i(!0),l(""),u("");try{u("Clearing existing data..."),await qh(),u("Generating portfolio data...");const g=await Kh(e,n);u(`Generated ${g.companies} companies, ${g.rounds} rounds, ${g.deals} deals`),i(!1)}catch(g){l("Data generation failed: "+g.message),i(!1)}}return a.jsxs("div",{className:"admin-generate",children:[a.jsxs("div",{className:"generate-header",children:[a.jsx("h3",{children:"Generate Sample Data"}),a.jsx("p",{children:"Create realistic portfolio data with configurable parameters"})]}),a.jsxs("div",{className:"generate-content",children:[a.jsxs("div",{className:"generate-controls",children:[a.jsxs("div",{className:"control-group",children:[a.jsx("label",{children:"Portfolio Companies"}),a.jsx("input",{type:"number",className:"number-input",min:"1",max:"50",value:e,onChange:g=>t(parseInt(g.target.value)||12),disabled:s})]}),a.jsxs("div",{className:"control-group",children:[a.jsx("label",{children:"Stress Level"}),a.jsxs("select",{className:"select-input",value:n,onChange:g=>r(g.target.value),disabled:s,children:[a.jsx("option",{value:"default",children:"Default (Balanced)"}),a.jsx("option",{value:"moderate",children:"Moderate (Some Issues)"}),a.jsx("option",{value:"high",children:"High (Critical Portfolio)"})]})]}),a.jsx("button",{className:"generate-btn",onClick:d,disabled:s,children:s?"Generating...":"Generate Data"})]}),c&&!o&&a.jsx("div",{className:"status-msg success",children:c}),o&&a.jsx("div",{className:"status-msg error",children:o}),a.jsx("div",{className:"generate-info",children:a.jsx("p",{children:"This will clear all existing data and generate sample companies, investors, deals, and goals."})})]})]})}function Xy(){const[e,t]=L.useState("enrich");return a.jsxs("div",{className:"admin-analyze",children:[a.jsx("div",{className:"analyze-header",children:a.jsx("h3",{children:"Data Analysis"})}),a.jsxs("div",{className:"analyze-tabs",children:[a.jsx("button",{className:`analyze-tab ${e==="enrich"?"active":""}`,onClick:()=>t("enrich"),children:"Enrich"}),a.jsx("button",{className:`analyze-tab ${e==="calculate"?"active":""}`,onClick:()=>t("calculate"),children:"Calculate"})]}),a.jsxs("div",{className:"analyze-content",children:[e==="enrich"&&a.jsx(Zy,{}),e==="calculate"&&a.jsx(e0,{})]})]})}function Zy(){return a.jsx("div",{className:"analyze-subview",children:a.jsxs("div",{className:"placeholder-content",children:[a.jsx("h4",{children:"Data Enrichment"}),a.jsx("p",{children:"Enhance your data with external sources and intelligence"}),a.jsxs("ul",{className:"feature-list",children:[a.jsx("li",{children:"Company information lookup"}),a.jsx("li",{children:"LinkedIn profile enrichment"}),a.jsx("li",{children:"Funding data integration"}),a.jsx("li",{children:"Market intelligence"}),a.jsx("li",{children:"Contact verification"})]}),a.jsx("div",{className:"coming-soon-badge",children:"Coming Soon"})]})})}function e0(){return a.jsx("div",{className:"analyze-subview",children:a.jsxs("div",{className:"placeholder-content",children:[a.jsx("h4",{children:"Advanced Calculations"}),a.jsx("p",{children:"Run sophisticated analytics and derivations on your portfolio data"}),a.jsxs("ul",{className:"feature-list",children:[a.jsx("li",{children:"Health score computation"}),a.jsx("li",{children:"Risk assessment models"}),a.jsx("li",{children:"Trajectory predictions"}),a.jsx("li",{children:"Priority calculations"}),a.jsx("li",{children:"Portfolio-level aggregations"})]}),a.jsx("div",{className:"coming-soon-badge",children:"Coming Soon"})]})})}function wa({onClose:e,initialTab:t="import-export"}){const[n,r]=L.useState(t);return a.jsxs("div",{className:"admin-container",children:[a.jsxs("div",{className:"admin-header",children:[a.jsx("h2",{children:"Admin Panel"}),a.jsx("button",{className:"close-btn",onClick:e,children:""})]}),a.jsxs("div",{className:"admin-nav",children:[a.jsx("button",{className:`admin-nav-btn ${n==="import-export"?"active":""}`,onClick:()=>r("import-export"),children:"Import/Export"}),a.jsx("button",{className:`admin-nav-btn ${n==="generate"?"active":""}`,onClick:()=>r("generate"),children:"Generate"}),a.jsx("button",{className:`admin-nav-btn ${n==="qa"?"active":""}`,onClick:()=>r("qa"),children:"QA"}),a.jsx("button",{className:`admin-nav-btn ${n==="analyze"?"active":""}`,onClick:()=>r("analyze"),children:"Analyze"})]}),a.jsxs("div",{className:"admin-main",children:[n==="import-export"&&a.jsx(Qy,{}),n==="generate"&&a.jsx(Yy,{}),n==="qa"&&a.jsx(Jh,{}),n==="analyze"&&a.jsx(Xy,{})]})]})}function t0(){var j,S,b;const[e,t]=L.useState("priorities"),[n,r]=L.useState(null),[s,i]=L.useState(null),[o,l]=L.useState([]),[c,u]=L.useState([]),[d,g]=L.useState(null),[p,_]=L.useState(!0);L.useEffect(()=>{x()},[]);const x=async()=>{_(!0);try{const[k,E]=await Promise.all([oy(),ru()]);g(k),u(E)}catch(k){console.error("Failed to load data:",k)}finally{_(!1)}},w=async()=>{try{const k=await ru();u(k)}catch(k){console.error("Failed to load resolved priorities:",k)}},y=()=>{w()},m=async()=>{await x()},h=(k,E=null)=>{t(k),i(null),l([]),E!==null&&r(E)},v=(k,E)=>{l($=>[...$,{view:e,entity:s}]),i({type:k,entity:E}),t(`${k}-detail`)},f=()=>{if(o.length>0){const k=o[o.length-1];l(E=>E.slice(0,-1)),t(k.view),i(k.entity)}else t({"priority-detail":"priorities","company-detail":n==="pipeline"?"pipeline-companies":"companies","round-detail":n==="pipeline"?"pipeline-rounds":n==="firms"?"all-firms-rounds":"portfolio-firm-rounds","goal-detail":"goals","deal-detail":n==="pipeline"?"pipeline-deals":n==="firms"?"all-firms-deals":"portfolio-firm-deals","firm-detail":n==="firms"?"all-firms":"portfolio-firms","person-detail":n==="firms"?"all-firms-partners":"portfolio-partners","relationship-detail":"relationships"}[e]||"priorities"),i(null)},N=()=>{switch(e){case"priorities":return a.jsx(au,{rawData:d,resolvedPriorities:c,onSelectIssue:k=>v("priority",k),onSelectCompany:k=>v("company",k)});case"priority-detail":return a.jsx(Py,{issue:s==null?void 0:s.entity,rawData:d,onBack:f,onSelectCompany:k=>v("company",k),onSelectIssue:k=>v("priority",k),onSelectGoal:k=>v("goal",k),onResolved:y,onDataUpdate:m});case"companies":return a.jsx($y,{rawData:d,resolvedPriorities:c,onSelectCompany:k=>v("company",k)});case"pipeline-companies":return a.jsx(Dy,{rawData:d,onSelectCompany:k=>v("company",k)});case"company-detail":return a.jsx(Ly,{company:s==null?void 0:s.entity,rawData:d,onBack:f,onSelectRound:k=>v("round",k),onSelectGoal:k=>v("goal",k)});case"goals":return a.jsx(Uy,{rawData:d,onSelectGoal:k=>v("goal",k)});case"goal-detail":return a.jsx(My,{goal:s==null?void 0:s.entity,rawData:d,onBack:f});case"portfolio-rounds":case"pipeline-rounds":return a.jsx(ga,{rawData:d,onSelectRound:k=>v("round",k),pipelineOnly:e==="pipeline-rounds"});case"round-detail":return a.jsx(Fy,{round:s==null?void 0:s.entity,rawData:d,onBack:f,onSelectCompany:k=>v("company",k),onSelectDeal:k=>v("deal",k),onSelectFirm:k=>v("firm",k),onSelectPerson:k=>v("person",k)});case"portfolio-deals":case"pipeline-deals":case"all-firms-deals":return a.jsx(lu,{rawData:d,onSelectDeal:k=>v("deal",k),pipelineOnly:e==="pipeline-deals",showAllFirms:e==="all-firms-deals"});case"deal-detail":return a.jsx(zy,{deal:s==null?void 0:s.entity,rawData:d,onBack:f,onSelectCompany:k=>v("company",k),onSelectPerson:k=>v("person",k),onSelectFirm:k=>v("firm",k),onSelectRound:k=>v("round",k)});case"portfolio-firms":return a.jsx(du,{rawData:d,onSelectFirm:k=>v("firm",k),portfolioInvestorsOnly:!0});case"all-firms":return a.jsx(du,{rawData:d,onSelectFirm:k=>v("firm",k),portfolioInvestorsOnly:!1});case"firm-detail":return a.jsx(By,{firm:s==null?void 0:s.entity,rawData:d,onBack:f,onSelectPerson:k=>v("person",k),onSelectDeal:k=>v("deal",k),onSelectCompany:k=>v("company",k)});case"portfolio-partners":return a.jsx(ya,{rawData:d,onSelectPerson:k=>v("person",k),filterToInvestors:!0,showAllFirms:!1});case"all-firms-partners":return a.jsx(ya,{rawData:d,onSelectPerson:k=>v("person",k),filterToInvestors:!0,showAllFirms:!0});case"portfolio-firm-deals":return a.jsx(lu,{rawData:d,onSelectDeal:k=>v("deal",k),pipelineOnly:!1,showAllFirms:!1});case"portfolio-firm-rounds":return a.jsx(ga,{rawData:d,onSelectRound:k=>v("round",k),showAllFirms:!1});case"all-firms-rounds":return a.jsx(ga,{rawData:d,onSelectRound:k=>v("round",k),showAllFirms:!0});case"person-detail":return a.jsx(Wy,{person:s==null?void 0:s.entity,rawData:d,onBack:f,onSelectFirm:k=>v("firm",k),onSelectDeal:k=>v("deal",k),onSelectCompany:k=>v("company",k),onSelectRound:k=>v("round",k)});case"relationships":return a.jsx(Hy,{rawData:d,onSelectRelationship:k=>v("relationship",k)});case"directory":return a.jsx(ya,{rawData:d,onSelectPerson:k=>v("person",k),simpleSearch:!0});case"relationship-detail":return a.jsx(Gy,{relationship:s==null?void 0:s.entity,rawData:d,onBack:f});case"admin-data":return a.jsx(wa,{onClose:()=>h("priorities",null),initialTab:"import-export"});case"admin-qa":return a.jsx(wa,{onClose:()=>h("priorities",null),initialTab:"qa"});case"admin-analyze":return a.jsx(wa,{onClose:()=>h("priorities",null),initialTab:"analyze"});default:return a.jsx(au,{rawData:d,onSelectIssue:k=>v("priority",k),onSelectCompany:k=>v("company",k)})}};return p?a.jsx("div",{className:"dashboard",children:a.jsxs("div",{className:"loading-state",children:[a.jsx("div",{className:"loading-spinner"}),a.jsx("p",{children:"Loading dashboard..."})]})}):d?a.jsxs("div",{className:"dashboard",children:[a.jsxs("nav",{className:"sidebar",children:[a.jsx("div",{className:"sidebar-header",children:a.jsx("img",{src:"/src/assets/backbone_white.svg",alt:"Backbone",className:"sidebar-logo"})}),a.jsxs("div",{className:"sidebar-nav",children:[a.jsx("button",{className:`nav-item ${e==="priorities"||e==="priority-detail"?"active":""}`,onClick:()=>h("priorities",null),children:a.jsx("span",{className:"nav-label",children:"Priorities"})}),a.jsxs("div",{className:"nav-section",children:[a.jsx("button",{className:`nav-section-label clickable ${e==="companies"||e==="company-detail"||e==="goals"||e==="goal-detail"||e==="portfolio-rounds"||e==="round-detail"||e==="portfolio-deals"||e==="deal-detail"?"active":""}`,onClick:()=>h("companies",null),children:"Portfolio"}),a.jsx("button",{className:`nav-item sub ${e==="companies"||e==="company-detail"?"active":""}`,onClick:()=>h("companies",null),children:a.jsx("span",{className:"nav-label",children:"Companies"})}),a.jsx("button",{className:`nav-item sub-sub ${e==="goals"||e==="goal-detail"?"active":""}`,onClick:()=>h("goals",null),children:a.jsx("span",{className:"nav-label",children:"Goals"})}),a.jsx("button",{className:`nav-item sub-sub ${e==="portfolio-rounds"||e==="round-detail"?"active":""}`,onClick:()=>h("portfolio-rounds",null),children:a.jsx("span",{className:"nav-label",children:"Rounds"})}),a.jsx("button",{className:`nav-item sub-sub-sub ${e==="portfolio-deals"||e==="deal-detail"?"active":""}`,onClick:()=>h("portfolio-deals",null),children:a.jsx("span",{className:"nav-label",children:"Deals"})})]}),a.jsxs("div",{className:"nav-section",children:[a.jsx("button",{className:`nav-section-label clickable ${e==="portfolio-firms"||e==="firm-detail"||e==="portfolio-partners"||e==="portfolio-firm-deals"||e==="portfolio-firm-rounds"?"active":""}`,onClick:()=>h("portfolio-firms",null),children:"Firms"}),a.jsx("button",{className:`nav-item sub ${e==="portfolio-partners"||e==="person-detail"?"active":""}`,onClick:()=>h("portfolio-partners",null),children:a.jsx("span",{className:"nav-label",children:"Partners"})}),a.jsx("button",{className:`nav-item sub ${e==="portfolio-firm-deals"?"active":""}`,onClick:()=>h("portfolio-firm-deals",null),children:a.jsx("span",{className:"nav-label",children:"Deals"})}),a.jsx("button",{className:`nav-item sub-sub ${e==="portfolio-firm-rounds"?"active":""}`,onClick:()=>h("portfolio-firm-rounds",null),children:a.jsx("span",{className:"nav-label",children:"Rounds"})})]}),a.jsxs("div",{className:"nav-section",children:[a.jsx("button",{className:`nav-section-label clickable ${e==="relationships"||e==="relationship-detail"||e==="directory"?"active":""}`,onClick:()=>h("relationships",null),children:"Network"}),a.jsx("button",{className:`nav-item sub ${e==="directory"?"active":""}`,onClick:()=>h("directory",null),children:a.jsx("span",{className:"nav-label",children:"Directory"})})]}),a.jsxs("div",{className:"nav-section admin-section",children:[a.jsx("div",{className:"nav-section-label",children:"Admin"}),a.jsx("button",{className:`nav-item sub ${e==="admin-data"?"active":""}`,onClick:()=>h("admin-data",null),children:a.jsx("span",{className:"nav-label",children:"Data"})}),a.jsx("button",{className:`nav-item sub ${e==="admin-qa"?"active":""}`,onClick:()=>h("admin-qa",null),children:a.jsx("span",{className:"nav-label",children:"QA"})}),a.jsx("button",{className:`nav-item sub ${e==="admin-analyze"?"active":""}`,onClick:()=>h("admin-analyze",null),children:a.jsx("span",{className:"nav-label",children:"Analyze"})})]})]})]}),a.jsxs("div",{className:"dashboard-main",children:[a.jsxs("div",{className:"horizontal-nav",children:[a.jsxs("div",{className:"horizontal-nav-section",children:[a.jsx("button",{className:`horizontal-nav-section-label clickable ${n==="pipeline"?"active":""}`,onClick:()=>{r("pipeline"),h("pipeline-companies","pipeline")},children:"PIPELINE"}),n==="pipeline"&&a.jsxs("div",{className:"horizontal-nav-submenu",children:[a.jsx("button",{className:`horizontal-nav-subitem ${e==="pipeline-companies"||e==="company-detail"?"active":""}`,onClick:()=>h("pipeline-companies","pipeline"),children:"Companies"}),a.jsx("button",{className:`horizontal-nav-subitem ${e==="pipeline-deals"||e==="deal-detail"?"active":""}`,onClick:()=>h("pipeline-deals","pipeline"),children:"Deals"}),a.jsx("button",{className:`horizontal-nav-subitem ${e==="pipeline-rounds"||e==="round-detail"?"active":""}`,onClick:()=>h("pipeline-rounds","pipeline"),children:"Rounds"})]})]}),a.jsxs("div",{className:"horizontal-nav-section",children:[a.jsx("button",{className:`horizontal-nav-section-label clickable ${n==="firms"?"active":""}`,onClick:()=>{r("firms"),h("all-firms","firms")},children:"FIRMS"}),n==="firms"&&a.jsxs("div",{className:"horizontal-nav-submenu",children:[a.jsx("button",{className:`horizontal-nav-subitem ${e==="all-firms"||e==="firm-detail"?"active":""}`,onClick:()=>h("all-firms","firms"),children:"Firms"}),a.jsx("button",{className:`horizontal-nav-subitem ${e==="all-firms-partners"||e==="person-detail"?"active":""}`,onClick:()=>h("all-firms-partners","firms"),children:"Partners"}),a.jsx("button",{className:`horizontal-nav-subitem ${e==="all-firms-deals"?"active":""}`,onClick:()=>h("all-firms-deals","firms"),children:"Deals"}),a.jsx("button",{className:`horizontal-nav-subitem ${e==="all-firms-rounds"?"active":""}`,onClick:()=>h("all-firms-rounds","firms"),children:"Rounds"})]})]}),a.jsxs("div",{className:"horizontal-nav-section",children:[a.jsx("button",{className:`horizontal-nav-section-label clickable ${n==="people"?"active":""}`,onClick:()=>{r("people"),h("directory","people")},children:"PEOPLE"}),n==="people"&&a.jsx("div",{className:"horizontal-nav-submenu",children:a.jsx("button",{className:`horizontal-nav-subitem ${e==="directory"?"active":""}`,onClick:()=>h("directory","people"),children:"Directory"})})]})]}),a.jsx("header",{className:"top-bar",children:a.jsxs("div",{className:"top-bar-content",children:[a.jsxs("h1",{className:"page-title",children:[e==="priorities"&&"Priority Queue",e==="priority-detail"&&"Priority Detail",e==="companies"&&"Portfolio Overview",e==="pipeline-companies"&&"Pipeline Companies",e==="company-detail"&&((j=s==null?void 0:s.entity)==null?void 0:j.name),e==="goals"&&"Goals",e==="goal-detail"&&"Goal Details",e==="portfolio-rounds"&&"Portfolio Rounds",e==="pipeline-rounds"&&"Pipeline Rounds",e==="round-detail"&&"Round Details",e==="portfolio-deals"&&"Portfolio Deals",e==="pipeline-deals"&&"Pipeline Deals",e==="deal-detail"&&"Deal Details",e==="portfolio-firms"&&"Portfolio Firms",e==="all-firms"&&"All Firms",e==="firm-detail"&&((S=s==null?void 0:s.entity)==null?void 0:S.name),e==="portfolio-partners"&&"Portfolio Partners",e==="all-firms-partners"&&"All Partners",e==="person-detail"&&((b=s==null?void 0:s.entity)==null?void 0:b.name),e==="portfolio-firm-deals"&&"Portfolio Firm Deals",e==="all-firms-deals"&&"All Firm Deals",e==="portfolio-firm-rounds"&&"Portfolio Firm Rounds",e==="all-firms-rounds"&&"All Firm Rounds",e==="relationships"&&"Network Overview",e==="directory"&&"Directory",e==="relationship-detail"&&"Relationship Details",e==="admin-data"&&"Data Management",e==="admin-qa"&&"Quality Assurance",e==="admin-analyze"&&"System Analysis"]}),n&&a.jsxs("div",{className:"breadcrumb-nav",children:[n==="pipeline"&&a.jsxs(a.Fragment,{children:[a.jsx("button",{className:`breadcrumb-item ${e==="pipeline-companies"||e==="company-detail"?"active":""}`,onClick:()=>h("pipeline-companies","pipeline"),children:"Companies"}),a.jsx("button",{className:`breadcrumb-item ${e==="pipeline-rounds"||e==="round-detail"?"active":""}`,onClick:()=>h("pipeline-rounds","pipeline"),children:"Rounds"}),a.jsx("button",{className:`breadcrumb-item ${e==="pipeline-deals"||e==="deal-detail"?"active":""}`,onClick:()=>h("pipeline-deals","pipeline"),children:"Deals"})]}),n==="firms"&&a.jsxs(a.Fragment,{children:[a.jsx("button",{className:`breadcrumb-item ${e==="all-firms"||e==="firm-detail"?"active":""}`,onClick:()=>h("all-firms","firms"),children:"Firms"}),a.jsx("button",{className:`breadcrumb-item ${e==="all-firms-partners"||e==="person-detail"?"active":""}`,onClick:()=>h("all-firms-partners","firms"),children:"Partners"}),a.jsx("button",{className:`breadcrumb-item ${e==="all-firms-deals"||e==="deal-detail"?"active":""}`,onClick:()=>h("all-firms-deals","firms"),children:"Deals"}),a.jsx("button",{className:`breadcrumb-item ${e==="all-firms-rounds"||e==="round-detail"?"active":""}`,onClick:()=>h("all-firms-rounds","firms"),children:"Rounds"})]})]})]})}),a.jsx("main",{className:"content-area",children:N()})]})]}):a.jsx("div",{className:"dashboard",children:a.jsxs("div",{className:"empty-state",children:[a.jsx("h2",{children:"No Data Available"}),a.jsx("p",{children:"Use Admin  Import/Export to load your data"}),a.jsx("button",{onClick:()=>h("admin-data",null),className:"primary-btn",children:"Open Import/Export"})]})})}function n0(){const[e,t]=L.useState("load-data");return e==="load-data"?a.jsx(Cy,{onComplete:()=>t("qa")}):e==="qa"?a.jsx("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #0f172a 0%, #1e293b 100%)",padding:"40px 20px"},children:a.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto",background:"#1e293b",border:"1px solid #334155",borderRadius:"16px",padding:"32px"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"32px"},children:[a.jsx("h2",{style:{margin:0,fontSize:"24px",fontWeight:"600",color:"#f8fafc"},children:"Quality Assurance"}),a.jsx("button",{onClick:()=>t("dashboard"),style:{padding:"12px 24px",background:"linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)",color:"#f8fafc",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s"},children:"Continue to Dashboard"})]}),a.jsx(Jh,{})]})}):a.jsx(t0,{})}_a.createRoot(document.getElementById("root")).render(a.jsx(ff.StrictMode,{children:a.jsx(n0,{})}));
